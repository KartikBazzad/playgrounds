function GD(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var uf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function P0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var sC={exports:{}},qd={},oC={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xu=Symbol.for("react.element"),XD=Symbol.for("react.portal"),JD=Symbol.for("react.fragment"),ZD=Symbol.for("react.strict_mode"),eM=Symbol.for("react.profiler"),tM=Symbol.for("react.provider"),nM=Symbol.for("react.context"),iM=Symbol.for("react.forward_ref"),rM=Symbol.for("react.suspense"),sM=Symbol.for("react.memo"),oM=Symbol.for("react.lazy"),aw=Symbol.iterator;function lM(t){return t===null||typeof t!="object"?null:(t=aw&&t[aw]||t["@@iterator"],typeof t=="function"?t:null)}var lC={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},aC=Object.assign,uC={};function Ql(t,e,n){this.props=t,this.context=e,this.refs=uC,this.updater=n||lC}Ql.prototype.isReactComponent={};Ql.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ql.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cC(){}cC.prototype=Ql.prototype;function F0(t,e,n){this.props=t,this.context=e,this.refs=uC,this.updater=n||lC}var z0=F0.prototype=new cC;z0.constructor=F0;aC(z0,Ql.prototype);z0.isPureReactComponent=!0;var uw=Array.isArray,hC=Object.prototype.hasOwnProperty,U0={current:null},fC={key:!0,ref:!0,__self:!0,__source:!0};function dC(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)hC.call(e,i)&&!fC.hasOwnProperty(i)&&(r[i]=e[i]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];r.children=a}if(t&&t.defaultProps)for(i in l=t.defaultProps,l)r[i]===void 0&&(r[i]=l[i]);return{$$typeof:Xu,type:t,key:s,ref:o,props:r,_owner:U0.current}}function aM(t,e){return{$$typeof:Xu,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function j0(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xu}function uM(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var cw=/\/+/g;function Fp(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uM(""+t.key):e.toString(36)}function Ch(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xu:case XD:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Fp(o,0):i,uw(r)?(n="",t!=null&&(n=t.replace(cw,"$&/")+"/"),Ch(r,e,n,"",function(u){return u})):r!=null&&(j0(r)&&(r=aM(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(cw,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",uw(t))for(var l=0;l<t.length;l++){s=t[l];var a=i+Fp(s,l);o+=Ch(s,e,n,a,r)}else if(a=lM(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=i+Fp(s,l++),o+=Ch(s,e,n,a,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ic(t,e,n){if(t==null)return t;var i=[],r=0;return Ch(t,i,"","",function(s){return e.call(n,s,r++)}),i}function cM(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cn={current:null},_h={transition:null},hM={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:_h,ReactCurrentOwner:U0};function pC(){throw Error("act(...) is not supported in production builds of React.")}Ee.Children={map:Ic,forEach:function(t,e,n){Ic(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ic(t,function(){e++}),e},toArray:function(t){return Ic(t,function(e){return e})||[]},only:function(t){if(!j0(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ee.Component=Ql;Ee.Fragment=JD;Ee.Profiler=eM;Ee.PureComponent=F0;Ee.StrictMode=ZD;Ee.Suspense=rM;Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hM;Ee.act=pC;Ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=aC({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=U0.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)hC.call(e,a)&&!fC.hasOwnProperty(a)&&(i[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:Xu,type:t.type,key:r,ref:s,props:i,_owner:o}};Ee.createContext=function(t){return t={$$typeof:nM,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tM,_context:t},t.Consumer=t};Ee.createElement=dC;Ee.createFactory=function(t){var e=dC.bind(null,t);return e.type=t,e};Ee.createRef=function(){return{current:null}};Ee.forwardRef=function(t){return{$$typeof:iM,render:t}};Ee.isValidElement=j0;Ee.lazy=function(t){return{$$typeof:oM,_payload:{_status:-1,_result:t},_init:cM}};Ee.memo=function(t,e){return{$$typeof:sM,type:t,compare:e===void 0?null:e}};Ee.startTransition=function(t){var e=_h.transition;_h.transition={};try{t()}finally{_h.transition=e}};Ee.unstable_act=pC;Ee.useCallback=function(t,e){return cn.current.useCallback(t,e)};Ee.useContext=function(t){return cn.current.useContext(t)};Ee.useDebugValue=function(){};Ee.useDeferredValue=function(t){return cn.current.useDeferredValue(t)};Ee.useEffect=function(t,e){return cn.current.useEffect(t,e)};Ee.useId=function(){return cn.current.useId()};Ee.useImperativeHandle=function(t,e,n){return cn.current.useImperativeHandle(t,e,n)};Ee.useInsertionEffect=function(t,e){return cn.current.useInsertionEffect(t,e)};Ee.useLayoutEffect=function(t,e){return cn.current.useLayoutEffect(t,e)};Ee.useMemo=function(t,e){return cn.current.useMemo(t,e)};Ee.useReducer=function(t,e,n){return cn.current.useReducer(t,e,n)};Ee.useRef=function(t){return cn.current.useRef(t)};Ee.useState=function(t){return cn.current.useState(t)};Ee.useSyncExternalStore=function(t,e,n){return cn.current.useSyncExternalStore(t,e,n)};Ee.useTransition=function(){return cn.current.useTransition()};Ee.version="18.3.1";oC.exports=Ee;var R=oC.exports;const mC=P0(R),fM=GD({__proto__:null,default:mC},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dM=R,pM=Symbol.for("react.element"),mM=Symbol.for("react.fragment"),gM=Object.prototype.hasOwnProperty,yM=dM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vM={key:!0,ref:!0,__self:!0,__source:!0};function gC(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)gM.call(e,i)&&!vM.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:pM,type:t,key:s,ref:o,props:r,_owner:yM.current}}qd.Fragment=mM;qd.jsx=gC;qd.jsxs=gC;sC.exports=qd;var T=sC.exports,pg={},yC={exports:{}},Kn={},vC={exports:{}},wC={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(j,q){var S=j.length;j.push(q);e:for(;0<S;){var te=S-1>>>1,se=j[te];if(0<r(se,q))j[te]=q,j[S]=se,S=te;else break e}}function n(j){return j.length===0?null:j[0]}function i(j){if(j.length===0)return null;var q=j[0],S=j.pop();if(S!==q){j[0]=S;e:for(var te=0,se=j.length,C=se>>>1;te<C;){var Ne=2*(te+1)-1,Pe=j[Ne],ve=Ne+1,Xe=j[ve];if(0>r(Pe,S))ve<se&&0>r(Xe,Pe)?(j[te]=Xe,j[ve]=S,te=ve):(j[te]=Pe,j[Ne]=S,te=Ne);else if(ve<se&&0>r(Xe,S))j[te]=Xe,j[ve]=S,te=ve;else break e}}return q}function r(j,q){var S=j.sortIndex-q.sortIndex;return S!==0?S:j.id-q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],c=1,h=null,f=3,d=!1,p=!1,g=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(j){for(var q=n(u);q!==null;){if(q.callback===null)i(u);else if(q.startTime<=j)i(u),q.sortIndex=q.expirationTime,e(a,q);else break;q=n(u)}}function x(j){if(g=!1,v(j),!p)if(n(a)!==null)p=!0,Z(_);else{var q=n(u);q!==null&&re(x,q.startTime-j)}}function _(j,q){p=!1,g&&(g=!1,m(D),D=-1),d=!0;var S=f;try{for(v(q),h=n(a);h!==null&&(!(h.expirationTime>q)||j&&!B());){var te=h.callback;if(typeof te=="function"){h.callback=null,f=h.priorityLevel;var se=te(h.expirationTime<=q);q=t.unstable_now(),typeof se=="function"?h.callback=se:h===n(a)&&i(a),v(q)}else i(a);h=n(a)}if(h!==null)var C=!0;else{var Ne=n(u);Ne!==null&&re(x,Ne.startTime-q),C=!1}return C}finally{h=null,f=S,d=!1}}var b=!1,I=null,D=-1,F=5,A=-1;function B(){return!(t.unstable_now()-A<F)}function N(){if(I!==null){var j=t.unstable_now();A=j;var q=!0;try{q=I(!0,j)}finally{q?W():(b=!1,I=null)}}else b=!1}var W;if(typeof y=="function")W=function(){y(N)};else if(typeof MessageChannel<"u"){var K=new MessageChannel,U=K.port2;K.port1.onmessage=N,W=function(){U.postMessage(null)}}else W=function(){w(N,0)};function Z(j){I=j,b||(b=!0,W())}function re(j,q){D=w(function(){j(t.unstable_now())},q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(j){j.callback=null},t.unstable_continueExecution=function(){p||d||(p=!0,Z(_))},t.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):F=0<j?Math.floor(1e3/j):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(j){switch(f){case 1:case 2:case 3:var q=3;break;default:q=f}var S=f;f=q;try{return j()}finally{f=S}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(j,q){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var S=f;f=j;try{return q()}finally{f=S}},t.unstable_scheduleCallback=function(j,q,S){var te=t.unstable_now();switch(typeof S=="object"&&S!==null?(S=S.delay,S=typeof S=="number"&&0<S?te+S:te):S=te,j){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=S+se,j={id:c++,callback:q,priorityLevel:j,startTime:S,expirationTime:se,sortIndex:-1},S>te?(j.sortIndex=S,e(u,j),n(a)===null&&j===n(u)&&(g?(m(D),D=-1):g=!0,re(x,S-te))):(j.sortIndex=se,e(a,j),p||d||(p=!0,Z(_))),j},t.unstable_shouldYield=B,t.unstable_wrapCallback=function(j){var q=f;return function(){var S=f;f=q;try{return j.apply(this,arguments)}finally{f=S}}}})(wC);vC.exports=wC;var wM=vC.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bM=R,qn=wM;function $(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var bC=new Set,au={};function wo(t,e){_l(t,e),_l(t+"Capture",e)}function _l(t,e){for(au[t]=e,t=0;t<e.length;t++)bC.add(e[t])}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),mg=Object.prototype.hasOwnProperty,SM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hw={},fw={};function xM(t){return mg.call(fw,t)?!0:mg.call(hw,t)?!1:SM.test(t)?fw[t]=!0:(hw[t]=!0,!1)}function kM(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function CM(t,e,n,i){if(e===null||typeof e>"u"||kM(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function hn(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var jt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){jt[t]=new hn(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];jt[e]=new hn(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){jt[t]=new hn(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){jt[t]=new hn(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){jt[t]=new hn(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){jt[t]=new hn(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){jt[t]=new hn(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){jt[t]=new hn(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){jt[t]=new hn(t,5,!1,t.toLowerCase(),null,!1,!1)});var V0=/[\-:]([a-z])/g;function $0(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(V0,$0);jt[e]=new hn(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(V0,$0);jt[e]=new hn(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(V0,$0);jt[e]=new hn(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){jt[t]=new hn(t,1,!1,t.toLowerCase(),null,!1,!1)});jt.xlinkHref=new hn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){jt[t]=new hn(t,1,!1,t.toLowerCase(),null,!0,!0)});function H0(t,e,n,i){var r=jt.hasOwnProperty(e)?jt[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(CM(e,n,r,i)&&(n=null),i||r===null?xM(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Lr=bM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Tc=Symbol.for("react.element"),Wo=Symbol.for("react.portal"),qo=Symbol.for("react.fragment"),W0=Symbol.for("react.strict_mode"),gg=Symbol.for("react.profiler"),SC=Symbol.for("react.provider"),xC=Symbol.for("react.context"),q0=Symbol.for("react.forward_ref"),yg=Symbol.for("react.suspense"),vg=Symbol.for("react.suspense_list"),Q0=Symbol.for("react.memo"),Qr=Symbol.for("react.lazy"),kC=Symbol.for("react.offscreen"),dw=Symbol.iterator;function ua(t){return t===null||typeof t!="object"?null:(t=dw&&t[dw]||t["@@iterator"],typeof t=="function"?t:null)}var ht=Object.assign,zp;function Aa(t){if(zp===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);zp=e&&e[1]||""}return`
`+zp+t}var Up=!1;function jp(t,e){if(!t||Up)return"";Up=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,l=s.length-1;1<=o&&0<=l&&r[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==s[l]){var a=`
`+r[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{Up=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Aa(t):""}function _M(t){switch(t.tag){case 5:return Aa(t.type);case 16:return Aa("Lazy");case 13:return Aa("Suspense");case 19:return Aa("SuspenseList");case 0:case 2:case 15:return t=jp(t.type,!1),t;case 11:return t=jp(t.type.render,!1),t;case 1:return t=jp(t.type,!0),t;default:return""}}function wg(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qo:return"Fragment";case Wo:return"Portal";case gg:return"Profiler";case W0:return"StrictMode";case yg:return"Suspense";case vg:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case xC:return(t.displayName||"Context")+".Consumer";case SC:return(t._context.displayName||"Context")+".Provider";case q0:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Q0:return e=t.displayName||null,e!==null?e:wg(t.type)||"Memo";case Qr:e=t._payload,t=t._init;try{return wg(t(e))}catch{}}return null}function EM(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return wg(e);case 8:return e===W0?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function CC(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function AM(t){var e=CC(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Oc(t){t._valueTracker||(t._valueTracker=AM(t))}function _C(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=CC(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function cf(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function bg(t,e){var n=e.checked;return ht({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function pw(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=bs(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function EC(t,e){e=e.checked,e!=null&&H0(t,"checked",e,!1)}function Sg(t,e){EC(t,e);var n=bs(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?xg(t,e.type,n):e.hasOwnProperty("defaultValue")&&xg(t,e.type,bs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function mw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function xg(t,e,n){(e!=="number"||cf(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ia=Array.isArray;function al(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+bs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function kg(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error($(91));return ht({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function gw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error($(92));if(Ia(n)){if(1<n.length)throw Error($(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:bs(n)}}function AC(t,e){var n=bs(e.value),i=bs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function yw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function IC(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Cg(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?IC(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Dc,TC=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Dc=Dc||document.createElement("div"),Dc.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Dc.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function uu(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var $a={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},IM=["Webkit","ms","Moz","O"];Object.keys($a).forEach(function(t){IM.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),$a[e]=$a[t]})});function OC(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||$a.hasOwnProperty(t)&&$a[t]?(""+e).trim():e+"px"}function DC(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=OC(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var TM=ht({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _g(t,e){if(e){if(TM[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error($(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error($(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error($(61))}if(e.style!=null&&typeof e.style!="object")throw Error($(62))}}function Eg(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ag=null;function K0(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ig=null,ul=null,cl=null;function vw(t){if(t=ec(t)){if(typeof Ig!="function")throw Error($(280));var e=t.stateNode;e&&(e=Xd(e),Ig(t.stateNode,t.type,e))}}function MC(t){ul?cl?cl.push(t):cl=[t]:ul=t}function RC(){if(ul){var t=ul,e=cl;if(cl=ul=null,vw(t),e)for(t=0;t<e.length;t++)vw(e[t])}}function LC(t,e){return t(e)}function NC(){}var Vp=!1;function BC(t,e,n){if(Vp)return t(e,n);Vp=!0;try{return LC(t,e,n)}finally{Vp=!1,(ul!==null||cl!==null)&&(NC(),RC())}}function cu(t,e){var n=t.stateNode;if(n===null)return null;var i=Xd(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error($(231,e,typeof n));return n}var Tg=!1;if(Ar)try{var ca={};Object.defineProperty(ca,"passive",{get:function(){Tg=!0}}),window.addEventListener("test",ca,ca),window.removeEventListener("test",ca,ca)}catch{Tg=!1}function OM(t,e,n,i,r,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var Ha=!1,hf=null,ff=!1,Og=null,DM={onError:function(t){Ha=!0,hf=t}};function MM(t,e,n,i,r,s,o,l,a){Ha=!1,hf=null,OM.apply(DM,arguments)}function RM(t,e,n,i,r,s,o,l,a){if(MM.apply(this,arguments),Ha){if(Ha){var u=hf;Ha=!1,hf=null}else throw Error($(198));ff||(ff=!0,Og=u)}}function bo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function PC(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ww(t){if(bo(t)!==t)throw Error($(188))}function LM(t){var e=t.alternate;if(!e){if(e=bo(t),e===null)throw Error($(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return ww(r),t;if(s===i)return ww(r),e;s=s.sibling}throw Error($(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,i=s;break}if(l===i){o=!0,i=r,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,i=r;break}if(l===i){o=!0,i=s,n=r;break}l=l.sibling}if(!o)throw Error($(189))}}if(n.alternate!==i)throw Error($(190))}if(n.tag!==3)throw Error($(188));return n.stateNode.current===n?t:e}function FC(t){return t=LM(t),t!==null?zC(t):null}function zC(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=zC(t);if(e!==null)return e;t=t.sibling}return null}var UC=qn.unstable_scheduleCallback,bw=qn.unstable_cancelCallback,NM=qn.unstable_shouldYield,BM=qn.unstable_requestPaint,yt=qn.unstable_now,PM=qn.unstable_getCurrentPriorityLevel,Y0=qn.unstable_ImmediatePriority,jC=qn.unstable_UserBlockingPriority,df=qn.unstable_NormalPriority,FM=qn.unstable_LowPriority,VC=qn.unstable_IdlePriority,Qd=null,tr=null;function zM(t){if(tr&&typeof tr.onCommitFiberRoot=="function")try{tr.onCommitFiberRoot(Qd,t,void 0,(t.current.flags&128)===128)}catch{}}var ki=Math.clz32?Math.clz32:VM,UM=Math.log,jM=Math.LN2;function VM(t){return t>>>=0,t===0?32:31-(UM(t)/jM|0)|0}var Mc=64,Rc=4194304;function Ta(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function pf(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?i=Ta(l):(s&=o,s!==0&&(i=Ta(s)))}else o=n&~r,o!==0?i=Ta(o):s!==0&&(i=Ta(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-ki(e),r=1<<n,i|=t[n],e&=~r;return i}function $M(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function HM(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ki(s),l=1<<o,a=r[o];a===-1?(!(l&n)||l&i)&&(r[o]=$M(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Dg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $C(){var t=Mc;return Mc<<=1,!(Mc&4194240)&&(Mc=64),t}function $p(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ju(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ki(e),t[e]=n}function WM(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-ki(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function G0(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-ki(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var We=0;function HC(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var WC,X0,qC,QC,KC,Mg=!1,Lc=[],cs=null,hs=null,fs=null,hu=new Map,fu=new Map,es=[],qM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sw(t,e){switch(t){case"focusin":case"focusout":cs=null;break;case"dragenter":case"dragleave":hs=null;break;case"mouseover":case"mouseout":fs=null;break;case"pointerover":case"pointerout":hu.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":fu.delete(e.pointerId)}}function ha(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=ec(e),e!==null&&X0(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function QM(t,e,n,i,r){switch(e){case"focusin":return cs=ha(cs,t,e,n,i,r),!0;case"dragenter":return hs=ha(hs,t,e,n,i,r),!0;case"mouseover":return fs=ha(fs,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return hu.set(s,ha(hu.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,fu.set(s,ha(fu.get(s)||null,t,e,n,i,r)),!0}return!1}function YC(t){var e=Ks(t.target);if(e!==null){var n=bo(e);if(n!==null){if(e=n.tag,e===13){if(e=PC(n),e!==null){t.blockedOn=e,KC(t.priority,function(){qC(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Eh(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rg(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Ag=i,n.target.dispatchEvent(i),Ag=null}else return e=ec(n),e!==null&&X0(e),t.blockedOn=n,!1;e.shift()}return!0}function xw(t,e,n){Eh(t)&&n.delete(e)}function KM(){Mg=!1,cs!==null&&Eh(cs)&&(cs=null),hs!==null&&Eh(hs)&&(hs=null),fs!==null&&Eh(fs)&&(fs=null),hu.forEach(xw),fu.forEach(xw)}function fa(t,e){t.blockedOn===e&&(t.blockedOn=null,Mg||(Mg=!0,qn.unstable_scheduleCallback(qn.unstable_NormalPriority,KM)))}function du(t){function e(r){return fa(r,t)}if(0<Lc.length){fa(Lc[0],t);for(var n=1;n<Lc.length;n++){var i=Lc[n];i.blockedOn===t&&(i.blockedOn=null)}}for(cs!==null&&fa(cs,t),hs!==null&&fa(hs,t),fs!==null&&fa(fs,t),hu.forEach(e),fu.forEach(e),n=0;n<es.length;n++)i=es[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<es.length&&(n=es[0],n.blockedOn===null);)YC(n),n.blockedOn===null&&es.shift()}var hl=Lr.ReactCurrentBatchConfig,mf=!0;function YM(t,e,n,i){var r=We,s=hl.transition;hl.transition=null;try{We=1,J0(t,e,n,i)}finally{We=r,hl.transition=s}}function GM(t,e,n,i){var r=We,s=hl.transition;hl.transition=null;try{We=4,J0(t,e,n,i)}finally{We=r,hl.transition=s}}function J0(t,e,n,i){if(mf){var r=Rg(t,e,n,i);if(r===null)Zp(t,e,i,gf,n),Sw(t,i);else if(QM(r,t,e,n,i))i.stopPropagation();else if(Sw(t,i),e&4&&-1<qM.indexOf(t)){for(;r!==null;){var s=ec(r);if(s!==null&&WC(s),s=Rg(t,e,n,i),s===null&&Zp(t,e,i,gf,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Zp(t,e,i,null,n)}}var gf=null;function Rg(t,e,n,i){if(gf=null,t=K0(i),t=Ks(t),t!==null)if(e=bo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=PC(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return gf=t,null}function GC(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PM()){case Y0:return 1;case jC:return 4;case df:case FM:return 16;case VC:return 536870912;default:return 16}default:return 16}}var is=null,Z0=null,Ah=null;function XC(){if(Ah)return Ah;var t,e=Z0,n=e.length,i,r="value"in is?is.value:is.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return Ah=r.slice(t,1<i?1-i:void 0)}function Ih(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Nc(){return!0}function kw(){return!1}function Yn(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Nc:kw,this.isPropagationStopped=kw,this}return ht(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Nc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Nc)},persist:function(){},isPersistent:Nc}),e}var Kl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ev=Yn(Kl),Zu=ht({},Kl,{view:0,detail:0}),XM=Yn(Zu),Hp,Wp,da,Kd=ht({},Zu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==da&&(da&&t.type==="mousemove"?(Hp=t.screenX-da.screenX,Wp=t.screenY-da.screenY):Wp=Hp=0,da=t),Hp)},movementY:function(t){return"movementY"in t?t.movementY:Wp}}),Cw=Yn(Kd),JM=ht({},Kd,{dataTransfer:0}),ZM=Yn(JM),eR=ht({},Zu,{relatedTarget:0}),qp=Yn(eR),tR=ht({},Kl,{animationName:0,elapsedTime:0,pseudoElement:0}),nR=Yn(tR),iR=ht({},Kl,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rR=Yn(iR),sR=ht({},Kl,{data:0}),_w=Yn(sR),oR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},lR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aR[t])?!!e[t]:!1}function tv(){return uR}var cR=ht({},Zu,{key:function(t){if(t.key){var e=oR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ih(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?lR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tv,charCode:function(t){return t.type==="keypress"?Ih(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ih(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),hR=Yn(cR),fR=ht({},Kd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ew=Yn(fR),dR=ht({},Zu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tv}),pR=Yn(dR),mR=ht({},Kl,{propertyName:0,elapsedTime:0,pseudoElement:0}),gR=Yn(mR),yR=ht({},Kd,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vR=Yn(yR),wR=[9,13,27,32],nv=Ar&&"CompositionEvent"in window,Wa=null;Ar&&"documentMode"in document&&(Wa=document.documentMode);var bR=Ar&&"TextEvent"in window&&!Wa,JC=Ar&&(!nv||Wa&&8<Wa&&11>=Wa),Aw=" ",Iw=!1;function ZC(t,e){switch(t){case"keyup":return wR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function e_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qo=!1;function SR(t,e){switch(t){case"compositionend":return e_(e);case"keypress":return e.which!==32?null:(Iw=!0,Aw);case"textInput":return t=e.data,t===Aw&&Iw?null:t;default:return null}}function xR(t,e){if(Qo)return t==="compositionend"||!nv&&ZC(t,e)?(t=XC(),Ah=Z0=is=null,Qo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return JC&&e.locale!=="ko"?null:e.data;default:return null}}var kR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Tw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!kR[t.type]:e==="textarea"}function t_(t,e,n,i){MC(i),e=yf(e,"onChange"),0<e.length&&(n=new ev("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var qa=null,pu=null;function CR(t){f_(t,0)}function Yd(t){var e=Go(t);if(_C(e))return t}function _R(t,e){if(t==="change")return e}var n_=!1;if(Ar){var Qp;if(Ar){var Kp="oninput"in document;if(!Kp){var Ow=document.createElement("div");Ow.setAttribute("oninput","return;"),Kp=typeof Ow.oninput=="function"}Qp=Kp}else Qp=!1;n_=Qp&&(!document.documentMode||9<document.documentMode)}function Dw(){qa&&(qa.detachEvent("onpropertychange",i_),pu=qa=null)}function i_(t){if(t.propertyName==="value"&&Yd(pu)){var e=[];t_(e,pu,t,K0(t)),BC(CR,e)}}function ER(t,e,n){t==="focusin"?(Dw(),qa=e,pu=n,qa.attachEvent("onpropertychange",i_)):t==="focusout"&&Dw()}function AR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Yd(pu)}function IR(t,e){if(t==="click")return Yd(e)}function TR(t,e){if(t==="input"||t==="change")return Yd(e)}function OR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ai=typeof Object.is=="function"?Object.is:OR;function mu(t,e){if(Ai(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!mg.call(e,r)||!Ai(t[r],e[r]))return!1}return!0}function Mw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Rw(t,e){var n=Mw(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Mw(n)}}function r_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?r_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function s_(){for(var t=window,e=cf();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=cf(t.document)}return e}function iv(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function DR(t){var e=s_(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&r_(n.ownerDocument.documentElement,n)){if(i!==null&&iv(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Rw(n,s);var o=Rw(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MR=Ar&&"documentMode"in document&&11>=document.documentMode,Ko=null,Lg=null,Qa=null,Ng=!1;function Lw(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ng||Ko==null||Ko!==cf(i)||(i=Ko,"selectionStart"in i&&iv(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Qa&&mu(Qa,i)||(Qa=i,i=yf(Lg,"onSelect"),0<i.length&&(e=new ev("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ko)))}function Bc(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yo={animationend:Bc("Animation","AnimationEnd"),animationiteration:Bc("Animation","AnimationIteration"),animationstart:Bc("Animation","AnimationStart"),transitionend:Bc("Transition","TransitionEnd")},Yp={},o_={};Ar&&(o_=document.createElement("div").style,"AnimationEvent"in window||(delete Yo.animationend.animation,delete Yo.animationiteration.animation,delete Yo.animationstart.animation),"TransitionEvent"in window||delete Yo.transitionend.transition);function Gd(t){if(Yp[t])return Yp[t];if(!Yo[t])return t;var e=Yo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in o_)return Yp[t]=e[n];return t}var l_=Gd("animationend"),a_=Gd("animationiteration"),u_=Gd("animationstart"),c_=Gd("transitionend"),h_=new Map,Nw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ds(t,e){h_.set(t,e),wo(e,[t])}for(var Gp=0;Gp<Nw.length;Gp++){var Xp=Nw[Gp],RR=Xp.toLowerCase(),LR=Xp[0].toUpperCase()+Xp.slice(1);Ds(RR,"on"+LR)}Ds(l_,"onAnimationEnd");Ds(a_,"onAnimationIteration");Ds(u_,"onAnimationStart");Ds("dblclick","onDoubleClick");Ds("focusin","onFocus");Ds("focusout","onBlur");Ds(c_,"onTransitionEnd");_l("onMouseEnter",["mouseout","mouseover"]);_l("onMouseLeave",["mouseout","mouseover"]);_l("onPointerEnter",["pointerout","pointerover"]);_l("onPointerLeave",["pointerout","pointerover"]);wo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wo("onBeforeInput",["compositionend","keypress","textInput","paste"]);wo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),NR=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function Bw(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,RM(i,e,void 0,t),t.currentTarget=null}function f_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var l=i[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&r.isPropagationStopped())break e;Bw(r,l,u),s=a}else for(o=0;o<i.length;o++){if(l=i[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&r.isPropagationStopped())break e;Bw(r,l,u),s=a}}}if(ff)throw t=Og,ff=!1,Og=null,t}function tt(t,e){var n=e[Ug];n===void 0&&(n=e[Ug]=new Set);var i=t+"__bubble";n.has(i)||(d_(e,t,2,!1),n.add(i))}function Jp(t,e,n){var i=0;e&&(i|=4),d_(n,t,i,e)}var Pc="_reactListening"+Math.random().toString(36).slice(2);function gu(t){if(!t[Pc]){t[Pc]=!0,bC.forEach(function(n){n!=="selectionchange"&&(NR.has(n)||Jp(n,!1,t),Jp(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pc]||(e[Pc]=!0,Jp("selectionchange",!1,e))}}function d_(t,e,n,i){switch(GC(e)){case 1:var r=YM;break;case 4:r=GM;break;default:r=J0}n=r.bind(null,e,n,t),r=void 0,!Tg||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Zp(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var l=i.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===r||a.nodeType===8&&a.parentNode===r))return;o=o.return}for(;l!==null;){if(o=Ks(l),o===null)return;if(a=o.tag,a===5||a===6){i=s=o;continue e}l=l.parentNode}}i=i.return}BC(function(){var u=s,c=K0(n),h=[];e:{var f=h_.get(t);if(f!==void 0){var d=ev,p=t;switch(t){case"keypress":if(Ih(n)===0)break e;case"keydown":case"keyup":d=hR;break;case"focusin":p="focus",d=qp;break;case"focusout":p="blur",d=qp;break;case"beforeblur":case"afterblur":d=qp;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=Cw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=ZM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=pR;break;case l_:case a_:case u_:d=nR;break;case c_:d=gR;break;case"scroll":d=XM;break;case"wheel":d=vR;break;case"copy":case"cut":case"paste":d=rR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=Ew}var g=(e&4)!==0,w=!g&&t==="scroll",m=g?f!==null?f+"Capture":null:f;g=[];for(var y=u,v;y!==null;){v=y;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,m!==null&&(x=cu(y,m),x!=null&&g.push(yu(y,x,v)))),w)break;y=y.return}0<g.length&&(f=new d(f,p,null,n,c),h.push({event:f,listeners:g}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",d=t==="mouseout"||t==="pointerout",f&&n!==Ag&&(p=n.relatedTarget||n.fromElement)&&(Ks(p)||p[Ir]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(p=n.relatedTarget||n.toElement,d=u,p=p?Ks(p):null,p!==null&&(w=bo(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(d=null,p=u),d!==p)){if(g=Cw,x="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=Ew,x="onPointerLeave",m="onPointerEnter",y="pointer"),w=d==null?f:Go(d),v=p==null?f:Go(p),f=new g(x,y+"leave",d,n,c),f.target=w,f.relatedTarget=v,x=null,Ks(c)===u&&(g=new g(m,y+"enter",p,n,c),g.target=v,g.relatedTarget=w,x=g),w=x,d&&p)t:{for(g=d,m=p,y=0,v=g;v;v=Ao(v))y++;for(v=0,x=m;x;x=Ao(x))v++;for(;0<y-v;)g=Ao(g),y--;for(;0<v-y;)m=Ao(m),v--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=Ao(g),m=Ao(m)}g=null}else g=null;d!==null&&Pw(h,f,d,g,!1),p!==null&&w!==null&&Pw(h,w,p,g,!0)}}e:{if(f=u?Go(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var _=_R;else if(Tw(f))if(n_)_=TR;else{_=AR;var b=ER}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=IR);if(_&&(_=_(t,u))){t_(h,_,n,c);break e}b&&b(t,f,u),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&xg(f,"number",f.value)}switch(b=u?Go(u):window,t){case"focusin":(Tw(b)||b.contentEditable==="true")&&(Ko=b,Lg=u,Qa=null);break;case"focusout":Qa=Lg=Ko=null;break;case"mousedown":Ng=!0;break;case"contextmenu":case"mouseup":case"dragend":Ng=!1,Lw(h,n,c);break;case"selectionchange":if(MR)break;case"keydown":case"keyup":Lw(h,n,c)}var I;if(nv)e:{switch(t){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else Qo?ZC(t,n)&&(D="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(JC&&n.locale!=="ko"&&(Qo||D!=="onCompositionStart"?D==="onCompositionEnd"&&Qo&&(I=XC()):(is=c,Z0="value"in is?is.value:is.textContent,Qo=!0)),b=yf(u,D),0<b.length&&(D=new _w(D,t,null,n,c),h.push({event:D,listeners:b}),I?D.data=I:(I=e_(n),I!==null&&(D.data=I)))),(I=bR?SR(t,n):xR(t,n))&&(u=yf(u,"onBeforeInput"),0<u.length&&(c=new _w("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=I))}f_(h,e)})}function yu(t,e,n){return{instance:t,listener:e,currentTarget:n}}function yf(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=cu(t,n),s!=null&&i.unshift(yu(t,s,r)),s=cu(t,e),s!=null&&i.push(yu(t,s,r))),t=t.return}return i}function Ao(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pw(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===i)break;l.tag===5&&u!==null&&(l=u,r?(a=cu(n,s),a!=null&&o.unshift(yu(n,a,l))):r||(a=cu(n,s),a!=null&&o.push(yu(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var BR=/\r\n?/g,PR=/\u0000|\uFFFD/g;function Fw(t){return(typeof t=="string"?t:""+t).replace(BR,`
`).replace(PR,"")}function Fc(t,e,n){if(e=Fw(e),Fw(t)!==e&&n)throw Error($(425))}function vf(){}var Bg=null,Pg=null;function Fg(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var zg=typeof setTimeout=="function"?setTimeout:void 0,FR=typeof clearTimeout=="function"?clearTimeout:void 0,zw=typeof Promise=="function"?Promise:void 0,zR=typeof queueMicrotask=="function"?queueMicrotask:typeof zw<"u"?function(t){return zw.resolve(null).then(t).catch(UR)}:zg;function UR(t){setTimeout(function(){throw t})}function em(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),du(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);du(e)}function ds(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Uw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Yl=Math.random().toString(36).slice(2),Hi="__reactFiber$"+Yl,vu="__reactProps$"+Yl,Ir="__reactContainer$"+Yl,Ug="__reactEvents$"+Yl,jR="__reactListeners$"+Yl,VR="__reactHandles$"+Yl;function Ks(t){var e=t[Hi];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ir]||n[Hi]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Uw(t);t!==null;){if(n=t[Hi])return n;t=Uw(t)}return e}t=n,n=t.parentNode}return null}function ec(t){return t=t[Hi]||t[Ir],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Go(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error($(33))}function Xd(t){return t[vu]||null}var jg=[],Xo=-1;function Ms(t){return{current:t}}function it(t){0>Xo||(t.current=jg[Xo],jg[Xo]=null,Xo--)}function et(t,e){Xo++,jg[Xo]=t.current,t.current=e}var Ss={},Gt=Ms(Ss),_n=Ms(!1),so=Ss;function El(t,e){var n=t.type.contextTypes;if(!n)return Ss;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function En(t){return t=t.childContextTypes,t!=null}function wf(){it(_n),it(Gt)}function jw(t,e,n){if(Gt.current!==Ss)throw Error($(168));et(Gt,e),et(_n,n)}function p_(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error($(108,EM(t)||"Unknown",r));return ht({},n,i)}function bf(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ss,so=Gt.current,et(Gt,t),et(_n,_n.current),!0}function Vw(t,e,n){var i=t.stateNode;if(!i)throw Error($(169));n?(t=p_(t,e,so),i.__reactInternalMemoizedMergedChildContext=t,it(_n),it(Gt),et(Gt,t)):it(_n),et(_n,n)}var vr=null,Jd=!1,tm=!1;function m_(t){vr===null?vr=[t]:vr.push(t)}function $R(t){Jd=!0,m_(t)}function Rs(){if(!tm&&vr!==null){tm=!0;var t=0,e=We;try{var n=vr;for(We=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}vr=null,Jd=!1}catch(r){throw vr!==null&&(vr=vr.slice(t+1)),UC(Y0,Rs),r}finally{We=e,tm=!1}}return null}var Jo=[],Zo=0,Sf=null,xf=0,Jn=[],Zn=0,oo=null,kr=1,Cr="";function Vs(t,e){Jo[Zo++]=xf,Jo[Zo++]=Sf,Sf=t,xf=e}function g_(t,e,n){Jn[Zn++]=kr,Jn[Zn++]=Cr,Jn[Zn++]=oo,oo=t;var i=kr;t=Cr;var r=32-ki(i)-1;i&=~(1<<r),n+=1;var s=32-ki(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,kr=1<<32-ki(e)+r|n<<r|i,Cr=s+t}else kr=1<<s|n<<r|i,Cr=t}function rv(t){t.return!==null&&(Vs(t,1),g_(t,1,0))}function sv(t){for(;t===Sf;)Sf=Jo[--Zo],Jo[Zo]=null,xf=Jo[--Zo],Jo[Zo]=null;for(;t===oo;)oo=Jn[--Zn],Jn[Zn]=null,Cr=Jn[--Zn],Jn[Zn]=null,kr=Jn[--Zn],Jn[Zn]=null}var Hn=null,Vn=null,ot=!1,Si=null;function y_(t,e){var n=ri(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function $w(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Hn=t,Vn=ds(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Hn=t,Vn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=oo!==null?{id:kr,overflow:Cr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ri(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Hn=t,Vn=null,!0):!1;default:return!1}}function Vg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $g(t){if(ot){var e=Vn;if(e){var n=e;if(!$w(t,e)){if(Vg(t))throw Error($(418));e=ds(n.nextSibling);var i=Hn;e&&$w(t,e)?y_(i,n):(t.flags=t.flags&-4097|2,ot=!1,Hn=t)}}else{if(Vg(t))throw Error($(418));t.flags=t.flags&-4097|2,ot=!1,Hn=t}}}function Hw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Hn=t}function zc(t){if(t!==Hn)return!1;if(!ot)return Hw(t),ot=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fg(t.type,t.memoizedProps)),e&&(e=Vn)){if(Vg(t))throw v_(),Error($(418));for(;e;)y_(t,e),e=ds(e.nextSibling)}if(Hw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error($(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vn=ds(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vn=null}}else Vn=Hn?ds(t.stateNode.nextSibling):null;return!0}function v_(){for(var t=Vn;t;)t=ds(t.nextSibling)}function Al(){Vn=Hn=null,ot=!1}function ov(t){Si===null?Si=[t]:Si.push(t)}var HR=Lr.ReactCurrentBatchConfig;function pa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error($(309));var i=n.stateNode}if(!i)throw Error($(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=r.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error($(284));if(!n._owner)throw Error($(290,t))}return t}function Uc(t,e){throw t=Object.prototype.toString.call(e),Error($(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Ww(t){var e=t._init;return e(t._payload)}function w_(t){function e(m,y){if(t){var v=m.deletions;v===null?(m.deletions=[y],m.flags|=16):v.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function i(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function r(m,y){return m=ys(m,y),m.index=0,m.sibling=null,m}function s(m,y,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<y?(m.flags|=2,y):v):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,y,v,x){return y===null||y.tag!==6?(y=am(v,m.mode,x),y.return=m,y):(y=r(y,v),y.return=m,y)}function a(m,y,v,x){var _=v.type;return _===qo?c(m,y,v.props.children,x,v.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Qr&&Ww(_)===y.type)?(x=r(y,v.props),x.ref=pa(m,y,v),x.return=m,x):(x=Nh(v.type,v.key,v.props,null,m.mode,x),x.ref=pa(m,y,v),x.return=m,x)}function u(m,y,v,x){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=um(v,m.mode,x),y.return=m,y):(y=r(y,v.children||[]),y.return=m,y)}function c(m,y,v,x,_){return y===null||y.tag!==7?(y=to(v,m.mode,x,_),y.return=m,y):(y=r(y,v),y.return=m,y)}function h(m,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=am(""+y,m.mode,v),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Tc:return v=Nh(y.type,y.key,y.props,null,m.mode,v),v.ref=pa(m,null,y),v.return=m,v;case Wo:return y=um(y,m.mode,v),y.return=m,y;case Qr:var x=y._init;return h(m,x(y._payload),v)}if(Ia(y)||ua(y))return y=to(y,m.mode,v,null),y.return=m,y;Uc(m,y)}return null}function f(m,y,v,x){var _=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return _!==null?null:l(m,y,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Tc:return v.key===_?a(m,y,v,x):null;case Wo:return v.key===_?u(m,y,v,x):null;case Qr:return _=v._init,f(m,y,_(v._payload),x)}if(Ia(v)||ua(v))return _!==null?null:c(m,y,v,x,null);Uc(m,v)}return null}function d(m,y,v,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(v)||null,l(y,m,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Tc:return m=m.get(x.key===null?v:x.key)||null,a(y,m,x,_);case Wo:return m=m.get(x.key===null?v:x.key)||null,u(y,m,x,_);case Qr:var b=x._init;return d(m,y,v,b(x._payload),_)}if(Ia(x)||ua(x))return m=m.get(v)||null,c(y,m,x,_,null);Uc(y,x)}return null}function p(m,y,v,x){for(var _=null,b=null,I=y,D=y=0,F=null;I!==null&&D<v.length;D++){I.index>D?(F=I,I=null):F=I.sibling;var A=f(m,I,v[D],x);if(A===null){I===null&&(I=F);break}t&&I&&A.alternate===null&&e(m,I),y=s(A,y,D),b===null?_=A:b.sibling=A,b=A,I=F}if(D===v.length)return n(m,I),ot&&Vs(m,D),_;if(I===null){for(;D<v.length;D++)I=h(m,v[D],x),I!==null&&(y=s(I,y,D),b===null?_=I:b.sibling=I,b=I);return ot&&Vs(m,D),_}for(I=i(m,I);D<v.length;D++)F=d(I,m,D,v[D],x),F!==null&&(t&&F.alternate!==null&&I.delete(F.key===null?D:F.key),y=s(F,y,D),b===null?_=F:b.sibling=F,b=F);return t&&I.forEach(function(B){return e(m,B)}),ot&&Vs(m,D),_}function g(m,y,v,x){var _=ua(v);if(typeof _!="function")throw Error($(150));if(v=_.call(v),v==null)throw Error($(151));for(var b=_=null,I=y,D=y=0,F=null,A=v.next();I!==null&&!A.done;D++,A=v.next()){I.index>D?(F=I,I=null):F=I.sibling;var B=f(m,I,A.value,x);if(B===null){I===null&&(I=F);break}t&&I&&B.alternate===null&&e(m,I),y=s(B,y,D),b===null?_=B:b.sibling=B,b=B,I=F}if(A.done)return n(m,I),ot&&Vs(m,D),_;if(I===null){for(;!A.done;D++,A=v.next())A=h(m,A.value,x),A!==null&&(y=s(A,y,D),b===null?_=A:b.sibling=A,b=A);return ot&&Vs(m,D),_}for(I=i(m,I);!A.done;D++,A=v.next())A=d(I,m,D,A.value,x),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?D:A.key),y=s(A,y,D),b===null?_=A:b.sibling=A,b=A);return t&&I.forEach(function(N){return e(m,N)}),ot&&Vs(m,D),_}function w(m,y,v,x){if(typeof v=="object"&&v!==null&&v.type===qo&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Tc:e:{for(var _=v.key,b=y;b!==null;){if(b.key===_){if(_=v.type,_===qo){if(b.tag===7){n(m,b.sibling),y=r(b,v.props.children),y.return=m,m=y;break e}}else if(b.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Qr&&Ww(_)===b.type){n(m,b.sibling),y=r(b,v.props),y.ref=pa(m,b,v),y.return=m,m=y;break e}n(m,b);break}else e(m,b);b=b.sibling}v.type===qo?(y=to(v.props.children,m.mode,x,v.key),y.return=m,m=y):(x=Nh(v.type,v.key,v.props,null,m.mode,x),x.ref=pa(m,y,v),x.return=m,m=x)}return o(m);case Wo:e:{for(b=v.key;y!==null;){if(y.key===b)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(m,y.sibling),y=r(y,v.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=um(v,m.mode,x),y.return=m,m=y}return o(m);case Qr:return b=v._init,w(m,y,b(v._payload),x)}if(Ia(v))return p(m,y,v,x);if(ua(v))return g(m,y,v,x);Uc(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(m,y.sibling),y=r(y,v),y.return=m,m=y):(n(m,y),y=am(v,m.mode,x),y.return=m,m=y),o(m)):n(m,y)}return w}var Il=w_(!0),b_=w_(!1),kf=Ms(null),Cf=null,el=null,lv=null;function av(){lv=el=Cf=null}function uv(t){var e=kf.current;it(kf),t._currentValue=e}function Hg(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function fl(t,e){Cf=t,lv=el=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xn=!0),t.firstContext=null)}function hi(t){var e=t._currentValue;if(lv!==t)if(t={context:t,memoizedValue:e,next:null},el===null){if(Cf===null)throw Error($(308));el=t,Cf.dependencies={lanes:0,firstContext:t}}else el=el.next=t;return e}var Ys=null;function cv(t){Ys===null?Ys=[t]:Ys.push(t)}function S_(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,cv(e)):(n.next=r.next,r.next=n),e.interleaved=n,Tr(t,i)}function Tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kr=!1;function hv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function x_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ps(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Le&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Tr(t,n)}return r=i.interleaved,r===null?(e.next=e,cv(i)):(e.next=r.next,r.next=e),i.interleaved=e,Tr(t,n)}function Th(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,G0(t,n)}}function qw(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function _f(t,e,n,i){var r=t.updateQueue;Kr=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var c=t.alternate;c!==null&&(c=c.updateQueue,l=c.lastBaseUpdate,l!==o&&(l===null?c.firstBaseUpdate=u:l.next=u,c.lastBaseUpdate=a))}if(s!==null){var h=r.baseState;o=0,c=u=a=null,l=s;do{var f=l.lane,d=l.eventTime;if((i&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,g=l;switch(f=e,d=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(d,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,f=typeof p=="function"?p.call(d,h,f):p,f==null)break e;h=ht({},h,f);break e;case 2:Kr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else d={eventTime:d,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},c===null?(u=c=d,a=h):c=c.next=d,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(c===null&&(a=h),r.baseState=a,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);ao|=o,t.lanes=o,t.memoizedState=h}}function Qw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error($(191,r));r.call(i)}}}var tc={},nr=Ms(tc),wu=Ms(tc),bu=Ms(tc);function Gs(t){if(t===tc)throw Error($(174));return t}function fv(t,e){switch(et(bu,e),et(wu,t),et(nr,tc),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Cg(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Cg(e,t)}it(nr),et(nr,e)}function Tl(){it(nr),it(wu),it(bu)}function k_(t){Gs(bu.current);var e=Gs(nr.current),n=Cg(e,t.type);e!==n&&(et(wu,t),et(nr,n))}function dv(t){wu.current===t&&(it(nr),it(wu))}var at=Ms(0);function Ef(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var nm=[];function pv(){for(var t=0;t<nm.length;t++)nm[t]._workInProgressVersionPrimary=null;nm.length=0}var Oh=Lr.ReactCurrentDispatcher,im=Lr.ReactCurrentBatchConfig,lo=0,ct=null,_t=null,Dt=null,Af=!1,Ka=!1,Su=0,WR=0;function $t(){throw Error($(321))}function mv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ai(t[n],e[n]))return!1;return!0}function gv(t,e,n,i,r,s){if(lo=s,ct=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Oh.current=t===null||t.memoizedState===null?YR:GR,t=n(i,r),Ka){s=0;do{if(Ka=!1,Su=0,25<=s)throw Error($(301));s+=1,Dt=_t=null,e.updateQueue=null,Oh.current=XR,t=n(i,r)}while(Ka)}if(Oh.current=If,e=_t!==null&&_t.next!==null,lo=0,Dt=_t=ct=null,Af=!1,e)throw Error($(300));return t}function yv(){var t=Su!==0;return Su=0,t}function Ui(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Dt===null?ct.memoizedState=Dt=t:Dt=Dt.next=t,Dt}function fi(){if(_t===null){var t=ct.alternate;t=t!==null?t.memoizedState:null}else t=_t.next;var e=Dt===null?ct.memoizedState:Dt.next;if(e!==null)Dt=e,_t=t;else{if(t===null)throw Error($(310));_t=t,t={memoizedState:_t.memoizedState,baseState:_t.baseState,baseQueue:_t.baseQueue,queue:_t.queue,next:null},Dt===null?ct.memoizedState=Dt=t:Dt=Dt.next=t}return Dt}function xu(t,e){return typeof e=="function"?e(t):e}function rm(t){var e=fi(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=_t,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var l=o=null,a=null,u=s;do{var c=u.lane;if((lo&c)===c)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=h,o=i):a=a.next=h,ct.lanes|=c,ao|=c}u=u.next}while(u!==null&&u!==s);a===null?o=i:a.next=l,Ai(i,e.memoizedState)||(xn=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=a,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,ct.lanes|=s,ao|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function sm(t){var e=fi(),n=e.queue;if(n===null)throw Error($(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);Ai(s,e.memoizedState)||(xn=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function C_(){}function __(t,e){var n=ct,i=fi(),r=e(),s=!Ai(i.memoizedState,r);if(s&&(i.memoizedState=r,xn=!0),i=i.queue,vv(I_.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Dt!==null&&Dt.memoizedState.tag&1){if(n.flags|=2048,ku(9,A_.bind(null,n,i,r,e),void 0,null),Lt===null)throw Error($(349));lo&30||E_(n,e,r)}return r}function E_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function A_(t,e,n,i){e.value=n,e.getSnapshot=i,T_(e)&&O_(t)}function I_(t,e,n){return n(function(){T_(e)&&O_(t)})}function T_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ai(t,n)}catch{return!0}}function O_(t){var e=Tr(t,1);e!==null&&Ci(e,t,1,-1)}function Kw(t){var e=Ui();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xu,lastRenderedState:t},e.queue=t,t=t.dispatch=KR.bind(null,ct,t),[e.memoizedState,t]}function ku(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ct.updateQueue,e===null?(e={lastEffect:null,stores:null},ct.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function D_(){return fi().memoizedState}function Dh(t,e,n,i){var r=Ui();ct.flags|=t,r.memoizedState=ku(1|e,n,void 0,i===void 0?null:i)}function Zd(t,e,n,i){var r=fi();i=i===void 0?null:i;var s=void 0;if(_t!==null){var o=_t.memoizedState;if(s=o.destroy,i!==null&&mv(i,o.deps)){r.memoizedState=ku(e,n,s,i);return}}ct.flags|=t,r.memoizedState=ku(1|e,n,s,i)}function Yw(t,e){return Dh(8390656,8,t,e)}function vv(t,e){return Zd(2048,8,t,e)}function M_(t,e){return Zd(4,2,t,e)}function R_(t,e){return Zd(4,4,t,e)}function L_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function N_(t,e,n){return n=n!=null?n.concat([t]):null,Zd(4,4,L_.bind(null,e,t),n)}function wv(){}function B_(t,e){var n=fi();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&mv(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function P_(t,e){var n=fi();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&mv(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function F_(t,e,n){return lo&21?(Ai(n,e)||(n=$C(),ct.lanes|=n,ao|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xn=!0),t.memoizedState=n)}function qR(t,e){var n=We;We=n!==0&&4>n?n:4,t(!0);var i=im.transition;im.transition={};try{t(!1),e()}finally{We=n,im.transition=i}}function z_(){return fi().memoizedState}function QR(t,e,n){var i=gs(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},U_(t))j_(e,n);else if(n=S_(t,e,n,i),n!==null){var r=ln();Ci(n,t,i,r),V_(n,e,i)}}function KR(t,e,n){var i=gs(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(U_(t))j_(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(r.hasEagerState=!0,r.eagerState=l,Ai(l,o)){var a=e.interleaved;a===null?(r.next=r,cv(e)):(r.next=a.next,a.next=r),e.interleaved=r;return}}catch{}finally{}n=S_(t,e,r,i),n!==null&&(r=ln(),Ci(n,t,i,r),V_(n,e,i))}}function U_(t){var e=t.alternate;return t===ct||e!==null&&e===ct}function j_(t,e){Ka=Af=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function V_(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,G0(t,n)}}var If={readContext:hi,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},YR={readContext:hi,useCallback:function(t,e){return Ui().memoizedState=[t,e===void 0?null:e],t},useContext:hi,useEffect:Yw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Dh(4194308,4,L_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Dh(4194308,4,t,e)},useInsertionEffect:function(t,e){return Dh(4,2,t,e)},useMemo:function(t,e){var n=Ui();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ui();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=QR.bind(null,ct,t),[i.memoizedState,t]},useRef:function(t){var e=Ui();return t={current:t},e.memoizedState=t},useState:Kw,useDebugValue:wv,useDeferredValue:function(t){return Ui().memoizedState=t},useTransition:function(){var t=Kw(!1),e=t[0];return t=qR.bind(null,t[1]),Ui().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ct,r=Ui();if(ot){if(n===void 0)throw Error($(407));n=n()}else{if(n=e(),Lt===null)throw Error($(349));lo&30||E_(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,Yw(I_.bind(null,i,s,t),[t]),i.flags|=2048,ku(9,A_.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ui(),e=Lt.identifierPrefix;if(ot){var n=Cr,i=kr;n=(i&~(1<<32-ki(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Su++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=WR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},GR={readContext:hi,useCallback:B_,useContext:hi,useEffect:vv,useImperativeHandle:N_,useInsertionEffect:M_,useLayoutEffect:R_,useMemo:P_,useReducer:rm,useRef:D_,useState:function(){return rm(xu)},useDebugValue:wv,useDeferredValue:function(t){var e=fi();return F_(e,_t.memoizedState,t)},useTransition:function(){var t=rm(xu)[0],e=fi().memoizedState;return[t,e]},useMutableSource:C_,useSyncExternalStore:__,useId:z_,unstable_isNewReconciler:!1},XR={readContext:hi,useCallback:B_,useContext:hi,useEffect:vv,useImperativeHandle:N_,useInsertionEffect:M_,useLayoutEffect:R_,useMemo:P_,useReducer:sm,useRef:D_,useState:function(){return sm(xu)},useDebugValue:wv,useDeferredValue:function(t){var e=fi();return _t===null?e.memoizedState=t:F_(e,_t.memoizedState,t)},useTransition:function(){var t=sm(xu)[0],e=fi().memoizedState;return[t,e]},useMutableSource:C_,useSyncExternalStore:__,useId:z_,unstable_isNewReconciler:!1};function vi(t,e){if(t&&t.defaultProps){e=ht({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Wg(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:ht({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ep={isMounted:function(t){return(t=t._reactInternals)?bo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=ln(),r=gs(t),s=_r(i,r);s.payload=e,n!=null&&(s.callback=n),e=ps(t,s,r),e!==null&&(Ci(e,t,r,i),Th(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=ln(),r=gs(t),s=_r(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ps(t,s,r),e!==null&&(Ci(e,t,r,i),Th(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ln(),i=gs(t),r=_r(n,i);r.tag=2,e!=null&&(r.callback=e),e=ps(t,r,i),e!==null&&(Ci(e,t,i,n),Th(e,t,i))}};function Gw(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!mu(n,i)||!mu(r,s):!0}function $_(t,e,n){var i=!1,r=Ss,s=e.contextType;return typeof s=="object"&&s!==null?s=hi(s):(r=En(e)?so:Gt.current,i=e.contextTypes,s=(i=i!=null)?El(t,r):Ss),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ep,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Xw(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&ep.enqueueReplaceState(e,e.state,null)}function qg(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},hv(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=hi(s):(s=En(e)?so:Gt.current,r.context=El(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Wg(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ep.enqueueReplaceState(r,r.state,null),_f(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ol(t,e){try{var n="",i=e;do n+=_M(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function om(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Qg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var JR=typeof WeakMap=="function"?WeakMap:Map;function H_(t,e,n){n=_r(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Of||(Of=!0,iy=i),Qg(t,e)},n}function W_(t,e,n){n=_r(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Qg(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Qg(t,e),typeof i!="function"&&(ms===null?ms=new Set([this]):ms.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Jw(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new JR;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=fL.bind(null,t,e,n),e.then(t,t))}function Zw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function eb(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=_r(-1,1),e.tag=2,ps(n,e,1))),n.lanes|=1),t)}var ZR=Lr.ReactCurrentOwner,xn=!1;function en(t,e,n,i){e.child=t===null?b_(e,null,n,i):Il(e,t.child,n,i)}function tb(t,e,n,i,r){n=n.render;var s=e.ref;return fl(e,r),i=gv(t,e,n,i,s,r),n=yv(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Or(t,e,r)):(ot&&n&&rv(e),e.flags|=1,en(t,e,i,r),e.child)}function nb(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!Av(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,q_(t,e,s,i,r)):(t=Nh(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:mu,n(o,i)&&t.ref===e.ref)return Or(t,e,r)}return e.flags|=1,t=ys(s,i),t.ref=e.ref,t.return=e,e.child=t}function q_(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(mu(s,i)&&t.ref===e.ref)if(xn=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(xn=!0);else return e.lanes=t.lanes,Or(t,e,r)}return Kg(t,e,n,i,r)}function Q_(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},et(nl,zn),zn|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,et(nl,zn),zn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,et(nl,zn),zn|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,et(nl,zn),zn|=i;return en(t,e,r,n),e.child}function K_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Kg(t,e,n,i,r){var s=En(n)?so:Gt.current;return s=El(e,s),fl(e,r),n=gv(t,e,n,i,s,r),i=yv(),t!==null&&!xn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Or(t,e,r)):(ot&&i&&rv(e),e.flags|=1,en(t,e,n,r),e.child)}function ib(t,e,n,i,r){if(En(n)){var s=!0;bf(e)}else s=!1;if(fl(e,r),e.stateNode===null)Mh(t,e),$_(e,n,i),qg(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=hi(u):(u=En(n)?so:Gt.current,u=El(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==i||a!==u)&&Xw(e,o,i,u),Kr=!1;var f=e.memoizedState;o.state=f,_f(e,i,o,r),a=e.memoizedState,l!==i||f!==a||_n.current||Kr?(typeof c=="function"&&(Wg(e,n,c,i),a=e.memoizedState),(l=Kr||Gw(e,n,l,i,f,a,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=a),o.props=i,o.state=a,o.context=u,i=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,x_(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:vi(e.type,l),o.props=u,h=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=hi(a):(a=En(n)?so:Gt.current,a=El(e,a));var d=n.getDerivedStateFromProps;(c=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==a)&&Xw(e,o,i,a),Kr=!1,f=e.memoizedState,o.state=f,_f(e,i,o,r);var p=e.memoizedState;l!==h||f!==p||_n.current||Kr?(typeof d=="function"&&(Wg(e,n,d,i),p=e.memoizedState),(u=Kr||Gw(e,n,u,i,f,p,a)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=a,i=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return Yg(t,e,n,i,s,r)}function Yg(t,e,n,i,r,s){K_(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Vw(e,n,!1),Or(t,e,s);i=e.stateNode,ZR.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Il(e,t.child,null,s),e.child=Il(e,null,l,s)):en(t,e,l,s),e.memoizedState=i.state,r&&Vw(e,n,!0),e.child}function Y_(t){var e=t.stateNode;e.pendingContext?jw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jw(t,e.context,!1),fv(t,e.containerInfo)}function rb(t,e,n,i,r){return Al(),ov(r),e.flags|=256,en(t,e,n,i),e.child}var Gg={dehydrated:null,treeContext:null,retryLane:0};function Xg(t){return{baseLanes:t,cachePool:null,transitions:null}}function G_(t,e,n){var i=e.pendingProps,r=at.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),et(at,r&1),t===null)return $g(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ip(o,i,0,null),t=to(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Xg(n),e.memoizedState=Gg,t):bv(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return eL(t,e,o,i,l,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,l=r.sibling;var a={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=a,e.deletions=null):(i=ys(r,a),i.subtreeFlags=r.subtreeFlags&14680064),l!==null?s=ys(l,s):(s=to(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Xg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Gg,i}return s=t.child,t=s.sibling,i=ys(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function bv(t,e){return e=ip({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jc(t,e,n,i){return i!==null&&ov(i),Il(e,t.child,null,n),t=bv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eL(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=om(Error($(422))),jc(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=ip({mode:"visible",children:i.children},r,0,null),s=to(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Il(e,t.child,null,o),e.child.memoizedState=Xg(o),e.memoizedState=Gg,s);if(!(e.mode&1))return jc(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var l=i.dgst;return i=l,s=Error($(419)),i=om(s,i,void 0),jc(t,e,o,i)}if(l=(o&t.childLanes)!==0,xn||l){if(i=Lt,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Tr(t,r),Ci(i,t,r,-1))}return Ev(),i=om(Error($(421))),jc(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=dL.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Vn=ds(r.nextSibling),Hn=e,ot=!0,Si=null,t!==null&&(Jn[Zn++]=kr,Jn[Zn++]=Cr,Jn[Zn++]=oo,kr=t.id,Cr=t.overflow,oo=e),e=bv(e,i.children),e.flags|=4096,e)}function sb(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Hg(t.return,e,n)}function lm(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function X_(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(en(t,e,i.children,n),i=at.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&sb(t,n,e);else if(t.tag===19)sb(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(et(at,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Ef(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),lm(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ef(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}lm(e,!0,n,null,s);break;case"together":lm(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Mh(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ao|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error($(153));if(e.child!==null){for(t=e.child,n=ys(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ys(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tL(t,e,n){switch(e.tag){case 3:Y_(e),Al();break;case 5:k_(e);break;case 1:En(e.type)&&bf(e);break;case 4:fv(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;et(kf,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(et(at,at.current&1),e.flags|=128,null):n&e.child.childLanes?G_(t,e,n):(et(at,at.current&1),t=Or(t,e,n),t!==null?t.sibling:null);et(at,at.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return X_(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),et(at,at.current),i)break;return null;case 22:case 23:return e.lanes=0,Q_(t,e,n)}return Or(t,e,n)}var J_,Jg,Z_,eE;J_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Jg=function(){};Z_=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Gs(nr.current);var s=null;switch(n){case"input":r=bg(t,r),i=bg(t,i),s=[];break;case"select":r=ht({},r,{value:void 0}),i=ht({},i,{value:void 0}),s=[];break;case"textarea":r=kg(t,r),i=kg(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=vf)}_g(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(au.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var a=i[u];if(l=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(au.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&tt("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};eE=function(t,e,n,i){n!==i&&(e.flags|=4)};function ma(t,e){if(!ot)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function nL(t,e,n){var i=e.pendingProps;switch(sv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(e),null;case 1:return En(e.type)&&wf(),Ht(e),null;case 3:return i=e.stateNode,Tl(),it(_n),it(Gt),pv(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(zc(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Si!==null&&(oy(Si),Si=null))),Jg(t,e),Ht(e),null;case 5:dv(e);var r=Gs(bu.current);if(n=e.type,t!==null&&e.stateNode!=null)Z_(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error($(166));return Ht(e),null}if(t=Gs(nr.current),zc(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Hi]=e,i[vu]=s,t=(e.mode&1)!==0,n){case"dialog":tt("cancel",i),tt("close",i);break;case"iframe":case"object":case"embed":tt("load",i);break;case"video":case"audio":for(r=0;r<Oa.length;r++)tt(Oa[r],i);break;case"source":tt("error",i);break;case"img":case"image":case"link":tt("error",i),tt("load",i);break;case"details":tt("toggle",i);break;case"input":pw(i,s),tt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},tt("invalid",i);break;case"textarea":gw(i,s),tt("invalid",i)}_g(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?i.textContent!==l&&(s.suppressHydrationWarning!==!0&&Fc(i.textContent,l,t),r=["children",l]):typeof l=="number"&&i.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Fc(i.textContent,l,t),r=["children",""+l]):au.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&tt("scroll",i)}switch(n){case"input":Oc(i),mw(i,s,!0);break;case"textarea":Oc(i),yw(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=vf)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=IC(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Hi]=e,t[vu]=i,J_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Eg(n,i),n){case"dialog":tt("cancel",t),tt("close",t),r=i;break;case"iframe":case"object":case"embed":tt("load",t),r=i;break;case"video":case"audio":for(r=0;r<Oa.length;r++)tt(Oa[r],t);r=i;break;case"source":tt("error",t),r=i;break;case"img":case"image":case"link":tt("error",t),tt("load",t),r=i;break;case"details":tt("toggle",t),r=i;break;case"input":pw(t,i),r=bg(t,i),tt("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=ht({},i,{value:void 0}),tt("invalid",t);break;case"textarea":gw(t,i),r=kg(t,i),tt("invalid",t);break;default:r=i}_g(n,r),l=r;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?DC(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&TC(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&uu(t,a):typeof a=="number"&&uu(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(au.hasOwnProperty(s)?a!=null&&s==="onScroll"&&tt("scroll",t):a!=null&&H0(t,s,a,o))}switch(n){case"input":Oc(t),mw(t,i,!1);break;case"textarea":Oc(t),yw(t);break;case"option":i.value!=null&&t.setAttribute("value",""+bs(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?al(t,!!i.multiple,s,!1):i.defaultValue!=null&&al(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=vf)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ht(e),null;case 6:if(t&&e.stateNode!=null)eE(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error($(166));if(n=Gs(bu.current),Gs(nr.current),zc(e)){if(i=e.stateNode,n=e.memoizedProps,i[Hi]=e,(s=i.nodeValue!==n)&&(t=Hn,t!==null))switch(t.tag){case 3:Fc(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Fc(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Hi]=e,e.stateNode=i}return Ht(e),null;case 13:if(it(at),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ot&&Vn!==null&&e.mode&1&&!(e.flags&128))v_(),Al(),e.flags|=98560,s=!1;else if(s=zc(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error($(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error($(317));s[Hi]=e}else Al(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ht(e),s=!1}else Si!==null&&(oy(Si),Si=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||at.current&1?Tt===0&&(Tt=3):Ev())),e.updateQueue!==null&&(e.flags|=4),Ht(e),null);case 4:return Tl(),Jg(t,e),t===null&&gu(e.stateNode.containerInfo),Ht(e),null;case 10:return uv(e.type._context),Ht(e),null;case 17:return En(e.type)&&wf(),Ht(e),null;case 19:if(it(at),s=e.memoizedState,s===null)return Ht(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)ma(s,!1);else{if(Tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ef(t),o!==null){for(e.flags|=128,ma(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return et(at,at.current&1|2),e.child}t=t.sibling}s.tail!==null&&yt()>Dl&&(e.flags|=128,i=!0,ma(s,!1),e.lanes=4194304)}else{if(!i)if(t=Ef(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ma(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ot)return Ht(e),null}else 2*yt()-s.renderingStartTime>Dl&&n!==1073741824&&(e.flags|=128,i=!0,ma(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=yt(),e.sibling=null,n=at.current,et(at,i?n&1|2:n&1),e):(Ht(e),null);case 22:case 23:return _v(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?zn&1073741824&&(Ht(e),e.subtreeFlags&6&&(e.flags|=8192)):Ht(e),null;case 24:return null;case 25:return null}throw Error($(156,e.tag))}function iL(t,e){switch(sv(e),e.tag){case 1:return En(e.type)&&wf(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Tl(),it(_n),it(Gt),pv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return dv(e),null;case 13:if(it(at),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error($(340));Al()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return it(at),null;case 4:return Tl(),null;case 10:return uv(e.type._context),null;case 22:case 23:return _v(),null;case 24:return null;default:return null}}var Vc=!1,qt=!1,rL=typeof WeakSet=="function"?WeakSet:Set,J=null;function tl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){dt(t,e,i)}else n.current=null}function Zg(t,e,n){try{n()}catch(i){dt(t,e,i)}}var ob=!1;function sL(t,e){if(Bg=mf,t=s_(),iv(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,c=0,h=t,f=null;t:for(;;){for(var d;h!==n||r!==0&&h.nodeType!==3||(l=o+r),h!==s||i!==0&&h.nodeType!==3||(a=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===t)break t;if(f===n&&++u===r&&(l=o),f===s&&++c===i&&(a=o),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Pg={focusedElem:t,selectionRange:n},mf=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,w=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:vi(e.type,g),w);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error($(163))}}catch(x){dt(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return p=ob,ob=!1,p}function Ya(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Zg(e,n,s)}r=r.next}while(r!==i)}}function tp(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function ey(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function tE(t){var e=t.alternate;e!==null&&(t.alternate=null,tE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Hi],delete e[vu],delete e[Ug],delete e[jR],delete e[VR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function nE(t){return t.tag===5||t.tag===3||t.tag===4}function lb(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||nE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ty(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=vf));else if(i!==4&&(t=t.child,t!==null))for(ty(t,e,n),t=t.sibling;t!==null;)ty(t,e,n),t=t.sibling}function ny(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(ny(t,e,n),t=t.sibling;t!==null;)ny(t,e,n),t=t.sibling}var Bt=null,wi=!1;function $r(t,e,n){for(n=n.child;n!==null;)iE(t,e,n),n=n.sibling}function iE(t,e,n){if(tr&&typeof tr.onCommitFiberUnmount=="function")try{tr.onCommitFiberUnmount(Qd,n)}catch{}switch(n.tag){case 5:qt||tl(n,e);case 6:var i=Bt,r=wi;Bt=null,$r(t,e,n),Bt=i,wi=r,Bt!==null&&(wi?(t=Bt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Bt.removeChild(n.stateNode));break;case 18:Bt!==null&&(wi?(t=Bt,n=n.stateNode,t.nodeType===8?em(t.parentNode,n):t.nodeType===1&&em(t,n),du(t)):em(Bt,n.stateNode));break;case 4:i=Bt,r=wi,Bt=n.stateNode.containerInfo,wi=!0,$r(t,e,n),Bt=i,wi=r;break;case 0:case 11:case 14:case 15:if(!qt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Zg(n,e,o),r=r.next}while(r!==i)}$r(t,e,n);break;case 1:if(!qt&&(tl(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(l){dt(n,e,l)}$r(t,e,n);break;case 21:$r(t,e,n);break;case 22:n.mode&1?(qt=(i=qt)||n.memoizedState!==null,$r(t,e,n),qt=i):$r(t,e,n);break;default:$r(t,e,n)}}function ab(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rL),e.forEach(function(i){var r=pL.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function yi(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Bt=l.stateNode,wi=!1;break e;case 3:Bt=l.stateNode.containerInfo,wi=!0;break e;case 4:Bt=l.stateNode.containerInfo,wi=!0;break e}l=l.return}if(Bt===null)throw Error($(160));iE(s,o,r),Bt=null,wi=!1;var a=r.alternate;a!==null&&(a.return=null),r.return=null}catch(u){dt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)rE(e,t),e=e.sibling}function rE(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(yi(e,t),Li(t),i&4){try{Ya(3,t,t.return),tp(3,t)}catch(g){dt(t,t.return,g)}try{Ya(5,t,t.return)}catch(g){dt(t,t.return,g)}}break;case 1:yi(e,t),Li(t),i&512&&n!==null&&tl(n,n.return);break;case 5:if(yi(e,t),Li(t),i&512&&n!==null&&tl(n,n.return),t.flags&32){var r=t.stateNode;try{uu(r,"")}catch(g){dt(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&EC(r,s),Eg(l,o);var u=Eg(l,s);for(o=0;o<a.length;o+=2){var c=a[o],h=a[o+1];c==="style"?DC(r,h):c==="dangerouslySetInnerHTML"?TC(r,h):c==="children"?uu(r,h):H0(r,c,h,u)}switch(l){case"input":Sg(r,s);break;case"textarea":AC(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?al(r,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?al(r,!!s.multiple,s.defaultValue,!0):al(r,!!s.multiple,s.multiple?[]:"",!1))}r[vu]=s}catch(g){dt(t,t.return,g)}}break;case 6:if(yi(e,t),Li(t),i&4){if(t.stateNode===null)throw Error($(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){dt(t,t.return,g)}}break;case 3:if(yi(e,t),Li(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{du(e.containerInfo)}catch(g){dt(t,t.return,g)}break;case 4:yi(e,t),Li(t);break;case 13:yi(e,t),Li(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(kv=yt())),i&4&&ab(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(qt=(u=qt)||c,yi(e,t),qt=u):yi(e,t),Li(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(J=t,c=t.child;c!==null;){for(h=J=c;J!==null;){switch(f=J,d=f.child,f.tag){case 0:case 11:case 14:case 15:Ya(4,f,f.return);break;case 1:tl(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){dt(i,n,g)}}break;case 5:tl(f,f.return);break;case 22:if(f.memoizedState!==null){cb(h);continue}}d!==null?(d.return=f,J=d):cb(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=h.stateNode,a=h.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=OC("display",o))}catch(g){dt(t,t.return,g)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){dt(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:yi(e,t),Li(t),i&4&&ab(t);break;case 21:break;default:yi(e,t),Li(t)}}function Li(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(nE(n)){var i=n;break e}n=n.return}throw Error($(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(uu(r,""),i.flags&=-33);var s=lb(t);ny(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,l=lb(t);ty(t,l,o);break;default:throw Error($(161))}}catch(a){dt(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oL(t,e,n){J=t,sE(t)}function sE(t,e,n){for(var i=(t.mode&1)!==0;J!==null;){var r=J,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Vc;if(!o){var l=r.alternate,a=l!==null&&l.memoizedState!==null||qt;l=Vc;var u=qt;if(Vc=o,(qt=a)&&!u)for(J=r;J!==null;)o=J,a=o.child,o.tag===22&&o.memoizedState!==null?hb(r):a!==null?(a.return=o,J=a):hb(r);for(;s!==null;)J=s,sE(s),s=s.sibling;J=r,Vc=l,qt=u}ub(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,J=s):ub(t)}}function ub(t){for(;J!==null;){var e=J;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qt||tp(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!qt)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:vi(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Qw(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Qw(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&du(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error($(163))}qt||e.flags&512&&ey(e)}catch(f){dt(e,e.return,f)}}if(e===t){J=null;break}if(n=e.sibling,n!==null){n.return=e.return,J=n;break}J=e.return}}function cb(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var n=e.sibling;if(n!==null){n.return=e.return,J=n;break}J=e.return}}function hb(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{tp(4,e)}catch(a){dt(e,n,a)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(a){dt(e,r,a)}}var s=e.return;try{ey(e)}catch(a){dt(e,s,a)}break;case 5:var o=e.return;try{ey(e)}catch(a){dt(e,o,a)}}}catch(a){dt(e,e.return,a)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var lL=Math.ceil,Tf=Lr.ReactCurrentDispatcher,Sv=Lr.ReactCurrentOwner,li=Lr.ReactCurrentBatchConfig,Le=0,Lt=null,xt=null,Ut=0,zn=0,nl=Ms(0),Tt=0,Cu=null,ao=0,np=0,xv=0,Ga=null,gn=null,kv=0,Dl=1/0,pr=null,Of=!1,iy=null,ms=null,$c=!1,rs=null,Df=0,Xa=0,ry=null,Rh=-1,Lh=0;function ln(){return Le&6?yt():Rh!==-1?Rh:Rh=yt()}function gs(t){return t.mode&1?Le&2&&Ut!==0?Ut&-Ut:HR.transition!==null?(Lh===0&&(Lh=$C()),Lh):(t=We,t!==0||(t=window.event,t=t===void 0?16:GC(t.type)),t):1}function Ci(t,e,n,i){if(50<Xa)throw Xa=0,ry=null,Error($(185));Ju(t,n,i),(!(Le&2)||t!==Lt)&&(t===Lt&&(!(Le&2)&&(np|=n),Tt===4&&ts(t,Ut)),An(t,i),n===1&&Le===0&&!(e.mode&1)&&(Dl=yt()+500,Jd&&Rs()))}function An(t,e){var n=t.callbackNode;HM(t,e);var i=pf(t,t===Lt?Ut:0);if(i===0)n!==null&&bw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&bw(n),e===1)t.tag===0?$R(fb.bind(null,t)):m_(fb.bind(null,t)),zR(function(){!(Le&6)&&Rs()}),n=null;else{switch(HC(i)){case 1:n=Y0;break;case 4:n=jC;break;case 16:n=df;break;case 536870912:n=VC;break;default:n=df}n=dE(n,oE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function oE(t,e){if(Rh=-1,Lh=0,Le&6)throw Error($(327));var n=t.callbackNode;if(dl()&&t.callbackNode!==n)return null;var i=pf(t,t===Lt?Ut:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=Mf(t,i);else{e=i;var r=Le;Le|=2;var s=aE();(Lt!==t||Ut!==e)&&(pr=null,Dl=yt()+500,eo(t,e));do try{cL();break}catch(l){lE(t,l)}while(!0);av(),Tf.current=s,Le=r,xt!==null?e=0:(Lt=null,Ut=0,e=Tt)}if(e!==0){if(e===2&&(r=Dg(t),r!==0&&(i=r,e=sy(t,r))),e===1)throw n=Cu,eo(t,0),ts(t,i),An(t,yt()),n;if(e===6)ts(t,i);else{if(r=t.current.alternate,!(i&30)&&!aL(r)&&(e=Mf(t,i),e===2&&(s=Dg(t),s!==0&&(i=s,e=sy(t,s))),e===1))throw n=Cu,eo(t,0),ts(t,i),An(t,yt()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error($(345));case 2:$s(t,gn,pr);break;case 3:if(ts(t,i),(i&130023424)===i&&(e=kv+500-yt(),10<e)){if(pf(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){ln(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=zg($s.bind(null,t,gn,pr),e);break}$s(t,gn,pr);break;case 4:if(ts(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-ki(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=yt()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*lL(i/1960))-i,10<i){t.timeoutHandle=zg($s.bind(null,t,gn,pr),i);break}$s(t,gn,pr);break;case 5:$s(t,gn,pr);break;default:throw Error($(329))}}}return An(t,yt()),t.callbackNode===n?oE.bind(null,t):null}function sy(t,e){var n=Ga;return t.current.memoizedState.isDehydrated&&(eo(t,e).flags|=256),t=Mf(t,e),t!==2&&(e=gn,gn=n,e!==null&&oy(e)),t}function oy(t){gn===null?gn=t:gn.push.apply(gn,t)}function aL(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!Ai(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ts(t,e){for(e&=~xv,e&=~np,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ki(e),i=1<<n;t[n]=-1,e&=~i}}function fb(t){if(Le&6)throw Error($(327));dl();var e=pf(t,0);if(!(e&1))return An(t,yt()),null;var n=Mf(t,e);if(t.tag!==0&&n===2){var i=Dg(t);i!==0&&(e=i,n=sy(t,i))}if(n===1)throw n=Cu,eo(t,0),ts(t,e),An(t,yt()),n;if(n===6)throw Error($(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$s(t,gn,pr),An(t,yt()),null}function Cv(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(Dl=yt()+500,Jd&&Rs())}}function uo(t){rs!==null&&rs.tag===0&&!(Le&6)&&dl();var e=Le;Le|=1;var n=li.transition,i=We;try{if(li.transition=null,We=1,t)return t()}finally{We=i,li.transition=n,Le=e,!(Le&6)&&Rs()}}function _v(){zn=nl.current,it(nl)}function eo(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,FR(n)),xt!==null)for(n=xt.return;n!==null;){var i=n;switch(sv(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&wf();break;case 3:Tl(),it(_n),it(Gt),pv();break;case 5:dv(i);break;case 4:Tl();break;case 13:it(at);break;case 19:it(at);break;case 10:uv(i.type._context);break;case 22:case 23:_v()}n=n.return}if(Lt=t,xt=t=ys(t.current,null),Ut=zn=e,Tt=0,Cu=null,xv=np=ao=0,gn=Ga=null,Ys!==null){for(e=0;e<Ys.length;e++)if(n=Ys[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Ys=null}return t}function lE(t,e){do{var n=xt;try{if(av(),Oh.current=If,Af){for(var i=ct.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}Af=!1}if(lo=0,Dt=_t=ct=null,Ka=!1,Su=0,Sv.current=null,n===null||n.return===null){Tt=1,Cu=e,xt=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Ut,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,c=l,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=Zw(o);if(d!==null){d.flags&=-257,eb(d,o,l,s,e),d.mode&1&&Jw(s,u,e),e=d,a=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(a),e.updateQueue=g}else p.add(a);break e}else{if(!(e&1)){Jw(s,u,e),Ev();break e}a=Error($(426))}}else if(ot&&l.mode&1){var w=Zw(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),eb(w,o,l,s,e),ov(Ol(a,l));break e}}s=a=Ol(a,l),Tt!==4&&(Tt=2),Ga===null?Ga=[s]:Ga.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=H_(s,a,e);qw(s,m);break e;case 1:l=a;var y=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(ms===null||!ms.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var x=W_(s,l,e);qw(s,x);break e}}s=s.return}while(s!==null)}cE(n)}catch(_){e=_,xt===n&&n!==null&&(xt=n=n.return);continue}break}while(!0)}function aE(){var t=Tf.current;return Tf.current=If,t===null?If:t}function Ev(){(Tt===0||Tt===3||Tt===2)&&(Tt=4),Lt===null||!(ao&268435455)&&!(np&268435455)||ts(Lt,Ut)}function Mf(t,e){var n=Le;Le|=2;var i=aE();(Lt!==t||Ut!==e)&&(pr=null,eo(t,e));do try{uL();break}catch(r){lE(t,r)}while(!0);if(av(),Le=n,Tf.current=i,xt!==null)throw Error($(261));return Lt=null,Ut=0,Tt}function uL(){for(;xt!==null;)uE(xt)}function cL(){for(;xt!==null&&!NM();)uE(xt)}function uE(t){var e=fE(t.alternate,t,zn);t.memoizedProps=t.pendingProps,e===null?cE(t):xt=e,Sv.current=null}function cE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=iL(n,e),n!==null){n.flags&=32767,xt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Tt=6,xt=null;return}}else if(n=nL(n,e,zn),n!==null){xt=n;return}if(e=e.sibling,e!==null){xt=e;return}xt=e=t}while(e!==null);Tt===0&&(Tt=5)}function $s(t,e,n){var i=We,r=li.transition;try{li.transition=null,We=1,hL(t,e,n,i)}finally{li.transition=r,We=i}return null}function hL(t,e,n,i){do dl();while(rs!==null);if(Le&6)throw Error($(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error($(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(WM(t,s),t===Lt&&(xt=Lt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$c||($c=!0,dE(df,function(){return dl(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=li.transition,li.transition=null;var o=We;We=1;var l=Le;Le|=4,Sv.current=null,sL(t,n),rE(n,t),DR(Pg),mf=!!Bg,Pg=Bg=null,t.current=n,oL(n),BM(),Le=l,We=o,li.transition=s}else t.current=n;if($c&&($c=!1,rs=t,Df=r),s=t.pendingLanes,s===0&&(ms=null),zM(n.stateNode),An(t,yt()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(Of)throw Of=!1,t=iy,iy=null,t;return Df&1&&t.tag!==0&&dl(),s=t.pendingLanes,s&1?t===ry?Xa++:(Xa=0,ry=t):Xa=0,Rs(),null}function dl(){if(rs!==null){var t=HC(Df),e=li.transition,n=We;try{if(li.transition=null,We=16>t?16:t,rs===null)var i=!1;else{if(t=rs,rs=null,Df=0,Le&6)throw Error($(331));var r=Le;for(Le|=4,J=t.current;J!==null;){var s=J,o=s.child;if(J.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(J=u;J!==null;){var c=J;switch(c.tag){case 0:case 11:case 15:Ya(8,c,s)}var h=c.child;if(h!==null)h.return=c,J=h;else for(;J!==null;){c=J;var f=c.sibling,d=c.return;if(tE(c),c===u){J=null;break}if(f!==null){f.return=d,J=f;break}J=d}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var w=g.sibling;g.sibling=null,g=w}while(g!==null)}}J=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,J=o;else e:for(;J!==null;){if(s=J,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ya(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,J=m;break e}J=s.return}}var y=t.current;for(J=y;J!==null;){o=J;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,J=v;else e:for(o=y;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:tp(9,l)}}catch(_){dt(l,l.return,_)}if(l===o){J=null;break e}var x=l.sibling;if(x!==null){x.return=l.return,J=x;break e}J=l.return}}if(Le=r,Rs(),tr&&typeof tr.onPostCommitFiberRoot=="function")try{tr.onPostCommitFiberRoot(Qd,t)}catch{}i=!0}return i}finally{We=n,li.transition=e}}return!1}function db(t,e,n){e=Ol(n,e),e=H_(t,e,1),t=ps(t,e,1),e=ln(),t!==null&&(Ju(t,1,e),An(t,e))}function dt(t,e,n){if(t.tag===3)db(t,t,n);else for(;e!==null;){if(e.tag===3){db(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ms===null||!ms.has(i))){t=Ol(n,t),t=W_(e,t,1),e=ps(e,t,1),t=ln(),e!==null&&(Ju(e,1,t),An(e,t));break}}e=e.return}}function fL(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=ln(),t.pingedLanes|=t.suspendedLanes&n,Lt===t&&(Ut&n)===n&&(Tt===4||Tt===3&&(Ut&130023424)===Ut&&500>yt()-kv?eo(t,0):xv|=n),An(t,e)}function hE(t,e){e===0&&(t.mode&1?(e=Rc,Rc<<=1,!(Rc&130023424)&&(Rc=4194304)):e=1);var n=ln();t=Tr(t,e),t!==null&&(Ju(t,e,n),An(t,n))}function dL(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hE(t,n)}function pL(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error($(314))}i!==null&&i.delete(e),hE(t,n)}var fE;fE=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||_n.current)xn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xn=!1,tL(t,e,n);xn=!!(t.flags&131072)}else xn=!1,ot&&e.flags&1048576&&g_(e,xf,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Mh(t,e),t=e.pendingProps;var r=El(e,Gt.current);fl(e,n),r=gv(null,e,i,t,r,n);var s=yv();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,En(i)?(s=!0,bf(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,hv(e),r.updater=ep,e.stateNode=r,r._reactInternals=e,qg(e,i,t,n),e=Yg(null,e,i,!0,s,n)):(e.tag=0,ot&&s&&rv(e),en(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Mh(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=gL(i),t=vi(i,t),r){case 0:e=Kg(null,e,i,t,n);break e;case 1:e=ib(null,e,i,t,n);break e;case 11:e=tb(null,e,i,t,n);break e;case 14:e=nb(null,e,i,vi(i.type,t),n);break e}throw Error($(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vi(i,r),Kg(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vi(i,r),ib(t,e,i,r,n);case 3:e:{if(Y_(e),t===null)throw Error($(387));i=e.pendingProps,s=e.memoizedState,r=s.element,x_(t,e),_f(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Ol(Error($(423)),e),e=rb(t,e,i,n,r);break e}else if(i!==r){r=Ol(Error($(424)),e),e=rb(t,e,i,n,r);break e}else for(Vn=ds(e.stateNode.containerInfo.firstChild),Hn=e,ot=!0,Si=null,n=b_(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Al(),i===r){e=Or(t,e,n);break e}en(t,e,i,n)}e=e.child}return e;case 5:return k_(e),t===null&&$g(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Fg(i,r)?o=null:s!==null&&Fg(i,s)&&(e.flags|=32),K_(t,e),en(t,e,o,n),e.child;case 6:return t===null&&$g(e),null;case 13:return G_(t,e,n);case 4:return fv(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Il(e,null,i,n):en(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vi(i,r),tb(t,e,i,r,n);case 7:return en(t,e,e.pendingProps,n),e.child;case 8:return en(t,e,e.pendingProps.children,n),e.child;case 12:return en(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,et(kf,i._currentValue),i._currentValue=o,s!==null)if(Ai(s.value,o)){if(s.children===r.children&&!_n.current){e=Or(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===i){if(s.tag===1){a=_r(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?a.next=a:(a.next=c.next,c.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Hg(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error($(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Hg(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}en(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,fl(e,n),r=hi(r),i=i(r),e.flags|=1,en(t,e,i,n),e.child;case 14:return i=e.type,r=vi(i,e.pendingProps),r=vi(i.type,r),nb(t,e,i,r,n);case 15:return q_(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:vi(i,r),Mh(t,e),e.tag=1,En(i)?(t=!0,bf(e)):t=!1,fl(e,n),$_(e,i,r),qg(e,i,r,n),Yg(null,e,i,!0,t,n);case 19:return X_(t,e,n);case 22:return Q_(t,e,n)}throw Error($(156,e.tag))};function dE(t,e){return UC(t,e)}function mL(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(t,e,n,i){return new mL(t,e,n,i)}function Av(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gL(t){if(typeof t=="function")return Av(t)?1:0;if(t!=null){if(t=t.$$typeof,t===q0)return 11;if(t===Q0)return 14}return 2}function ys(t,e){var n=t.alternate;return n===null?(n=ri(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nh(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")Av(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qo:return to(n.children,r,s,e);case W0:o=8,r|=8;break;case gg:return t=ri(12,n,e,r|2),t.elementType=gg,t.lanes=s,t;case yg:return t=ri(13,n,e,r),t.elementType=yg,t.lanes=s,t;case vg:return t=ri(19,n,e,r),t.elementType=vg,t.lanes=s,t;case kC:return ip(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case SC:o=10;break e;case xC:o=9;break e;case q0:o=11;break e;case Q0:o=14;break e;case Qr:o=16,i=null;break e}throw Error($(130,t==null?t:typeof t,""))}return e=ri(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function to(t,e,n,i){return t=ri(7,t,i,e),t.lanes=n,t}function ip(t,e,n,i){return t=ri(22,t,i,e),t.elementType=kC,t.lanes=n,t.stateNode={isHidden:!1},t}function am(t,e,n){return t=ri(6,t,null,e),t.lanes=n,t}function um(t,e,n){return e=ri(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yL(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$p(0),this.expirationTimes=$p(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$p(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Iv(t,e,n,i,r,s,o,l,a){return t=new yL(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ri(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},hv(s),t}function vL(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Wo,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function pE(t){if(!t)return Ss;t=t._reactInternals;e:{if(bo(t)!==t||t.tag!==1)throw Error($(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(En(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error($(171))}if(t.tag===1){var n=t.type;if(En(n))return p_(t,n,e)}return e}function mE(t,e,n,i,r,s,o,l,a){return t=Iv(n,i,!0,t,r,s,o,l,a),t.context=pE(null),n=t.current,i=ln(),r=gs(n),s=_r(i,r),s.callback=e??null,ps(n,s,r),t.current.lanes=r,Ju(t,r,i),An(t,i),t}function rp(t,e,n,i){var r=e.current,s=ln(),o=gs(r);return n=pE(n),e.context===null?e.context=n:e.pendingContext=n,e=_r(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ps(r,e,o),t!==null&&(Ci(t,r,o,s),Th(t,r,o)),o}function Rf(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function pb(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Tv(t,e){pb(t,e),(t=t.alternate)&&pb(t,e)}function wL(){return null}var gE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Ov(t){this._internalRoot=t}sp.prototype.render=Ov.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error($(409));rp(t,e,null,null)};sp.prototype.unmount=Ov.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;uo(function(){rp(null,t,null,null)}),e[Ir]=null}};function sp(t){this._internalRoot=t}sp.prototype.unstable_scheduleHydration=function(t){if(t){var e=QC();t={blockedOn:null,target:t,priority:e};for(var n=0;n<es.length&&e!==0&&e<es[n].priority;n++);es.splice(n,0,t),n===0&&YC(t)}};function Dv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function op(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function mb(){}function bL(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=Rf(o);s.call(u)}}var o=mE(e,i,t,0,null,!1,!1,"",mb);return t._reactRootContainer=o,t[Ir]=o.current,gu(t.nodeType===8?t.parentNode:t),uo(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var l=i;i=function(){var u=Rf(a);l.call(u)}}var a=Iv(t,0,!1,null,null,!1,!1,"",mb);return t._reactRootContainer=a,t[Ir]=a.current,gu(t.nodeType===8?t.parentNode:t),uo(function(){rp(e,a,n,i)}),a}function lp(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var l=r;r=function(){var a=Rf(o);l.call(a)}}rp(e,o,t,r)}else o=bL(n,e,t,r,i);return Rf(o)}WC=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ta(e.pendingLanes);n!==0&&(G0(e,n|1),An(e,yt()),!(Le&6)&&(Dl=yt()+500,Rs()))}break;case 13:uo(function(){var i=Tr(t,1);if(i!==null){var r=ln();Ci(i,t,1,r)}}),Tv(t,1)}};X0=function(t){if(t.tag===13){var e=Tr(t,134217728);if(e!==null){var n=ln();Ci(e,t,134217728,n)}Tv(t,134217728)}};qC=function(t){if(t.tag===13){var e=gs(t),n=Tr(t,e);if(n!==null){var i=ln();Ci(n,t,e,i)}Tv(t,e)}};QC=function(){return We};KC=function(t,e){var n=We;try{return We=t,e()}finally{We=n}};Ig=function(t,e,n){switch(e){case"input":if(Sg(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Xd(i);if(!r)throw Error($(90));_C(i),Sg(i,r)}}}break;case"textarea":AC(t,n);break;case"select":e=n.value,e!=null&&al(t,!!n.multiple,e,!1)}};LC=Cv;NC=uo;var SL={usingClientEntryPoint:!1,Events:[ec,Go,Xd,MC,RC,Cv]},ga={findFiberByHostInstance:Ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xL={bundleType:ga.bundleType,version:ga.version,rendererPackageName:ga.rendererPackageName,rendererConfig:ga.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=FC(t),t===null?null:t.stateNode},findFiberByHostInstance:ga.findFiberByHostInstance||wL,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{Qd=Hc.inject(xL),tr=Hc}catch{}}Kn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SL;Kn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Dv(e))throw Error($(200));return vL(t,e,null,n)};Kn.createRoot=function(t,e){if(!Dv(t))throw Error($(299));var n=!1,i="",r=gE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Iv(t,1,!1,null,null,n,!1,i,r),t[Ir]=e.current,gu(t.nodeType===8?t.parentNode:t),new Ov(e)};Kn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error($(188)):(t=Object.keys(t).join(","),Error($(268,t)));return t=FC(e),t=t===null?null:t.stateNode,t};Kn.flushSync=function(t){return uo(t)};Kn.hydrate=function(t,e,n){if(!op(e))throw Error($(200));return lp(null,t,e,!0,n)};Kn.hydrateRoot=function(t,e,n){if(!Dv(t))throw Error($(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=gE;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=mE(e,null,t,1,n??null,r,!1,s,o),t[Ir]=e.current,gu(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new sp(e)};Kn.render=function(t,e,n){if(!op(e))throw Error($(200));return lp(null,t,e,!1,n)};Kn.unmountComponentAtNode=function(t){if(!op(t))throw Error($(40));return t._reactRootContainer?(uo(function(){lp(null,null,t,!1,function(){t._reactRootContainer=null,t[Ir]=null})}),!0):!1};Kn.unstable_batchedUpdates=Cv;Kn.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!op(n))throw Error($(200));if(t==null||t._reactInternals===void 0)throw Error($(38));return lp(t,e,n,!1,i)};Kn.version="18.3.1-next-f1338f8080-20240426";function yE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(yE)}catch(t){console.error(t)}}yE(),yC.exports=Kn;var kL=yC.exports,gb=kL;pg.createRoot=gb.createRoot,pg.hydrateRoot=gb.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _u(){return _u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},_u.apply(this,arguments)}var ss;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ss||(ss={}));const yb="popstate";function CL(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:l}=i.location;return ly("",{pathname:s,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Lf(r)}return EL(e,n,null,t)}function pt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function _L(){return Math.random().toString(36).substr(2,8)}function vb(t,e){return{usr:t.state,key:t.key,idx:e}}function ly(t,e,n,i){return n===void 0&&(n=null),_u({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Gl(e):e,{state:n,key:e&&e.key||i||_L()})}function Lf(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Gl(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function EL(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,l=ss.Pop,a=null,u=c();u==null&&(u=0,o.replaceState(_u({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function h(){l=ss.Pop;let w=c(),m=w==null?null:w-u;u=w,a&&a({action:l,location:g.location,delta:m})}function f(w,m){l=ss.Push;let y=ly(g.location,w,m);u=c()+1;let v=vb(y,u),x=g.createHref(y);try{o.pushState(v,"",x)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;r.location.assign(x)}s&&a&&a({action:l,location:g.location,delta:1})}function d(w,m){l=ss.Replace;let y=ly(g.location,w,m);u=c();let v=vb(y,u),x=g.createHref(y);o.replaceState(v,"",x),s&&a&&a({action:l,location:g.location,delta:0})}function p(w){let m=r.location.origin!=="null"?r.location.origin:r.location.href,y=typeof w=="string"?w:Lf(w);return y=y.replace(/ $/,"%20"),pt(m,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,m)}let g={get action(){return l},get location(){return t(r,o)},listen(w){if(a)throw new Error("A history only accepts one active listener");return r.addEventListener(yb,h),a=w,()=>{r.removeEventListener(yb,h),a=null}},createHref(w){return e(r,w)},createURL:p,encodeLocation(w){let m=p(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:d,go(w){return o.go(w)}};return g}var wb;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(wb||(wb={}));function AL(t,e,n){return n===void 0&&(n="/"),IL(t,e,n)}function IL(t,e,n,i){let r=typeof e=="string"?Gl(e):e,s=Ml(r.pathname||"/",n);if(s==null)return null;let o=wE(t);TL(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=UL(s);l=FL(o[a],u)}return l}function wE(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,l)=>{let a={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};a.relativePath.startsWith("/")&&(pt(a.relativePath.startsWith(i),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(i.length));let u=vs([i,a.relativePath]),c=n.concat(a);s.children&&s.children.length>0&&(pt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),wE(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:BL(u,s.index),routesMeta:c})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))r(s,o);else for(let a of bE(s.path))r(s,o,a)}),e}function bE(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=bE(i.join("/")),l=[];return l.push(...o.map(a=>a===""?s:[s,a].join("/"))),r&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function TL(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:PL(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const OL=/^:[\w-]+$/,DL=3,ML=2,RL=1,LL=10,NL=-2,bb=t=>t==="*";function BL(t,e){let n=t.split("/"),i=n.length;return n.some(bb)&&(i+=NL),e&&(i+=ML),n.filter(r=>!bb(r)).reduce((r,s)=>r+(OL.test(s)?DL:s===""?RL:LL),i)}function PL(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function FL(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let l=0;l<i.length;++l){let a=i[l],u=l===i.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=ay({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},c),f=a.route;if(!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:vs([s,h.pathname]),pathnameBase:HL(vs([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=vs([s,h.pathnameBase]))}return o}function ay(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=zL(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((u,c,h)=>{let{paramName:f,isOptional:d}=c;if(f==="*"){let g=l[h]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const p=l[h];return d&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function zL(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),vE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(i.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function UL(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ml(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function jL(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Gl(t):t;return{pathname:n?n.startsWith("/")?n:VL(n,e):e,search:WL(i),hash:qL(r)}}function VL(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function cm(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function $L(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function SE(t,e){let n=$L(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function xE(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=Gl(t):(r=_u({},t),pt(!r.pathname||!r.pathname.includes("?"),cm("?","pathname","search",r)),pt(!r.pathname||!r.pathname.includes("#"),cm("#","pathname","hash",r)),pt(!r.search||!r.search.includes("#"),cm("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,l;if(o==null)l=n;else{let h=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?e[h]:"/"}let a=jL(r,l),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||c)&&(a.pathname+="/"),a}const vs=t=>t.join("/").replace(/\/\/+/g,"/"),HL=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),WL=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,qL=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function QL(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const kE=["post","put","patch","delete"];new Set(kE);const KL=["get",...kE];new Set(KL);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Eu(){return Eu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Eu.apply(this,arguments)}const ap=R.createContext(null),CE=R.createContext(null),Ls=R.createContext(null),up=R.createContext(null),So=R.createContext({outlet:null,matches:[],isDataRoute:!1}),_E=R.createContext(null);function YL(t,e){let{relative:n}=e===void 0?{}:e;nc()||pt(!1);let{basename:i,navigator:r}=R.useContext(Ls),{hash:s,pathname:o,search:l}=cp(t,{relative:n}),a=o;return i!=="/"&&(a=o==="/"?i:vs([i,o])),r.createHref({pathname:a,search:l,hash:s})}function nc(){return R.useContext(up)!=null}function ic(){return nc()||pt(!1),R.useContext(up).location}function EE(t){R.useContext(Ls).static||R.useLayoutEffect(t)}function GL(){let{isDataRoute:t}=R.useContext(So);return t?uN():XL()}function XL(){nc()||pt(!1);let t=R.useContext(ap),{basename:e,future:n,navigator:i}=R.useContext(Ls),{matches:r}=R.useContext(So),{pathname:s}=ic(),o=JSON.stringify(SE(r,n.v7_relativeSplatPath)),l=R.useRef(!1);return EE(()=>{l.current=!0}),R.useCallback(function(u,c){if(c===void 0&&(c={}),!l.current)return;if(typeof u=="number"){i.go(u);return}let h=xE(u,JSON.parse(o),s,c.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:vs([e,h.pathname])),(c.replace?i.replace:i.push)(h,c.state,c)},[e,i,o,s,t])}function cp(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=R.useContext(Ls),{matches:r}=R.useContext(So),{pathname:s}=ic(),o=JSON.stringify(SE(r,i.v7_relativeSplatPath));return R.useMemo(()=>xE(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function JL(t,e){return ZL(t,e)}function ZL(t,e,n,i){nc()||pt(!1);let{navigator:r}=R.useContext(Ls),{matches:s}=R.useContext(So),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let a=o?o.pathnameBase:"/";o&&o.route;let u=ic(),c;if(e){var h;let w=typeof e=="string"?Gl(e):e;a==="/"||(h=w.pathname)!=null&&h.startsWith(a)||pt(!1),c=w}else c=u;let f=c.pathname||"/",d=f;if(a!=="/"){let w=a.replace(/^\//,"").split("/");d="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=AL(t,{pathname:d}),g=rN(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:vs([a,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?a:vs([a,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,i);return e&&g?R.createElement(up.Provider,{value:{location:Eu({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:ss.Pop}},g):g}function eN(){let t=aN(),e=QL(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:r},n):null,null)}const tN=R.createElement(eN,null);class nN extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(So.Provider,{value:this.props.routeContext},R.createElement(_E.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iN(t){let{routeContext:e,match:n,children:i}=t,r=R.useContext(ap);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(So.Provider,{value:e},i)}function rN(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(r=n)==null?void 0:r.errors;if(l!=null){let c=o.findIndex(h=>h.route.id&&(l==null?void 0:l[h.route.id])!==void 0);c>=0||pt(!1),o=o.slice(0,Math.min(o.length,c+1))}let a=!1,u=-1;if(n&&i&&i.v7_partialHydration)for(let c=0;c<o.length;c++){let h=o[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:f,errors:d}=n,p=h.route.loader&&f[h.route.id]===void 0&&(!d||d[h.route.id]===void 0);if(h.route.lazy||p){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,h,f)=>{let d,p=!1,g=null,w=null;n&&(d=l&&h.route.id?l[h.route.id]:void 0,g=h.route.errorElement||tN,a&&(u<0&&f===0?(cN("route-fallback"),p=!0,w=null):u===f&&(p=!0,w=h.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),y=()=>{let v;return d?v=g:p?v=w:h.route.Component?v=R.createElement(h.route.Component,null):h.route.element?v=h.route.element:v=c,R.createElement(iN,{match:h,routeContext:{outlet:c,matches:m,isDataRoute:n!=null},children:v})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?R.createElement(nN,{location:n.location,revalidation:n.revalidation,component:g,error:d,children:y(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):y()},null)}var AE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(AE||{}),IE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(IE||{});function sN(t){let e=R.useContext(ap);return e||pt(!1),e}function oN(t){let e=R.useContext(CE);return e||pt(!1),e}function lN(t){let e=R.useContext(So);return e||pt(!1),e}function TE(t){let e=lN(),n=e.matches[e.matches.length-1];return n.route.id||pt(!1),n.route.id}function aN(){var t;let e=R.useContext(_E),n=oN(),i=TE();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function uN(){let{router:t}=sN(AE.UseNavigateStable),e=TE(IE.UseNavigateStable),n=R.useRef(!1);return EE(()=>{n.current=!0}),R.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,Eu({fromRouteId:e},s)))},[t,e])}const Sb={};function cN(t,e,n){Sb[t]||(Sb[t]=!0)}function hN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Bh(t){pt(!1)}function fN(t){let{basename:e="/",children:n=null,location:i,navigationType:r=ss.Pop,navigator:s,static:o=!1,future:l}=t;nc()&&pt(!1);let a=e.replace(/^\/*/,"/"),u=R.useMemo(()=>({basename:a,navigator:s,static:o,future:Eu({v7_relativeSplatPath:!1},l)}),[a,l,s,o]);typeof i=="string"&&(i=Gl(i));let{pathname:c="/",search:h="",hash:f="",state:d=null,key:p="default"}=i,g=R.useMemo(()=>{let w=Ml(c,a);return w==null?null:{location:{pathname:w,search:h,hash:f,state:d,key:p},navigationType:r}},[a,c,h,f,d,p,r]);return g==null?null:R.createElement(Ls.Provider,{value:u},R.createElement(up.Provider,{children:n,value:g}))}function dN(t){let{children:e,location:n}=t;return JL(uy(e),n)}new Promise(()=>{});function uy(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(i,r)=>{if(!R.isValidElement(i))return;let s=[...e,r];if(i.type===R.Fragment){n.push.apply(n,uy(i.props.children,s));return}i.type!==Bh&&pt(!1),!i.props.index||!i.props.children||pt(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=uy(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Nf(){return Nf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Nf.apply(this,arguments)}function OE(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function pN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function mN(t,e){return t.button===0&&(!e||e==="_self")&&!pN(t)}const gN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yN=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],vN="6";try{window.__reactRouterVersion=vN}catch{}const wN=R.createContext({isTransitioning:!1}),bN="startTransition",xb=fM[bN];function SN(t){let{basename:e,children:n,future:i,window:r}=t,s=R.useRef();s.current==null&&(s.current=CL({window:r,v5Compat:!0}));let o=s.current,[l,a]=R.useState({action:o.action,location:o.location}),{v7_startTransition:u}=i||{},c=R.useCallback(h=>{u&&xb?xb(()=>a(h)):a(h)},[a,u]);return R.useLayoutEffect(()=>o.listen(c),[o,c]),R.useEffect(()=>hN(i),[i]),R.createElement(fN,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:i})}const xN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",kN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,DE=R.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:l,target:a,to:u,preventScrollReset:c,viewTransition:h}=e,f=OE(e,gN),{basename:d}=R.useContext(Ls),p,g=!1;if(typeof u=="string"&&kN.test(u)&&(p=u,xN))try{let v=new URL(window.location.href),x=u.startsWith("//")?new URL(v.protocol+u):new URL(u),_=Ml(x.pathname,d);x.origin===v.origin&&_!=null?u=_+x.search+x.hash:g=!0}catch{}let w=YL(u,{relative:r}),m=_N(u,{replace:o,state:l,target:a,preventScrollReset:c,relative:r,viewTransition:h});function y(v){i&&i(v),v.defaultPrevented||m(v)}return R.createElement("a",Nf({},f,{href:p||w,onClick:g||s?i:y,ref:n,target:a}))}),kb=R.forwardRef(function(e,n){let{"aria-current":i="page",caseSensitive:r=!1,className:s="",end:o=!1,style:l,to:a,viewTransition:u,children:c}=e,h=OE(e,yN),f=cp(a,{relative:h.relative}),d=ic(),p=R.useContext(CE),{navigator:g,basename:w}=R.useContext(Ls),m=p!=null&&EN(f)&&u===!0,y=g.encodeLocation?g.encodeLocation(f).pathname:f.pathname,v=d.pathname,x=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(v=v.toLowerCase(),x=x?x.toLowerCase():null,y=y.toLowerCase()),x&&w&&(x=Ml(x,w)||x);const _=y!=="/"&&y.endsWith("/")?y.length-1:y.length;let b=v===y||!o&&v.startsWith(y)&&v.charAt(_)==="/",I=x!=null&&(x===y||!o&&x.startsWith(y)&&x.charAt(y.length)==="/"),D={isActive:b,isPending:I,isTransitioning:m},F=b?i:void 0,A;typeof s=="function"?A=s(D):A=[s,b?"active":null,I?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let B=typeof l=="function"?l(D):l;return R.createElement(DE,Nf({},h,{"aria-current":F,className:A,ref:n,style:B,to:a,viewTransition:u}),typeof c=="function"?c(D):c)});var cy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cy||(cy={}));var Cb;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Cb||(Cb={}));function CN(t){let e=R.useContext(ap);return e||pt(!1),e}function _N(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,a=GL(),u=ic(),c=cp(t,{relative:o});return R.useCallback(h=>{if(mN(h,n)){h.preventDefault();let f=i!==void 0?i:Lf(u)===Lf(c);a(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:l})}},[u,a,c,i,r,n,t,s,o,l])}function EN(t,e){e===void 0&&(e={});let n=R.useContext(wN);n==null&&pt(!1);let{basename:i}=CN(cy.useViewTransitionState),r=cp(t,{relative:e.relative});if(!n.isTransitioning)return!1;let s=Ml(n.currentLocation.pathname,i)||n.currentLocation.pathname,o=Ml(n.nextLocation.pathname,i)||n.nextLocation.pathname;return ay(r.pathname,o)!=null||ay(r.pathname,s)!=null}function AN(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const IN=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,TN=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,ON={};function _b(t,e){return(ON.jsx?TN:IN).test(t)}const DN=/[ \t\n\f\r]/g;function MN(t){return typeof t=="object"?t.type==="text"?Eb(t.value):!1:Eb(t)}function Eb(t){return t.replace(DN,"")===""}let rc=class{constructor(e,n,i){this.normal=n,this.property=e,i&&(this.space=i)}};rc.prototype.normal={};rc.prototype.property={};rc.prototype.space=void 0;function ME(t,e){const n={},i={};for(const r of t)Object.assign(n,r.property),Object.assign(i,r.normal);return new rc(n,i,e)}function hy(t){return t.toLowerCase()}class Dn{constructor(e,n){this.attribute=n,this.property=e}}Dn.prototype.attribute="";Dn.prototype.booleanish=!1;Dn.prototype.boolean=!1;Dn.prototype.commaOrSpaceSeparated=!1;Dn.prototype.commaSeparated=!1;Dn.prototype.defined=!1;Dn.prototype.mustUseProperty=!1;Dn.prototype.number=!1;Dn.prototype.overloadedBoolean=!1;Dn.prototype.property="";Dn.prototype.spaceSeparated=!1;Dn.prototype.space=void 0;let RN=0;const be=xo(),bt=xo(),fy=xo(),H=xo(),Ze=xo(),pl=xo(),Pn=xo();function xo(){return 2**++RN}const dy=Object.freeze(Object.defineProperty({__proto__:null,boolean:be,booleanish:bt,commaOrSpaceSeparated:Pn,commaSeparated:pl,number:H,overloadedBoolean:fy,spaceSeparated:Ze},Symbol.toStringTag,{value:"Module"})),hm=Object.keys(dy);class Mv extends Dn{constructor(e,n,i,r){let s=-1;if(super(e,n),Ab(this,"space",r),typeof i=="number")for(;++s<hm.length;){const o=hm[s];Ab(this,hm[s],(i&dy[o])===dy[o])}}}Mv.prototype.defined=!0;function Ab(t,e,n){n&&(t[e]=n)}function Xl(t){const e={},n={};for(const[i,r]of Object.entries(t.properties)){const s=new Mv(i,t.transform(t.attributes||{},i),r,t.space);t.mustUseProperty&&t.mustUseProperty.includes(i)&&(s.mustUseProperty=!0),e[i]=s,n[hy(i)]=i,n[hy(s.attribute)]=i}return new rc(e,n,t.space)}const RE=Xl({properties:{ariaActiveDescendant:null,ariaAtomic:bt,ariaAutoComplete:null,ariaBusy:bt,ariaChecked:bt,ariaColCount:H,ariaColIndex:H,ariaColSpan:H,ariaControls:Ze,ariaCurrent:null,ariaDescribedBy:Ze,ariaDetails:null,ariaDisabled:bt,ariaDropEffect:Ze,ariaErrorMessage:null,ariaExpanded:bt,ariaFlowTo:Ze,ariaGrabbed:bt,ariaHasPopup:null,ariaHidden:bt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Ze,ariaLevel:H,ariaLive:null,ariaModal:bt,ariaMultiLine:bt,ariaMultiSelectable:bt,ariaOrientation:null,ariaOwns:Ze,ariaPlaceholder:null,ariaPosInSet:H,ariaPressed:bt,ariaReadOnly:bt,ariaRelevant:null,ariaRequired:bt,ariaRoleDescription:Ze,ariaRowCount:H,ariaRowIndex:H,ariaRowSpan:H,ariaSelected:bt,ariaSetSize:H,ariaSort:null,ariaValueMax:H,ariaValueMin:H,ariaValueNow:H,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function LE(t,e){return e in t?t[e]:e}function NE(t,e){return LE(t,e.toLowerCase())}const LN=Xl({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:pl,acceptCharset:Ze,accessKey:Ze,action:null,allow:null,allowFullScreen:be,allowPaymentRequest:be,allowUserMedia:be,alt:null,as:null,async:be,autoCapitalize:null,autoComplete:Ze,autoFocus:be,autoPlay:be,blocking:Ze,capture:null,charSet:null,checked:be,cite:null,className:Ze,cols:H,colSpan:null,content:null,contentEditable:bt,controls:be,controlsList:Ze,coords:H|pl,crossOrigin:null,data:null,dateTime:null,decoding:null,default:be,defer:be,dir:null,dirName:null,disabled:be,download:fy,draggable:bt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:be,formTarget:null,headers:Ze,height:H,hidden:fy,high:H,href:null,hrefLang:null,htmlFor:Ze,httpEquiv:Ze,id:null,imageSizes:null,imageSrcSet:null,inert:be,inputMode:null,integrity:null,is:null,isMap:be,itemId:null,itemProp:Ze,itemRef:Ze,itemScope:be,itemType:Ze,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:be,low:H,manifest:null,max:null,maxLength:H,media:null,method:null,min:null,minLength:H,multiple:be,muted:be,name:null,nonce:null,noModule:be,noValidate:be,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:be,optimum:H,pattern:null,ping:Ze,placeholder:null,playsInline:be,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:be,referrerPolicy:null,rel:Ze,required:be,reversed:be,rows:H,rowSpan:H,sandbox:Ze,scope:null,scoped:be,seamless:be,selected:be,shadowRootClonable:be,shadowRootDelegatesFocus:be,shadowRootMode:null,shape:null,size:H,sizes:null,slot:null,span:H,spellCheck:bt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:H,step:null,style:null,tabIndex:H,target:null,title:null,translate:null,type:null,typeMustMatch:be,useMap:null,value:bt,width:H,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Ze,axis:null,background:null,bgColor:null,border:H,borderColor:null,bottomMargin:H,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:be,declare:be,event:null,face:null,frame:null,frameBorder:null,hSpace:H,leftMargin:H,link:null,longDesc:null,lowSrc:null,marginHeight:H,marginWidth:H,noResize:be,noHref:be,noShade:be,noWrap:be,object:null,profile:null,prompt:null,rev:null,rightMargin:H,rules:null,scheme:null,scrolling:bt,standby:null,summary:null,text:null,topMargin:H,valueType:null,version:null,vAlign:null,vLink:null,vSpace:H,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:be,disableRemotePlayback:be,prefix:null,property:null,results:H,security:null,unselectable:null},space:"html",transform:NE}),NN=Xl({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Pn,accentHeight:H,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:H,amplitude:H,arabicForm:null,ascent:H,attributeName:null,attributeType:null,azimuth:H,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:H,by:null,calcMode:null,capHeight:H,className:Ze,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:H,diffuseConstant:H,direction:null,display:null,dur:null,divisor:H,dominantBaseline:null,download:be,dx:null,dy:null,edgeMode:null,editable:null,elevation:H,enableBackground:null,end:null,event:null,exponent:H,externalResourcesRequired:null,fill:null,fillOpacity:H,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:pl,g2:pl,glyphName:pl,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:H,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:H,horizOriginX:H,horizOriginY:H,id:null,ideographic:H,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:H,k:H,k1:H,k2:H,k3:H,k4:H,kernelMatrix:Pn,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:H,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:H,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:H,overlineThickness:H,paintOrder:null,panose1:null,path:null,pathLength:H,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Ze,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:H,pointsAtY:H,pointsAtZ:H,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Pn,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Pn,rev:Pn,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Pn,requiredFeatures:Pn,requiredFonts:Pn,requiredFormats:Pn,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:H,specularExponent:H,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:H,strikethroughThickness:H,string:null,stroke:null,strokeDashArray:Pn,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:H,strokeOpacity:H,strokeWidth:null,style:null,surfaceScale:H,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Pn,tabIndex:H,tableValues:null,target:null,targetX:H,targetY:H,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Pn,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:H,underlineThickness:H,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:H,values:null,vAlphabetic:H,vMathematical:H,vectorEffect:null,vHanging:H,vIdeographic:H,version:null,vertAdvY:H,vertOriginX:H,vertOriginY:H,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:H,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:LE}),BE=Xl({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),PE=Xl({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:NE}),FE=Xl({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),BN={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},PN=/[A-Z]/g,Ib=/-[a-z]/g,FN=/^data[-\w.:]+$/i;function zN(t,e){const n=hy(e);let i=e,r=Dn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&FN.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Ib,jN);i="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Ib.test(s)){let o=s.replace(PN,UN);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}r=Mv}return new r(i,e)}function UN(t){return"-"+t.toLowerCase()}function jN(t){return t.charAt(1).toUpperCase()}const VN=ME([RE,LN,BE,PE,FE],"html"),Rv=ME([RE,NN,BE,PE,FE],"svg");function $N(t){return t.join(" ").trim()}var Lv={},Tb=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,HN=/\n/g,WN=/^\s*/,qN=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,QN=/^:\s*/,KN=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,YN=/^[;\s]*/,GN=/^\s+|\s+$/g,XN=`
`,Ob="/",Db="*",Ws="",JN="comment",ZN="declaration",eB=function(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,i=1;function r(p){var g=p.match(HN);g&&(n+=g.length);var w=p.lastIndexOf(XN);i=~w?p.length-w:i+p.length}function s(){var p={line:n,column:i};return function(g){return g.position=new o(p),u(),g}}function o(p){this.start=p,this.end={line:n,column:i},this.source=e.source}o.prototype.content=t;function l(p){var g=new Error(e.source+":"+n+":"+i+": "+p);if(g.reason=p,g.filename=e.source,g.line=n,g.column=i,g.source=t,!e.silent)throw g}function a(p){var g=p.exec(t);if(g){var w=g[0];return r(w),t=t.slice(w.length),g}}function u(){a(WN)}function c(p){var g;for(p=p||[];g=h();)g!==!1&&p.push(g);return p}function h(){var p=s();if(!(Ob!=t.charAt(0)||Db!=t.charAt(1))){for(var g=2;Ws!=t.charAt(g)&&(Db!=t.charAt(g)||Ob!=t.charAt(g+1));)++g;if(g+=2,Ws===t.charAt(g-1))return l("End of comment missing");var w=t.slice(2,g-2);return i+=2,r(w),t=t.slice(g),i+=2,p({type:JN,comment:w})}}function f(){var p=s(),g=a(qN);if(g){if(h(),!a(QN))return l("property missing ':'");var w=a(KN),m=p({type:ZN,property:Mb(g[0].replace(Tb,Ws)),value:w?Mb(w[0].replace(Tb,Ws)):Ws});return a(YN),m}}function d(){var p=[];c(p);for(var g;g=f();)g!==!1&&(p.push(g),c(p));return p}return u(),d()};function Mb(t){return t?t.replace(GN,Ws):Ws}var tB=uf&&uf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Lv,"__esModule",{value:!0});Lv.default=iB;var nB=tB(eB);function iB(t,e){var n=null;if(!t||typeof t!="string")return n;var i=(0,nB.default)(t),r=typeof e=="function";return i.forEach(function(s){if(s.type==="declaration"){var o=s.property,l=s.value;r?e(o,l,s):l&&(n=n||{},n[o]=l)}}),n}var hp={};Object.defineProperty(hp,"__esModule",{value:!0});hp.camelCase=void 0;var rB=/^--[a-zA-Z0-9_-]+$/,sB=/-([a-z])/g,oB=/^[^-]+$/,lB=/^-(webkit|moz|ms|o|khtml)-/,aB=/^-(ms)-/,uB=function(t){return!t||oB.test(t)||rB.test(t)},cB=function(t,e){return e.toUpperCase()},Rb=function(t,e){return"".concat(e,"-")},hB=function(t,e){return e===void 0&&(e={}),uB(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(aB,Rb):t=t.replace(lB,Rb),t.replace(sB,cB))};hp.camelCase=hB;var fB=uf&&uf.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},dB=fB(Lv),pB=hp;function py(t,e){var n={};return!t||typeof t!="string"||(0,dB.default)(t,function(i,r){i&&r&&(n[(0,pB.camelCase)(i,e)]=r)}),n}py.default=py;var mB=py;const gB=P0(mB),zE=UE("end"),Nv=UE("start");function UE(t){return e;function e(n){const i=n&&n.position&&n.position[t]||{};if(typeof i.line=="number"&&i.line>0&&typeof i.column=="number"&&i.column>0)return{line:i.line,column:i.column,offset:typeof i.offset=="number"&&i.offset>-1?i.offset:void 0}}}function yB(t){const e=Nv(t),n=zE(t);if(e&&n)return{start:e,end:n}}function Ja(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Lb(t.position):"start"in t||"end"in t?Lb(t):"line"in t||"column"in t?my(t):""}function my(t){return Nb(t&&t.line)+":"+Nb(t&&t.column)}function Lb(t){return my(t&&t.start)+"-"+my(t&&t.end)}function Nb(t){return t&&typeof t=="number"?t:1}class Jt extends Error{constructor(e,n,i){super(),typeof n=="string"&&(i=n,n=void 0);let r="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?r=e:!s.cause&&e&&(o=!0,r=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof i=="string"){const a=i.indexOf(":");a===-1?s.ruleId=i:(s.source=i.slice(0,a),s.ruleId=i.slice(a+1))}if(!s.place&&s.ancestors&&s.ancestors){const a=s.ancestors[s.ancestors.length-1];a&&(s.place=a.position)}const l=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=l?l.column:void 0,this.fatal=void 0,this.file="",this.message=r,this.line=l?l.line:void 0,this.name=Ja(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Jt.prototype.file="";Jt.prototype.name="";Jt.prototype.reason="";Jt.prototype.message="";Jt.prototype.stack="";Jt.prototype.column=void 0;Jt.prototype.line=void 0;Jt.prototype.ancestors=void 0;Jt.prototype.cause=void 0;Jt.prototype.fatal=void 0;Jt.prototype.place=void 0;Jt.prototype.ruleId=void 0;Jt.prototype.source=void 0;const Bv={}.hasOwnProperty,vB=new Map,wB=/[A-Z]/g,bB=new Set(["table","tbody","thead","tfoot","tr"]),SB=new Set(["td","th"]),jE="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function xB(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let i;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");i=OB(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");i=TB(n,e.jsx,e.jsxs)}const r={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:i,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?Rv:VN,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=VE(r,t,void 0);return s&&typeof s!="string"?s:r.create(t,r.Fragment,{children:s||void 0},void 0)}function VE(t,e,n){if(e.type==="element")return kB(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return CB(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return EB(t,e,n);if(e.type==="mdxjsEsm")return _B(t,e);if(e.type==="root")return AB(t,e,n);if(e.type==="text")return IB(t,e)}function kB(t,e,n){const i=t.schema;let r=i;e.tagName.toLowerCase()==="svg"&&i.space==="html"&&(r=Rv,t.schema=r),t.ancestors.push(e);const s=HE(t,e.tagName,!1),o=DB(t,e);let l=Fv(t,e);return bB.has(e.tagName)&&(l=l.filter(function(a){return typeof a=="string"?!MN(a):!0})),$E(t,o,s,e),Pv(o,l),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}function CB(t,e){if(e.data&&e.data.estree&&t.evaluater){const i=e.data.estree.body[0];return i.type,t.evaluater.evaluateExpression(i.expression)}Au(t,e.position)}function _B(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);Au(t,e.position)}function EB(t,e,n){const i=t.schema;let r=i;e.name==="svg"&&i.space==="html"&&(r=Rv,t.schema=r),t.ancestors.push(e);const s=e.name===null?t.Fragment:HE(t,e.name,!0),o=MB(t,e),l=Fv(t,e);return $E(t,o,s,e),Pv(o,l),t.ancestors.pop(),t.schema=i,t.create(e,s,o,n)}function AB(t,e,n){const i={};return Pv(i,Fv(t,e)),t.create(e,t.Fragment,i,n)}function IB(t,e){return e.value}function $E(t,e,n,i){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=i)}function Pv(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function TB(t,e,n){return i;function i(r,s,o,l){const u=Array.isArray(o.children)?n:e;return l?u(s,o,l):u(s,o)}}function OB(t,e){return n;function n(i,r,s,o){const l=Array.isArray(s.children),a=Nv(i);return e(r,s,o,l,{columnNumber:a?a.column-1:void 0,fileName:t,lineNumber:a?a.line:void 0},void 0)}}function DB(t,e){const n={};let i,r;for(r in e.properties)if(r!=="children"&&Bv.call(e.properties,r)){const s=RB(t,r,e.properties[r]);if(s){const[o,l]=s;t.tableCellAlignToStyle&&o==="align"&&typeof l=="string"&&SB.has(e.tagName)?i=l:n[o]=l}}if(i){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=i}return n}function MB(t,e){const n={};for(const i of e.attributes)if(i.type==="mdxJsxExpressionAttribute")if(i.data&&i.data.estree&&t.evaluater){const s=i.data.estree.body[0];s.type;const o=s.expression;o.type;const l=o.properties[0];l.type,Object.assign(n,t.evaluater.evaluateExpression(l.argument))}else Au(t,e.position);else{const r=i.name;let s;if(i.value&&typeof i.value=="object")if(i.value.data&&i.value.data.estree&&t.evaluater){const l=i.value.data.estree.body[0];l.type,s=t.evaluater.evaluateExpression(l.expression)}else Au(t,e.position);else s=i.value===null?!0:i.value;n[r]=s}return n}function Fv(t,e){const n=[];let i=-1;const r=t.passKeys?new Map:vB;for(;++i<e.children.length;){const s=e.children[i];let o;if(t.passKeys){const a=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(a){const u=r.get(a)||0;o=a+"-"+u,r.set(a,u+1)}}const l=VE(t,s,o);l!==void 0&&n.push(l)}return n}function RB(t,e,n){const i=zN(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=i.commaSeparated?AN(n):$N(n)),i.property==="style"){let r=typeof n=="object"?n:LB(t,String(n));return t.stylePropertyNameCase==="css"&&(r=NB(r)),["style",r]}return[t.elementAttributeNameCase==="react"&&i.space?BN[i.property]||i.property:i.attribute,n]}}function LB(t,e){try{return gB(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const i=n,r=new Jt("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:i,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw r.file=t.filePath||void 0,r.url=jE+"#cannot-parse-style-attribute",r}}function HE(t,e,n){let i;if(!n)i={type:"Literal",value:e};else if(e.includes(".")){const r=e.split(".");let s=-1,o;for(;++s<r.length;){const l=_b(r[s])?{type:"Identifier",name:r[s]}:{type:"Literal",value:r[s]};o=o?{type:"MemberExpression",object:o,property:l,computed:!!(s&&l.type==="Literal"),optional:!1}:l}i=o}else i=_b(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(i.type==="Literal"){const r=i.value;return Bv.call(t.components,r)?t.components[r]:r}if(t.evaluater)return t.evaluater.evaluateExpression(i);Au(t)}function Au(t,e){const n=new Jt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=jE+"#cannot-handle-mdx-estrees-without-createevaluater",n}function NB(t){const e={};let n;for(n in t)Bv.call(t,n)&&(e[BB(n)]=t[n]);return e}function BB(t){let e=t.replace(wB,PB);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function PB(t){return"-"+t.toLowerCase()}const fm={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},FB={};function zv(t,e){const n=FB,i=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,r=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return WE(t,i,r)}function WE(t,e,n){if(zB(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Bb(t.children,e,n)}return Array.isArray(t)?Bb(t,e,n):""}function Bb(t,e,n){const i=[];let r=-1;for(;++r<t.length;)i[r]=WE(t[r],e,n);return i.join("")}function zB(t){return!!(t&&typeof t=="object")}const Pb=document.createElement("i");function Uv(t){const e="&"+t+";";Pb.innerHTML=e;const n=Pb.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function Wn(t,e,n,i){const r=t.length;let s=0,o;if(e<0?e=-e>r?0:r+e:e=e>r?r:e,n=n>0?n:0,i.length<1e4)o=Array.from(i),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<i.length;)o=i.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function ei(t,e){return t.length>0?(Wn(t,t.length,0,e),t):e}const Fb={}.hasOwnProperty;function qE(t){const e={};let n=-1;for(;++n<t.length;)UB(e,t[n]);return e}function UB(t,e){let n;for(n in e){const r=(Fb.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){Fb.call(r,o)||(r[o]=[]);const l=s[o];jB(r[o],Array.isArray(l)?l:l?[l]:[])}}}function jB(t,e){let n=-1;const i=[];for(;++n<e.length;)(e[n].add==="after"?t:i).push(e[n]);Wn(t,0,0,i)}function QE(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function _i(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const nn=Ns(/[A-Za-z]/),Kt=Ns(/[\dA-Za-z]/),VB=Ns(/[#-'*+\--9=?A-Z^-~]/);function Bf(t){return t!==null&&(t<32||t===127)}const gy=Ns(/\d/),$B=Ns(/[\dA-Fa-f]/),HB=Ns(/[!-/:-@[-`{-~]/);function ie(t){return t!==null&&t<-2}function Ge(t){return t!==null&&(t<0||t===32)}function _e(t){return t===-2||t===-1||t===32}const fp=Ns(new RegExp("\\p{P}|\\p{S}","u")),co=Ns(/\s/);function Ns(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Jl(t){const e=[];let n=-1,i=0,r=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&Kt(t.charCodeAt(n+1))&&Kt(t.charCodeAt(n+2)))r=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const l=t.charCodeAt(n+1);s<56320&&l>56319&&l<57344?(o=String.fromCharCode(s,l),r=1):o="�"}else o=String.fromCharCode(s);o&&(e.push(t.slice(i,n),encodeURIComponent(o)),i=n+r+1,o=""),r&&(n+=r,r=0)}return e.join("")+t.slice(i)}function Te(t,e,n,i){const r=i?i-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(a){return _e(a)?(t.enter(n),l(a)):e(a)}function l(a){return _e(a)&&s++<r?(t.consume(a),l):(t.exit(n),e(a))}}const WB={tokenize:qB};function qB(t){const e=t.attempt(this.parser.constructs.contentInitial,i,r);let n;return e;function i(l){if(l===null){t.consume(l);return}return t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),Te(t,e,"linePrefix")}function r(l){return t.enter("paragraph"),s(l)}function s(l){const a=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=a),n=a,o(l)}function o(l){if(l===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(l);return}return ie(l)?(t.consume(l),t.exit("chunkText"),s):(t.consume(l),o)}}const QB={tokenize:KB},zb={tokenize:YB};function KB(t){const e=this,n=[];let i=0,r,s,o;return l;function l(v){if(i<n.length){const x=n[i];return e.containerState=x[1],t.attempt(x[0].continuation,a,u)(v)}return u(v)}function a(v){if(i++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,r&&y();const x=e.events.length;let _=x,b;for(;_--;)if(e.events[_][0]==="exit"&&e.events[_][1].type==="chunkFlow"){b=e.events[_][1].end;break}m(i);let I=x;for(;I<e.events.length;)e.events[I][1].end={...b},I++;return Wn(e.events,_+1,0,e.events.slice(x)),e.events.length=I,u(v)}return l(v)}function u(v){if(i===n.length){if(!r)return f(v);if(r.currentConstruct&&r.currentConstruct.concrete)return p(v);e.interrupt=!!(r.currentConstruct&&!r._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(zb,c,h)(v)}function c(v){return r&&y(),m(i),f(v)}function h(v){return e.parser.lazy[e.now().line]=i!==n.length,o=e.now().offset,p(v)}function f(v){return e.containerState={},t.attempt(zb,d,p)(v)}function d(v){return i++,n.push([e.currentConstruct,e.containerState]),f(v)}function p(v){if(v===null){r&&y(),m(0),t.consume(v);return}return r=r||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:r,contentType:"flow",previous:s}),g(v)}function g(v){if(v===null){w(t.exit("chunkFlow"),!0),m(0),t.consume(v);return}return ie(v)?(t.consume(v),w(t.exit("chunkFlow")),i=0,e.interrupt=void 0,l):(t.consume(v),g)}function w(v,x){const _=e.sliceStream(v);if(x&&_.push(null),v.previous=s,s&&(s.next=v),s=v,r.defineSkip(v.start),r.write(_),e.parser.lazy[v.start.line]){let b=r.events.length;for(;b--;)if(r.events[b][1].start.offset<o&&(!r.events[b][1].end||r.events[b][1].end.offset>o))return;const I=e.events.length;let D=I,F,A;for(;D--;)if(e.events[D][0]==="exit"&&e.events[D][1].type==="chunkFlow"){if(F){A=e.events[D][1].end;break}F=!0}for(m(i),b=I;b<e.events.length;)e.events[b][1].end={...A},b++;Wn(e.events,D+1,0,e.events.slice(I)),e.events.length=b}}function m(v){let x=n.length;for(;x-- >v;){const _=n[x];e.containerState=_[1],_[0].exit.call(e,t)}n.length=v}function y(){r.write([null]),s=void 0,r=void 0,e.containerState._closeFlow=void 0}}function YB(t,e,n){return Te(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function Rl(t){if(t===null||Ge(t)||co(t))return 1;if(fp(t))return 2}function dp(t,e,n){const i=[];let r=-1;for(;++r<t.length;){const s=t[r].resolveAll;s&&!i.includes(s)&&(e=s(e,n),i.push(s))}return e}const yy={name:"attention",resolveAll:GB,tokenize:XB};function GB(t,e){let n=-1,i,r,s,o,l,a,u,c;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(i=n;i--;)if(t[i][0]==="exit"&&t[i][1].type==="attentionSequence"&&t[i][1]._open&&e.sliceSerialize(t[i][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[i][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[i][1].end.offset-t[i][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;a=t[i][1].end.offset-t[i][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const h={...t[i][1].end},f={...t[n][1].start};Ub(h,-a),Ub(f,a),o={type:a>1?"strongSequence":"emphasisSequence",start:h,end:{...t[i][1].end}},l={type:a>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:f},s={type:a>1?"strongText":"emphasisText",start:{...t[i][1].end},end:{...t[n][1].start}},r={type:a>1?"strong":"emphasis",start:{...o.start},end:{...l.end}},t[i][1].end={...o.start},t[n][1].start={...l.end},u=[],t[i][1].end.offset-t[i][1].start.offset&&(u=ei(u,[["enter",t[i][1],e],["exit",t[i][1],e]])),u=ei(u,[["enter",r,e],["enter",o,e],["exit",o,e],["enter",s,e]]),u=ei(u,dp(e.parser.constructs.insideSpan.null,t.slice(i+1,n),e)),u=ei(u,[["exit",s,e],["enter",l,e],["exit",l,e],["exit",r,e]]),t[n][1].end.offset-t[n][1].start.offset?(c=2,u=ei(u,[["enter",t[n][1],e],["exit",t[n][1],e]])):c=0,Wn(t,i-1,n-i+3,u),n=i+u.length-c-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function XB(t,e){const n=this.parser.constructs.attentionMarkers.null,i=this.previous,r=Rl(i);let s;return o;function o(a){return s=a,t.enter("attentionSequence"),l(a)}function l(a){if(a===s)return t.consume(a),l;const u=t.exit("attentionSequence"),c=Rl(a),h=!c||c===2&&r||n.includes(a),f=!r||r===2&&c||n.includes(i);return u._open=!!(s===42?h:h&&(r||!f)),u._close=!!(s===42?f:f&&(c||!h)),e(a)}}function Ub(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const JB={name:"autolink",tokenize:ZB};function ZB(t,e,n){let i=0;return r;function r(d){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(d){return nn(d)?(t.consume(d),o):d===64?n(d):u(d)}function o(d){return d===43||d===45||d===46||Kt(d)?(i=1,l(d)):u(d)}function l(d){return d===58?(t.consume(d),i=0,a):(d===43||d===45||d===46||Kt(d))&&i++<32?(t.consume(d),l):(i=0,u(d))}function a(d){return d===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):d===null||d===32||d===60||Bf(d)?n(d):(t.consume(d),a)}function u(d){return d===64?(t.consume(d),c):VB(d)?(t.consume(d),u):n(d)}function c(d){return Kt(d)?h(d):n(d)}function h(d){return d===46?(t.consume(d),i=0,c):d===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(d),t.exit("autolinkMarker"),t.exit("autolink"),e):f(d)}function f(d){if((d===45||Kt(d))&&i++<63){const p=d===45?f:h;return t.consume(d),p}return n(d)}}const sc={partial:!0,tokenize:eP};function eP(t,e,n){return i;function i(s){return _e(s)?Te(t,r,"linePrefix")(s):r(s)}function r(s){return s===null||ie(s)?e(s):n(s)}}const KE={continuation:{tokenize:nP},exit:iP,name:"blockQuote",tokenize:tP};function tP(t,e,n){const i=this;return r;function r(o){if(o===62){const l=i.containerState;return l.open||(t.enter("blockQuote",{_container:!0}),l.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return _e(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function nP(t,e,n){const i=this;return r;function r(o){return _e(o)?Te(t,s,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(KE,e,n)(o)}}function iP(t){t.exit("blockQuote")}const YE={name:"characterEscape",tokenize:rP};function rP(t,e,n){return i;function i(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),r}function r(s){return HB(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const GE={name:"characterReference",tokenize:sP};function sP(t,e,n){const i=this;let r=0,s,o;return l;function l(h){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),a}function a(h){return h===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(h),t.exit("characterReferenceMarkerNumeric"),u):(t.enter("characterReferenceValue"),s=31,o=Kt,c(h))}function u(h){return h===88||h===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(h),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=$B,c):(t.enter("characterReferenceValue"),s=7,o=gy,c(h))}function c(h){if(h===59&&r){const f=t.exit("characterReferenceValue");return o===Kt&&!Uv(i.sliceSerialize(f))?n(h):(t.enter("characterReferenceMarker"),t.consume(h),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(h)&&r++<s?(t.consume(h),c):n(h)}}const jb={partial:!0,tokenize:lP},Vb={concrete:!0,name:"codeFenced",tokenize:oP};function oP(t,e,n){const i=this,r={partial:!0,tokenize:_};let s=0,o=0,l;return a;function a(b){return u(b)}function u(b){const I=i.events[i.events.length-1];return s=I&&I[1].type==="linePrefix"?I[2].sliceSerialize(I[1],!0).length:0,l=b,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),c(b)}function c(b){return b===l?(o++,t.consume(b),c):o<3?n(b):(t.exit("codeFencedFenceSequence"),_e(b)?Te(t,h,"whitespace")(b):h(b))}function h(b){return b===null||ie(b)?(t.exit("codeFencedFence"),i.interrupt?e(b):t.check(jb,g,x)(b)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),f(b))}function f(b){return b===null||ie(b)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),h(b)):_e(b)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Te(t,d,"whitespace")(b)):b===96&&b===l?n(b):(t.consume(b),f)}function d(b){return b===null||ie(b)?h(b):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),p(b))}function p(b){return b===null||ie(b)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),h(b)):b===96&&b===l?n(b):(t.consume(b),p)}function g(b){return t.attempt(r,x,w)(b)}function w(b){return t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),m}function m(b){return s>0&&_e(b)?Te(t,y,"linePrefix",s+1)(b):y(b)}function y(b){return b===null||ie(b)?t.check(jb,g,x)(b):(t.enter("codeFlowValue"),v(b))}function v(b){return b===null||ie(b)?(t.exit("codeFlowValue"),y(b)):(t.consume(b),v)}function x(b){return t.exit("codeFenced"),e(b)}function _(b,I,D){let F=0;return A;function A(U){return b.enter("lineEnding"),b.consume(U),b.exit("lineEnding"),B}function B(U){return b.enter("codeFencedFence"),_e(U)?Te(b,N,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(U):N(U)}function N(U){return U===l?(b.enter("codeFencedFenceSequence"),W(U)):D(U)}function W(U){return U===l?(F++,b.consume(U),W):F>=o?(b.exit("codeFencedFenceSequence"),_e(U)?Te(b,K,"whitespace")(U):K(U)):D(U)}function K(U){return U===null||ie(U)?(b.exit("codeFencedFence"),I(U)):D(U)}}}function lP(t,e,n){const i=this;return r;function r(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return i.parser.lazy[i.now().line]?n(o):e(o)}}const dm={name:"codeIndented",tokenize:uP},aP={partial:!0,tokenize:cP};function uP(t,e,n){const i=this;return r;function r(u){return t.enter("codeIndented"),Te(t,s,"linePrefix",5)(u)}function s(u){const c=i.events[i.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(u):n(u)}function o(u){return u===null?a(u):ie(u)?t.attempt(aP,o,a)(u):(t.enter("codeFlowValue"),l(u))}function l(u){return u===null||ie(u)?(t.exit("codeFlowValue"),o(u)):(t.consume(u),l)}function a(u){return t.exit("codeIndented"),e(u)}}function cP(t,e,n){const i=this;return r;function r(o){return i.parser.lazy[i.now().line]?n(o):ie(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),r):Te(t,s,"linePrefix",5)(o)}function s(o){const l=i.events[i.events.length-1];return l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):ie(o)?r(o):n(o)}}const hP={name:"codeText",previous:dP,resolve:fP,tokenize:pP};function fP(t){let e=t.length-4,n=3,i,r;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(i=n;++i<e;)if(t[i][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(i=n-1,e++;++i<=e;)r===void 0?i!==e&&t[i][1].type!=="lineEnding"&&(r=i):(i===e||t[i][1].type==="lineEnding")&&(t[r][1].type="codeTextData",i!==r+2&&(t[r][1].end=t[i-1][1].end,t.splice(r+2,i-r-2),e-=i-r-2,i=r+2),r=void 0);return t}function dP(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function pP(t,e,n){let i=0,r,s;return o;function o(h){return t.enter("codeText"),t.enter("codeTextSequence"),l(h)}function l(h){return h===96?(t.consume(h),i++,l):(t.exit("codeTextSequence"),a(h))}function a(h){return h===null?n(h):h===32?(t.enter("space"),t.consume(h),t.exit("space"),a):h===96?(s=t.enter("codeTextSequence"),r=0,c(h)):ie(h)?(t.enter("lineEnding"),t.consume(h),t.exit("lineEnding"),a):(t.enter("codeTextData"),u(h))}function u(h){return h===null||h===32||h===96||ie(h)?(t.exit("codeTextData"),a(h)):(t.consume(h),u)}function c(h){return h===96?(t.consume(h),r++,c):r===i?(t.exit("codeTextSequence"),t.exit("codeText"),e(h)):(s.type="codeTextData",u(h))}}class mP{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const i=n??Number.POSITIVE_INFINITY;return i<this.left.length?this.left.slice(e,i):e>this.left.length?this.right.slice(this.right.length-i+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-i+this.left.length).reverse())}splice(e,n,i){const r=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-r,Number.POSITIVE_INFINITY);return i&&ya(this.left,i),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),ya(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),ya(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);ya(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);ya(this.left,n.reverse())}}}function ya(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function XE(t){const e={};let n=-1,i,r,s,o,l,a,u;const c=new mP(t);for(;++n<c.length;){for(;n in e;)n=e[n];if(i=c.get(n),n&&i[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(a=i[1]._tokenizer.events,s=0,s<a.length&&a[s][1].type==="lineEndingBlank"&&(s+=2),s<a.length&&a[s][1].type==="content"))for(;++s<a.length&&a[s][1].type!=="content";)a[s][1].type==="chunkText"&&(a[s][1]._isInFirstContentOfListItem=!0,s++);if(i[0]==="enter")i[1].contentType&&(Object.assign(e,gP(c,n)),n=e[n],u=!0);else if(i[1]._container){for(s=n,r=void 0;s--;)if(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(r&&(c.get(r)[1].type="lineEndingBlank"),o[1].type="lineEnding",r=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;r&&(i[1].end={...c.get(r)[1].start},l=c.slice(r,n),l.unshift(i),c.splice(r,n-r+1,l))}}return Wn(t,0,Number.POSITIVE_INFINITY,c.slice(0)),!u}function gP(t,e){const n=t.get(e)[1],i=t.get(e)[2];let r=e-1;const s=[];let o=n._tokenizer;o||(o=i.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const l=o.events,a=[],u={};let c,h,f=-1,d=n,p=0,g=0;const w=[g];for(;d;){for(;t.get(++r)[1]!==d;);s.push(r),d._tokenizer||(c=i.sliceStream(d),d.next||c.push(null),h&&o.defineSkip(d.start),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),d._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),h=d,d=d.next}for(d=n;++f<l.length;)l[f][0]==="exit"&&l[f-1][0]==="enter"&&l[f][1].type===l[f-1][1].type&&l[f][1].start.line!==l[f][1].end.line&&(g=f+1,w.push(g),d._tokenizer=void 0,d.previous=void 0,d=d.next);for(o.events=[],d?(d._tokenizer=void 0,d.previous=void 0):w.pop(),f=w.length;f--;){const m=l.slice(w[f],w[f+1]),y=s.pop();a.push([y,y+m.length-1]),t.splice(y,2,m)}for(a.reverse(),f=-1;++f<a.length;)u[p+a[f][0]]=p+a[f][1],p+=a[f][1]-a[f][0]-1;return u}const yP={resolve:wP,tokenize:bP},vP={partial:!0,tokenize:SP};function wP(t){return XE(t),t}function bP(t,e){let n;return i;function i(l){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),r(l)}function r(l){return l===null?s(l):ie(l)?t.check(vP,o,s)(l):(t.consume(l),r)}function s(l){return t.exit("chunkContent"),t.exit("content"),e(l)}function o(l){return t.consume(l),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,r}}function SP(t,e,n){const i=this;return r;function r(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Te(t,s,"linePrefix")}function s(o){if(o===null||ie(o))return n(o);const l=i.events[i.events.length-1];return!i.parser.constructs.disable.null.includes("codeIndented")&&l&&l[1].type==="linePrefix"&&l[2].sliceSerialize(l[1],!0).length>=4?e(o):t.interrupt(i.parser.constructs.flow,n,e)(o)}}function JE(t,e,n,i,r,s,o,l,a){const u=a||Number.POSITIVE_INFINITY;let c=0;return h;function h(m){return m===60?(t.enter(i),t.enter(r),t.enter(s),t.consume(m),t.exit(s),f):m===null||m===32||m===41||Bf(m)?n(m):(t.enter(i),t.enter(o),t.enter(l),t.enter("chunkString",{contentType:"string"}),g(m))}function f(m){return m===62?(t.enter(s),t.consume(m),t.exit(s),t.exit(r),t.exit(i),e):(t.enter(l),t.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===62?(t.exit("chunkString"),t.exit(l),f(m)):m===null||m===60||ie(m)?n(m):(t.consume(m),m===92?p:d)}function p(m){return m===60||m===62||m===92?(t.consume(m),d):d(m)}function g(m){return!c&&(m===null||m===41||Ge(m))?(t.exit("chunkString"),t.exit(l),t.exit(o),t.exit(i),e(m)):c<u&&m===40?(t.consume(m),c++,g):m===41?(t.consume(m),c--,g):m===null||m===32||m===40||Bf(m)?n(m):(t.consume(m),m===92?w:g)}function w(m){return m===40||m===41||m===92?(t.consume(m),g):g(m)}}function ZE(t,e,n,i,r,s){const o=this;let l=0,a;return u;function u(d){return t.enter(i),t.enter(r),t.consume(d),t.exit(r),t.enter(s),c}function c(d){return l>999||d===null||d===91||d===93&&!a||d===94&&!l&&"_hiddenFootnoteSupport"in o.parser.constructs?n(d):d===93?(t.exit(s),t.enter(r),t.consume(d),t.exit(r),t.exit(i),e):ie(d)?(t.enter("lineEnding"),t.consume(d),t.exit("lineEnding"),c):(t.enter("chunkString",{contentType:"string"}),h(d))}function h(d){return d===null||d===91||d===93||ie(d)||l++>999?(t.exit("chunkString"),c(d)):(t.consume(d),a||(a=!_e(d)),d===92?f:h)}function f(d){return d===91||d===92||d===93?(t.consume(d),l++,h):h(d)}}function eA(t,e,n,i,r,s){let o;return l;function l(f){return f===34||f===39||f===40?(t.enter(i),t.enter(r),t.consume(f),t.exit(r),o=f===40?41:f,a):n(f)}function a(f){return f===o?(t.enter(r),t.consume(f),t.exit(r),t.exit(i),e):(t.enter(s),u(f))}function u(f){return f===o?(t.exit(s),a(o)):f===null?n(f):ie(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),Te(t,u,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),c(f))}function c(f){return f===o||f===null||ie(f)?(t.exit("chunkString"),u(f)):(t.consume(f),f===92?h:c)}function h(f){return f===o||f===92?(t.consume(f),c):c(f)}}function Za(t,e){let n;return i;function i(r){return ie(r)?(t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),n=!0,i):_e(r)?Te(t,i,n?"linePrefix":"lineSuffix")(r):e(r)}}const xP={name:"definition",tokenize:CP},kP={partial:!0,tokenize:_P};function CP(t,e,n){const i=this;let r;return s;function s(d){return t.enter("definition"),o(d)}function o(d){return ZE.call(i,t,l,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(d)}function l(d){return r=_i(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)),d===58?(t.enter("definitionMarker"),t.consume(d),t.exit("definitionMarker"),a):n(d)}function a(d){return Ge(d)?Za(t,u)(d):u(d)}function u(d){return JE(t,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(d)}function c(d){return t.attempt(kP,h,h)(d)}function h(d){return _e(d)?Te(t,f,"whitespace")(d):f(d)}function f(d){return d===null||ie(d)?(t.exit("definition"),i.parser.defined.push(r),e(d)):n(d)}}function _P(t,e,n){return i;function i(l){return Ge(l)?Za(t,r)(l):n(l)}function r(l){return eA(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(l)}function s(l){return _e(l)?Te(t,o,"whitespace")(l):o(l)}function o(l){return l===null||ie(l)?e(l):n(l)}}const EP={name:"hardBreakEscape",tokenize:AP};function AP(t,e,n){return i;function i(s){return t.enter("hardBreakEscape"),t.consume(s),r}function r(s){return ie(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const IP={name:"headingAtx",resolve:TP,tokenize:OP};function TP(t,e){let n=t.length-2,i=3,r,s;return t[i][1].type==="whitespace"&&(i+=2),n-2>i&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(i===n-1||n-4>i&&t[n-2][1].type==="whitespace")&&(n-=i+1===n?2:4),n>i&&(r={type:"atxHeadingText",start:t[i][1].start,end:t[n][1].end},s={type:"chunkText",start:t[i][1].start,end:t[n][1].end,contentType:"text"},Wn(t,i,n-i+1,[["enter",r,e],["enter",s,e],["exit",s,e],["exit",r,e]])),t}function OP(t,e,n){let i=0;return r;function r(c){return t.enter("atxHeading"),s(c)}function s(c){return t.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&i++<6?(t.consume(c),o):c===null||Ge(c)?(t.exit("atxHeadingSequence"),l(c)):n(c)}function l(c){return c===35?(t.enter("atxHeadingSequence"),a(c)):c===null||ie(c)?(t.exit("atxHeading"),e(c)):_e(c)?Te(t,l,"whitespace")(c):(t.enter("atxHeadingText"),u(c))}function a(c){return c===35?(t.consume(c),a):(t.exit("atxHeadingSequence"),l(c))}function u(c){return c===null||c===35||Ge(c)?(t.exit("atxHeadingText"),l(c)):(t.consume(c),u)}}const DP=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$b=["pre","script","style","textarea"],MP={concrete:!0,name:"htmlFlow",resolveTo:NP,tokenize:BP},RP={partial:!0,tokenize:FP},LP={partial:!0,tokenize:PP};function NP(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function BP(t,e,n){const i=this;let r,s,o,l,a;return u;function u(C){return c(C)}function c(C){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(C),h}function h(C){return C===33?(t.consume(C),f):C===47?(t.consume(C),s=!0,g):C===63?(t.consume(C),r=3,i.interrupt?e:S):nn(C)?(t.consume(C),o=String.fromCharCode(C),w):n(C)}function f(C){return C===45?(t.consume(C),r=2,d):C===91?(t.consume(C),r=5,l=0,p):nn(C)?(t.consume(C),r=4,i.interrupt?e:S):n(C)}function d(C){return C===45?(t.consume(C),i.interrupt?e:S):n(C)}function p(C){const Ne="CDATA[";return C===Ne.charCodeAt(l++)?(t.consume(C),l===Ne.length?i.interrupt?e:N:p):n(C)}function g(C){return nn(C)?(t.consume(C),o=String.fromCharCode(C),w):n(C)}function w(C){if(C===null||C===47||C===62||Ge(C)){const Ne=C===47,Pe=o.toLowerCase();return!Ne&&!s&&$b.includes(Pe)?(r=1,i.interrupt?e(C):N(C)):DP.includes(o.toLowerCase())?(r=6,Ne?(t.consume(C),m):i.interrupt?e(C):N(C)):(r=7,i.interrupt&&!i.parser.lazy[i.now().line]?n(C):s?y(C):v(C))}return C===45||Kt(C)?(t.consume(C),o+=String.fromCharCode(C),w):n(C)}function m(C){return C===62?(t.consume(C),i.interrupt?e:N):n(C)}function y(C){return _e(C)?(t.consume(C),y):A(C)}function v(C){return C===47?(t.consume(C),A):C===58||C===95||nn(C)?(t.consume(C),x):_e(C)?(t.consume(C),v):A(C)}function x(C){return C===45||C===46||C===58||C===95||Kt(C)?(t.consume(C),x):_(C)}function _(C){return C===61?(t.consume(C),b):_e(C)?(t.consume(C),_):v(C)}function b(C){return C===null||C===60||C===61||C===62||C===96?n(C):C===34||C===39?(t.consume(C),a=C,I):_e(C)?(t.consume(C),b):D(C)}function I(C){return C===a?(t.consume(C),a=null,F):C===null||ie(C)?n(C):(t.consume(C),I)}function D(C){return C===null||C===34||C===39||C===47||C===60||C===61||C===62||C===96||Ge(C)?_(C):(t.consume(C),D)}function F(C){return C===47||C===62||_e(C)?v(C):n(C)}function A(C){return C===62?(t.consume(C),B):n(C)}function B(C){return C===null||ie(C)?N(C):_e(C)?(t.consume(C),B):n(C)}function N(C){return C===45&&r===2?(t.consume(C),Z):C===60&&r===1?(t.consume(C),re):C===62&&r===4?(t.consume(C),te):C===63&&r===3?(t.consume(C),S):C===93&&r===5?(t.consume(C),q):ie(C)&&(r===6||r===7)?(t.exit("htmlFlowData"),t.check(RP,se,W)(C)):C===null||ie(C)?(t.exit("htmlFlowData"),W(C)):(t.consume(C),N)}function W(C){return t.check(LP,K,se)(C)}function K(C){return t.enter("lineEnding"),t.consume(C),t.exit("lineEnding"),U}function U(C){return C===null||ie(C)?W(C):(t.enter("htmlFlowData"),N(C))}function Z(C){return C===45?(t.consume(C),S):N(C)}function re(C){return C===47?(t.consume(C),o="",j):N(C)}function j(C){if(C===62){const Ne=o.toLowerCase();return $b.includes(Ne)?(t.consume(C),te):N(C)}return nn(C)&&o.length<8?(t.consume(C),o+=String.fromCharCode(C),j):N(C)}function q(C){return C===93?(t.consume(C),S):N(C)}function S(C){return C===62?(t.consume(C),te):C===45&&r===2?(t.consume(C),S):N(C)}function te(C){return C===null||ie(C)?(t.exit("htmlFlowData"),se(C)):(t.consume(C),te)}function se(C){return t.exit("htmlFlow"),e(C)}}function PP(t,e,n){const i=this;return r;function r(o){return ie(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return i.parser.lazy[i.now().line]?n(o):e(o)}}function FP(t,e,n){return i;function i(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),t.attempt(sc,e,n)}}const zP={name:"htmlText",tokenize:UP};function UP(t,e,n){const i=this;let r,s,o;return l;function l(S){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(S),a}function a(S){return S===33?(t.consume(S),u):S===47?(t.consume(S),_):S===63?(t.consume(S),v):nn(S)?(t.consume(S),D):n(S)}function u(S){return S===45?(t.consume(S),c):S===91?(t.consume(S),s=0,p):nn(S)?(t.consume(S),y):n(S)}function c(S){return S===45?(t.consume(S),d):n(S)}function h(S){return S===null?n(S):S===45?(t.consume(S),f):ie(S)?(o=h,re(S)):(t.consume(S),h)}function f(S){return S===45?(t.consume(S),d):h(S)}function d(S){return S===62?Z(S):S===45?f(S):h(S)}function p(S){const te="CDATA[";return S===te.charCodeAt(s++)?(t.consume(S),s===te.length?g:p):n(S)}function g(S){return S===null?n(S):S===93?(t.consume(S),w):ie(S)?(o=g,re(S)):(t.consume(S),g)}function w(S){return S===93?(t.consume(S),m):g(S)}function m(S){return S===62?Z(S):S===93?(t.consume(S),m):g(S)}function y(S){return S===null||S===62?Z(S):ie(S)?(o=y,re(S)):(t.consume(S),y)}function v(S){return S===null?n(S):S===63?(t.consume(S),x):ie(S)?(o=v,re(S)):(t.consume(S),v)}function x(S){return S===62?Z(S):v(S)}function _(S){return nn(S)?(t.consume(S),b):n(S)}function b(S){return S===45||Kt(S)?(t.consume(S),b):I(S)}function I(S){return ie(S)?(o=I,re(S)):_e(S)?(t.consume(S),I):Z(S)}function D(S){return S===45||Kt(S)?(t.consume(S),D):S===47||S===62||Ge(S)?F(S):n(S)}function F(S){return S===47?(t.consume(S),Z):S===58||S===95||nn(S)?(t.consume(S),A):ie(S)?(o=F,re(S)):_e(S)?(t.consume(S),F):Z(S)}function A(S){return S===45||S===46||S===58||S===95||Kt(S)?(t.consume(S),A):B(S)}function B(S){return S===61?(t.consume(S),N):ie(S)?(o=B,re(S)):_e(S)?(t.consume(S),B):F(S)}function N(S){return S===null||S===60||S===61||S===62||S===96?n(S):S===34||S===39?(t.consume(S),r=S,W):ie(S)?(o=N,re(S)):_e(S)?(t.consume(S),N):(t.consume(S),K)}function W(S){return S===r?(t.consume(S),r=void 0,U):S===null?n(S):ie(S)?(o=W,re(S)):(t.consume(S),W)}function K(S){return S===null||S===34||S===39||S===60||S===61||S===96?n(S):S===47||S===62||Ge(S)?F(S):(t.consume(S),K)}function U(S){return S===47||S===62||Ge(S)?F(S):n(S)}function Z(S){return S===62?(t.consume(S),t.exit("htmlTextData"),t.exit("htmlText"),e):n(S)}function re(S){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(S),t.exit("lineEnding"),j}function j(S){return _e(S)?Te(t,q,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(S):q(S)}function q(S){return t.enter("htmlTextData"),o(S)}}const jv={name:"labelEnd",resolveAll:HP,resolveTo:WP,tokenize:qP},jP={tokenize:QP},VP={tokenize:KP},$P={tokenize:YP};function HP(t){let e=-1;const n=[];for(;++e<t.length;){const i=t[e][1];if(n.push(t[e]),i.type==="labelImage"||i.type==="labelLink"||i.type==="labelEnd"){const r=i.type==="labelImage"?4:2;i.type="data",e+=r}}return t.length!==n.length&&Wn(t,0,t.length,n),t}function WP(t,e){let n=t.length,i=0,r,s,o,l;for(;n--;)if(r=t[n][1],s){if(r.type==="link"||r.type==="labelLink"&&r._inactive)break;t[n][0]==="enter"&&r.type==="labelLink"&&(r._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(r.type==="labelImage"||r.type==="labelLink")&&!r._balanced&&(s=n,r.type!=="labelLink")){i=2;break}}else r.type==="labelEnd"&&(o=n);const a={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},u={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},c={type:"labelText",start:{...t[s+i+2][1].end},end:{...t[o-2][1].start}};return l=[["enter",a,e],["enter",u,e]],l=ei(l,t.slice(s+1,s+i+3)),l=ei(l,[["enter",c,e]]),l=ei(l,dp(e.parser.constructs.insideSpan.null,t.slice(s+i+4,o-3),e)),l=ei(l,[["exit",c,e],t[o-2],t[o-1],["exit",u,e]]),l=ei(l,t.slice(o+1)),l=ei(l,[["exit",a,e]]),Wn(t,s,t.length,l),t}function qP(t,e,n){const i=this;let r=i.events.length,s,o;for(;r--;)if((i.events[r][1].type==="labelImage"||i.events[r][1].type==="labelLink")&&!i.events[r][1]._balanced){s=i.events[r][1];break}return l;function l(f){return s?s._inactive?h(f):(o=i.parser.defined.includes(_i(i.sliceSerialize({start:s.end,end:i.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(f),t.exit("labelMarker"),t.exit("labelEnd"),a):n(f)}function a(f){return f===40?t.attempt(jP,c,o?c:h)(f):f===91?t.attempt(VP,c,o?u:h)(f):o?c(f):h(f)}function u(f){return t.attempt($P,c,h)(f)}function c(f){return e(f)}function h(f){return s._balanced=!0,n(f)}}function QP(t,e,n){return i;function i(h){return t.enter("resource"),t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),r}function r(h){return Ge(h)?Za(t,s)(h):s(h)}function s(h){return h===41?c(h):JE(t,o,l,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(h)}function o(h){return Ge(h)?Za(t,a)(h):c(h)}function l(h){return n(h)}function a(h){return h===34||h===39||h===40?eA(t,u,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(h):c(h)}function u(h){return Ge(h)?Za(t,c)(h):c(h)}function c(h){return h===41?(t.enter("resourceMarker"),t.consume(h),t.exit("resourceMarker"),t.exit("resource"),e):n(h)}}function KP(t,e,n){const i=this;return r;function r(l){return ZE.call(i,t,s,o,"reference","referenceMarker","referenceString")(l)}function s(l){return i.parser.defined.includes(_i(i.sliceSerialize(i.events[i.events.length-1][1]).slice(1,-1)))?e(l):n(l)}function o(l){return n(l)}}function YP(t,e,n){return i;function i(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),r}function r(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const GP={name:"labelStartImage",resolveAll:jv.resolveAll,tokenize:XP};function XP(t,e,n){const i=this;return r;function r(l){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(l),t.exit("labelImageMarker"),s}function s(l){return l===91?(t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelImage"),o):n(l)}function o(l){return l===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(l):e(l)}}const JP={name:"labelStartLink",resolveAll:jv.resolveAll,tokenize:ZP};function ZP(t,e,n){const i=this;return r;function r(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in i.parser.constructs?n(o):e(o)}}const pm={name:"lineEnding",tokenize:eF};function eF(t,e){return n;function n(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),Te(t,e,"linePrefix")}}const Ph={name:"thematicBreak",tokenize:tF};function tF(t,e,n){let i=0,r;return s;function s(u){return t.enter("thematicBreak"),o(u)}function o(u){return r=u,l(u)}function l(u){return u===r?(t.enter("thematicBreakSequence"),a(u)):i>=3&&(u===null||ie(u))?(t.exit("thematicBreak"),e(u)):n(u)}function a(u){return u===r?(t.consume(u),i++,a):(t.exit("thematicBreakSequence"),_e(u)?Te(t,l,"whitespace")(u):l(u))}}const pn={continuation:{tokenize:sF},exit:lF,name:"list",tokenize:rF},nF={partial:!0,tokenize:aF},iF={partial:!0,tokenize:oF};function rF(t,e,n){const i=this,r=i.events[i.events.length-1];let s=r&&r[1].type==="linePrefix"?r[2].sliceSerialize(r[1],!0).length:0,o=0;return l;function l(d){const p=i.containerState.type||(d===42||d===43||d===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!i.containerState.marker||d===i.containerState.marker:gy(d)){if(i.containerState.type||(i.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),d===42||d===45?t.check(Ph,n,u)(d):u(d);if(!i.interrupt||d===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),a(d)}return n(d)}function a(d){return gy(d)&&++o<10?(t.consume(d),a):(!i.interrupt||o<2)&&(i.containerState.marker?d===i.containerState.marker:d===41||d===46)?(t.exit("listItemValue"),u(d)):n(d)}function u(d){return t.enter("listItemMarker"),t.consume(d),t.exit("listItemMarker"),i.containerState.marker=i.containerState.marker||d,t.check(sc,i.interrupt?n:c,t.attempt(nF,f,h))}function c(d){return i.containerState.initialBlankLine=!0,s++,f(d)}function h(d){return _e(d)?(t.enter("listItemPrefixWhitespace"),t.consume(d),t.exit("listItemPrefixWhitespace"),f):n(d)}function f(d){return i.containerState.size=s+i.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(d)}}function sF(t,e,n){const i=this;return i.containerState._closeFlow=void 0,t.check(sc,r,s);function r(l){return i.containerState.furtherBlankLines=i.containerState.furtherBlankLines||i.containerState.initialBlankLine,Te(t,e,"listItemIndent",i.containerState.size+1)(l)}function s(l){return i.containerState.furtherBlankLines||!_e(l)?(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,o(l)):(i.containerState.furtherBlankLines=void 0,i.containerState.initialBlankLine=void 0,t.attempt(iF,e,o)(l))}function o(l){return i.containerState._closeFlow=!0,i.interrupt=void 0,Te(t,t.attempt(pn,e,n),"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l)}}function oF(t,e,n){const i=this;return Te(t,r,"listItemIndent",i.containerState.size+1);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===i.containerState.size?e(s):n(s)}}function lF(t){t.exit(this.containerState.type)}function aF(t,e,n){const i=this;return Te(t,r,"listItemPrefixWhitespace",i.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function r(s){const o=i.events[i.events.length-1];return!_e(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const Hb={name:"setextUnderline",resolveTo:uF,tokenize:cF};function uF(t,e){let n=t.length,i,r,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){i=n;break}t[n][1].type==="paragraph"&&(r=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[i][1].start},end:{...t[t.length-1][1].end}};return t[r][1].type="setextHeadingText",s?(t.splice(r,0,["enter",o,e]),t.splice(s+1,0,["exit",t[i][1],e]),t[i][1].end={...t[s][1].end}):t[i][1]=o,t.push(["exit",o,e]),t}function cF(t,e,n){const i=this;let r;return s;function s(u){let c=i.events.length,h;for(;c--;)if(i.events[c][1].type!=="lineEnding"&&i.events[c][1].type!=="linePrefix"&&i.events[c][1].type!=="content"){h=i.events[c][1].type==="paragraph";break}return!i.parser.lazy[i.now().line]&&(i.interrupt||h)?(t.enter("setextHeadingLine"),r=u,o(u)):n(u)}function o(u){return t.enter("setextHeadingLineSequence"),l(u)}function l(u){return u===r?(t.consume(u),l):(t.exit("setextHeadingLineSequence"),_e(u)?Te(t,a,"lineSuffix")(u):a(u))}function a(u){return u===null||ie(u)?(t.exit("setextHeadingLine"),e(u)):n(u)}}const hF={tokenize:fF};function fF(t){const e=this,n=t.attempt(sc,i,t.attempt(this.parser.constructs.flowInitial,r,Te(t,t.attempt(this.parser.constructs.flow,r,t.attempt(yP,r)),"linePrefix")));return n;function i(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function r(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const dF={resolveAll:nA()},pF=tA("string"),mF=tA("text");function tA(t){return{resolveAll:nA(t==="text"?gF:void 0),tokenize:e};function e(n){const i=this,r=this.parser.constructs[t],s=n.attempt(r,o,l);return o;function o(c){return u(c)?s(c):l(c)}function l(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),a}function a(c){return u(c)?(n.exit("data"),s(c)):(n.consume(c),a)}function u(c){if(c===null)return!0;const h=r[c];let f=-1;if(h)for(;++f<h.length;){const d=h[f];if(!d.previous||d.previous.call(i,i.previous))return!0}return!1}}}function nA(t){return e;function e(n,i){let r=-1,s;for(;++r<=n.length;)s===void 0?n[r]&&n[r][1].type==="data"&&(s=r,r++):(!n[r]||n[r][1].type!=="data")&&(r!==s+2&&(n[s][1].end=n[r-1][1].end,n.splice(s+2,r-s-2),r=s+2),s=void 0);return t?t(n,i):n}}function gF(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const i=t[n-1][1],r=e.sliceStream(i);let s=r.length,o=-1,l=0,a;for(;s--;){const u=r[s];if(typeof u=="string"){for(o=u.length;u.charCodeAt(o-1)===32;)l++,o--;if(o)break;o=-1}else if(u===-2)a=!0,l++;else if(u!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(l=0),l){const u={type:n===t.length||a||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:i.start._bufferIndex+o,_index:i.start._index+s,line:i.end.line,column:i.end.column-l,offset:i.end.offset-l},end:{...i.end}};i.end={...u.start},i.start.offset===i.end.offset?Object.assign(i,u):(t.splice(n,0,["enter",u,e],["exit",u,e]),n+=2)}n++}return t}const yF={42:pn,43:pn,45:pn,48:pn,49:pn,50:pn,51:pn,52:pn,53:pn,54:pn,55:pn,56:pn,57:pn,62:KE},vF={91:xP},wF={[-2]:dm,[-1]:dm,32:dm},bF={35:IP,42:Ph,45:[Hb,Ph],60:MP,61:Hb,95:Ph,96:Vb,126:Vb},SF={38:GE,92:YE},xF={[-5]:pm,[-4]:pm,[-3]:pm,33:GP,38:GE,42:yy,60:[JB,zP],91:JP,92:[EP,YE],93:jv,95:yy,96:hP},kF={null:[yy,dF]},CF={null:[42,95]},_F={null:[]},EF=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:CF,contentInitial:vF,disable:_F,document:yF,flow:bF,flowInitial:wF,insideSpan:kF,string:SF,text:xF},Symbol.toStringTag,{value:"Module"}));function AF(t,e,n){let i={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const r={},s=[];let o=[],l=[];const a={attempt:I(_),check:I(b),consume:y,enter:v,exit:x,interrupt:I(b,{interrupt:!0})},u={code:null,containerState:{},defineSkip:g,events:[],now:p,parser:t,previous:null,sliceSerialize:f,sliceStream:d,write:h};let c=e.tokenize.call(u,a);return e.resolveAll&&s.push(e),u;function h(B){return o=ei(o,B),w(),o[o.length-1]!==null?[]:(D(e,0),u.events=dp(s,u.events,u),u.events)}function f(B,N){return TF(d(B),N)}function d(B){return IF(o,B)}function p(){const{_bufferIndex:B,_index:N,line:W,column:K,offset:U}=i;return{_bufferIndex:B,_index:N,line:W,column:K,offset:U}}function g(B){r[B.line]=B.column,A()}function w(){let B;for(;i._index<o.length;){const N=o[i._index];if(typeof N=="string")for(B=i._index,i._bufferIndex<0&&(i._bufferIndex=0);i._index===B&&i._bufferIndex<N.length;)m(N.charCodeAt(i._bufferIndex));else m(N)}}function m(B){c=c(B)}function y(B){ie(B)?(i.line++,i.column=1,i.offset+=B===-3?2:1,A()):B!==-1&&(i.column++,i.offset++),i._bufferIndex<0?i._index++:(i._bufferIndex++,i._bufferIndex===o[i._index].length&&(i._bufferIndex=-1,i._index++)),u.previous=B}function v(B,N){const W=N||{};return W.type=B,W.start=p(),u.events.push(["enter",W,u]),l.push(W),W}function x(B){const N=l.pop();return N.end=p(),u.events.push(["exit",N,u]),N}function _(B,N){D(B,N.from)}function b(B,N){N.restore()}function I(B,N){return W;function W(K,U,Z){let re,j,q,S;return Array.isArray(K)?se(K):"tokenize"in K?se([K]):te(K);function te(ve){return Xe;function Xe(Mn){const fr=Mn!==null&&ve[Mn],Ur=Mn!==null&&ve.null,jr=[...Array.isArray(fr)?fr:fr?[fr]:[],...Array.isArray(Ur)?Ur:Ur?[Ur]:[]];return se(jr)(Mn)}}function se(ve){return re=ve,j=0,ve.length===0?Z:C(ve[j])}function C(ve){return Xe;function Xe(Mn){return S=F(),q=ve,ve.partial||(u.currentConstruct=ve),ve.name&&u.parser.constructs.disable.null.includes(ve.name)?Pe():ve.tokenize.call(N?Object.assign(Object.create(u),N):u,a,Ne,Pe)(Mn)}}function Ne(ve){return B(q,S),U}function Pe(ve){return S.restore(),++j<re.length?C(re[j]):Z}}}function D(B,N){B.resolveAll&&!s.includes(B)&&s.push(B),B.resolve&&Wn(u.events,N,u.events.length-N,B.resolve(u.events.slice(N),u)),B.resolveTo&&(u.events=B.resolveTo(u.events,u))}function F(){const B=p(),N=u.previous,W=u.currentConstruct,K=u.events.length,U=Array.from(l);return{from:K,restore:Z};function Z(){i=B,u.previous=N,u.currentConstruct=W,u.events.length=K,l=U,A()}}function A(){i.line in r&&i.column<2&&(i.column=r[i.line],i.offset+=r[i.line]-1)}}function IF(t,e){const n=e.start._index,i=e.start._bufferIndex,r=e.end._index,s=e.end._bufferIndex;let o;if(n===r)o=[t[n].slice(i,s)];else{if(o=t.slice(n,r),i>-1){const l=o[0];typeof l=="string"?o[0]=l.slice(i):o.shift()}s>0&&o.push(t[r].slice(0,s))}return o}function TF(t,e){let n=-1;const i=[];let r;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&r)continue;o=" ";break}default:o=String.fromCharCode(s)}r=s===-2,i.push(o)}return i.join("")}function OF(t){const i={constructs:qE([EF,...(t||{}).extensions||[]]),content:r(WB),defined:[],document:r(QB),flow:r(hF),lazy:{},string:r(pF),text:r(mF)};return i;function r(s){return o;function o(l){return AF(i,s,l)}}}function DF(t){for(;!XE(t););return t}const Wb=/[\0\t\n\r]/g;function MF(){let t=1,e="",n=!0,i;return r;function r(s,o,l){const a=[];let u,c,h,f,d;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),h=0,e="",n&&(s.charCodeAt(0)===65279&&h++,n=void 0);h<s.length;){if(Wb.lastIndex=h,u=Wb.exec(s),f=u&&u.index!==void 0?u.index:s.length,d=s.charCodeAt(f),!u){e=s.slice(h);break}if(d===10&&h===f&&i)a.push(-3),i=void 0;else switch(i&&(a.push(-5),i=void 0),h<f&&(a.push(s.slice(h,f)),t+=f-h),d){case 0:{a.push(65533),t++;break}case 9:{for(c=Math.ceil(t/4)*4,a.push(-2);t++<c;)a.push(-1);break}case 10:{a.push(-4),t=1;break}default:i=!0,t=1}h=f+1}return l&&(i&&a.push(-5),e&&a.push(e),a.push(null)),a}}const RF=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function LF(t){return t.replace(RF,NF)}function NF(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),s=r===120||r===88;return QE(n.slice(s?2:1),s?16:10)}return Uv(n)||t}const iA={}.hasOwnProperty;function BF(t,e,n){return typeof e!="string"&&(n=e,e=void 0),PF(n)(DF(OF(n).document().write(MF()(t,e,!0))))}function PF(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(_c),autolinkProtocol:F,autolinkEmail:F,atxHeading:s(xc),blockQuote:s(Ur),characterEscape:F,characterReference:F,codeFenced:s(jr),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(jr,o),codeText:s(Np,o),codeTextData:F,data:F,codeFlowValue:F,definition:s(bc),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Sc),hardBreakEscape:s(kc),hardBreakTrailing:s(kc),htmlFlow:s(Cc,o),htmlFlowData:F,htmlText:s(Cc,o),htmlTextData:F,image:s(ra),label:o,link:s(_c),listItem:s(sa),listItemValue:f,listOrdered:s(Ec,h),listUnordered:s(Ec),paragraph:s(Ac),reference:C,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(xc),strong:s(Bp),thematicBreak:s(la)},exit:{atxHeading:a(),atxHeadingSequence:_,autolink:a(),autolinkEmail:fr,autolinkProtocol:Mn,blockQuote:a(),characterEscapeValue:A,characterReferenceMarkerHexadecimal:Pe,characterReferenceMarkerNumeric:Pe,characterReferenceValue:ve,characterReference:Xe,codeFenced:a(w),codeFencedFence:g,codeFencedFenceInfo:d,codeFencedFenceMeta:p,codeFlowValue:A,codeIndented:a(m),codeText:a(U),codeTextData:A,data:A,definition:a(),definitionDestinationString:x,definitionLabelString:y,definitionTitleString:v,emphasis:a(),hardBreakEscape:a(N),hardBreakTrailing:a(N),htmlFlow:a(W),htmlFlowData:A,htmlText:a(K),htmlTextData:A,image:a(re),label:q,labelText:j,lineEnding:B,link:a(Z),listItem:a(),listOrdered:a(),listUnordered:a(),paragraph:a(),referenceString:Ne,resourceDestinationString:S,resourceTitleString:te,resource:se,setextHeading:a(D),setextHeadingLineSequence:I,setextHeadingText:b,strong:a(),thematicBreak:a()}};rA(e,(t||{}).mdastExtensions||[]);const n={};return i;function i(P){let E={type:"root",children:[]};const O={stack:[E],tokenStack:[],config:e,enter:l,exit:u,buffer:o,resume:c,data:n},L=[];let V=-1;for(;++V<P.length;)if(P[V][1].type==="listOrdered"||P[V][1].type==="listUnordered")if(P[V][0]==="enter")L.push(V);else{const ye=L.pop();V=r(P,ye,V)}for(V=-1;++V<P.length;){const ye=e[P[V][0]];iA.call(ye,P[V][1].type)&&ye[P[V][1].type].call(Object.assign({sliceSerialize:P[V][2].sliceSerialize},O),P[V][1])}if(O.tokenStack.length>0){const ye=O.tokenStack[O.tokenStack.length-1];(ye[1]||qb).call(O,void 0,ye[0])}for(E.position={start:Hr(P.length>0?P[0][1].start:{line:1,column:1,offset:0}),end:Hr(P.length>0?P[P.length-2][1].end:{line:1,column:1,offset:0})},V=-1;++V<e.transforms.length;)E=e.transforms[V](E)||E;return E}function r(P,E,O){let L=E-1,V=-1,ye=!1,Oe,je,Ct,Rn;for(;++L<=O;){const mt=P[L];switch(mt[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{mt[0]==="enter"?V++:V--,Rn=void 0;break}case"lineEndingBlank":{mt[0]==="enter"&&(Oe&&!Rn&&!V&&!Ct&&(Ct=L),Rn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:Rn=void 0}if(!V&&mt[0]==="enter"&&mt[1].type==="listItemPrefix"||V===-1&&mt[0]==="exit"&&(mt[1].type==="listUnordered"||mt[1].type==="listOrdered")){if(Oe){let Mi=L;for(je=void 0;Mi--;){const dn=P[Mi];if(dn[1].type==="lineEnding"||dn[1].type==="lineEndingBlank"){if(dn[0]==="exit")continue;je&&(P[je][1].type="lineEndingBlank",ye=!0),dn[1].type="lineEnding",je=Mi}else if(!(dn[1].type==="linePrefix"||dn[1].type==="blockQuotePrefix"||dn[1].type==="blockQuotePrefixWhitespace"||dn[1].type==="blockQuoteMarker"||dn[1].type==="listItemIndent"))break}Ct&&(!je||Ct<je)&&(Oe._spread=!0),Oe.end=Object.assign({},je?P[je][1].start:mt[1].end),P.splice(je||L,0,["exit",Oe,mt[2]]),L++,O++}if(mt[1].type==="listItemPrefix"){const Mi={type:"listItem",_spread:!1,start:Object.assign({},mt[1].start),end:void 0};Oe=Mi,P.splice(L,0,["enter",Mi,mt[2]]),L++,O++,Ct=void 0,Rn=!0}}}return P[E][1]._spread=ye,O}function s(P,E){return O;function O(L){l.call(this,P(L),L),E&&E.call(this,L)}}function o(){this.stack.push({type:"fragment",children:[]})}function l(P,E,O){this.stack[this.stack.length-1].children.push(P),this.stack.push(P),this.tokenStack.push([E,O||void 0]),P.position={start:Hr(E.start),end:void 0}}function a(P){return E;function E(O){P&&P.call(this,O),u.call(this,O)}}function u(P,E){const O=this.stack.pop(),L=this.tokenStack.pop();if(L)L[0].type!==P.type&&(E?E.call(this,P,L[0]):(L[1]||qb).call(this,P,L[0]));else throw new Error("Cannot close `"+P.type+"` ("+Ja({start:P.start,end:P.end})+"): it’s not open");O.position.end=Hr(P.end)}function c(){return zv(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function f(P){if(this.data.expectingFirstListItemValue){const E=this.stack[this.stack.length-2];E.start=Number.parseInt(this.sliceSerialize(P),10),this.data.expectingFirstListItemValue=void 0}}function d(){const P=this.resume(),E=this.stack[this.stack.length-1];E.lang=P}function p(){const P=this.resume(),E=this.stack[this.stack.length-1];E.meta=P}function g(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function w(){const P=this.resume(),E=this.stack[this.stack.length-1];E.value=P.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function m(){const P=this.resume(),E=this.stack[this.stack.length-1];E.value=P.replace(/(\r?\n|\r)$/g,"")}function y(P){const E=this.resume(),O=this.stack[this.stack.length-1];O.label=E,O.identifier=_i(this.sliceSerialize(P)).toLowerCase()}function v(){const P=this.resume(),E=this.stack[this.stack.length-1];E.title=P}function x(){const P=this.resume(),E=this.stack[this.stack.length-1];E.url=P}function _(P){const E=this.stack[this.stack.length-1];if(!E.depth){const O=this.sliceSerialize(P).length;E.depth=O}}function b(){this.data.setextHeadingSlurpLineEnding=!0}function I(P){const E=this.stack[this.stack.length-1];E.depth=this.sliceSerialize(P).codePointAt(0)===61?1:2}function D(){this.data.setextHeadingSlurpLineEnding=void 0}function F(P){const O=this.stack[this.stack.length-1].children;let L=O[O.length-1];(!L||L.type!=="text")&&(L=oa(),L.position={start:Hr(P.start),end:void 0},O.push(L)),this.stack.push(L)}function A(P){const E=this.stack.pop();E.value+=this.sliceSerialize(P),E.position.end=Hr(P.end)}function B(P){const E=this.stack[this.stack.length-1];if(this.data.atHardBreak){const O=E.children[E.children.length-1];O.position.end=Hr(P.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(E.type)&&(F.call(this,P),A.call(this,P))}function N(){this.data.atHardBreak=!0}function W(){const P=this.resume(),E=this.stack[this.stack.length-1];E.value=P}function K(){const P=this.resume(),E=this.stack[this.stack.length-1];E.value=P}function U(){const P=this.resume(),E=this.stack[this.stack.length-1];E.value=P}function Z(){const P=this.stack[this.stack.length-1];if(this.data.inReference){const E=this.data.referenceType||"shortcut";P.type+="Reference",P.referenceType=E,delete P.url,delete P.title}else delete P.identifier,delete P.label;this.data.referenceType=void 0}function re(){const P=this.stack[this.stack.length-1];if(this.data.inReference){const E=this.data.referenceType||"shortcut";P.type+="Reference",P.referenceType=E,delete P.url,delete P.title}else delete P.identifier,delete P.label;this.data.referenceType=void 0}function j(P){const E=this.sliceSerialize(P),O=this.stack[this.stack.length-2];O.label=LF(E),O.identifier=_i(E).toLowerCase()}function q(){const P=this.stack[this.stack.length-1],E=this.resume(),O=this.stack[this.stack.length-1];if(this.data.inReference=!0,O.type==="link"){const L=P.children;O.children=L}else O.alt=E}function S(){const P=this.resume(),E=this.stack[this.stack.length-1];E.url=P}function te(){const P=this.resume(),E=this.stack[this.stack.length-1];E.title=P}function se(){this.data.inReference=void 0}function C(){this.data.referenceType="collapsed"}function Ne(P){const E=this.resume(),O=this.stack[this.stack.length-1];O.label=E,O.identifier=_i(this.sliceSerialize(P)).toLowerCase(),this.data.referenceType="full"}function Pe(P){this.data.characterReferenceType=P.type}function ve(P){const E=this.sliceSerialize(P),O=this.data.characterReferenceType;let L;O?(L=QE(E,O==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):L=Uv(E);const V=this.stack[this.stack.length-1];V.value+=L}function Xe(P){const E=this.stack.pop();E.position.end=Hr(P.end)}function Mn(P){A.call(this,P);const E=this.stack[this.stack.length-1];E.url=this.sliceSerialize(P)}function fr(P){A.call(this,P);const E=this.stack[this.stack.length-1];E.url="mailto:"+this.sliceSerialize(P)}function Ur(){return{type:"blockquote",children:[]}}function jr(){return{type:"code",lang:null,meta:null,value:""}}function Np(){return{type:"inlineCode",value:""}}function bc(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Sc(){return{type:"emphasis",children:[]}}function xc(){return{type:"heading",depth:0,children:[]}}function kc(){return{type:"break"}}function Cc(){return{type:"html",value:""}}function ra(){return{type:"image",title:null,url:"",alt:null}}function _c(){return{type:"link",title:null,url:"",children:[]}}function Ec(P){return{type:"list",ordered:P.type==="listOrdered",start:null,spread:P._spread,children:[]}}function sa(P){return{type:"listItem",spread:P._spread,checked:null,children:[]}}function Ac(){return{type:"paragraph",children:[]}}function Bp(){return{type:"strong",children:[]}}function oa(){return{type:"text",value:""}}function la(){return{type:"thematicBreak"}}}function Hr(t){return{line:t.line,column:t.column,offset:t.offset}}function rA(t,e){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?rA(t,i):FF(t,i)}}function FF(t,e){let n;for(n in e)if(iA.call(e,n))switch(n){case"canContainEols":{const i=e[n];i&&t[n].push(...i);break}case"transforms":{const i=e[n];i&&t[n].push(...i);break}case"enter":case"exit":{const i=e[n];i&&Object.assign(t[n],i);break}}}function qb(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+Ja({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+Ja({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+Ja({start:e.start,end:e.end})+") is still open")}function zF(t){const e=this;e.parser=n;function n(i){return BF(i,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function UF(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function jF(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function VF(t,e){const n=e.value?e.value+`
`:"",i={};e.lang&&(i.className=["language-"+e.lang]);let r={type:"element",tagName:"code",properties:i,children:[{type:"text",value:n}]};return e.meta&&(r.data={meta:e.meta}),t.patch(e,r),r=t.applyData(e,r),r={type:"element",tagName:"pre",properties:{},children:[r]},t.patch(e,r),r}function $F(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function HF(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function WF(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",i=String(e.identifier).toUpperCase(),r=Jl(i.toLowerCase()),s=t.footnoteOrder.indexOf(i);let o,l=t.footnoteCounts.get(i);l===void 0?(l=0,t.footnoteOrder.push(i),o=t.footnoteOrder.length):o=s+1,l+=1,t.footnoteCounts.set(i,l);const a={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+r,id:n+"fnref-"+r+(l>1?"-"+l:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,a);const u={type:"element",tagName:"sup",properties:{},children:[a]};return t.patch(e,u),t.applyData(e,u)}function qF(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function QF(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function sA(t,e){const n=e.referenceType;let i="]";if(n==="collapsed"?i+="[]":n==="full"&&(i+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+i}];const r=t.all(e),s=r[0];s&&s.type==="text"?s.value="["+s.value:r.unshift({type:"text",value:"["});const o=r[r.length-1];return o&&o.type==="text"?o.value+=i:r.push({type:"text",value:i}),r}function KF(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return sA(t,e);const r={src:Jl(i.url||""),alt:e.alt};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"img",properties:r,children:[]};return t.patch(e,s),t.applyData(e,s)}function YF(t,e){const n={src:Jl(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,i),t.applyData(e,i)}function GF(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const i={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,i),t.applyData(e,i)}function XF(t,e){const n=String(e.identifier).toUpperCase(),i=t.definitionById.get(n);if(!i)return sA(t,e);const r={href:Jl(i.url||"")};i.title!==null&&i.title!==void 0&&(r.title=i.title);const s={type:"element",tagName:"a",properties:r,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function JF(t,e){const n={href:Jl(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const i={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function ZF(t,e,n){const i=t.all(e),r=n?e3(n):oA(e),s={},o=[];if(typeof e.checked=="boolean"){const c=i[0];let h;c&&c.type==="element"&&c.tagName==="p"?h=c:(h={type:"element",tagName:"p",properties:{},children:[]},i.unshift(h)),h.children.length>0&&h.children.unshift({type:"text",value:" "}),h.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let l=-1;for(;++l<i.length;){const c=i[l];(r||l!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!r?o.push(...c.children):o.push(c)}const a=i[i.length-1];a&&(r||a.type!=="element"||a.tagName!=="p")&&o.push({type:"text",value:`
`});const u={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,u),t.applyData(e,u)}function e3(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let i=-1;for(;!e&&++i<n.length;)e=oA(n[i])}return e}function oA(t){const e=t.spread;return e??t.children.length>1}function t3(t,e){const n={},i=t.all(e);let r=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++r<i.length;){const o=i[r];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function n3(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function i3(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function r3(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function s3(t,e){const n=t.all(e),i=n.shift(),r=[];if(i){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([i],!0)};t.patch(e.children[0],o),r.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},l=Nv(e.children[1]),a=zE(e.children[e.children.length-1]);l&&a&&(o.position={start:l,end:a}),r.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function o3(t,e,n){const i=n?n.children:void 0,s=(i?i.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,l=o?o.length:e.children.length;let a=-1;const u=[];for(;++a<l;){const h=e.children[a],f={},d=o?o[a]:void 0;d&&(f.align=d);let p={type:"element",tagName:s,properties:f,children:[]};h&&(p.children=t.all(h),t.patch(h,p),p=t.applyData(h,p)),u.push(p)}const c={type:"element",tagName:"tr",properties:{},children:t.wrap(u,!0)};return t.patch(e,c),t.applyData(e,c)}function l3(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const Qb=9,Kb=32;function a3(t){const e=String(t),n=/\r?\n|\r/g;let i=n.exec(e),r=0;const s=[];for(;i;)s.push(Yb(e.slice(r,i.index),r>0,!0),i[0]),r=i.index+i[0].length,i=n.exec(e);return s.push(Yb(e.slice(r),r>0,!1)),s.join("")}function Yb(t,e,n){let i=0,r=t.length;if(e){let s=t.codePointAt(i);for(;s===Qb||s===Kb;)i++,s=t.codePointAt(i)}if(n){let s=t.codePointAt(r-1);for(;s===Qb||s===Kb;)r--,s=t.codePointAt(r-1)}return r>i?t.slice(i,r):""}function u3(t,e){const n={type:"text",value:a3(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function c3(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const h3={blockquote:UF,break:jF,code:VF,delete:$F,emphasis:HF,footnoteReference:WF,heading:qF,html:QF,imageReference:KF,image:YF,inlineCode:GF,linkReference:XF,link:JF,listItem:ZF,list:t3,paragraph:n3,root:i3,strong:r3,table:s3,tableCell:l3,tableRow:o3,text:u3,thematicBreak:c3,toml:Wc,yaml:Wc,definition:Wc,footnoteDefinition:Wc};function Wc(){}const lA=-1,pp=0,eu=1,Pf=2,Vv=3,$v=4,Hv=5,Wv=6,aA=7,uA=8,Gb=typeof self=="object"?self:globalThis,f3=(t,e)=>{const n=(r,s)=>(t.set(s,r),r),i=r=>{if(t.has(r))return t.get(r);const[s,o]=e[r];switch(s){case pp:case lA:return n(o,r);case eu:{const l=n([],r);for(const a of o)l.push(i(a));return l}case Pf:{const l=n({},r);for(const[a,u]of o)l[i(a)]=i(u);return l}case Vv:return n(new Date(o),r);case $v:{const{source:l,flags:a}=o;return n(new RegExp(l,a),r)}case Hv:{const l=n(new Map,r);for(const[a,u]of o)l.set(i(a),i(u));return l}case Wv:{const l=n(new Set,r);for(const a of o)l.add(i(a));return l}case aA:{const{name:l,message:a}=o;return n(new Gb[l](a),r)}case uA:return n(BigInt(o),r);case"BigInt":return n(Object(BigInt(o)),r);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:l}=new Uint8Array(o);return n(new DataView(l),o)}}return n(new Gb[s](o),r)};return i},Xb=t=>f3(new Map,t)(0),Io="",{toString:d3}={},{keys:p3}=Object,va=t=>{const e=typeof t;if(e!=="object"||!t)return[pp,e];const n=d3.call(t).slice(8,-1);switch(n){case"Array":return[eu,Io];case"Object":return[Pf,Io];case"Date":return[Vv,Io];case"RegExp":return[$v,Io];case"Map":return[Hv,Io];case"Set":return[Wv,Io];case"DataView":return[eu,n]}return n.includes("Array")?[eu,n]:n.includes("Error")?[aA,n]:[Pf,n]},qc=([t,e])=>t===pp&&(e==="function"||e==="symbol"),m3=(t,e,n,i)=>{const r=(o,l)=>{const a=i.push(o)-1;return n.set(l,a),a},s=o=>{if(n.has(o))return n.get(o);let[l,a]=va(o);switch(l){case pp:{let c=o;switch(a){case"bigint":l=uA,c=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+a);c=null;break;case"undefined":return r([lA],o)}return r([l,c],o)}case eu:{if(a){let f=o;return a==="DataView"?f=new Uint8Array(o.buffer):a==="ArrayBuffer"&&(f=new Uint8Array(o)),r([a,[...f]],o)}const c=[],h=r([l,c],o);for(const f of o)c.push(s(f));return h}case Pf:{if(a)switch(a){case"BigInt":return r([a,o.toString()],o);case"Boolean":case"Number":case"String":return r([a,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const c=[],h=r([l,c],o);for(const f of p3(o))(t||!qc(va(o[f])))&&c.push([s(f),s(o[f])]);return h}case Vv:return r([l,o.toISOString()],o);case $v:{const{source:c,flags:h}=o;return r([l,{source:c,flags:h}],o)}case Hv:{const c=[],h=r([l,c],o);for(const[f,d]of o)(t||!(qc(va(f))||qc(va(d))))&&c.push([s(f),s(d)]);return h}case Wv:{const c=[],h=r([l,c],o);for(const f of o)(t||!qc(va(f)))&&c.push(s(f));return h}}const{message:u}=o;return r([l,{name:a,message:u}],o)};return s},Jb=(t,{json:e,lossy:n}={})=>{const i=[];return m3(!(e||n),!!e,new Map,i)(t),i},Ff=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?Xb(Jb(t,e)):structuredClone(t):(t,e)=>Xb(Jb(t,e));function g3(t,e){const n=[{type:"text",value:"↩"}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function y3(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function v3(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||g3,i=t.options.footnoteBackLabel||y3,r=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},l=[];let a=-1;for(;++a<t.footnoteOrder.length;){const u=t.footnoteById.get(t.footnoteOrder[a]);if(!u)continue;const c=t.all(u),h=String(u.identifier).toUpperCase(),f=Jl(h.toLowerCase());let d=0;const p=[],g=t.footnoteCounts.get(h);for(;g!==void 0&&++d<=g;){p.length>0&&p.push({type:"text",value:" "});let y=typeof n=="string"?n:n(a,d);typeof y=="string"&&(y={type:"text",value:y}),p.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+f+(d>1?"-"+d:""),dataFootnoteBackref:"",ariaLabel:typeof i=="string"?i:i(a,d),className:["data-footnote-backref"]},children:Array.isArray(y)?y:[y]})}const w=c[c.length-1];if(w&&w.type==="element"&&w.tagName==="p"){const y=w.children[w.children.length-1];y&&y.type==="text"?y.value+=" ":w.children.push({type:"text",value:" "}),w.children.push(...p)}else c.push(...p);const m={type:"element",tagName:"li",properties:{id:e+"fn-"+f},children:t.wrap(c,!0)};t.patch(u,m),l.push(m)}if(l.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...Ff(o),id:"footnote-label"},children:[{type:"text",value:r}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(l,!0)},{type:"text",value:`
`}]}}const mp=function(t){if(t==null)return x3;if(typeof t=="function")return gp(t);if(typeof t=="object")return Array.isArray(t)?w3(t):b3(t);if(typeof t=="string")return S3(t);throw new Error("Expected function, string, or object as test")};function w3(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=mp(t[n]);return gp(i);function i(...r){let s=-1;for(;++s<e.length;)if(e[s].apply(this,r))return!0;return!1}}function b3(t){const e=t;return gp(n);function n(i){const r=i;let s;for(s in t)if(r[s]!==e[s])return!1;return!0}}function S3(t){return gp(e);function e(n){return n&&n.type===t}}function gp(t){return e;function e(n,i,r){return!!(k3(n)&&t.call(this,n,typeof i=="number"?i:void 0,r||void 0))}}function x3(){return!0}function k3(t){return t!==null&&typeof t=="object"&&"type"in t}const cA=[],C3=!0,vy=!1,_3="skip";function hA(t,e,n,i){let r;typeof e=="function"&&typeof n!="function"?(i=n,n=e):r=e;const s=mp(r),o=i?-1:1;l(t,void 0,[])();function l(a,u,c){const h=a&&typeof a=="object"?a:{};if(typeof h.type=="string"){const d=typeof h.tagName=="string"?h.tagName:typeof h.name=="string"?h.name:void 0;Object.defineProperty(f,"name",{value:"node ("+(a.type+(d?"<"+d+">":""))+")"})}return f;function f(){let d=cA,p,g,w;if((!e||s(a,u,c[c.length-1]||void 0))&&(d=E3(n(a,c)),d[0]===vy))return d;if("children"in a&&a.children){const m=a;if(m.children&&d[0]!==_3)for(g=(i?m.children.length:-1)+o,w=c.concat(m);g>-1&&g<m.children.length;){const y=m.children[g];if(p=l(y,g,w)(),p[0]===vy)return p;g=typeof p[1]=="number"?p[1]:g+o}}return d}}}function E3(t){return Array.isArray(t)?t:typeof t=="number"?[C3,t]:t==null?cA:[t]}function qv(t,e,n,i){let r,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,r=n):(s=e,o=n,r=i),hA(t,s,l,r);function l(a,u){const c=u[u.length-1],h=c?c.children.indexOf(a):void 0;return o(a,h,c)}}const wy={}.hasOwnProperty,A3={};function I3(t,e){const n=e||A3,i=new Map,r=new Map,s=new Map,o={...h3,...n.handlers},l={all:u,applyData:O3,definitionById:i,footnoteById:r,footnoteCounts:s,footnoteOrder:[],handlers:o,one:a,options:n,patch:T3,wrap:M3};return qv(t,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const h=c.type==="definition"?i:r,f=String(c.identifier).toUpperCase();h.has(f)||h.set(f,c)}}),l;function a(c,h){const f=c.type,d=l.handlers[f];if(wy.call(l.handlers,f)&&d)return d(l,c,h);if(l.options.passThrough&&l.options.passThrough.includes(f)){if("children"in c){const{children:g,...w}=c,m=Ff(w);return m.children=l.all(c),m}return Ff(c)}return(l.options.unknownHandler||D3)(l,c,h)}function u(c){const h=[];if("children"in c){const f=c.children;let d=-1;for(;++d<f.length;){const p=l.one(f[d],c);if(p){if(d&&f[d-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Zb(p.value)),!Array.isArray(p)&&p.type==="element")){const g=p.children[0];g&&g.type==="text"&&(g.value=Zb(g.value))}Array.isArray(p)?h.push(...p):h.push(p)}}}return h}}function T3(t,e){t.position&&(e.position=yB(t))}function O3(t,e){let n=e;if(t&&t.data){const i=t.data.hName,r=t.data.hChildren,s=t.data.hProperties;if(typeof i=="string")if(n.type==="element")n.tagName=i;else{const o="children"in n?n.children:[n];n={type:"element",tagName:i,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,Ff(s)),"children"in n&&n.children&&r!==null&&r!==void 0&&(n.children=r)}return n}function D3(t,e){const n=e.data||{},i="value"in e&&!(wy.call(n,"hProperties")||wy.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,i),t.applyData(e,i)}function M3(t,e){const n=[];let i=-1;for(e&&n.push({type:"text",value:`
`});++i<t.length;)i&&n.push({type:"text",value:`
`}),n.push(t[i]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function Zb(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function eS(t,e){const n=I3(t,e),i=n.one(t,void 0),r=v3(n),s=Array.isArray(i)?{type:"root",children:i}:i||{type:"root",children:[]};return r&&s.children.push({type:"text",value:`
`},r),s}function R3(t,e){return t&&"run"in t?async function(n,i){const r=eS(n,{file:i,...e});await t.run(r,i)}:function(n,i){return eS(n,{file:i,...t||e})}}function tS(t){if(t)throw t}var Fh=Object.prototype.hasOwnProperty,fA=Object.prototype.toString,nS=Object.defineProperty,iS=Object.getOwnPropertyDescriptor,rS=function(e){return typeof Array.isArray=="function"?Array.isArray(e):fA.call(e)==="[object Array]"},sS=function(e){if(!e||fA.call(e)!=="[object Object]")return!1;var n=Fh.call(e,"constructor"),i=e.constructor&&e.constructor.prototype&&Fh.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!i)return!1;var r;for(r in e);return typeof r>"u"||Fh.call(e,r)},oS=function(e,n){nS&&n.name==="__proto__"?nS(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},lS=function(e,n){if(n==="__proto__")if(Fh.call(e,n)){if(iS)return iS(e,n).value}else return;return e[n]},L3=function t(){var e,n,i,r,s,o,l=arguments[0],a=1,u=arguments.length,c=!1;for(typeof l=="boolean"&&(c=l,l=arguments[1]||{},a=2),(l==null||typeof l!="object"&&typeof l!="function")&&(l={});a<u;++a)if(e=arguments[a],e!=null)for(n in e)i=lS(l,n),r=lS(e,n),l!==r&&(c&&r&&(sS(r)||(s=rS(r)))?(s?(s=!1,o=i&&rS(i)?i:[]):o=i&&sS(i)?i:{},oS(l,{name:n,newValue:t(c,o,r)})):typeof r<"u"&&oS(l,{name:n,newValue:r}));return l};const mm=P0(L3);function by(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function N3(){const t=[],e={run:n,use:i};return e;function n(...r){let s=-1;const o=r.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);l(null,...r);function l(a,...u){const c=t[++s];let h=-1;if(a){o(a);return}for(;++h<r.length;)(u[h]===null||u[h]===void 0)&&(u[h]=r[h]);r=u,c?B3(c,l)(...u):o(null,...u)}}function i(r){if(typeof r!="function")throw new TypeError("Expected `middelware` to be a function, not "+r);return t.push(r),e}}function B3(t,e){let n;return i;function i(...o){const l=t.length>o.length;let a;l&&o.push(r);try{a=t.apply(this,o)}catch(u){const c=u;if(l&&n)throw c;return r(c)}l||(a&&a.then&&typeof a.then=="function"?a.then(s,r):a instanceof Error?r(a):s(a))}function r(o,...l){n||(n=!0,e(o,...l))}function s(o){r(null,o)}}const ji={basename:P3,dirname:F3,extname:z3,join:U3,sep:"/"};function P3(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');oc(t);let n=0,i=-1,r=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else i<0&&(s=!0,i=r+1);return i<0?"":t.slice(n,i)}if(e===t)return"";let o=-1,l=e.length-1;for(;r--;)if(t.codePointAt(r)===47){if(s){n=r+1;break}}else o<0&&(s=!0,o=r+1),l>-1&&(t.codePointAt(r)===e.codePointAt(l--)?l<0&&(i=r):(l=-1,i=o));return n===i?i=o:i<0&&(i=t.length),t.slice(n,i)}function F3(t){if(oc(t),t.length===0)return".";let e=-1,n=t.length,i;for(;--n;)if(t.codePointAt(n)===47){if(i){e=n;break}}else i||(i=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function z3(t){oc(t);let e=t.length,n=-1,i=0,r=-1,s=0,o;for(;e--;){const l=t.codePointAt(e);if(l===47){if(o){i=e+1;break}continue}n<0&&(o=!0,n=e+1),l===46?r<0?r=e:s!==1&&(s=1):r>-1&&(s=-1)}return r<0||n<0||s===0||s===1&&r===n-1&&r===i+1?"":t.slice(r,n)}function U3(...t){let e=-1,n;for(;++e<t.length;)oc(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":j3(n)}function j3(t){oc(t);const e=t.codePointAt(0)===47;let n=V3(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function V3(t,e){let n="",i=0,r=-1,s=0,o=-1,l,a;for(;++o<=t.length;){if(o<t.length)l=t.codePointAt(o);else{if(l===47)break;l=47}if(l===47){if(!(r===o-1||s===1))if(r!==o-1&&s===2){if(n.length<2||i!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(a=n.lastIndexOf("/"),a!==n.length-1){a<0?(n="",i=0):(n=n.slice(0,a),i=n.length-1-n.lastIndexOf("/")),r=o,s=0;continue}}else if(n.length>0){n="",i=0,r=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",i=2)}else n.length>0?n+="/"+t.slice(r+1,o):n=t.slice(r+1,o),i=o-r-1;r=o,s=0}else l===46&&s>-1?s++:s=-1}return n}function oc(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const $3={cwd:H3};function H3(){return"/"}function Sy(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function W3(t){if(typeof t=="string")t=new URL(t);else if(!Sy(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return q3(t)}function q3(t){if(t.hostname!==""){const i=new TypeError('File URL host must be "localhost" or empty on darwin');throw i.code="ERR_INVALID_FILE_URL_HOST",i}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const i=e.codePointAt(n+2);if(i===70||i===102){const r=new TypeError("File URL path must not include encoded / characters");throw r.code="ERR_INVALID_FILE_URL_PATH",r}}return decodeURIComponent(e)}const gm=["history","path","basename","stem","extname","dirname"];class dA{constructor(e){let n;e?Sy(e)?n={path:e}:typeof e=="string"||Q3(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":$3.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let i=-1;for(;++i<gm.length;){const s=gm[i];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let r;for(r in n)gm.includes(r)||(this[r]=n[r])}get basename(){return typeof this.path=="string"?ji.basename(this.path):void 0}set basename(e){vm(e,"basename"),ym(e,"basename"),this.path=ji.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?ji.dirname(this.path):void 0}set dirname(e){aS(this.basename,"dirname"),this.path=ji.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?ji.extname(this.path):void 0}set extname(e){if(ym(e,"extname"),aS(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ji.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Sy(e)&&(e=W3(e)),vm(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?ji.basename(this.path,this.extname):void 0}set stem(e){vm(e,"stem"),ym(e,"stem"),this.path=ji.join(this.dirname||"",e+(this.extname||""))}fail(e,n,i){const r=this.message(e,n,i);throw r.fatal=!0,r}info(e,n,i){const r=this.message(e,n,i);return r.fatal=void 0,r}message(e,n,i){const r=new Jt(e,n,i);return this.path&&(r.name=this.path+":"+r.name,r.file=this.path),r.fatal=!1,this.messages.push(r),r}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function ym(t,e){if(t&&t.includes(ji.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+ji.sep+"`")}function vm(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function aS(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function Q3(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const K3=function(t){const i=this.constructor.prototype,r=i[t],s=function(){return r.apply(s,arguments)};return Object.setPrototypeOf(s,i),s},Y3={}.hasOwnProperty;class Qv extends K3{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=N3()}copy(){const e=new Qv;let n=-1;for(;++n<this.attachers.length;){const i=this.attachers[n];e.use(...i)}return e.data(mm(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(Sm("data",this.frozen),this.namespace[e]=n,this):Y3.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Sm("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...i]=this.attachers[this.freezeIndex];if(i[0]===!1)continue;i[0]===!0&&(i[0]=void 0);const r=n.call(e,...i);typeof r=="function"&&this.transformers.use(r)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=Qc(e),i=this.parser||this.Parser;return wm("parse",i),i(String(n),n)}process(e,n){const i=this;return this.freeze(),wm("process",this.parser||this.Parser),bm("process",this.compiler||this.Compiler),n?r(void 0,n):new Promise(r);function r(s,o){const l=Qc(e),a=i.parse(l);i.run(a,l,function(c,h,f){if(c||!h||!f)return u(c);const d=h,p=i.stringify(d,f);J3(p)?f.value=p:f.result=p,u(c,f)});function u(c,h){c||!h?o(c):s?s(h):n(void 0,h)}}}processSync(e){let n=!1,i;return this.freeze(),wm("processSync",this.parser||this.Parser),bm("processSync",this.compiler||this.Compiler),this.process(e,r),cS("processSync","process",n),i;function r(s,o){n=!0,tS(s),i=o}}run(e,n,i){uS(e),this.freeze();const r=this.transformers;return!i&&typeof n=="function"&&(i=n,n=void 0),i?s(void 0,i):new Promise(s);function s(o,l){const a=Qc(n);r.run(e,a,u);function u(c,h,f){const d=h||e;c?l(c):o?o(d):i(void 0,d,f)}}}runSync(e,n){let i=!1,r;return this.run(e,n,s),cS("runSync","run",i),r;function s(o,l){tS(o),r=l,i=!0}}stringify(e,n){this.freeze();const i=Qc(n),r=this.compiler||this.Compiler;return bm("stringify",r),uS(e),r(e,i)}use(e,...n){const i=this.attachers,r=this.namespace;if(Sm("use",this.frozen),e!=null)if(typeof e=="function")a(e,n);else if(typeof e=="object")Array.isArray(e)?l(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(u){if(typeof u=="function")a(u,[]);else if(typeof u=="object")if(Array.isArray(u)){const[c,...h]=u;a(c,h)}else o(u);else throw new TypeError("Expected usable value, not `"+u+"`")}function o(u){if(!("plugins"in u)&&!("settings"in u))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");l(u.plugins),u.settings&&(r.settings=mm(!0,r.settings,u.settings))}function l(u){let c=-1;if(u!=null)if(Array.isArray(u))for(;++c<u.length;){const h=u[c];s(h)}else throw new TypeError("Expected a list of plugins, not `"+u+"`")}function a(u,c){let h=-1,f=-1;for(;++h<i.length;)if(i[h][0]===u){f=h;break}if(f===-1)i.push([u,...c]);else if(c.length>0){let[d,...p]=c;const g=i[f][1];by(g)&&by(d)&&(d=mm(!0,g,d)),i[f]=[u,d,...p]}}}}const G3=new Qv().freeze();function wm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function bm(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Sm(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function uS(t){if(!by(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function cS(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function Qc(t){return X3(t)?t:new dA(t)}function X3(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function J3(t){return typeof t=="string"||Z3(t)}function Z3(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const e4="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",hS=[],fS={allowDangerousHtml:!0},t4=/^(https?|ircs?|mailto|xmpp)$/i,n4=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function i4(t){const e=r4(t),n=s4(t);return o4(e.runSync(e.parse(n),n),t)}function r4(t){const e=t.rehypePlugins||hS,n=t.remarkPlugins||hS,i=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...fS}:fS;return G3().use(zF).use(n).use(R3,i).use(e)}function s4(t){const e=t.children||"",n=new dA;return typeof e=="string"&&(n.value=e),n}function o4(t,e){const n=e.allowedElements,i=e.allowElement,r=e.components,s=e.disallowedElements,o=e.skipHtml,l=e.unwrapDisallowed,a=e.urlTransform||l4;for(const c of n4)Object.hasOwn(e,c.from)&&(""+c.from+(c.to?"use `"+c.to+"` instead":"remove it")+e4+c.id,void 0);return e.className&&(t={type:"element",tagName:"div",properties:{className:e.className},children:t.type==="root"?t.children:[t]}),qv(t,u),xB(t,{Fragment:T.Fragment,components:r,ignoreInvalidStyle:!0,jsx:T.jsx,jsxs:T.jsxs,passKeys:!0,passNode:!0});function u(c,h,f){if(c.type==="raw"&&f&&typeof h=="number")return o?f.children.splice(h,1):f.children[h]={type:"text",value:c.value},h;if(c.type==="element"){let d;for(d in fm)if(Object.hasOwn(fm,d)&&Object.hasOwn(c.properties,d)){const p=c.properties[d],g=fm[d];(g===null||g.includes(c.tagName))&&(c.properties[d]=a(String(p||""),d,c))}}if(c.type==="element"){let d=n?!n.includes(c.tagName):s?s.includes(c.tagName):!1;if(!d&&i&&typeof h=="number"&&(d=!i(c,h,f)),d&&f&&typeof h=="number")return l&&c.children?f.children.splice(h,1,...c.children):f.children.splice(h,1),h}}}function l4(t){const e=t.indexOf(":"),n=t.indexOf("?"),i=t.indexOf("#"),r=t.indexOf("/");return e===-1||r!==-1&&e>r||n!==-1&&e>n||i!==-1&&e>i||t4.test(t.slice(0,e))?t:""}function dS(t,e){const n=String(t);if(typeof e!="string")throw new TypeError("Expected character");let i=0,r=n.indexOf(e);for(;r!==-1;)i++,r=n.indexOf(e,r+e.length);return i}function a4(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function u4(t,e,n){const r=mp((n||{}).ignore||[]),s=c4(e);let o=-1;for(;++o<s.length;)hA(t,"text",l);function l(u,c){let h=-1,f;for(;++h<c.length;){const d=c[h],p=f?f.children:void 0;if(r(d,p?p.indexOf(d):void 0,f))return;f=d}if(f)return a(u,c)}function a(u,c){const h=c[c.length-1],f=s[o][0],d=s[o][1];let p=0;const w=h.children.indexOf(u);let m=!1,y=[];f.lastIndex=0;let v=f.exec(u.value);for(;v;){const x=v.index,_={index:v.index,input:v.input,stack:[...c,u]};let b=d(...v,_);if(typeof b=="string"&&(b=b.length>0?{type:"text",value:b}:void 0),b===!1?f.lastIndex=x+1:(p!==x&&y.push({type:"text",value:u.value.slice(p,x)}),Array.isArray(b)?y.push(...b):b&&y.push(b),p=x+v[0].length,m=!0),!f.global)break;v=f.exec(u.value)}return m?(p<u.value.length&&y.push({type:"text",value:u.value.slice(p)}),h.children.splice(w,1,...y)):y=[u],w+y.length}}function c4(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let i=-1;for(;++i<n.length;){const r=n[i];e.push([h4(r[0]),f4(r[1])])}return e}function h4(t){return typeof t=="string"?new RegExp(a4(t),"g"):t}function f4(t){return typeof t=="function"?t:function(){return t}}const xm="phrasing",km=["autolink","link","image","label"];function d4(){return{transforms:[b4],enter:{literalAutolink:m4,literalAutolinkEmail:Cm,literalAutolinkHttp:Cm,literalAutolinkWww:Cm},exit:{literalAutolink:w4,literalAutolinkEmail:v4,literalAutolinkHttp:g4,literalAutolinkWww:y4}}}function p4(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:xm,notInConstruct:km},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:xm,notInConstruct:km},{character:":",before:"[ps]",after:"\\/",inConstruct:xm,notInConstruct:km}]}}function m4(t){this.enter({type:"link",title:null,url:"",children:[]},t)}function Cm(t){this.config.enter.autolinkProtocol.call(this,t)}function g4(t){this.config.exit.autolinkProtocol.call(this,t)}function y4(t){this.config.exit.data.call(this,t);const e=this.stack[this.stack.length-1];e.type,e.url="http://"+this.sliceSerialize(t)}function v4(t){this.config.exit.autolinkEmail.call(this,t)}function w4(t){this.exit(t)}function b4(t){u4(t,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,S4],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),x4]],{ignore:["link","linkReference"]})}function S4(t,e,n,i,r){let s="";if(!pA(r)||(/^w/i.test(e)&&(n=e+n,e="",s="http://"),!k4(n)))return!1;const o=C4(n+i);if(!o[0])return!1;const l={type:"link",title:null,url:s+e+o[0],children:[{type:"text",value:e+o[0]}]};return o[1]?[l,{type:"text",value:o[1]}]:l}function x4(t,e,n,i){return!pA(i,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+e+"@"+n,children:[{type:"text",value:e+"@"+n}]}}function k4(t){const e=t.split(".");return!(e.length<2||e[e.length-1]&&(/_/.test(e[e.length-1])||!/[a-zA-Z\d]/.test(e[e.length-1]))||e[e.length-2]&&(/_/.test(e[e.length-2])||!/[a-zA-Z\d]/.test(e[e.length-2])))}function C4(t){const e=/[!"&'),.:;<>?\]}]+$/.exec(t);if(!e)return[t,void 0];t=t.slice(0,e.index);let n=e[0],i=n.indexOf(")");const r=dS(t,"(");let s=dS(t,")");for(;i!==-1&&r>s;)t+=n.slice(0,i+1),n=n.slice(i+1),i=n.indexOf(")"),s++;return[t,n]}function pA(t,e){const n=t.input.charCodeAt(t.index-1);return(t.index===0||co(n)||fp(n))&&(!e||n!==47)}mA.peek=R4;function _4(){this.buffer()}function E4(t){this.enter({type:"footnoteReference",identifier:"",label:""},t)}function A4(){this.buffer()}function I4(t){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},t)}function T4(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=_i(this.sliceSerialize(t)).toLowerCase(),n.label=e}function O4(t){this.exit(t)}function D4(t){const e=this.resume(),n=this.stack[this.stack.length-1];n.type,n.identifier=_i(this.sliceSerialize(t)).toLowerCase(),n.label=e}function M4(t){this.exit(t)}function R4(){return"["}function mA(t,e,n,i){const r=n.createTracker(i);let s=r.move("[^");const o=n.enter("footnoteReference"),l=n.enter("reference");return s+=r.move(n.safe(n.associationId(t),{after:"]",before:s})),l(),o(),s+=r.move("]"),s}function L4(){return{enter:{gfmFootnoteCallString:_4,gfmFootnoteCall:E4,gfmFootnoteDefinitionLabelString:A4,gfmFootnoteDefinition:I4},exit:{gfmFootnoteCallString:T4,gfmFootnoteCall:O4,gfmFootnoteDefinitionLabelString:D4,gfmFootnoteDefinition:M4}}}function N4(t){let e=!1;return t&&t.firstLineBlank&&(e=!0),{handlers:{footnoteDefinition:n,footnoteReference:mA},unsafe:[{character:"[",inConstruct:["label","phrasing","reference"]}]};function n(i,r,s,o){const l=s.createTracker(o);let a=l.move("[^");const u=s.enter("footnoteDefinition"),c=s.enter("label");return a+=l.move(s.safe(s.associationId(i),{before:a,after:"]"})),c(),a+=l.move("]:"),i.children&&i.children.length>0&&(l.shift(4),a+=l.move((e?`
`:" ")+s.indentLines(s.containerFlow(i,l.current()),e?gA:B4))),u(),a}}function B4(t,e,n){return e===0?t:gA(t,e,n)}function gA(t,e,n){return(n?"":"    ")+t}const P4=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];yA.peek=V4;function F4(){return{canContainEols:["delete"],enter:{strikethrough:U4},exit:{strikethrough:j4}}}function z4(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:P4}],handlers:{delete:yA}}}function U4(t){this.enter({type:"delete",children:[]},t)}function j4(t){this.exit(t)}function yA(t,e,n,i){const r=n.createTracker(i),s=n.enter("strikethrough");let o=r.move("~~");return o+=n.containerPhrasing(t,{...r.current(),before:o,after:"~"}),o+=r.move("~~"),s(),o}function V4(){return"~"}function $4(t){return t.length}function H4(t,e){const n=e||{},i=(n.align||[]).concat(),r=n.stringLength||$4,s=[],o=[],l=[],a=[];let u=0,c=-1;for(;++c<t.length;){const g=[],w=[];let m=-1;for(t[c].length>u&&(u=t[c].length);++m<t[c].length;){const y=W4(t[c][m]);if(n.alignDelimiters!==!1){const v=r(y);w[m]=v,(a[m]===void 0||v>a[m])&&(a[m]=v)}g.push(y)}o[c]=g,l[c]=w}let h=-1;if(typeof i=="object"&&"length"in i)for(;++h<u;)s[h]=pS(i[h]);else{const g=pS(i);for(;++h<u;)s[h]=g}h=-1;const f=[],d=[];for(;++h<u;){const g=s[h];let w="",m="";g===99?(w=":",m=":"):g===108?w=":":g===114&&(m=":");let y=n.alignDelimiters===!1?1:Math.max(1,a[h]-w.length-m.length);const v=w+"-".repeat(y)+m;n.alignDelimiters!==!1&&(y=w.length+y+m.length,y>a[h]&&(a[h]=y),d[h]=y),f[h]=v}o.splice(1,0,f),l.splice(1,0,d),c=-1;const p=[];for(;++c<o.length;){const g=o[c],w=l[c];h=-1;const m=[];for(;++h<u;){const y=g[h]||"";let v="",x="";if(n.alignDelimiters!==!1){const _=a[h]-(w[h]||0),b=s[h];b===114?v=" ".repeat(_):b===99?_%2?(v=" ".repeat(_/2+.5),x=" ".repeat(_/2-.5)):(v=" ".repeat(_/2),x=v):x=" ".repeat(_)}n.delimiterStart!==!1&&!h&&m.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&y==="")&&(n.delimiterStart!==!1||h)&&m.push(" "),n.alignDelimiters!==!1&&m.push(v),m.push(y),n.alignDelimiters!==!1&&m.push(x),n.padding!==!1&&m.push(" "),(n.delimiterEnd!==!1||h!==u-1)&&m.push("|")}p.push(n.delimiterEnd===!1?m.join("").replace(/ +$/,""):m.join(""))}return p.join(`
`)}function W4(t){return t==null?"":String(t)}function pS(t){const e=typeof t=="string"?t.codePointAt(0):0;return e===67||e===99?99:e===76||e===108?108:e===82||e===114?114:0}function q4(t,e,n,i){const r=n.enter("blockquote"),s=n.createTracker(i);s.move("> "),s.shift(2);const o=n.indentLines(n.containerFlow(t,s.current()),Q4);return r(),o}function Q4(t,e,n){return">"+(n?"":" ")+t}function K4(t,e){return mS(t,e.inConstruct,!0)&&!mS(t,e.notInConstruct,!1)}function mS(t,e,n){if(typeof e=="string"&&(e=[e]),!e||e.length===0)return n;let i=-1;for(;++i<e.length;)if(t.includes(e[i]))return!0;return!1}function gS(t,e,n,i){let r=-1;for(;++r<n.unsafe.length;)if(n.unsafe[r].character===`
`&&K4(n.stack,n.unsafe[r]))return/[ \t]/.test(i.before)?"":" ";return`\\
`}function Y4(t,e){const n=String(t);let i=n.indexOf(e),r=i,s=0,o=0;if(typeof e!="string")throw new TypeError("Expected substring");for(;i!==-1;)i===r?++s>o&&(o=s):s=1,r=i+e.length,i=n.indexOf(e,r);return o}function G4(t,e){return!!(e.options.fences===!1&&t.value&&!t.lang&&/[^ \r\n]/.test(t.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(t.value))}function X4(t){const e=t.options.fence||"`";if(e!=="`"&&e!=="~")throw new Error("Cannot serialize code with `"+e+"` for `options.fence`, expected `` ` `` or `~`");return e}function J4(t,e,n,i){const r=X4(n),s=t.value||"",o=r==="`"?"GraveAccent":"Tilde";if(G4(t,n)){const h=n.enter("codeIndented"),f=n.indentLines(s,Z4);return h(),f}const l=n.createTracker(i),a=r.repeat(Math.max(Y4(s,r)+1,3)),u=n.enter("codeFenced");let c=l.move(a);if(t.lang){const h=n.enter(`codeFencedLang${o}`);c+=l.move(n.safe(t.lang,{before:c,after:" ",encode:["`"],...l.current()})),h()}if(t.lang&&t.meta){const h=n.enter(`codeFencedMeta${o}`);c+=l.move(" "),c+=l.move(n.safe(t.meta,{before:c,after:`
`,encode:["`"],...l.current()})),h()}return c+=l.move(`
`),s&&(c+=l.move(s+`
`)),c+=l.move(a),u(),c}function Z4(t,e,n){return(n?"":"    ")+t}function Kv(t){const e=t.options.quote||'"';if(e!=='"'&&e!=="'")throw new Error("Cannot serialize title with `"+e+"` for `options.quote`, expected `\"`, or `'`");return e}function ez(t,e,n,i){const r=Kv(n),s=r==='"'?"Quote":"Apostrophe",o=n.enter("definition");let l=n.enter("label");const a=n.createTracker(i);let u=a.move("[");return u+=a.move(n.safe(n.associationId(t),{before:u,after:"]",...a.current()})),u+=a.move("]: "),l(),!t.url||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(t.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(l=n.enter("destinationRaw"),u+=a.move(n.safe(t.url,{before:u,after:t.title?" ":`
`,...a.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=a.move(" "+r),u+=a.move(n.safe(t.title,{before:u,after:r,...a.current()})),u+=a.move(r),l()),o(),u}function tz(t){const e=t.options.emphasis||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize emphasis with `"+e+"` for `options.emphasis`, expected `*`, or `_`");return e}function Iu(t){return"&#x"+t.toString(16).toUpperCase()+";"}function zf(t,e,n){const i=Rl(t),r=Rl(e);return i===void 0?r===void 0?n==="_"?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!0}:i===1?r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!0}:{inside:!1,outside:!1}:r===void 0?{inside:!1,outside:!1}:r===1?{inside:!0,outside:!1}:{inside:!1,outside:!1}}vA.peek=nz;function vA(t,e,n,i){const r=tz(n),s=n.enter("emphasis"),o=n.createTracker(i),l=o.move(r);let a=o.move(n.containerPhrasing(t,{after:r,before:l,...o.current()}));const u=a.charCodeAt(0),c=zf(i.before.charCodeAt(i.before.length-1),u,r);c.inside&&(a=Iu(u)+a.slice(1));const h=a.charCodeAt(a.length-1),f=zf(i.after.charCodeAt(0),h,r);f.inside&&(a=a.slice(0,-1)+Iu(h));const d=o.move(r);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},l+a+d}function nz(t,e,n){return n.options.emphasis||"*"}function iz(t,e){let n=!1;return qv(t,function(i){if("value"in i&&/\r?\n|\r/.test(i.value)||i.type==="break")return n=!0,vy}),!!((!t.depth||t.depth<3)&&zv(t)&&(e.options.setext||n))}function rz(t,e,n,i){const r=Math.max(Math.min(6,t.depth||1),1),s=n.createTracker(i);if(iz(t,n)){const c=n.enter("headingSetext"),h=n.enter("phrasing"),f=n.containerPhrasing(t,{...s.current(),before:`
`,after:`
`});return h(),c(),f+`
`+(r===1?"=":"-").repeat(f.length-(Math.max(f.lastIndexOf("\r"),f.lastIndexOf(`
`))+1))}const o="#".repeat(r),l=n.enter("headingAtx"),a=n.enter("phrasing");s.move(o+" ");let u=n.containerPhrasing(t,{before:"# ",after:`
`,...s.current()});return/^[\t ]/.test(u)&&(u=Iu(u.charCodeAt(0))+u.slice(1)),u=u?o+" "+u:o,n.options.closeAtx&&(u+=" "+o),a(),l(),u}wA.peek=sz;function wA(t){return t.value||""}function sz(){return"<"}bA.peek=oz;function bA(t,e,n,i){const r=Kv(n),s=r==='"'?"Quote":"Apostrophe",o=n.enter("image");let l=n.enter("label");const a=n.createTracker(i);let u=a.move("![");return u+=a.move(n.safe(t.alt,{before:u,after:"]",...a.current()})),u+=a.move("]("),l(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(l=n.enter("destinationLiteral"),u+=a.move("<"),u+=a.move(n.safe(t.url,{before:u,after:">",...a.current()})),u+=a.move(">")):(l=n.enter("destinationRaw"),u+=a.move(n.safe(t.url,{before:u,after:t.title?" ":")",...a.current()}))),l(),t.title&&(l=n.enter(`title${s}`),u+=a.move(" "+r),u+=a.move(n.safe(t.title,{before:u,after:r,...a.current()})),u+=a.move(r),l()),u+=a.move(")"),o(),u}function oz(){return"!"}SA.peek=lz;function SA(t,e,n,i){const r=t.referenceType,s=n.enter("imageReference");let o=n.enter("label");const l=n.createTracker(i);let a=l.move("![");const u=n.safe(t.alt,{before:a,after:"]",...l.current()});a+=l.move(u+"]["),o();const c=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:a,after:"]",...l.current()});return o(),n.stack=c,s(),r==="full"||!u||u!==h?a+=l.move(h+"]"):r==="shortcut"?a=a.slice(0,-1):a+=l.move("]"),a}function lz(){return"!"}xA.peek=az;function xA(t,e,n){let i=t.value||"",r="`",s=-1;for(;new RegExp("(^|[^`])"+r+"([^`]|$)").test(i);)r+="`";for(/[^ \r\n]/.test(i)&&(/^[ \r\n]/.test(i)&&/[ \r\n]$/.test(i)||/^`|`$/.test(i))&&(i=" "+i+" ");++s<n.unsafe.length;){const o=n.unsafe[s],l=n.compilePattern(o);let a;if(o.atBreak)for(;a=l.exec(i);){let u=a.index;i.charCodeAt(u)===10&&i.charCodeAt(u-1)===13&&u--,i=i.slice(0,u)+" "+i.slice(a.index+1)}}return r+i+r}function az(){return"`"}function kA(t,e){const n=zv(t);return!!(!e.options.resourceLink&&t.url&&!t.title&&t.children&&t.children.length===1&&t.children[0].type==="text"&&(n===t.url||"mailto:"+n===t.url)&&/^[a-z][a-z+.-]+:/i.test(t.url)&&!/[\0- <>\u007F]/.test(t.url))}CA.peek=uz;function CA(t,e,n,i){const r=Kv(n),s=r==='"'?"Quote":"Apostrophe",o=n.createTracker(i);let l,a;if(kA(t,n)){const c=n.stack;n.stack=[],l=n.enter("autolink");let h=o.move("<");return h+=o.move(n.containerPhrasing(t,{before:h,after:">",...o.current()})),h+=o.move(">"),l(),n.stack=c,h}l=n.enter("link"),a=n.enter("label");let u=o.move("[");return u+=o.move(n.containerPhrasing(t,{before:u,after:"](",...o.current()})),u+=o.move("]("),a(),!t.url&&t.title||/[\0- \u007F]/.test(t.url)?(a=n.enter("destinationLiteral"),u+=o.move("<"),u+=o.move(n.safe(t.url,{before:u,after:">",...o.current()})),u+=o.move(">")):(a=n.enter("destinationRaw"),u+=o.move(n.safe(t.url,{before:u,after:t.title?" ":")",...o.current()}))),a(),t.title&&(a=n.enter(`title${s}`),u+=o.move(" "+r),u+=o.move(n.safe(t.title,{before:u,after:r,...o.current()})),u+=o.move(r),a()),u+=o.move(")"),l(),u}function uz(t,e,n){return kA(t,n)?"<":"["}_A.peek=cz;function _A(t,e,n,i){const r=t.referenceType,s=n.enter("linkReference");let o=n.enter("label");const l=n.createTracker(i);let a=l.move("[");const u=n.containerPhrasing(t,{before:a,after:"]",...l.current()});a+=l.move(u+"]["),o();const c=n.stack;n.stack=[],o=n.enter("reference");const h=n.safe(n.associationId(t),{before:a,after:"]",...l.current()});return o(),n.stack=c,s(),r==="full"||!u||u!==h?a+=l.move(h+"]"):r==="shortcut"?a=a.slice(0,-1):a+=l.move("]"),a}function cz(){return"["}function Yv(t){const e=t.options.bullet||"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bullet`, expected `*`, `+`, or `-`");return e}function hz(t){const e=Yv(t),n=t.options.bulletOther;if(!n)return e==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===e)throw new Error("Expected `bullet` (`"+e+"`) and `bulletOther` (`"+n+"`) to be different");return n}function fz(t){const e=t.options.bulletOrdered||".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrdered`, expected `.` or `)`");return e}function EA(t){const e=t.options.rule||"*";if(e!=="*"&&e!=="-"&&e!=="_")throw new Error("Cannot serialize rules with `"+e+"` for `options.rule`, expected `*`, `-`, or `_`");return e}function dz(t,e,n,i){const r=n.enter("list"),s=n.bulletCurrent;let o=t.ordered?fz(n):Yv(n);const l=t.ordered?o==="."?")":".":hz(n);let a=e&&n.bulletLastUsed?o===n.bulletLastUsed:!1;if(!t.ordered){const c=t.children?t.children[0]:void 0;if((o==="*"||o==="-")&&c&&(!c.children||!c.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(a=!0),EA(n)===o&&c){let h=-1;for(;++h<t.children.length;){const f=t.children[h];if(f&&f.type==="listItem"&&f.children&&f.children[0]&&f.children[0].type==="thematicBreak"){a=!0;break}}}}a&&(o=l),n.bulletCurrent=o;const u=n.containerFlow(t,i);return n.bulletLastUsed=o,n.bulletCurrent=s,r(),u}function pz(t){const e=t.options.listItemIndent||"one";if(e!=="tab"&&e!=="one"&&e!=="mixed")throw new Error("Cannot serialize items with `"+e+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return e}function mz(t,e,n,i){const r=pz(n);let s=n.bulletCurrent||Yv(n);e&&e.type==="list"&&e.ordered&&(s=(typeof e.start=="number"&&e.start>-1?e.start:1)+(n.options.incrementListMarker===!1?0:e.children.indexOf(t))+s);let o=s.length+1;(r==="tab"||r==="mixed"&&(e&&e.type==="list"&&e.spread||t.spread))&&(o=Math.ceil(o/4)*4);const l=n.createTracker(i);l.move(s+" ".repeat(o-s.length)),l.shift(o);const a=n.enter("listItem"),u=n.indentLines(n.containerFlow(t,l.current()),c);return a(),u;function c(h,f,d){return f?(d?"":" ".repeat(o))+h:(d?s:s+" ".repeat(o-s.length))+h}}function gz(t,e,n,i){const r=n.enter("paragraph"),s=n.enter("phrasing"),o=n.containerPhrasing(t,i);return s(),r(),o}const yz=mp(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function vz(t,e,n,i){return(t.children.some(function(o){return yz(o)})?n.containerPhrasing:n.containerFlow).call(n,t,i)}function wz(t){const e=t.options.strong||"*";if(e!=="*"&&e!=="_")throw new Error("Cannot serialize strong with `"+e+"` for `options.strong`, expected `*`, or `_`");return e}AA.peek=bz;function AA(t,e,n,i){const r=wz(n),s=n.enter("strong"),o=n.createTracker(i),l=o.move(r+r);let a=o.move(n.containerPhrasing(t,{after:r,before:l,...o.current()}));const u=a.charCodeAt(0),c=zf(i.before.charCodeAt(i.before.length-1),u,r);c.inside&&(a=Iu(u)+a.slice(1));const h=a.charCodeAt(a.length-1),f=zf(i.after.charCodeAt(0),h,r);f.inside&&(a=a.slice(0,-1)+Iu(h));const d=o.move(r+r);return s(),n.attentionEncodeSurroundingInfo={after:f.outside,before:c.outside},l+a+d}function bz(t,e,n){return n.options.strong||"*"}function Sz(t,e,n,i){return n.safe(t.value,i)}function xz(t){const e=t.options.ruleRepetition||3;if(e<3)throw new Error("Cannot serialize rules with repetition `"+e+"` for `options.ruleRepetition`, expected `3` or more");return e}function kz(t,e,n){const i=(EA(n)+(n.options.ruleSpaces?" ":"")).repeat(xz(n));return n.options.ruleSpaces?i.slice(0,-1):i}const IA={blockquote:q4,break:gS,code:J4,definition:ez,emphasis:vA,hardBreak:gS,heading:rz,html:wA,image:bA,imageReference:SA,inlineCode:xA,link:CA,linkReference:_A,list:dz,listItem:mz,paragraph:gz,root:vz,strong:AA,text:Sz,thematicBreak:kz};function Cz(){return{enter:{table:_z,tableData:yS,tableHeader:yS,tableRow:Az},exit:{codeText:Iz,table:Ez,tableData:_m,tableHeader:_m,tableRow:_m}}}function _z(t){const e=t._align;this.enter({type:"table",align:e.map(function(n){return n==="none"?null:n}),children:[]},t),this.data.inTable=!0}function Ez(t){this.exit(t),this.data.inTable=void 0}function Az(t){this.enter({type:"tableRow",children:[]},t)}function _m(t){this.exit(t)}function yS(t){this.enter({type:"tableCell",children:[]},t)}function Iz(t){let e=this.resume();this.data.inTable&&(e=e.replace(/\\([\\|])/g,Tz));const n=this.stack[this.stack.length-1];n.type,n.value=e,this.exit(t)}function Tz(t,e){return e==="|"?e:t}function Oz(t){const e=t||{},n=e.tableCellPadding,i=e.tablePipeAlign,r=e.stringLength,s=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:f,table:o,tableCell:a,tableRow:l}};function o(d,p,g,w){return u(c(d,g,w),d.align)}function l(d,p,g,w){const m=h(d,g,w),y=u([m]);return y.slice(0,y.indexOf(`
`))}function a(d,p,g,w){const m=g.enter("tableCell"),y=g.enter("phrasing"),v=g.containerPhrasing(d,{...w,before:s,after:s});return y(),m(),v}function u(d,p){return H4(d,{align:p,alignDelimiters:i,padding:n,stringLength:r})}function c(d,p,g){const w=d.children;let m=-1;const y=[],v=p.enter("table");for(;++m<w.length;)y[m]=h(w[m],p,g);return v(),y}function h(d,p,g){const w=d.children;let m=-1;const y=[],v=p.enter("tableRow");for(;++m<w.length;)y[m]=a(w[m],d,p,g);return v(),y}function f(d,p,g){let w=IA.inlineCode(d,p,g);return g.stack.includes("tableCell")&&(w=w.replace(/\|/g,"\\$&")),w}}function Dz(){return{exit:{taskListCheckValueChecked:vS,taskListCheckValueUnchecked:vS,paragraph:Rz}}}function Mz(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:Lz}}}function vS(t){const e=this.stack[this.stack.length-2];e.type,e.checked=t.type==="taskListCheckValueChecked"}function Rz(t){const e=this.stack[this.stack.length-2];if(e&&e.type==="listItem"&&typeof e.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const i=n.children[0];if(i&&i.type==="text"){const r=e.children;let s=-1,o;for(;++s<r.length;){const l=r[s];if(l.type==="paragraph"){o=l;break}}o===n&&(i.value=i.value.slice(1),i.value.length===0?n.children.shift():n.position&&i.position&&typeof i.position.start.offset=="number"&&(i.position.start.column++,i.position.start.offset++,n.position.start=Object.assign({},i.position.start)))}}this.exit(t)}function Lz(t,e,n,i){const r=t.children[0],s=typeof t.checked=="boolean"&&r&&r.type==="paragraph",o="["+(t.checked?"x":" ")+"] ",l=n.createTracker(i);s&&l.move(o);let a=IA.listItem(t,e,n,{...i,...l.current()});return s&&(a=a.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,u)),a;function u(c){return c+o}}function Nz(){return[d4(),L4(),F4(),Cz(),Dz()]}function Bz(t){return{extensions:[p4(),N4(t),z4(),Oz(t),Mz()]}}const Pz={tokenize:$z,partial:!0},TA={tokenize:Hz,partial:!0},OA={tokenize:Wz,partial:!0},DA={tokenize:qz,partial:!0},Fz={tokenize:Qz,partial:!0},MA={name:"wwwAutolink",tokenize:jz,previous:LA},RA={name:"protocolAutolink",tokenize:Vz,previous:NA},Nr={name:"emailAutolink",tokenize:Uz,previous:BA},ar={};function zz(){return{text:ar}}let Fs=48;for(;Fs<123;)ar[Fs]=Nr,Fs++,Fs===58?Fs=65:Fs===91&&(Fs=97);ar[43]=Nr;ar[45]=Nr;ar[46]=Nr;ar[95]=Nr;ar[72]=[Nr,RA];ar[104]=[Nr,RA];ar[87]=[Nr,MA];ar[119]=[Nr,MA];function Uz(t,e,n){const i=this;let r,s;return o;function o(h){return!xy(h)||!BA.call(i,i.previous)||Gv(i.events)?n(h):(t.enter("literalAutolink"),t.enter("literalAutolinkEmail"),l(h))}function l(h){return xy(h)?(t.consume(h),l):h===64?(t.consume(h),a):n(h)}function a(h){return h===46?t.check(Fz,c,u)(h):h===45||h===95||Kt(h)?(s=!0,t.consume(h),a):c(h)}function u(h){return t.consume(h),r=!0,a}function c(h){return s&&r&&nn(i.previous)?(t.exit("literalAutolinkEmail"),t.exit("literalAutolink"),e(h)):n(h)}}function jz(t,e,n){const i=this;return r;function r(o){return o!==87&&o!==119||!LA.call(i,i.previous)||Gv(i.events)?n(o):(t.enter("literalAutolink"),t.enter("literalAutolinkWww"),t.check(Pz,t.attempt(TA,t.attempt(OA,s),n),n)(o))}function s(o){return t.exit("literalAutolinkWww"),t.exit("literalAutolink"),e(o)}}function Vz(t,e,n){const i=this;let r="",s=!1;return o;function o(h){return(h===72||h===104)&&NA.call(i,i.previous)&&!Gv(i.events)?(t.enter("literalAutolink"),t.enter("literalAutolinkHttp"),r+=String.fromCodePoint(h),t.consume(h),l):n(h)}function l(h){if(nn(h)&&r.length<5)return r+=String.fromCodePoint(h),t.consume(h),l;if(h===58){const f=r.toLowerCase();if(f==="http"||f==="https")return t.consume(h),a}return n(h)}function a(h){return h===47?(t.consume(h),s?u:(s=!0,a)):n(h)}function u(h){return h===null||Bf(h)||Ge(h)||co(h)||fp(h)?n(h):t.attempt(TA,t.attempt(OA,c),n)(h)}function c(h){return t.exit("literalAutolinkHttp"),t.exit("literalAutolink"),e(h)}}function $z(t,e,n){let i=0;return r;function r(o){return(o===87||o===119)&&i<3?(i++,t.consume(o),r):o===46&&i===3?(t.consume(o),s):n(o)}function s(o){return o===null?n(o):e(o)}}function Hz(t,e,n){let i,r,s;return o;function o(u){return u===46||u===95?t.check(DA,a,l)(u):u===null||Ge(u)||co(u)||u!==45&&fp(u)?a(u):(s=!0,t.consume(u),o)}function l(u){return u===95?i=!0:(r=i,i=void 0),t.consume(u),o}function a(u){return r||i||!s?n(u):e(u)}}function Wz(t,e){let n=0,i=0;return r;function r(o){return o===40?(n++,t.consume(o),r):o===41&&i<n?s(o):o===33||o===34||o===38||o===39||o===41||o===42||o===44||o===46||o===58||o===59||o===60||o===63||o===93||o===95||o===126?t.check(DA,e,s)(o):o===null||Ge(o)||co(o)?e(o):(t.consume(o),r)}function s(o){return o===41&&i++,t.consume(o),r}}function qz(t,e,n){return i;function i(l){return l===33||l===34||l===39||l===41||l===42||l===44||l===46||l===58||l===59||l===63||l===95||l===126?(t.consume(l),i):l===38?(t.consume(l),s):l===93?(t.consume(l),r):l===60||l===null||Ge(l)||co(l)?e(l):n(l)}function r(l){return l===null||l===40||l===91||Ge(l)||co(l)?e(l):i(l)}function s(l){return nn(l)?o(l):n(l)}function o(l){return l===59?(t.consume(l),i):nn(l)?(t.consume(l),o):n(l)}}function Qz(t,e,n){return i;function i(s){return t.consume(s),r}function r(s){return Kt(s)?n(s):e(s)}}function LA(t){return t===null||t===40||t===42||t===95||t===91||t===93||t===126||Ge(t)}function NA(t){return!nn(t)}function BA(t){return!(t===47||xy(t))}function xy(t){return t===43||t===45||t===46||t===95||Kt(t)}function Gv(t){let e=t.length,n=!1;for(;e--;){const i=t[e][1];if((i.type==="labelLink"||i.type==="labelImage")&&!i._balanced){n=!0;break}if(i._gfmAutolinkLiteralWalkedInto){n=!1;break}}return t.length>0&&!n&&(t[t.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const Kz={tokenize:nU,partial:!0};function Yz(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:Zz,continuation:{tokenize:eU},exit:tU}},text:{91:{name:"gfmFootnoteCall",tokenize:Jz},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:Gz,resolveTo:Xz}}}}function Gz(t,e,n){const i=this;let r=i.events.length;const s=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let o;for(;r--;){const a=i.events[r][1];if(a.type==="labelImage"){o=a;break}if(a.type==="gfmFootnoteCall"||a.type==="labelLink"||a.type==="label"||a.type==="image"||a.type==="link")break}return l;function l(a){if(!o||!o._balanced)return n(a);const u=_i(i.sliceSerialize({start:o.end,end:i.now()}));return u.codePointAt(0)!==94||!s.includes(u.slice(1))?n(a):(t.enter("gfmFootnoteCallLabelMarker"),t.consume(a),t.exit("gfmFootnoteCallLabelMarker"),e(a))}}function Xz(t,e){let n=t.length;for(;n--;)if(t[n][1].type==="labelImage"&&t[n][0]==="enter"){t[n][1];break}t[n+1][1].type="data",t[n+3][1].type="gfmFootnoteCallLabelMarker";const i={type:"gfmFootnoteCall",start:Object.assign({},t[n+3][1].start),end:Object.assign({},t[t.length-1][1].end)},r={type:"gfmFootnoteCallMarker",start:Object.assign({},t[n+3][1].end),end:Object.assign({},t[n+3][1].end)};r.end.column++,r.end.offset++,r.end._bufferIndex++;const s={type:"gfmFootnoteCallString",start:Object.assign({},r.end),end:Object.assign({},t[t.length-1][1].start)},o={type:"chunkString",contentType:"string",start:Object.assign({},s.start),end:Object.assign({},s.end)},l=[t[n+1],t[n+2],["enter",i,e],t[n+3],t[n+4],["enter",r,e],["exit",r,e],["enter",s,e],["enter",o,e],["exit",o,e],["exit",s,e],t[t.length-2],t[t.length-1],["exit",i,e]];return t.splice(n,t.length-n+1,...l),t}function Jz(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s=0,o;return l;function l(h){return t.enter("gfmFootnoteCall"),t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),a}function a(h){return h!==94?n(h):(t.enter("gfmFootnoteCallMarker"),t.consume(h),t.exit("gfmFootnoteCallMarker"),t.enter("gfmFootnoteCallString"),t.enter("chunkString").contentType="string",u)}function u(h){if(s>999||h===93&&!o||h===null||h===91||Ge(h))return n(h);if(h===93){t.exit("chunkString");const f=t.exit("gfmFootnoteCallString");return r.includes(_i(i.sliceSerialize(f)))?(t.enter("gfmFootnoteCallLabelMarker"),t.consume(h),t.exit("gfmFootnoteCallLabelMarker"),t.exit("gfmFootnoteCall"),e):n(h)}return Ge(h)||(o=!0),s++,t.consume(h),h===92?c:u}function c(h){return h===91||h===92||h===93?(t.consume(h),s++,u):u(h)}}function Zz(t,e,n){const i=this,r=i.parser.gfmFootnotes||(i.parser.gfmFootnotes=[]);let s,o=0,l;return a;function a(p){return t.enter("gfmFootnoteDefinition")._container=!0,t.enter("gfmFootnoteDefinitionLabel"),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),u}function u(p){return p===94?(t.enter("gfmFootnoteDefinitionMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionMarker"),t.enter("gfmFootnoteDefinitionLabelString"),t.enter("chunkString").contentType="string",c):n(p)}function c(p){if(o>999||p===93&&!l||p===null||p===91||Ge(p))return n(p);if(p===93){t.exit("chunkString");const g=t.exit("gfmFootnoteDefinitionLabelString");return s=_i(i.sliceSerialize(g)),t.enter("gfmFootnoteDefinitionLabelMarker"),t.consume(p),t.exit("gfmFootnoteDefinitionLabelMarker"),t.exit("gfmFootnoteDefinitionLabel"),f}return Ge(p)||(l=!0),o++,t.consume(p),p===92?h:c}function h(p){return p===91||p===92||p===93?(t.consume(p),o++,c):c(p)}function f(p){return p===58?(t.enter("definitionMarker"),t.consume(p),t.exit("definitionMarker"),r.includes(s)||r.push(s),Te(t,d,"gfmFootnoteDefinitionWhitespace")):n(p)}function d(p){return e(p)}}function eU(t,e,n){return t.check(sc,e,t.attempt(Kz,e,n))}function tU(t){t.exit("gfmFootnoteDefinition")}function nU(t,e,n){const i=this;return Te(t,r,"gfmFootnoteDefinitionIndent",5);function r(s){const o=i.events[i.events.length-1];return o&&o[1].type==="gfmFootnoteDefinitionIndent"&&o[2].sliceSerialize(o[1],!0).length===4?e(s):n(s)}}function iU(t){let n=(t||{}).singleTilde;const i={name:"strikethrough",tokenize:s,resolveAll:r};return n==null&&(n=!0),{text:{126:i},insideSpan:{null:[i]},attentionMarkers:{null:[126]}};function r(o,l){let a=-1;for(;++a<o.length;)if(o[a][0]==="enter"&&o[a][1].type==="strikethroughSequenceTemporary"&&o[a][1]._close){let u=a;for(;u--;)if(o[u][0]==="exit"&&o[u][1].type==="strikethroughSequenceTemporary"&&o[u][1]._open&&o[a][1].end.offset-o[a][1].start.offset===o[u][1].end.offset-o[u][1].start.offset){o[a][1].type="strikethroughSequence",o[u][1].type="strikethroughSequence";const c={type:"strikethrough",start:Object.assign({},o[u][1].start),end:Object.assign({},o[a][1].end)},h={type:"strikethroughText",start:Object.assign({},o[u][1].end),end:Object.assign({},o[a][1].start)},f=[["enter",c,l],["enter",o[u][1],l],["exit",o[u][1],l],["enter",h,l]],d=l.parser.constructs.insideSpan.null;d&&Wn(f,f.length,0,dp(d,o.slice(u+1,a),l)),Wn(f,f.length,0,[["exit",h,l],["enter",o[a][1],l],["exit",o[a][1],l],["exit",c,l]]),Wn(o,u-1,a-u+3,f),a=u+f.length-2;break}}for(a=-1;++a<o.length;)o[a][1].type==="strikethroughSequenceTemporary"&&(o[a][1].type="data");return o}function s(o,l,a){const u=this.previous,c=this.events;let h=0;return f;function f(p){return u===126&&c[c.length-1][1].type!=="characterEscape"?a(p):(o.enter("strikethroughSequenceTemporary"),d(p))}function d(p){const g=Rl(u);if(p===126)return h>1?a(p):(o.consume(p),h++,d);if(h<2&&!n)return a(p);const w=o.exit("strikethroughSequenceTemporary"),m=Rl(p);return w._open=!m||m===2&&!!g,w._close=!g||g===2&&!!m,l(p)}}}class rU{constructor(){this.map=[]}add(e,n,i){sU(this,e,n,i)}consume(e){if(this.map.sort(function(s,o){return s[0]-o[0]}),this.map.length===0)return;let n=this.map.length;const i=[];for(;n>0;)n-=1,i.push(e.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),e.length=this.map[n][0];i.push(e.slice()),e.length=0;let r=i.pop();for(;r;){for(const s of r)e.push(s);r=i.pop()}this.map.length=0}}function sU(t,e,n,i){let r=0;if(!(n===0&&i.length===0)){for(;r<t.map.length;){if(t.map[r][0]===e){t.map[r][1]+=n,t.map[r][2].push(...i);return}r+=1}t.map.push([e,n,i])}}function oU(t,e){let n=!1;const i=[];for(;e<t.length;){const r=t[e];if(n){if(r[0]==="enter")r[1].type==="tableContent"&&i.push(t[e+1][1].type==="tableDelimiterMarker"?"left":"none");else if(r[1].type==="tableContent"){if(t[e-1][1].type==="tableDelimiterMarker"){const s=i.length-1;i[s]=i[s]==="left"?"center":"right"}}else if(r[1].type==="tableDelimiterRow")break}else r[0]==="enter"&&r[1].type==="tableDelimiterRow"&&(n=!0);e+=1}return i}function lU(){return{flow:{null:{name:"table",tokenize:aU,resolveAll:uU}}}}function aU(t,e,n){const i=this;let r=0,s=0,o;return l;function l(A){let B=i.events.length-1;for(;B>-1;){const K=i.events[B][1].type;if(K==="lineEnding"||K==="linePrefix")B--;else break}const N=B>-1?i.events[B][1].type:null,W=N==="tableHead"||N==="tableRow"?b:a;return W===b&&i.parser.lazy[i.now().line]?n(A):W(A)}function a(A){return t.enter("tableHead"),t.enter("tableRow"),u(A)}function u(A){return A===124||(o=!0,s+=1),c(A)}function c(A){return A===null?n(A):ie(A)?s>1?(s=0,i.interrupt=!0,t.exit("tableRow"),t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),d):n(A):_e(A)?Te(t,c,"whitespace")(A):(s+=1,o&&(o=!1,r+=1),A===124?(t.enter("tableCellDivider"),t.consume(A),t.exit("tableCellDivider"),o=!0,c):(t.enter("data"),h(A)))}function h(A){return A===null||A===124||Ge(A)?(t.exit("data"),c(A)):(t.consume(A),A===92?f:h)}function f(A){return A===92||A===124?(t.consume(A),h):h(A)}function d(A){return i.interrupt=!1,i.parser.lazy[i.now().line]?n(A):(t.enter("tableDelimiterRow"),o=!1,_e(A)?Te(t,p,"linePrefix",i.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(A):p(A))}function p(A){return A===45||A===58?w(A):A===124?(o=!0,t.enter("tableCellDivider"),t.consume(A),t.exit("tableCellDivider"),g):_(A)}function g(A){return _e(A)?Te(t,w,"whitespace")(A):w(A)}function w(A){return A===58?(s+=1,o=!0,t.enter("tableDelimiterMarker"),t.consume(A),t.exit("tableDelimiterMarker"),m):A===45?(s+=1,m(A)):A===null||ie(A)?x(A):_(A)}function m(A){return A===45?(t.enter("tableDelimiterFiller"),y(A)):_(A)}function y(A){return A===45?(t.consume(A),y):A===58?(o=!0,t.exit("tableDelimiterFiller"),t.enter("tableDelimiterMarker"),t.consume(A),t.exit("tableDelimiterMarker"),v):(t.exit("tableDelimiterFiller"),v(A))}function v(A){return _e(A)?Te(t,x,"whitespace")(A):x(A)}function x(A){return A===124?p(A):A===null||ie(A)?!o||r!==s?_(A):(t.exit("tableDelimiterRow"),t.exit("tableHead"),e(A)):_(A)}function _(A){return n(A)}function b(A){return t.enter("tableRow"),I(A)}function I(A){return A===124?(t.enter("tableCellDivider"),t.consume(A),t.exit("tableCellDivider"),I):A===null||ie(A)?(t.exit("tableRow"),e(A)):_e(A)?Te(t,I,"whitespace")(A):(t.enter("data"),D(A))}function D(A){return A===null||A===124||Ge(A)?(t.exit("data"),I(A)):(t.consume(A),A===92?F:D)}function F(A){return A===92||A===124?(t.consume(A),D):D(A)}}function uU(t,e){let n=-1,i=!0,r=0,s=[0,0,0,0],o=[0,0,0,0],l=!1,a=0,u,c,h;const f=new rU;for(;++n<t.length;){const d=t[n],p=d[1];d[0]==="enter"?p.type==="tableHead"?(l=!1,a!==0&&(wS(f,e,a,u,c),c=void 0,a=0),u={type:"table",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(n,0,[["enter",u,e]])):p.type==="tableRow"||p.type==="tableDelimiterRow"?(i=!0,h=void 0,s=[0,0,0,0],o=[0,n+1,0,0],l&&(l=!1,c={type:"tableBody",start:Object.assign({},p.start),end:Object.assign({},p.end)},f.add(n,0,[["enter",c,e]])),r=p.type==="tableDelimiterRow"?2:c?3:1):r&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")?(i=!1,o[2]===0&&(s[1]!==0&&(o[0]=o[1],h=Kc(f,e,s,r,void 0,h),s=[0,0,0,0]),o[2]=n)):p.type==="tableCellDivider"&&(i?i=!1:(s[1]!==0&&(o[0]=o[1],h=Kc(f,e,s,r,void 0,h)),s=o,o=[s[1],n,0,0])):p.type==="tableHead"?(l=!0,a=n):p.type==="tableRow"||p.type==="tableDelimiterRow"?(a=n,s[1]!==0?(o[0]=o[1],h=Kc(f,e,s,r,n,h)):o[1]!==0&&(h=Kc(f,e,o,r,n,h)),r=0):r&&(p.type==="data"||p.type==="tableDelimiterMarker"||p.type==="tableDelimiterFiller")&&(o[3]=n)}for(a!==0&&wS(f,e,a,u,c),f.consume(e.events),n=-1;++n<e.events.length;){const d=e.events[n];d[0]==="enter"&&d[1].type==="table"&&(d[1]._align=oU(e.events,n))}return t}function Kc(t,e,n,i,r,s){const o=i===1?"tableHeader":i===2?"tableDelimiter":"tableData",l="tableContent";n[0]!==0&&(s.end=Object.assign({},Mo(e.events,n[0])),t.add(n[0],0,[["exit",s,e]]));const a=Mo(e.events,n[1]);if(s={type:o,start:Object.assign({},a),end:Object.assign({},a)},t.add(n[1],0,[["enter",s,e]]),n[2]!==0){const u=Mo(e.events,n[2]),c=Mo(e.events,n[3]),h={type:l,start:Object.assign({},u),end:Object.assign({},c)};if(t.add(n[2],0,[["enter",h,e]]),i!==2){const f=e.events[n[2]],d=e.events[n[3]];if(f[1].end=Object.assign({},d[1].end),f[1].type="chunkText",f[1].contentType="text",n[3]>n[2]+1){const p=n[2]+1,g=n[3]-n[2]-1;t.add(p,g,[])}}t.add(n[3]+1,0,[["exit",h,e]])}return r!==void 0&&(s.end=Object.assign({},Mo(e.events,r)),t.add(r,0,[["exit",s,e]]),s=void 0),s}function wS(t,e,n,i,r){const s=[],o=Mo(e.events,n);r&&(r.end=Object.assign({},o),s.push(["exit",r,e])),i.end=Object.assign({},o),s.push(["exit",i,e]),t.add(n+1,0,s)}function Mo(t,e){const n=t[e],i=n[0]==="enter"?"start":"end";return n[1][i]}const cU={name:"tasklistCheck",tokenize:fU};function hU(){return{text:{91:cU}}}function fU(t,e,n){const i=this;return r;function r(a){return i.previous!==null||!i._gfmTasklistFirstContentOfListItem?n(a):(t.enter("taskListCheck"),t.enter("taskListCheckMarker"),t.consume(a),t.exit("taskListCheckMarker"),s)}function s(a){return Ge(a)?(t.enter("taskListCheckValueUnchecked"),t.consume(a),t.exit("taskListCheckValueUnchecked"),o):a===88||a===120?(t.enter("taskListCheckValueChecked"),t.consume(a),t.exit("taskListCheckValueChecked"),o):n(a)}function o(a){return a===93?(t.enter("taskListCheckMarker"),t.consume(a),t.exit("taskListCheckMarker"),t.exit("taskListCheck"),l):n(a)}function l(a){return ie(a)?e(a):_e(a)?t.check({tokenize:dU},e,n)(a):n(a)}}function dU(t,e,n){return Te(t,i,"whitespace");function i(r){return r===null?n(r):e(r)}}function pU(t){return qE([zz(),Yz(),iU(t),lU(),hU()])}const mU={};function gU(t){const e=this,n=t||mU,i=e.data(),r=i.micromarkExtensions||(i.micromarkExtensions=[]),s=i.fromMarkdownExtensions||(i.fromMarkdownExtensions=[]),o=i.toMarkdownExtensions||(i.toMarkdownExtensions=[]);r.push(pU(n)),s.push(Nz()),o.push(Bz(n))}const bS=[{id:"01-intro",title:"1. Introduction to DuckDB"},{id:"02-installation",title:"2. Getting Started (Browser & Local)"},{id:"03-sql-basics",title:"3. SQL Basics in DuckDB"},{id:"04-files-and-parquet",title:"4. Working with CSV & Parquet"},{id:"05-performance",title:"5. Performance Tips"},{id:"06-ecosystem",title:"6. Ecosystem & Integrations"},{id:"07-playground-tutorial",title:"7. Playground Tutorial"},{id:"08-extensions",title:"8. Extensions in WASM"},{id:"09-wasm-troubleshooting",title:"9. WASM Troubleshooting"},{id:"10-cheatsheet",title:"10. SQL Cheat Sheet"},{id:"11-case-studies",title:"11. Case Studies & Patterns"},{id:"12-data-quality",title:"12. Data Quality with DuckDB"}];function yU(){const[t,e]=R.useState(bS[0].id),[n,i]=R.useState("");return R.useEffect(()=>{(async()=>{const s=await(await fetch(`/chapters/${t}.md`)).text();i(s)})()},[t]),T.jsxs("div",{className:"book-grid",children:[T.jsx("style",{children:`
        .book-grid{display:grid;grid-template-columns:260px 1fr;gap:16px}
        .chapterlist{background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:12px;height:calc(100vh - 80px);overflow:auto}
        .chapterlist button{width:100%;text-align:left;background:transparent;border:1px solid transparent;color:var(--text);padding:8px 10px;border-radius:8px}
        .chapterlist button.active,.chapterlist button:hover{background:#0b1220;border-color:var(--border)}
      `}),T.jsx("aside",{className:"chapterlist",children:bS.map(r=>T.jsx("div",{children:T.jsx("button",{className:t===r.id?"active":"",onClick:()=>e(r.id),children:r.title})},r.id))}),T.jsx("article",{className:"card",children:T.jsx(i4,{remarkPlugins:[gU],children:n})})]})}function ge(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(c){try{u(i.next(c))}catch(h){o(h)}}function a(c){try{u(i.throw(c))}catch(h){o(h)}}function u(c){c.done?s(c.value):r(c.value).then(l,a)}u((i=i.apply(t,e||[])).next())})}function SS(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Se(t){return this instanceof Se?(this.v=t,this):new Se(t)}function Xi(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(t,e||[]),r,s=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),r[Symbol.asyncIterator]=function(){return this},r;function o(d){return function(p){return Promise.resolve(p).then(d,h)}}function l(d,p){i[d]&&(r[d]=function(g){return new Promise(function(w,m){s.push([d,g,w,m])>1||a(d,g)})},p&&(r[d]=p(r[d])))}function a(d,p){try{u(i[d](p))}catch(g){f(s[0][3],g)}}function u(d){d.value instanceof Se?Promise.resolve(d.value.v).then(c,h):f(s[0][2],d)}function c(d){a("next",d)}function h(d){a("throw",d)}function f(d,p){d(p),s.shift(),s.length&&a(s[0][0],s[0][1])}}function zh(t){var e,n;return e={},i("next"),i("throw",function(r){throw r}),i("return"),e[Symbol.iterator]=function(){return this},e;function i(r,s){e[r]=t[r]?function(o){return(n=!n)?{value:Se(t[r](o)),done:!1}:s?s(o):o}:s}}function no(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof SS=="function"?SS(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(s){n[s]=t[s]&&function(o){return new Promise(function(l,a){o=t[s](o),r(l,a,o.done,o.value)})}}function r(s,o,l,a){Promise.resolve(a).then(function(u){s({value:u,done:l})},o)}}const vU=new TextDecoder("utf-8"),ky=t=>vU.decode(t),wU=new TextEncoder,Xv=t=>wU.encode(t),bU=t=>typeof t=="number",PA=t=>typeof t=="boolean",Et=t=>typeof t=="function",In=t=>t!=null&&Object(t)===t,ho=t=>In(t)&&Et(t.then),lc=t=>In(t)&&Et(t[Symbol.iterator]),Zl=t=>In(t)&&Et(t[Symbol.asyncIterator]),Cy=t=>In(t)&&In(t.schema),FA=t=>In(t)&&"done"in t&&"value"in t,zA=t=>In(t)&&Et(t.stat)&&bU(t.fd),UA=t=>In(t)&&Jv(t.body),yp=t=>"_getDOMStream"in t&&"_getNodeStream"in t,SU=t=>In(t)&&Et(t.abort)&&Et(t.getWriter)&&!yp(t),Jv=t=>In(t)&&Et(t.cancel)&&Et(t.getReader)&&!yp(t),xU=t=>In(t)&&Et(t.end)&&Et(t.write)&&PA(t.writable)&&!yp(t),jA=t=>In(t)&&Et(t.read)&&Et(t.pipe)&&PA(t.readable)&&!yp(t),kU=t=>In(t)&&Et(t.clear)&&Et(t.bytes)&&Et(t.position)&&Et(t.setPosition)&&Et(t.capacity)&&Et(t.getBufferIdentifier)&&Et(t.createLong),Zv=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function CU(t){const e=t[0]?[t[0]]:[];let n,i,r,s;for(let o,l,a=0,u=0,c=t.length;++a<c;){if(o=e[u],l=t[a],!o||!l||o.buffer!==l.buffer||l.byteOffset<o.byteOffset){l&&(e[++u]=l);continue}if({byteOffset:n,byteLength:r}=o,{byteOffset:i,byteLength:s}=l,n+r<i||i+s<n){l&&(e[++u]=l);continue}e[u]=new Uint8Array(o.buffer,n,i-n+s)}return e}function xS(t,e,n=0,i=e.byteLength){const r=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,r),o=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return s.set(o,n),t}function rr(t,e){const n=CU(t),i=n.reduce((c,h)=>c+h.byteLength,0);let r,s,o,l=0,a=-1;const u=Math.min(e||Number.POSITIVE_INFINITY,i);for(const c=n.length;++a<c;){if(r=n[a],s=r.subarray(0,Math.min(r.length,u-l)),u<=l+s.length){s.length<r.length?n[a]=r.subarray(s.length):s.length===r.length&&a++,o?xS(o,s,l):o=s;break}xS(o||(o=new Uint8Array(u)),s,l),l+=s.length}return[o||new Uint8Array(0),n.slice(a),i-(o?o.byteLength:0)]}function He(t,e){let n=FA(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=Xv(n)),n instanceof ArrayBuffer?new t(n):n instanceof Zv?new t(n):kU(n)?He(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0)}const wa=t=>He(Int32Array,t),kS=t=>He(BigInt64Array,t),Ae=t=>He(Uint8Array,t),_y=t=>(t.next(),t);function*_U(t,e){const n=function*(r){yield r},i=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Zv?n(e):lc(e)?e:n(e);return yield*_y(function*(r){let s=null;do s=r.next(yield He(t,s));while(!s.done)}(i[Symbol.iterator]())),new t}const EU=t=>_U(Uint8Array,t);function VA(t,e){return Xi(this,arguments,function*(){if(ho(e))return yield Se(yield Se(yield*zh(no(VA(t,yield Se(e))))));const i=function(o){return Xi(this,arguments,function*(){yield yield Se(yield Se(o))})},r=function(o){return Xi(this,arguments,function*(){yield Se(yield*zh(no(_y(function*(l){let a=null;do a=l.next(yield a==null?void 0:a.value);while(!a.done)}(o[Symbol.iterator]())))))})},s=typeof e=="string"||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Zv?i(e):lc(e)?r(e):Zl(e)?e:i(e);return yield Se(yield*zh(no(_y(function(o){return Xi(this,arguments,function*(){let l=null;do l=yield Se(o.next(yield yield Se(He(t,l))));while(!l.done)})}(s[Symbol.asyncIterator]()))))),yield Se(new t)})}const AU=t=>VA(Uint8Array,t);function $A(t,e,n){if(t!==0){n=n.slice(0,e);for(let i=-1,r=n.length;++i<r;)n[i]+=t}return n.subarray(0,e)}function IU(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do if(t[n]!==e[n])return!1;while(++n<i);return!0}const Xn={fromIterable(t){return Yc(TU(t))},fromAsyncIterable(t){return Yc(OU(t))},fromDOMStream(t){return Yc(DU(t))},fromNodeStream(t){return Yc(RU(t))},toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},Yc=t=>(t.next(),t);function*TU(t){let e,n=!1,i=[],r,s,o,l=0;function a(){return s==="peek"?rr(i,o)[0]:([r,i,l]=rr(i,o),r)}({cmd:s,size:o}=(yield null)||{cmd:"read",size:0});const u=EU(t)[Symbol.iterator]();try{do if({done:e,value:r}=Number.isNaN(o-l)?u.next():u.next(o-l),!e&&r.byteLength>0&&(i.push(r),l+=r.byteLength),e||o<=l)do({cmd:s,size:o}=yield a());while(o<l);while(!e)}catch(c){(n=!0)&&typeof u.throw=="function"&&u.throw(c)}finally{n===!1&&typeof u.return=="function"&&u.return(null)}return null}function OU(t){return Xi(this,arguments,function*(){let n,i=!1,r=[],s,o,l,a=0;function u(){return o==="peek"?rr(r,l)[0]:([s,r,a]=rr(r,l),s)}({cmd:o,size:l}=(yield yield Se(null))||{cmd:"read",size:0});const c=AU(t)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(l-a)?yield Se(c.next()):yield Se(c.next(l-a)),!n&&s.byteLength>0&&(r.push(s),a+=s.byteLength),n||l<=a)do({cmd:o,size:l}=yield yield Se(u()));while(l<a);while(!n)}catch(h){(i=!0)&&typeof c.throw=="function"&&(yield Se(c.throw(h)))}finally{i===!1&&typeof c.return=="function"&&(yield Se(c.return(new Uint8Array(0))))}return yield Se(null)})}function DU(t){return Xi(this,arguments,function*(){let n=!1,i=!1,r=[],s,o,l,a=0;function u(){return o==="peek"?rr(r,l)[0]:([s,r,a]=rr(r,l),s)}({cmd:o,size:l}=(yield yield Se(null))||{cmd:"read",size:0});const c=new MU(t);try{do if({done:n,value:s}=Number.isNaN(l-a)?yield Se(c.read()):yield Se(c.read(l-a)),!n&&s.byteLength>0&&(r.push(Ae(s)),a+=s.byteLength),n||l<=a)do({cmd:o,size:l}=yield yield Se(u()));while(l<a);while(!n)}catch(h){(i=!0)&&(yield Se(c.cancel(h)))}finally{i===!1?yield Se(c.cancel()):t.locked&&c.releaseLock()}return yield Se(null)})}class MU{constructor(e){this.source=e,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(e){return ge(this,void 0,void 0,function*(){const{reader:n,source:i}=this;n&&(yield n.cancel(e).catch(()=>{})),i&&i.locked&&this.releaseLock()})}read(e){return ge(this,void 0,void 0,function*(){if(e===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Ae(n)),n})}}const Em=(t,e)=>{const n=r=>i([e,r]);let i;return[e,n,new Promise(r=>(i=r)&&t.once(e,n))]};function RU(t){return Xi(this,arguments,function*(){const n=[];let i="error",r=!1,s=null,o,l,a=0,u=[],c;function h(){return o==="peek"?rr(u,l)[0]:([c,u,a]=rr(u,l),c)}if({cmd:o,size:l}=(yield yield Se(null))||{cmd:"read",size:0},t.isTTY)return yield yield Se(new Uint8Array(0)),yield Se(null);try{n[0]=Em(t,"end"),n[1]=Em(t,"error");do{if(n[2]=Em(t,"readable"),[i,s]=yield Se(Promise.race(n.map(d=>d[2]))),i==="error")break;if((r=i==="end")||(Number.isFinite(l-a)?(c=Ae(t.read(l-a)),c.byteLength<l-a&&(c=Ae(t.read()))):c=Ae(t.read()),c.byteLength>0&&(u.push(c),a+=c.byteLength)),r||l<=a)do({cmd:o,size:l}=yield yield Se(h()));while(l<a)}while(!r)}finally{yield Se(f(n,i==="error"?s:null))}return yield Se(null);function f(d,p){return c=u=null,new Promise((g,w)=>{for(const[m,y]of d)t.off(m,y);try{const m=t.destroy;m&&m.call(t,p),p=void 0}catch(m){p=m||p}finally{p!=null?w(p):g()}})}})}var vt;(function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"})(vt||(vt={}));var Xt;(function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"})(Xt||(Xt={}));var Yt;(function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"})(Yt||(Yt={}));var di;(function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"})(di||(di={}));var ce;(function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"})(ce||(ce={}));var sr;(function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(sr||(sr={}));const Am=2,Wi=4,br=4,Ue=4,Yr=new Int32Array(2),CS=new Float32Array(Yr.buffer),_S=new Float64Array(Yr.buffer),Gc=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Ey;(function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"})(Ey||(Ey={}));let Ll=class HA{constructor(e){this.bytes_=e,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(e){return new HA(new Uint8Array(e))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(e){this.position_=e}capacity(){return this.bytes_.length}readInt8(e){return this.readUint8(e)<<24>>24}readUint8(e){return this.bytes_[e]}readInt16(e){return this.readUint16(e)<<16>>16}readUint16(e){return this.bytes_[e]|this.bytes_[e+1]<<8}readInt32(e){return this.bytes_[e]|this.bytes_[e+1]<<8|this.bytes_[e+2]<<16|this.bytes_[e+3]<<24}readUint32(e){return this.readInt32(e)>>>0}readInt64(e){return BigInt.asIntN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readUint64(e){return BigInt.asUintN(64,BigInt(this.readUint32(e))+(BigInt(this.readUint32(e+4))<<BigInt(32)))}readFloat32(e){return Yr[0]=this.readInt32(e),CS[0]}readFloat64(e){return Yr[Gc?0:1]=this.readInt32(e),Yr[Gc?1:0]=this.readInt32(e+4),_S[0]}writeInt8(e,n){this.bytes_[e]=n}writeUint8(e,n){this.bytes_[e]=n}writeInt16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeUint16(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8}writeInt32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeUint32(e,n){this.bytes_[e]=n,this.bytes_[e+1]=n>>8,this.bytes_[e+2]=n>>16,this.bytes_[e+3]=n>>24}writeInt64(e,n){this.writeInt32(e,Number(BigInt.asIntN(32,n))),this.writeInt32(e+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(e,n){this.writeUint32(e,Number(BigInt.asUintN(32,n))),this.writeUint32(e+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(e,n){CS[0]=n,this.writeInt32(e,Yr[0])}writeFloat64(e,n){_S[0]=n,this.writeInt32(e,Yr[Gc?0:1]),this.writeInt32(e+4,Yr[Gc?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Wi+br)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let e="";for(let n=0;n<br;n++)e+=String.fromCharCode(this.readInt8(this.position_+Wi+n));return e}__offset(e,n){const i=e-this.readInt32(e);return n<this.readInt16(i)?this.readInt16(i+n):0}__union(e,n){return e.bb_pos=n+this.readInt32(n),e.bb=this,e}__string(e,n){e+=this.readInt32(e);const i=this.readInt32(e);e+=Wi;const r=this.bytes_.subarray(e,e+i);return n===Ey.UTF8_BYTES?r:this.text_decoder_.decode(r)}__union_with_string(e,n){return typeof e=="string"?this.__string(n):this.__union(e,n)}__indirect(e){return e+this.readInt32(e)}__vector(e){return e+this.readInt32(e)+Wi}__vector_len(e){return this.readInt32(e+this.readInt32(e))}__has_identifier(e){if(e.length!=br)throw new Error("FlatBuffers: file identifier must be length "+br);for(let n=0;n<br;n++)if(e.charCodeAt(n)!=this.readInt8(this.position()+Wi+n))return!1;return!0}createScalarList(e,n){const i=[];for(let r=0;r<n;++r){const s=e(r);s!==null&&i.push(s)}return i}createObjList(e,n){const i=[];for(let r=0;r<n;++r){const s=e(r);s!==null&&i.push(s.unpack())}return i}},WA=class qA{constructor(e){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;e?n=e:n=1024,this.bb=Ll.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(e){this.force_defaults=e}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(e,n){e>this.minalign&&(this.minalign=e);const i=~(this.bb.capacity()-this.space+n)+1&e-1;for(;this.space<i+e+n;){const r=this.bb.capacity();this.bb=qA.growByteBuffer(this.bb),this.space+=this.bb.capacity()-r}this.pad(i)}pad(e){for(let n=0;n<e;n++)this.bb.writeInt8(--this.space,0)}writeInt8(e){this.bb.writeInt8(this.space-=1,e)}writeInt16(e){this.bb.writeInt16(this.space-=2,e)}writeInt32(e){this.bb.writeInt32(this.space-=4,e)}writeInt64(e){this.bb.writeInt64(this.space-=8,e)}writeFloat32(e){this.bb.writeFloat32(this.space-=4,e)}writeFloat64(e){this.bb.writeFloat64(this.space-=8,e)}addInt8(e){this.prep(1,0),this.writeInt8(e)}addInt16(e){this.prep(2,0),this.writeInt16(e)}addInt32(e){this.prep(4,0),this.writeInt32(e)}addInt64(e){this.prep(8,0),this.writeInt64(e)}addFloat32(e){this.prep(4,0),this.writeFloat32(e)}addFloat64(e){this.prep(8,0),this.writeFloat64(e)}addFieldInt8(e,n,i){(this.force_defaults||n!=i)&&(this.addInt8(n),this.slot(e))}addFieldInt16(e,n,i){(this.force_defaults||n!=i)&&(this.addInt16(n),this.slot(e))}addFieldInt32(e,n,i){(this.force_defaults||n!=i)&&(this.addInt32(n),this.slot(e))}addFieldInt64(e,n,i){(this.force_defaults||n!==i)&&(this.addInt64(n),this.slot(e))}addFieldFloat32(e,n,i){(this.force_defaults||n!=i)&&(this.addFloat32(n),this.slot(e))}addFieldFloat64(e,n,i){(this.force_defaults||n!=i)&&(this.addFloat64(n),this.slot(e))}addFieldOffset(e,n,i){(this.force_defaults||n!=i)&&(this.addOffset(n),this.slot(e))}addFieldStruct(e,n,i){n!=i&&(this.nested(n),this.slot(e))}nested(e){if(e!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(e){this.vtable!==null&&(this.vtable[e]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(e){const n=e.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const i=n<<1,r=Ll.allocate(i);return r.setPosition(i-n),r.bytes().set(e.bytes(),i-n),r}addOffset(e){this.prep(Wi,0),this.writeInt32(this.offset()-e+Wi)}startObject(e){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=e;for(let n=0;n<e;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const e=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const i=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?e-this.vtable[n]:0);const r=2;this.addInt16(e-this.object_start);const s=(i+r)*Am;this.addInt16(s);let o=0;const l=this.space;e:for(n=0;n<this.vtables.length;n++){const a=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(a)){for(let u=Am;u<s;u+=Am)if(this.bb.readInt16(l+u)!=this.bb.readInt16(a+u))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-e,this.bb.writeInt32(this.space,o-e)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-e,this.offset()-e)),this.isNested=!1,e}finish(e,n,i){const r=i?Ue:0;if(n){const s=n;if(this.prep(this.minalign,Wi+br+r),s.length!=br)throw new TypeError("FlatBuffers: file identifier must be length "+br);for(let o=br-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Wi+r),this.addOffset(e),r&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(e,n){this.finish(e,n,!0)}requiredField(e,n){const i=this.bb.capacity()-e,r=i-this.bb.readInt32(i);if(!(n<this.bb.readInt16(r)&&this.bb.readInt16(r+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(e,n,i){this.notNested(),this.vector_num_elems=n,this.prep(Wi,e*n),this.prep(i,e*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(e){if(!e)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(e))return this.string_maps.get(e);const n=this.createString(e);return this.string_maps.set(e,n),n}createString(e){if(e==null)return 0;let n;return e instanceof Uint8Array?n=e:n=this.text_encoder.encode(e),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length),this.bb.bytes().set(n,this.space),this.endVector()}createByteVector(e){return e==null?0:(this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length),this.bb.bytes().set(e,this.space),this.endVector())}createObjectOffset(e){return e===null?0:typeof e=="string"?this.createString(e):e.pack(this)}createObjectOffsetList(e){const n=[];for(let i=0;i<e.length;++i){const r=e[i];if(r!==null)n.push(this.createObjectOffset(r));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(e,n){return n(this,e.length),this.createObjectOffsetList(e.slice().reverse()),this.endVector()}};var Uf;(function(t){t[t.BUFFER=0]="BUFFER"})(Uf||(Uf={}));var jf;(function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"})(jf||(jf={}));class Gr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBodyCompression(e,n){return(n||new Gr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBodyCompression(e,n){return e.setPosition(e.position()+Ue),(n||new Gr).__init(e.readInt32(e.position())+e.position(),e)}codec(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):jf.LZ4_FRAME}method(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):Uf.BUFFER}static startBodyCompression(e){e.startObject(2)}static addCodec(e,n){e.addFieldInt8(0,n,jf.LZ4_FRAME)}static addMethod(e,n){e.addFieldInt8(1,n,Uf.BUFFER)}static endBodyCompression(e){return e.endObject()}static createBodyCompression(e,n,i){return Gr.startBodyCompression(e),Gr.addCodec(e,n),Gr.addMethod(e,i),Gr.endBodyCompression(e)}}class QA{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(e,n,i){return e.prep(8,16),e.writeInt64(BigInt(i??0)),e.writeInt64(BigInt(n??0)),e.offset()}}let KA=class{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(e,n,i){return e.prep(8,16),e.writeInt64(BigInt(i??0)),e.writeInt64(BigInt(n??0)),e.offset()}},mr=class Ay{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsRecordBatch(e,n){return(n||new Ay).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRecordBatch(e,n){return e.setPosition(e.position()+Ue),(n||new Ay).__init(e.readInt32(e.position())+e.position(),e)}length(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}nodes(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new KA).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}nodesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}buffers(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new QA).__init(this.bb.__vector(this.bb_pos+i)+e*16,this.bb):null}buffersLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}compression(e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new Gr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(e){e.startObject(4)}static addLength(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addNodes(e,n){e.addFieldOffset(1,n,0)}static startNodesVector(e,n){e.startVector(16,n,8)}static addBuffers(e,n){e.addFieldOffset(2,n,0)}static startBuffersVector(e,n){e.startVector(16,n,8)}static addCompression(e,n){e.addFieldOffset(3,n,0)}static endRecordBatch(e){return e.endObject()}},Ro=class Iy{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryBatch(e,n){return(n||new Iy).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryBatch(e,n){return e.setPosition(e.position()+Ue),(n||new Iy).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}data(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new mr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startDictionaryBatch(e){e.startObject(3)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addData(e,n){e.addFieldOffset(1,n,0)}static addIsDelta(e,n){e.addFieldInt8(2,+n,0)}static endDictionaryBatch(e){return e.endObject()}};var Nl;(function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"})(Nl||(Nl={}));var Vf;(function(t){t[t.DenseArray=0]="DenseArray"})(Vf||(Vf={}));class jn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInt(e,n){return(n||new jn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInt(e,n){return e.setPosition(e.position()+Ue),(n||new jn).__init(e.readInt32(e.position())+e.position(),e)}bitWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}isSigned(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startInt(e){e.startObject(2)}static addBitWidth(e,n){e.addFieldInt32(0,n,0)}static addIsSigned(e,n){e.addFieldInt8(1,+n,0)}static endInt(e){return e.endObject()}static createInt(e,n,i){return jn.startInt(e),jn.addBitWidth(e,n),jn.addIsSigned(e,i),jn.endInt(e)}}class Sr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDictionaryEncoding(e,n){return(n||new Sr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDictionaryEncoding(e,n){return e.setPosition(e.position()+Ue),(n||new Sr).__init(e.readInt32(e.position())+e.position(),e)}id(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}indexType(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new jn).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}dictionaryKind(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt16(this.bb_pos+e):Vf.DenseArray}static startDictionaryEncoding(e){e.startObject(4)}static addId(e,n){e.addFieldInt64(0,n,BigInt("0"))}static addIndexType(e,n){e.addFieldOffset(1,n,0)}static addIsOrdered(e,n){e.addFieldInt8(2,+n,0)}static addDictionaryKind(e,n){e.addFieldInt16(3,n,Vf.DenseArray)}static endDictionaryEncoding(e){return e.endObject()}}class It{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsKeyValue(e,n){return(n||new It).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,n){return e.setPosition(e.position()+Ue),(n||new It).__init(e.readInt32(e.position())+e.position(),e)}key(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}value(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startKeyValue(e){e.startObject(2)}static addKey(e,n){e.addFieldOffset(0,n,0)}static addValue(e,n){e.addFieldOffset(1,n,0)}static endKeyValue(e){return e.endObject()}static createKeyValue(e,n,i){return It.startKeyValue(e),It.addKey(e,n),It.addValue(e,i),It.endKeyValue(e)}}let ES=class Da{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBinary(e,n){return(n||new Da).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBinary(e,n){return e.setPosition(e.position()+Ue),(n||new Da).__init(e.readInt32(e.position())+e.position(),e)}static startBinary(e){e.startObject(0)}static endBinary(e){return e.endObject()}static createBinary(e){return Da.startBinary(e),Da.endBinary(e)}},AS=class Ma{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsBool(e,n){return(n||new Ma).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsBool(e,n){return e.setPosition(e.position()+Ue),(n||new Ma).__init(e.readInt32(e.position())+e.position(),e)}static startBool(e){e.startObject(0)}static endBool(e){return e.endObject()}static createBool(e){return Ma.startBool(e),Ma.endBool(e)}},Uh=class Lo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDate(e,n){return(n||new Lo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDate(e,n){return e.setPosition(e.position()+Ue),(n||new Lo).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):di.MILLISECOND}static startDate(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,di.MILLISECOND)}static endDate(e){return e.endObject()}static createDate(e,n){return Lo.startDate(e),Lo.addUnit(e,n),Lo.endDate(e)}},No=class qr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDecimal(e,n){return(n||new qr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDecimal(e,n){return e.setPosition(e.position()+Ue),(n||new qr).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}scale(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):0}bitWidth(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):128}static startDecimal(e){e.startObject(3)}static addPrecision(e,n){e.addFieldInt32(0,n,0)}static addScale(e,n){e.addFieldInt32(1,n,0)}static addBitWidth(e,n){e.addFieldInt32(2,n,128)}static endDecimal(e){return e.endObject()}static createDecimal(e,n,i,r){return qr.startDecimal(e),qr.addPrecision(e,n),qr.addScale(e,i),qr.addBitWidth(e,r),qr.endDecimal(e)}},jh=class Bo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsDuration(e,n){return(n||new Bo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsDuration(e,n){return e.setPosition(e.position()+Ue),(n||new Bo).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):ce.MILLISECOND}static startDuration(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,ce.MILLISECOND)}static endDuration(e){return e.endObject()}static createDuration(e,n){return Bo.startDuration(e),Bo.addUnit(e,n),Bo.endDuration(e)}},Vh=class Po{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeBinary(e,n){return(n||new Po).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeBinary(e,n){return e.setPosition(e.position()+Ue),(n||new Po).__init(e.readInt32(e.position())+e.position(),e)}byteWidth(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeBinary(e){e.startObject(1)}static addByteWidth(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeBinary(e){return e.endObject()}static createFixedSizeBinary(e,n){return Po.startFixedSizeBinary(e),Po.addByteWidth(e,n),Po.endFixedSizeBinary(e)}},$h=class Fo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFixedSizeList(e,n){return(n||new Fo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFixedSizeList(e,n){return e.setPosition(e.position()+Ue),(n||new Fo).__init(e.readInt32(e.position())+e.position(),e)}listSize(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt32(this.bb_pos+e):0}static startFixedSizeList(e){e.startObject(1)}static addListSize(e,n){e.addFieldInt32(0,n,0)}static endFixedSizeList(e){return e.endObject()}static createFixedSizeList(e,n){return Fo.startFixedSizeList(e),Fo.addListSize(e,n),Fo.endFixedSizeList(e)}};class qi{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFloatingPoint(e,n){return(n||new qi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFloatingPoint(e,n){return e.setPosition(e.position()+Ue),(n||new qi).__init(e.readInt32(e.position())+e.position(),e)}precision(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Yt.HALF}static startFloatingPoint(e){e.startObject(1)}static addPrecision(e,n){e.addFieldInt16(0,n,Yt.HALF)}static endFloatingPoint(e){return e.endObject()}static createFloatingPoint(e,n){return qi.startFloatingPoint(e),qi.addPrecision(e,n),qi.endFloatingPoint(e)}}class Qi{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsInterval(e,n){return(n||new Qi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsInterval(e,n){return e.setPosition(e.position()+Ue),(n||new Qi).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):sr.YEAR_MONTH}static startInterval(e){e.startObject(1)}static addUnit(e,n){e.addFieldInt16(0,n,sr.YEAR_MONTH)}static endInterval(e){return e.endObject()}static createInterval(e,n){return Qi.startInterval(e),Qi.addUnit(e,n),Qi.endInterval(e)}}let IS=class Ra{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsLargeBinary(e,n){return(n||new Ra).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeBinary(e,n){return e.setPosition(e.position()+Ue),(n||new Ra).__init(e.readInt32(e.position())+e.position(),e)}static startLargeBinary(e){e.startObject(0)}static endLargeBinary(e){return e.endObject()}static createLargeBinary(e){return Ra.startLargeBinary(e),Ra.endLargeBinary(e)}},TS=class La{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsLargeUtf8(e,n){return(n||new La).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsLargeUtf8(e,n){return e.setPosition(e.position()+Ue),(n||new La).__init(e.readInt32(e.position())+e.position(),e)}static startLargeUtf8(e){e.startObject(0)}static endLargeUtf8(e){return e.endObject()}static createLargeUtf8(e){return La.startLargeUtf8(e),La.endLargeUtf8(e)}},OS=class Na{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsList(e,n){return(n||new Na).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsList(e,n){return e.setPosition(e.position()+Ue),(n||new Na).__init(e.readInt32(e.position())+e.position(),e)}static startList(e){e.startObject(0)}static endList(e){return e.endObject()}static createList(e){return Na.startList(e),Na.endList(e)}},Hh=class zo{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMap(e,n){return(n||new zo).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMap(e,n){return e.setPosition(e.position()+Ue),(n||new zo).__init(e.readInt32(e.position())+e.position(),e)}keysSorted(){const e=this.bb.__offset(this.bb_pos,4);return e?!!this.bb.readInt8(this.bb_pos+e):!1}static startMap(e){e.startObject(1)}static addKeysSorted(e,n){e.addFieldInt8(0,+n,0)}static endMap(e){return e.endObject()}static createMap(e,n){return zo.startMap(e),zo.addKeysSorted(e,n),zo.endMap(e)}},DS=class Ba{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsNull(e,n){return(n||new Ba).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsNull(e,n){return e.setPosition(e.position()+Ue),(n||new Ba).__init(e.readInt32(e.position())+e.position(),e)}static startNull(e){e.startObject(0)}static endNull(e){return e.endObject()}static createNull(e){return Ba.startNull(e),Ba.endNull(e)}};class Xs{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsStruct_(e,n){return(n||new Xs).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsStruct_(e,n){return e.setPosition(e.position()+Ue),(n||new Xs).__init(e.readInt32(e.position())+e.position(),e)}static startStruct_(e){e.startObject(0)}static endStruct_(e){return e.endObject()}static createStruct_(e){return Xs.startStruct_(e),Xs.endStruct_(e)}}class ti{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTime(e,n){return(n||new ti).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTime(e,n){return e.setPosition(e.position()+Ue),(n||new ti).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):ce.MILLISECOND}bitWidth(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb_pos+e):32}static startTime(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,ce.MILLISECOND)}static addBitWidth(e,n){e.addFieldInt32(1,n,32)}static endTime(e){return e.endObject()}static createTime(e,n,i){return ti.startTime(e),ti.addUnit(e,n),ti.addBitWidth(e,i),ti.endTime(e)}}class ni{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsTimestamp(e,n){return(n||new ni).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsTimestamp(e,n){return e.setPosition(e.position()+Ue),(n||new ni).__init(e.readInt32(e.position())+e.position(),e)}unit(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):ce.SECOND}timezone(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,e):null}static startTimestamp(e){e.startObject(2)}static addUnit(e,n){e.addFieldInt16(0,n,ce.SECOND)}static addTimezone(e,n){e.addFieldOffset(1,n,0)}static endTimestamp(e){return e.endObject()}static createTimestamp(e,n,i){return ni.startTimestamp(e),ni.addUnit(e,n),ni.addTimezone(e,i),ni.endTimestamp(e)}}class yn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUnion(e,n){return(n||new yn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUnion(e,n){return e.setPosition(e.position()+Ue),(n||new yn).__init(e.readInt32(e.position())+e.position(),e)}mode(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Xt.Sparse}typeIds(e){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+e*4):0}typeIdsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}typeIdsArray(){const e=this.bb.__offset(this.bb_pos,6);return e?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+e),this.bb.__vector_len(this.bb_pos+e)):null}static startUnion(e){e.startObject(2)}static addMode(e,n){e.addFieldInt16(0,n,Xt.Sparse)}static addTypeIds(e,n){e.addFieldOffset(1,n,0)}static createTypeIdsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addInt32(n[i]);return e.endVector()}static startTypeIdsVector(e,n){e.startVector(4,n,4)}static endUnion(e){return e.endObject()}static createUnion(e,n,i){return yn.startUnion(e),yn.addMode(e,n),yn.addTypeIds(e,i),yn.endUnion(e)}}let MS=class Pa{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsUtf8(e,n){return(n||new Pa).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsUtf8(e,n){return e.setPosition(e.position()+Ue),(n||new Pa).__init(e.readInt32(e.position())+e.position(),e)}static startUtf8(e){e.startObject(0)}static endUtf8(e){return e.endObject()}static createUtf8(e){return Pa.startUtf8(e),Pa.endUtf8(e)}};var Je;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList",t[t.RunEndEncoded=22]="RunEndEncoded"})(Je||(Je={}));let Gn=class Wh{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsField(e,n){return(n||new Wh).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,n){return e.setPosition(e.position()+Ue),(n||new Wh).__init(e.readInt32(e.position())+e.position(),e)}name(e){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,e):null}nullable(){const e=this.bb.__offset(this.bb_pos,6);return e?!!this.bb.readInt8(this.bb_pos+e):!1}typeType(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint8(this.bb_pos+e):Je.NONE}type(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(e,this.bb_pos+n):null}dictionary(e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new Sr).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(e,n){const i=this.bb.__offset(this.bb_pos,14);return i?(n||new Wh).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}childrenLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,16);return i?(n||new It).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}static startField(e){e.startObject(7)}static addName(e,n){e.addFieldOffset(0,n,0)}static addNullable(e,n){e.addFieldInt8(1,+n,0)}static addTypeType(e,n){e.addFieldInt8(2,n,Je.NONE)}static addType(e,n){e.addFieldOffset(3,n,0)}static addDictionary(e,n){e.addFieldOffset(4,n,0)}static addChildren(e,n){e.addFieldOffset(5,n,0)}static createChildrenVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startChildrenVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(6,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endField(e){return e.endObject()}},Vi=class dr{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsSchema(e,n){return(n||new dr).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,n){return e.setPosition(e.position()+Ue),(n||new dr).__init(e.readInt32(e.position())+e.position(),e)}endianness(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):Nl.Little}fields(e,n){const i=this.bb.__offset(this.bb_pos,6);return i?(n||new Gn).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new It).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}features(e){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+e*8):BigInt(0)}featuresLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}static startSchema(e){e.startObject(4)}static addEndianness(e,n){e.addFieldInt16(0,n,Nl.Little)}static addFields(e,n){e.addFieldOffset(1,n,0)}static createFieldsVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startFieldsVector(e,n){e.startVector(4,n,4)}static addCustomMetadata(e,n){e.addFieldOffset(2,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static addFeatures(e,n){e.addFieldOffset(3,n,0)}static createFeaturesVector(e,n){e.startVector(8,n.length,8);for(let i=n.length-1;i>=0;i--)e.addInt64(n[i]);return e.endVector()}static startFeaturesVector(e,n){e.startVector(8,n,8)}static endSchema(e){return e.endObject()}static finishSchemaBuffer(e,n){e.finish(n)}static finishSizePrefixedSchemaBuffer(e,n){e.finish(n,void 0,!0)}static createSchema(e,n,i,r,s){return dr.startSchema(e),dr.addEndianness(e,n),dr.addFields(e,i),dr.addCustomMetadata(e,r),dr.addFeatures(e,s),dr.endSchema(e)}};var Be;(function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"})(Be||(Be={}));var k;(function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth",t[t.DurationSecond=-27]="DurationSecond",t[t.DurationMillisecond=-28]="DurationMillisecond",t[t.DurationMicrosecond=-29]="DurationMicrosecond",t[t.DurationNanosecond=-30]="DurationNanosecond"})(k||(k={}));var gr;(function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"})(gr||(gr={}));const LU=void 0;function Tu(t){if(t===null)return"null";if(t===LU)return"undefined";switch(typeof t){case"number":return`${t}`;case"bigint":return`${t}`;case"string":return`"${t}"`}return typeof t[Symbol.toPrimitive]=="function"?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map(e=>Tu(e))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,(e,n)=>typeof n=="bigint"?`${n}`:n)}function Ye(t){if(typeof t=="bigint"&&(t<Number.MIN_SAFE_INTEGER||t>Number.MAX_SAFE_INTEGER))throw new TypeError(`${t} is not safe to convert to a number.`);return Number(t)}function YA(t,e){return Ye(t/e)+Ye(t%e)/Ye(e)}const NU=Symbol.for("isArrowBigNum");function Oi(t,...e){return e.length===0?Object.setPrototypeOf(He(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}Oi.prototype[NU]=!0;Oi.prototype.toJSON=function(){return`"${Du(this)}"`};Oi.prototype.valueOf=function(t){return GA(this,t)};Oi.prototype.toString=function(){return Du(this)};Oi.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return GA(this);case"string":return Du(this);case"default":return FU(this)}return Du(this)};function ml(...t){return Oi.apply(this,t)}function gl(...t){return Oi.apply(this,t)}function Ou(...t){return Oi.apply(this,t)}Object.setPrototypeOf(ml.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(gl.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(Ou.prototype,Object.create(Uint32Array.prototype));Object.assign(ml.prototype,Oi.prototype,{constructor:ml,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(gl.prototype,Oi.prototype,{constructor:gl,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(Ou.prototype,Oi.prototype,{constructor:Ou,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});const BU=BigInt(4294967296)*BigInt(4294967296),PU=BU-BigInt(1);function GA(t,e){const{buffer:n,byteOffset:i,byteLength:r,signed:s}=t,o=new BigUint64Array(n,i,r/8),l=s&&o.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(0),u=0;if(l){for(const c of o)a|=(c^PU)*(BigInt(1)<<BigInt(64*u++));a*=BigInt(-1),a-=BigInt(1)}else for(const c of o)a|=c*(BigInt(1)<<BigInt(64*u++));if(typeof e=="number"){const c=BigInt(Math.pow(10,e)),h=a/c,f=a%c;return Ye(h)+Ye(f)/Ye(c)}return Ye(a)}function Du(t){if(t.byteLength===8)return`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`;if(!t.signed)return Im(t);let e=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);if(new Int16Array([e.at(-1)])[0]>=0)return Im(t);e=e.slice();let i=1;for(let s=0;s<e.length;s++){const o=e[s],l=~o+i;e[s]=l,i&=o===0?1:0}return`-${Im(e)}`}function FU(t){return t.byteLength===8?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:Du(t)}function Im(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const o=i.length-1;do{for(n[0]=i[s=0];s<o;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,e=`${n[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return e??"0"}class e1{static new(e,n){switch(n){case!0:return new ml(e);case!1:return new gl(e)}switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new ml(e)}return e.byteLength===16?new Ou(e):new gl(e)}static signed(e){return new ml(e)}static unsigned(e){return new gl(e)}static decimal(e){return new Ou(e)}constructor(e,n){return e1.new(e,n)}}var XA,JA,ZA,eI,tI,nI,iI,rI,sI,oI,lI,aI,uI,cI,hI,fI,dI,pI,mI,gI,yI,vI;class ee{static isNull(e){return(e==null?void 0:e.typeId)===k.Null}static isInt(e){return(e==null?void 0:e.typeId)===k.Int}static isFloat(e){return(e==null?void 0:e.typeId)===k.Float}static isBinary(e){return(e==null?void 0:e.typeId)===k.Binary}static isLargeBinary(e){return(e==null?void 0:e.typeId)===k.LargeBinary}static isUtf8(e){return(e==null?void 0:e.typeId)===k.Utf8}static isLargeUtf8(e){return(e==null?void 0:e.typeId)===k.LargeUtf8}static isBool(e){return(e==null?void 0:e.typeId)===k.Bool}static isDecimal(e){return(e==null?void 0:e.typeId)===k.Decimal}static isDate(e){return(e==null?void 0:e.typeId)===k.Date}static isTime(e){return(e==null?void 0:e.typeId)===k.Time}static isTimestamp(e){return(e==null?void 0:e.typeId)===k.Timestamp}static isInterval(e){return(e==null?void 0:e.typeId)===k.Interval}static isDuration(e){return(e==null?void 0:e.typeId)===k.Duration}static isList(e){return(e==null?void 0:e.typeId)===k.List}static isStruct(e){return(e==null?void 0:e.typeId)===k.Struct}static isUnion(e){return(e==null?void 0:e.typeId)===k.Union}static isFixedSizeBinary(e){return(e==null?void 0:e.typeId)===k.FixedSizeBinary}static isFixedSizeList(e){return(e==null?void 0:e.typeId)===k.FixedSizeList}static isMap(e){return(e==null?void 0:e.typeId)===k.Map}static isDictionary(e){return(e==null?void 0:e.typeId)===k.Dictionary}static isDenseUnion(e){return ee.isUnion(e)&&e.mode===Xt.Dense}static isSparseUnion(e){return ee.isUnion(e)&&e.mode===Xt.Sparse}constructor(e){this.typeId=e}}XA=Symbol.toStringTag;ee[XA]=(t=>(t.children=null,t.ArrayType=Array,t.OffsetArrayType=Int32Array,t[Symbol.toStringTag]="DataType"))(ee.prototype);let xs=class extends ee{constructor(){super(k.Null)}toString(){return"Null"}};JA=Symbol.toStringTag;xs[JA]=(t=>t[Symbol.toStringTag]="Null")(xs.prototype);class fo extends ee{constructor(e,n){super(k.Int),this.isSigned=e,this.bitWidth=n}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}ZA=Symbol.toStringTag;fo[ZA]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(fo.prototype);class Mu extends fo{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}Object.defineProperty(Mu.prototype,"ArrayType",{value:Int32Array});class $f extends ee{constructor(e){super(k.Float),this.precision=e}get ArrayType(){switch(this.precision){case Yt.HALF:return Uint16Array;case Yt.SINGLE:return Float32Array;case Yt.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}eI=Symbol.toStringTag;$f[eI]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))($f.prototype);class Hf extends ee{constructor(){super(k.Binary)}toString(){return"Binary"}}tI=Symbol.toStringTag;Hf[tI]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(Hf.prototype);class Wf extends ee{constructor(){super(k.LargeBinary)}toString(){return"LargeBinary"}}nI=Symbol.toStringTag;Wf[nI]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeBinary"))(Wf.prototype);class qf extends ee{constructor(){super(k.Utf8)}toString(){return"Utf8"}}iI=Symbol.toStringTag;qf[iI]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(qf.prototype);class Qf extends ee{constructor(){super(k.LargeUtf8)}toString(){return"LargeUtf8"}}rI=Symbol.toStringTag;Qf[rI]=(t=>(t.ArrayType=Uint8Array,t.OffsetArrayType=BigInt64Array,t[Symbol.toStringTag]="LargeUtf8"))(Qf.prototype);let Kf=class extends ee{constructor(){super(k.Bool)}toString(){return"Bool"}};sI=Symbol.toStringTag;Kf[sI]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Kf.prototype);class Yf extends ee{constructor(e,n,i=128){super(k.Decimal),this.scale=e,this.precision=n,this.bitWidth=i}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}oI=Symbol.toStringTag;Yf[oI]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))(Yf.prototype);class Gf extends ee{constructor(e){super(k.Date),this.unit=e}toString(){return`Date${(this.unit+1)*32}<${di[this.unit]}>`}get ArrayType(){return this.unit===di.DAY?Int32Array:BigInt64Array}}lI=Symbol.toStringTag;Gf[lI]=(t=>(t.unit=null,t[Symbol.toStringTag]="Date"))(Gf.prototype);class Xf extends ee{constructor(e,n){super(k.Time),this.unit=e,this.bitWidth=n}toString(){return`Time${this.bitWidth}<${ce[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}aI=Symbol.toStringTag;Xf[aI]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(Xf.prototype);class Jf extends ee{constructor(e,n){super(k.Timestamp),this.unit=e,this.timezone=n}toString(){return`Timestamp<${ce[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}uI=Symbol.toStringTag;Jf[uI]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Timestamp"))(Jf.prototype);class Zf extends ee{constructor(e){super(k.Interval),this.unit=e}toString(){return`Interval<${sr[this.unit]}>`}}cI=Symbol.toStringTag;Zf[cI]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(Zf.prototype);class ed extends ee{constructor(e){super(k.Duration),this.unit=e}toString(){return`Duration<${ce[this.unit]}>`}}hI=Symbol.toStringTag;ed[hI]=(t=>(t.unit=null,t.ArrayType=BigInt64Array,t[Symbol.toStringTag]="Duration"))(ed.prototype);class td extends ee{constructor(e){super(k.List),this.children=[e]}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}fI=Symbol.toStringTag;td[fI]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(td.prototype);class rn extends ee{constructor(e){super(k.Struct),this.children=e}toString(){return`Struct<{${this.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}dI=Symbol.toStringTag;rn[dI]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(rn.prototype);class nd extends ee{constructor(e,n,i){super(k.Union),this.mode=e,this.children=i,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((r,s,o)=>(r[s]=o)&&r||r,Object.create(null))}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(e=>`${e.type}`).join(" | ")}>`}}pI=Symbol.toStringTag;nd[pI]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(nd.prototype);class id extends ee{constructor(e){super(k.FixedSizeBinary),this.byteWidth=e}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}mI=Symbol.toStringTag;id[mI]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(id.prototype);class rd extends ee{constructor(e,n){super(k.FixedSizeList),this.listSize=e,this.children=[n]}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}gI=Symbol.toStringTag;rd[gI]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(rd.prototype);class sd extends ee{constructor(e,n=!1){var i,r,s;if(super(k.Map),this.children=[e],this.keysSorted=n,e&&(e.name="entries",!((i=e==null?void 0:e.type)===null||i===void 0)&&i.children)){const o=(r=e==null?void 0:e.type)===null||r===void 0?void 0:r.children[0];o&&(o.name="key");const l=(s=e==null?void 0:e.type)===null||s===void 0?void 0:s.children[1];l&&(l.name="value")}}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(e=>`${e.name}:${e.type}`).join(", ")}}>`}}yI=Symbol.toStringTag;sd[yI]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(sd.prototype);const zU=(t=>()=>++t)(-1);class Bl extends ee{constructor(e,n,i,r){super(k.Dictionary),this.indices=n,this.dictionary=e,this.isOrdered=r||!1,this.id=i==null?zU():Ye(i)}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}vI=Symbol.toStringTag;Bl[vI]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(Bl.prototype);function yr(t){const e=t;switch(t.typeId){case k.Decimal:return t.bitWidth/32;case k.Interval:return 1+e.unit;case k.FixedSizeList:return e.listSize;case k.FixedSizeBinary:return e.byteWidth;default:return 1}}class xe{visitMany(e,...n){return e.map((i,r)=>this.visit(i,...n.map(s=>s[r])))}visit(...e){return this.getVisitFn(e[0],!1).apply(this,e)}getVisitFn(e,n=!0){return UU(this,e,n)}getVisitFnByTypeId(e,n=!0){return Uo(this,e,n)}visitNull(e,...n){return null}visitBool(e,...n){return null}visitInt(e,...n){return null}visitFloat(e,...n){return null}visitUtf8(e,...n){return null}visitLargeUtf8(e,...n){return null}visitBinary(e,...n){return null}visitLargeBinary(e,...n){return null}visitFixedSizeBinary(e,...n){return null}visitDate(e,...n){return null}visitTimestamp(e,...n){return null}visitTime(e,...n){return null}visitDecimal(e,...n){return null}visitList(e,...n){return null}visitStruct(e,...n){return null}visitUnion(e,...n){return null}visitDictionary(e,...n){return null}visitInterval(e,...n){return null}visitDuration(e,...n){return null}visitFixedSizeList(e,...n){return null}visitMap(e,...n){return null}}function UU(t,e,n=!0){return typeof e=="number"?Uo(t,e,n):typeof e=="string"&&e in k?Uo(t,k[e],n):e&&e instanceof ee?Uo(t,RS(e),n):e!=null&&e.type&&e.type instanceof ee?Uo(t,RS(e.type),n):Uo(t,k.NONE,n)}function Uo(t,e,n=!0){let i=null;switch(e){case k.Null:i=t.visitNull;break;case k.Bool:i=t.visitBool;break;case k.Int:i=t.visitInt;break;case k.Int8:i=t.visitInt8||t.visitInt;break;case k.Int16:i=t.visitInt16||t.visitInt;break;case k.Int32:i=t.visitInt32||t.visitInt;break;case k.Int64:i=t.visitInt64||t.visitInt;break;case k.Uint8:i=t.visitUint8||t.visitInt;break;case k.Uint16:i=t.visitUint16||t.visitInt;break;case k.Uint32:i=t.visitUint32||t.visitInt;break;case k.Uint64:i=t.visitUint64||t.visitInt;break;case k.Float:i=t.visitFloat;break;case k.Float16:i=t.visitFloat16||t.visitFloat;break;case k.Float32:i=t.visitFloat32||t.visitFloat;break;case k.Float64:i=t.visitFloat64||t.visitFloat;break;case k.Utf8:i=t.visitUtf8;break;case k.LargeUtf8:i=t.visitLargeUtf8;break;case k.Binary:i=t.visitBinary;break;case k.LargeBinary:i=t.visitLargeBinary;break;case k.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case k.Date:i=t.visitDate;break;case k.DateDay:i=t.visitDateDay||t.visitDate;break;case k.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case k.Timestamp:i=t.visitTimestamp;break;case k.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case k.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case k.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case k.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case k.Time:i=t.visitTime;break;case k.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case k.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case k.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case k.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case k.Decimal:i=t.visitDecimal;break;case k.List:i=t.visitList;break;case k.Struct:i=t.visitStruct;break;case k.Union:i=t.visitUnion;break;case k.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case k.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case k.Dictionary:i=t.visitDictionary;break;case k.Interval:i=t.visitInterval;break;case k.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case k.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case k.Duration:i=t.visitDuration;break;case k.DurationSecond:i=t.visitDurationSecond||t.visitDuration;break;case k.DurationMillisecond:i=t.visitDurationMillisecond||t.visitDuration;break;case k.DurationMicrosecond:i=t.visitDurationMicrosecond||t.visitDuration;break;case k.DurationNanosecond:i=t.visitDurationNanosecond||t.visitDuration;break;case k.FixedSizeList:i=t.visitFixedSizeList;break;case k.Map:i=t.visitMap;break}if(typeof i=="function")return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${k[e]}'`)}function RS(t){switch(t.typeId){case k.Null:return k.Null;case k.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?k.Int8:k.Uint8;case 16:return n?k.Int16:k.Uint16;case 32:return n?k.Int32:k.Uint32;case 64:return n?k.Int64:k.Uint64}return k.Int}case k.Float:switch(t.precision){case Yt.HALF:return k.Float16;case Yt.SINGLE:return k.Float32;case Yt.DOUBLE:return k.Float64}return k.Float;case k.Binary:return k.Binary;case k.LargeBinary:return k.LargeBinary;case k.Utf8:return k.Utf8;case k.LargeUtf8:return k.LargeUtf8;case k.Bool:return k.Bool;case k.Decimal:return k.Decimal;case k.Time:switch(t.unit){case ce.SECOND:return k.TimeSecond;case ce.MILLISECOND:return k.TimeMillisecond;case ce.MICROSECOND:return k.TimeMicrosecond;case ce.NANOSECOND:return k.TimeNanosecond}return k.Time;case k.Timestamp:switch(t.unit){case ce.SECOND:return k.TimestampSecond;case ce.MILLISECOND:return k.TimestampMillisecond;case ce.MICROSECOND:return k.TimestampMicrosecond;case ce.NANOSECOND:return k.TimestampNanosecond}return k.Timestamp;case k.Date:switch(t.unit){case di.DAY:return k.DateDay;case di.MILLISECOND:return k.DateMillisecond}return k.Date;case k.Interval:switch(t.unit){case sr.DAY_TIME:return k.IntervalDayTime;case sr.YEAR_MONTH:return k.IntervalYearMonth}return k.Interval;case k.Duration:switch(t.unit){case ce.SECOND:return k.DurationSecond;case ce.MILLISECOND:return k.DurationMillisecond;case ce.MICROSECOND:return k.DurationMicrosecond;case ce.NANOSECOND:return k.DurationNanosecond}return k.Duration;case k.Map:return k.Map;case k.List:return k.List;case k.Struct:return k.Struct;case k.Union:switch(t.mode){case Xt.Dense:return k.DenseUnion;case Xt.Sparse:return k.SparseUnion}return k.Union;case k.FixedSizeBinary:return k.FixedSizeBinary;case k.FixedSizeList:return k.FixedSizeList;case k.Dictionary:return k.Dictionary}throw new Error(`Unrecognized type '${k[t.typeId]}'`)}xe.prototype.visitInt8=null;xe.prototype.visitInt16=null;xe.prototype.visitInt32=null;xe.prototype.visitInt64=null;xe.prototype.visitUint8=null;xe.prototype.visitUint16=null;xe.prototype.visitUint32=null;xe.prototype.visitUint64=null;xe.prototype.visitFloat16=null;xe.prototype.visitFloat32=null;xe.prototype.visitFloat64=null;xe.prototype.visitDateDay=null;xe.prototype.visitDateMillisecond=null;xe.prototype.visitTimestampSecond=null;xe.prototype.visitTimestampMillisecond=null;xe.prototype.visitTimestampMicrosecond=null;xe.prototype.visitTimestampNanosecond=null;xe.prototype.visitTimeSecond=null;xe.prototype.visitTimeMillisecond=null;xe.prototype.visitTimeMicrosecond=null;xe.prototype.visitTimeNanosecond=null;xe.prototype.visitDenseUnion=null;xe.prototype.visitSparseUnion=null;xe.prototype.visitIntervalDayTime=null;xe.prototype.visitIntervalYearMonth=null;xe.prototype.visitDuration=null;xe.prototype.visitDurationSecond=null;xe.prototype.visitDurationMillisecond=null;xe.prototype.visitDurationMicrosecond=null;xe.prototype.visitDurationNanosecond=null;const wI=new Float64Array(1),To=new Uint32Array(wI.buffer);function bI(t){const e=(t&31744)>>10,n=(t&1023)/1024,i=Math.pow(-1,(t&32768)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}function jU(t){if(t!==t)return 32256;wI[0]=t;const e=(To[1]&2147483648)>>16&65535;let n=To[1]&2146435072,i=0;return n>=1089470464?To[0]>0?n=31744:(n=(n&2080374784)>>16,i=(To[1]&1048575)>>10):n<=1056964608?(i=1048576+(To[1]&1048575),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=(To[1]&1048575)+512>>10),e|n|i&65535}class he extends xe{}function pe(t){return(e,n,i)=>{if(e.setValid(n,i!=null))return t(e,n,i)}}const VU=(t,e,n)=>{t[e]=Math.floor(n/864e5)},SI=(t,e,n,i)=>{if(n+1<e.length){const r=Ye(e[n]),s=Ye(e[n+1]);t.set(i.subarray(0,s-r),r)}},$U=({offset:t,values:e},n,i)=>{const r=t+n;i?e[r>>3]|=1<<r%8:e[r>>3]&=~(1<<r%8)},Br=({values:t},e,n)=>{t[e]=n},t1=({values:t},e,n)=>{t[e]=n},xI=({values:t},e,n)=>{t[e]=jU(n)},HU=(t,e,n)=>{switch(t.type.precision){case Yt.HALF:return xI(t,e,n);case Yt.SINGLE:case Yt.DOUBLE:return t1(t,e,n)}},kI=({values:t},e,n)=>{VU(t,e,n.valueOf())},CI=({values:t},e,n)=>{t[e]=BigInt(n)},WU=({stride:t,values:e},n,i)=>{e.set(i.subarray(0,t),t*n)},_I=({values:t,valueOffsets:e},n,i)=>SI(t,e,n,i),EI=({values:t,valueOffsets:e},n,i)=>SI(t,e,n,Xv(i)),qU=(t,e,n)=>{t.type.unit===di.DAY?kI(t,e,n):CI(t,e,n)},AI=({values:t},e,n)=>{t[e]=BigInt(n/1e3)},II=({values:t},e,n)=>{t[e]=BigInt(n)},TI=({values:t},e,n)=>{t[e]=BigInt(n*1e3)},OI=({values:t},e,n)=>{t[e]=BigInt(n*1e6)},QU=(t,e,n)=>{switch(t.type.unit){case ce.SECOND:return AI(t,e,n);case ce.MILLISECOND:return II(t,e,n);case ce.MICROSECOND:return TI(t,e,n);case ce.NANOSECOND:return OI(t,e,n)}},DI=({values:t},e,n)=>{t[e]=n},MI=({values:t},e,n)=>{t[e]=n},RI=({values:t},e,n)=>{t[e]=n},LI=({values:t},e,n)=>{t[e]=n},KU=(t,e,n)=>{switch(t.type.unit){case ce.SECOND:return DI(t,e,n);case ce.MILLISECOND:return MI(t,e,n);case ce.MICROSECOND:return RI(t,e,n);case ce.NANOSECOND:return LI(t,e,n)}},YU=({values:t,stride:e},n,i)=>{t.set(i.subarray(0,e),e*n)},GU=(t,e,n)=>{const i=t.children[0],r=t.valueOffsets,s=pi.getVisitFn(i);if(Array.isArray(n))for(let o=-1,l=r[e],a=r[e+1];l<a;)s(i,l++,n[++o]);else for(let o=-1,l=r[e],a=r[e+1];l<a;)s(i,l++,n.get(++o))},XU=(t,e,n)=>{const i=t.children[0],{valueOffsets:r}=t,s=pi.getVisitFn(i);let{[e]:o,[e+1]:l}=r;const a=n instanceof Map?n.entries():Object.entries(n);for(const u of a)if(s(i,o,u),++o>=l)break},JU=(t,e)=>(n,i,r,s)=>i&&n(i,t,e[s]),ZU=(t,e)=>(n,i,r,s)=>i&&n(i,t,e.get(s)),e8=(t,e)=>(n,i,r,s)=>i&&n(i,t,e.get(r.name)),t8=(t,e)=>(n,i,r,s)=>i&&n(i,t,e[r.name]),n8=(t,e,n)=>{const i=t.type.children.map(s=>pi.getVisitFn(s.type)),r=n instanceof Map?e8(e,n):n instanceof Fe?ZU(e,n):Array.isArray(n)?JU(e,n):t8(e,n);t.type.children.forEach((s,o)=>r(i[o],t.children[o],s,o))},i8=(t,e,n)=>{t.type.mode===Xt.Dense?NI(t,e,n):BI(t,e,n)},NI=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];pi.visit(r,t.valueOffsets[e],n)},BI=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];pi.visit(r,e,n)},r8=(t,e,n)=>{var i;(i=t.dictionary)===null||i===void 0||i.set(t.values[e],n)},s8=(t,e,n)=>{t.type.unit===sr.DAY_TIME?PI(t,e,n):FI(t,e,n)},PI=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},FI=({values:t},e,n)=>{t[e]=n[0]*12+n[1]%12},zI=({values:t},e,n)=>{t[e]=n},UI=({values:t},e,n)=>{t[e]=n},jI=({values:t},e,n)=>{t[e]=n},VI=({values:t},e,n)=>{t[e]=n},o8=(t,e,n)=>{switch(t.type.unit){case ce.SECOND:return zI(t,e,n);case ce.MILLISECOND:return UI(t,e,n);case ce.MICROSECOND:return jI(t,e,n);case ce.NANOSECOND:return VI(t,e,n)}},l8=(t,e,n)=>{const{stride:i}=t,r=t.children[0],s=pi.getVisitFn(r);if(Array.isArray(n))for(let o=-1,l=e*i;++o<i;)s(r,l+o,n[o]);else for(let o=-1,l=e*i;++o<i;)s(r,l+o,n.get(o))};he.prototype.visitBool=pe($U);he.prototype.visitInt=pe(Br);he.prototype.visitInt8=pe(Br);he.prototype.visitInt16=pe(Br);he.prototype.visitInt32=pe(Br);he.prototype.visitInt64=pe(Br);he.prototype.visitUint8=pe(Br);he.prototype.visitUint16=pe(Br);he.prototype.visitUint32=pe(Br);he.prototype.visitUint64=pe(Br);he.prototype.visitFloat=pe(HU);he.prototype.visitFloat16=pe(xI);he.prototype.visitFloat32=pe(t1);he.prototype.visitFloat64=pe(t1);he.prototype.visitUtf8=pe(EI);he.prototype.visitLargeUtf8=pe(EI);he.prototype.visitBinary=pe(_I);he.prototype.visitLargeBinary=pe(_I);he.prototype.visitFixedSizeBinary=pe(WU);he.prototype.visitDate=pe(qU);he.prototype.visitDateDay=pe(kI);he.prototype.visitDateMillisecond=pe(CI);he.prototype.visitTimestamp=pe(QU);he.prototype.visitTimestampSecond=pe(AI);he.prototype.visitTimestampMillisecond=pe(II);he.prototype.visitTimestampMicrosecond=pe(TI);he.prototype.visitTimestampNanosecond=pe(OI);he.prototype.visitTime=pe(KU);he.prototype.visitTimeSecond=pe(DI);he.prototype.visitTimeMillisecond=pe(MI);he.prototype.visitTimeMicrosecond=pe(RI);he.prototype.visitTimeNanosecond=pe(LI);he.prototype.visitDecimal=pe(YU);he.prototype.visitList=pe(GU);he.prototype.visitStruct=pe(n8);he.prototype.visitUnion=pe(i8);he.prototype.visitDenseUnion=pe(NI);he.prototype.visitSparseUnion=pe(BI);he.prototype.visitDictionary=pe(r8);he.prototype.visitInterval=pe(s8);he.prototype.visitIntervalDayTime=pe(PI);he.prototype.visitIntervalYearMonth=pe(FI);he.prototype.visitDuration=pe(o8);he.prototype.visitDurationSecond=pe(zI);he.prototype.visitDurationMillisecond=pe(UI);he.prototype.visitDurationMicrosecond=pe(jI);he.prototype.visitDurationNanosecond=pe(VI);he.prototype.visitFixedSizeList=pe(l8);he.prototype.visitMap=pe(XU);const pi=new he,bi=Symbol.for("parent"),yl=Symbol.for("rowIndex");class n1{constructor(e,n){return this[bi]=e,this[yl]=n,new Proxy(this,new u8)}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[yl],n=this[bi],i=n.type.children,r={};for(let s=-1,o=i.length;++s<o;)r[i[s].name]=Tn.visit(n.children[s],e);return r}toString(){return`{${[...this].map(([e,n])=>`${Tu(e)}: ${Tu(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new a8(this[bi],this[yl])}}class a8{constructor(e,n){this.childIndex=0,this.children=e.children,this.rowIndex=n,this.childFields=e.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const e=this.childIndex;return e<this.numChildren?(this.childIndex=e+1,{done:!1,value:[this.childFields[e].name,Tn.visit(this.children[e],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(n1.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[bi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[yl]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class u8{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[bi].type.children.map(n=>n.name)}has(e,n){return e[bi].type.children.findIndex(i=>i.name===n)!==-1}getOwnPropertyDescriptor(e,n){if(e[bi].type.children.findIndex(i=>i.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[bi].type.children.findIndex(r=>r.name===n);if(i!==-1){const r=Tn.visit(e[bi].children[i],e[yl]);return Reflect.set(e,n,r),r}}set(e,n,i){const r=e[bi].type.children.findIndex(s=>s.name===n);return r!==-1?(pi.visit(e[bi].children[r],e[yl],i),Reflect.set(e,n,i)):Reflect.has(e,n)||typeof n=="symbol"?Reflect.set(e,n,i):!1}}class oe extends xe{}function fe(t){return(e,n)=>e.getValid(n)?t(e,n):null}const c8=(t,e)=>864e5*t[e],h8=(t,e)=>null,$I=(t,e,n)=>{if(n+1>=e.length)return null;const i=Ye(e[n]),r=Ye(e[n+1]);return t.subarray(i,r)},f8=({offset:t,values:e},n)=>{const i=t+n;return(e[i>>3]&1<<i%8)!==0},HI=({values:t},e)=>c8(t,e),WI=({values:t},e)=>Ye(t[e]),Bs=({stride:t,values:e},n)=>e[t*n],d8=({stride:t,values:e},n)=>bI(e[t*n]),qI=({values:t},e)=>t[e],p8=({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)),QI=({values:t,valueOffsets:e},n)=>$I(t,e,n),KI=({values:t,valueOffsets:e},n)=>{const i=$I(t,e,n);return i!==null?ky(i):null},m8=({values:t},e)=>t[e],g8=({type:t,values:e},n)=>t.precision!==Yt.HALF?e[n]:bI(e[n]),y8=(t,e)=>t.type.unit===di.DAY?HI(t,e):WI(t,e),YI=({values:t},e)=>1e3*Ye(t[e]),GI=({values:t},e)=>Ye(t[e]),XI=({values:t},e)=>YA(t[e],BigInt(1e3)),JI=({values:t},e)=>YA(t[e],BigInt(1e6)),v8=(t,e)=>{switch(t.type.unit){case ce.SECOND:return YI(t,e);case ce.MILLISECOND:return GI(t,e);case ce.MICROSECOND:return XI(t,e);case ce.NANOSECOND:return JI(t,e)}},ZI=({values:t},e)=>t[e],eT=({values:t},e)=>t[e],tT=({values:t},e)=>t[e],nT=({values:t},e)=>t[e],w8=(t,e)=>{switch(t.type.unit){case ce.SECOND:return ZI(t,e);case ce.MILLISECOND:return eT(t,e);case ce.MICROSECOND:return tT(t,e);case ce.NANOSECOND:return nT(t,e)}},b8=({values:t,stride:e},n)=>e1.decimal(t.subarray(e*n,e*(n+1))),S8=(t,e)=>{const{valueOffsets:n,stride:i,children:r}=t,{[e*i]:s,[e*i+1]:o}=n,a=r[0].slice(s,o-s);return new Fe([a])},x8=(t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:r,[e+1]:s}=n,o=i[0];return new i1(o.slice(r,s-r))},k8=(t,e)=>new n1(t,e),C8=(t,e)=>t.type.mode===Xt.Dense?iT(t,e):rT(t,e),iT=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Tn.visit(i,t.valueOffsets[e])},rT=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return Tn.visit(i,e)},_8=(t,e)=>{var n;return(n=t.dictionary)===null||n===void 0?void 0:n.get(t.values[e])},E8=(t,e)=>t.type.unit===sr.DAY_TIME?sT(t,e):oT(t,e),sT=({values:t},e)=>t.subarray(2*e,2*(e+1)),oT=({values:t},e)=>{const n=t[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i},lT=({values:t},e)=>t[e],aT=({values:t},e)=>t[e],uT=({values:t},e)=>t[e],cT=({values:t},e)=>t[e],A8=(t,e)=>{switch(t.type.unit){case ce.SECOND:return lT(t,e);case ce.MILLISECOND:return aT(t,e);case ce.MICROSECOND:return uT(t,e);case ce.NANOSECOND:return cT(t,e)}},I8=(t,e)=>{const{stride:n,children:i}=t,s=i[0].slice(e*n,n);return new Fe([s])};oe.prototype.visitNull=fe(h8);oe.prototype.visitBool=fe(f8);oe.prototype.visitInt=fe(m8);oe.prototype.visitInt8=fe(Bs);oe.prototype.visitInt16=fe(Bs);oe.prototype.visitInt32=fe(Bs);oe.prototype.visitInt64=fe(qI);oe.prototype.visitUint8=fe(Bs);oe.prototype.visitUint16=fe(Bs);oe.prototype.visitUint32=fe(Bs);oe.prototype.visitUint64=fe(qI);oe.prototype.visitFloat=fe(g8);oe.prototype.visitFloat16=fe(d8);oe.prototype.visitFloat32=fe(Bs);oe.prototype.visitFloat64=fe(Bs);oe.prototype.visitUtf8=fe(KI);oe.prototype.visitLargeUtf8=fe(KI);oe.prototype.visitBinary=fe(QI);oe.prototype.visitLargeBinary=fe(QI);oe.prototype.visitFixedSizeBinary=fe(p8);oe.prototype.visitDate=fe(y8);oe.prototype.visitDateDay=fe(HI);oe.prototype.visitDateMillisecond=fe(WI);oe.prototype.visitTimestamp=fe(v8);oe.prototype.visitTimestampSecond=fe(YI);oe.prototype.visitTimestampMillisecond=fe(GI);oe.prototype.visitTimestampMicrosecond=fe(XI);oe.prototype.visitTimestampNanosecond=fe(JI);oe.prototype.visitTime=fe(w8);oe.prototype.visitTimeSecond=fe(ZI);oe.prototype.visitTimeMillisecond=fe(eT);oe.prototype.visitTimeMicrosecond=fe(tT);oe.prototype.visitTimeNanosecond=fe(nT);oe.prototype.visitDecimal=fe(b8);oe.prototype.visitList=fe(S8);oe.prototype.visitStruct=fe(k8);oe.prototype.visitUnion=fe(C8);oe.prototype.visitDenseUnion=fe(iT);oe.prototype.visitSparseUnion=fe(rT);oe.prototype.visitDictionary=fe(_8);oe.prototype.visitInterval=fe(E8);oe.prototype.visitIntervalDayTime=fe(sT);oe.prototype.visitIntervalYearMonth=fe(oT);oe.prototype.visitDuration=fe(A8);oe.prototype.visitDurationSecond=fe(lT);oe.prototype.visitDurationMillisecond=fe(aT);oe.prototype.visitDurationMicrosecond=fe(uT);oe.prototype.visitDurationNanosecond=fe(cT);oe.prototype.visitFixedSizeList=fe(I8);oe.prototype.visitMap=fe(x8);const Tn=new oe,jo=Symbol.for("keys"),vl=Symbol.for("vals"),Vo=Symbol.for("kKeysAsStrings"),Ty=Symbol.for("_kKeysAsStrings");class i1{constructor(e){return this[jo]=new Fe([e.children[0]]).memoize(),this[vl]=e.children[1],new Proxy(this,new O8)}get[Vo](){return this[Ty]||(this[Ty]=Array.from(this[jo].toArray(),String))}[Symbol.iterator](){return new T8(this[jo],this[vl])}get size(){return this[jo].length}toArray(){return Object.values(this.toJSON())}toJSON(){const e=this[jo],n=this[vl],i={};for(let r=-1,s=e.length;++r<s;)i[e.get(r)]=Tn.visit(n,r);return i}toString(){return`{${[...this].map(([e,n])=>`${Tu(e)}: ${Tu(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class T8{constructor(e,n){this.keys=e,this.vals=n,this.keyIndex=0,this.numKeys=e.length}[Symbol.iterator](){return this}next(){const e=this.keyIndex;return e===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(e),Tn.visit(this.vals,e)]})}}class O8{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(e){return e[Vo]}has(e,n){return e[Vo].includes(n)}getOwnPropertyDescriptor(e,n){if(e[Vo].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(e,n){if(Reflect.has(e,n))return e[n];const i=e[Vo].indexOf(n);if(i!==-1){const r=Tn.visit(Reflect.get(e,vl),i);return Reflect.set(e,n,r),r}}set(e,n,i){const r=e[Vo].indexOf(n);return r!==-1?(pi.visit(Reflect.get(e,vl),r,i),Reflect.set(e,n,i)):Reflect.has(e,n)?Reflect.set(e,n,i):!1}}Object.defineProperties(i1.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[jo]:{writable:!0,enumerable:!1,configurable:!1,value:null},[vl]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Ty]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let LS;function hT(t,e,n,i){const{length:r=0}=t;let s=typeof e!="number"?0:e,o=typeof n!="number"?r:n;return s<0&&(s=(s%r+r)%r),o<0&&(o=(o%r+r)%r),o<s&&(LS=s,s=o,o=LS),o>r&&(o=r),i?i(t,s,o):[s,o]}const r1=(t,e)=>t<0?e+t:t,NS=t=>t!==t;function ea(t){if(typeof t!=="object"||t===null)return NS(t)?NS:n=>n===t;if(t instanceof Date){const n=t.valueOf();return i=>i instanceof Date?i.valueOf()===n:!1}return ArrayBuffer.isView(t)?n=>n?IU(t,n):!1:t instanceof Map?M8(t):Array.isArray(t)?D8(t):t instanceof Fe?R8(t):L8(t,!0)}function D8(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=ea(t[n]);return vp(e)}function M8(t){let e=-1;const n=[];for(const i of t.values())n[++e]=ea(i);return vp(n)}function R8(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=ea(t.get(n));return vp(e)}function L8(t,e=!1){const n=Object.keys(t);if(!e&&n.length===0)return()=>!1;const i=[];for(let r=-1,s=n.length;++r<s;)i[r]=ea(t[n[r]]);return vp(i,n)}function vp(t,e){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return N8(t,n);case Map:return BS(t,n,n.keys());case i1:case n1:case Object:case void 0:return BS(t,n,e||Object.keys(n))}return n instanceof Fe?B8(t,n):!1}}function N8(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}function B8(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}function BS(t,e,n){const i=n[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let o=0;const l=t.length;let a=s.next(),u=i.next(),c=r.next();for(;o<l&&!u.done&&!c.done&&!a.done&&!(u.value!==c.value||!t[o](a.value));++o,u=i.next(),c=r.next(),a=s.next());return o===l&&u.done&&c.done&&a.done?!0:(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}function fT(t,e,n,i){return(n&1<<i)!==0}function P8(t,e,n,i){return(n&1<<i)>>i}function od(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(t%8===0?n.subarray(t>>3):ld(new s1(n,t,e,null,fT)).subarray(0,i)),r}return n}function ld(t){const e=[];let n=0,i=0,r=0;for(const o of t)o&&(r|=1<<i),++i===8&&(e[n++]=r,r=i=0);(n===0||i>0)&&(e[n++]=r);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class s1{constructor(e,n,i,r,s){this.bytes=e,this.length=i,this.context=r,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=e[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function Oy(t,e,n){if(n-e<=0)return 0;if(n-e<8){let s=0;for(const o of new s1(t,e,n-e,t,P8))s+=o;return s}const i=n>>3<<3,r=e+(e%8===0?0:8-e%8);return Oy(t,e,r)+Oy(t,i,n)+F8(t,r>>3,i-r>>3)}function F8(t,e,n){let i=0,r=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),o=n===void 0?t.byteLength:r+n;for(;o-r>=4;)i+=Tm(s.getUint32(r)),r+=4;for(;o-r>=2;)i+=Tm(s.getUint16(r)),r+=2;for(;o-r>=1;)i+=Tm(s.getUint8(r)),r+=1;return i}function Tm(t){let e=Math.trunc(t);return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),(e+(e>>>4)&252645135)*16843009>>>24}const z8=-1;class Ve{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:e}=this;return ee.isSparseUnion(e)?this.children.some(n=>n.nullable):ee.isDenseUnion(e)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let e=0;const{valueOffsets:n,values:i,nullBitmap:r,typeIds:s}=this;return n&&(e+=n.byteLength),i&&(e+=i.byteLength),r&&(e+=r.byteLength),s&&(e+=s.byteLength),this.children.reduce((o,l)=>o+l.byteLength,e)}get nullCount(){if(ee.isUnion(this.type))return this.children.reduce((i,r)=>i+r.nullCount,0);let e=this._nullCount,n;return e<=z8&&(n=this.nullBitmap)&&(this._nullCount=e=n.length===0?0:this.length-Oy(n,this.offset,this.offset+this.length)),e}constructor(e,n,i,r,s,o=[],l){this.type=e,this.children=o,this.dictionary=l,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(i||0,0)),this._nullCount=Math.floor(Math.max(r||0,-1));let a;s instanceof Ve?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=yr(e),s&&((a=s[0])&&(this.valueOffsets=a),(a=s[1])&&(this.values=a),(a=s[2])&&(this.nullBitmap=a),(a=s[3])&&(this.typeIds=a)))}getValid(e){const{type:n}=this;if(ee.isUnion(n)){const i=n,r=this.children[i.typeIdToChildIndex[this.typeIds[e]]],s=i.mode===Xt.Dense?this.valueOffsets[e]:e;return r.getValid(s)}if(this.nullable&&this.nullCount>0){const i=this.offset+e;return(this.nullBitmap[i>>3]&1<<i%8)!==0}return!0}setValid(e,n){let i;const{type:r}=this;if(ee.isUnion(r)){const s=r,o=this.children[s.typeIdToChildIndex[this.typeIds[e]]],l=s.mode===Xt.Dense?this.valueOffsets[e]:e;i=o.getValid(l),o.setValid(l,n)}else{let{nullBitmap:s}=this;const{offset:o,length:l}=this,a=o+e,u=1<<a%8,c=a>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+l+63&-64)>>3).fill(255),this.nullCount>0?(s.set(od(o,l,this.nullBitmap),0),Object.assign(this,{nullBitmap:s})):Object.assign(this,{nullBitmap:s,_nullCount:0}));const h=s[c];i=(h&u)!==0,s[c]=n?h|u:h&~u}return i!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(e=this.type,n=this.offset,i=this.length,r=this._nullCount,s=this,o=this.children){return new Ve(e,n,i,r,s,o,this.dictionary)}slice(e,n){const{stride:i,typeId:r,children:s}=this,o=+(this._nullCount===0)-1,l=r===16?i:1,a=this._sliceBuffers(e,n,i,r);return this.clone(this.type,this.offset+e,n,o,a,s.length===0||this.valueOffsets?s:this._sliceChildren(s,l*e,l*n))}_changeLengthAndBackfillNullBitmap(e){if(this.typeId===k.Null)return this.clone(this.type,0,e,0);const{length:n,nullCount:i}=this,r=new Uint8Array((e+63&-64)>>3).fill(255,0,n>>3);r[n>>3]=(1<<n-(n&-8))-1,i>0&&r.set(od(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[gr.VALIDITY]=r,this.clone(this.type,0,e,i+(e-n),s)}_sliceBuffers(e,n,i,r){let s;const{buffers:o}=this;return(s=o[gr.TYPE])&&(o[gr.TYPE]=s.subarray(e,e+n)),(s=o[gr.OFFSET])&&(o[gr.OFFSET]=s.subarray(e,e+n+1))||(s=o[gr.DATA])&&(o[gr.DATA]=r===6?s:s.subarray(i*e,i*(e+n))),o}_sliceChildren(e,n,i){return e.map(r=>r.slice(n,i))}}Ve.prototype.children=Object.freeze([]);class tu extends xe{visit(e){return this.getVisitFn(e.type).call(this,e)}visitNull(e){const{["type"]:n,["offset"]:i=0,["length"]:r=0}=e;return new Ve(n,i,r,r)}visitBool(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.nullBitmap),s=He(n.ArrayType,e.data),{["length"]:o=s.length>>3,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ve(n,i,o,l,[void 0,s,r])}visitInt(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.nullBitmap),s=He(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ve(n,i,o,l,[void 0,s,r])}visitFloat(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.nullBitmap),s=He(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ve(n,i,o,l,[void 0,s,r])}visitUtf8(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.data),s=Ae(e.nullBitmap),o=wa(e.valueOffsets),{["length"]:l=o.length-1,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ve(n,i,l,a,[o,r,s])}visitLargeUtf8(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.data),s=Ae(e.nullBitmap),o=kS(e.valueOffsets),{["length"]:l=o.length-1,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ve(n,i,l,a,[o,r,s])}visitBinary(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.data),s=Ae(e.nullBitmap),o=wa(e.valueOffsets),{["length"]:l=o.length-1,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ve(n,i,l,a,[o,r,s])}visitLargeBinary(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.data),s=Ae(e.nullBitmap),o=kS(e.valueOffsets),{["length"]:l=o.length-1,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ve(n,i,l,a,[o,r,s])}visitFixedSizeBinary(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.nullBitmap),s=He(n.ArrayType,e.data),{["length"]:o=s.length/yr(n),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ve(n,i,o,l,[void 0,s,r])}visitDate(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.nullBitmap),s=He(n.ArrayType,e.data),{["length"]:o=s.length/yr(n),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ve(n,i,o,l,[void 0,s,r])}visitTimestamp(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.nullBitmap),s=He(n.ArrayType,e.data),{["length"]:o=s.length/yr(n),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ve(n,i,o,l,[void 0,s,r])}visitTime(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.nullBitmap),s=He(n.ArrayType,e.data),{["length"]:o=s.length/yr(n),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ve(n,i,o,l,[void 0,s,r])}visitDecimal(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.nullBitmap),s=He(n.ArrayType,e.data),{["length"]:o=s.length/yr(n),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ve(n,i,o,l,[void 0,s,r])}visitList(e){const{["type"]:n,["offset"]:i=0,["child"]:r}=e,s=Ae(e.nullBitmap),o=wa(e.valueOffsets),{["length"]:l=o.length-1,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ve(n,i,l,a,[o,void 0,s],[r])}visitStruct(e){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=e,s=Ae(e.nullBitmap),{length:o=r.reduce((a,{length:u})=>Math.max(a,u),0),nullCount:l=e.nullBitmap?-1:0}=e;return new Ve(n,i,o,l,[void 0,void 0,s],r)}visitUnion(e){const{["type"]:n,["offset"]:i=0,["children"]:r=[]}=e,s=He(n.ArrayType,e.typeIds),{["length"]:o=s.length,["nullCount"]:l=-1}=e;if(ee.isSparseUnion(n))return new Ve(n,i,o,l,[void 0,void 0,void 0,s],r);const a=wa(e.valueOffsets);return new Ve(n,i,o,l,[a,void 0,void 0,s],r)}visitDictionary(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.nullBitmap),s=He(n.indices.ArrayType,e.data),{["dictionary"]:o=new Fe([new tu().visit({type:n.dictionary})])}=e,{["length"]:l=s.length,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ve(n,i,l,a,[void 0,s,r],[],o)}visitInterval(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.nullBitmap),s=He(n.ArrayType,e.data),{["length"]:o=s.length/yr(n),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ve(n,i,o,l,[void 0,s,r])}visitDuration(e){const{["type"]:n,["offset"]:i=0}=e,r=Ae(e.nullBitmap),s=He(n.ArrayType,e.data),{["length"]:o=s.length,["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ve(n,i,o,l,[void 0,s,r])}visitFixedSizeList(e){const{["type"]:n,["offset"]:i=0,["child"]:r=new tu().visit({type:n.valueType})}=e,s=Ae(e.nullBitmap),{["length"]:o=r.length/yr(n),["nullCount"]:l=e.nullBitmap?-1:0}=e;return new Ve(n,i,o,l,[void 0,void 0,s],[r])}visitMap(e){const{["type"]:n,["offset"]:i=0,["child"]:r=new tu().visit({type:n.childType})}=e,s=Ae(e.nullBitmap),o=wa(e.valueOffsets),{["length"]:l=o.length-1,["nullCount"]:a=e.nullBitmap?-1:0}=e;return new Ve(n,i,l,a,[o,void 0,s],[r])}}const U8=new tu;function ke(t){return U8.visit(t)}class PS{constructor(e=0,n){this.numChunks=e,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const e=this.chunkIterator.next();if(!e.done)return e;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function j8(t){return t.some(e=>e.nullable)}function dT(t){return t.reduce((e,n)=>e+n.nullCount,0)}function pT(t){return t.reduce((e,n,i)=>(e[i+1]=e[i]+n.length,e),new Uint32Array(t.length+1))}function mT(t,e,n,i){const r=[];for(let s=-1,o=t.length;++s<o;){const l=t[s],a=e[s],{length:u}=l;if(a>=i)break;if(n>=a+u)continue;if(a>=n&&a+u<=i){r.push(l);continue}const c=Math.max(0,n-a),h=Math.min(i-a,u);r.push(l.slice(c,h-c))}return r.length===0&&r.push(t[0].slice(0,0)),r}function o1(t,e,n,i){let r=0,s=0,o=e.length-1;do{if(r>=o-1)return n<e[o]?i(t,r,n-e[r]):null;s=r+Math.trunc((o-r)*.5),n<e[s]?o=s:r=s}while(r<o)}function l1(t,e){return t.getValid(e)}function ad(t){function e(n,i,r){return t(n[i],r)}return function(n){const i=this.data;return o1(i,this._offsets,n,e)}}function gT(t){let e;function n(i,r,s){return t(i[r],s,e)}return function(i,r){const s=this.data;e=r;const o=o1(s,this._offsets,i,n);return e=void 0,o}}function yT(t){let e;function n(i,r,s){let o=s,l=0,a=0;for(let u=r-1,c=i.length;++u<c;){const h=i[u];if(~(l=t(h,e,o)))return a+l;o=0,a+=h.length}return-1}return function(i,r){e=i;const s=this.data,o=typeof r!="number"?n(s,0,0):o1(s,this._offsets,r,n);return e=void 0,o}}class le extends xe{}function V8(t,e){return e===null&&t.length>0?0:-1}function $8(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const r of new s1(n,t.offset+(e||0),t.length,n,fT)){if(!r)return i;++i}return-1}function me(t,e,n){if(e===void 0)return-1;if(e===null)switch(t.typeId){case k.Union:break;case k.Dictionary:break;default:return $8(t,n)}const i=Tn.getVisitFn(t),r=ea(e);for(let s=(n||0)-1,o=t.length;++s<o;)if(r(i(t,s)))return s;return-1}function vT(t,e,n){const i=Tn.getVisitFn(t),r=ea(e);for(let s=(n||0)-1,o=t.length;++s<o;)if(r(i(t,s)))return s;return-1}le.prototype.visitNull=V8;le.prototype.visitBool=me;le.prototype.visitInt=me;le.prototype.visitInt8=me;le.prototype.visitInt16=me;le.prototype.visitInt32=me;le.prototype.visitInt64=me;le.prototype.visitUint8=me;le.prototype.visitUint16=me;le.prototype.visitUint32=me;le.prototype.visitUint64=me;le.prototype.visitFloat=me;le.prototype.visitFloat16=me;le.prototype.visitFloat32=me;le.prototype.visitFloat64=me;le.prototype.visitUtf8=me;le.prototype.visitLargeUtf8=me;le.prototype.visitBinary=me;le.prototype.visitLargeBinary=me;le.prototype.visitFixedSizeBinary=me;le.prototype.visitDate=me;le.prototype.visitDateDay=me;le.prototype.visitDateMillisecond=me;le.prototype.visitTimestamp=me;le.prototype.visitTimestampSecond=me;le.prototype.visitTimestampMillisecond=me;le.prototype.visitTimestampMicrosecond=me;le.prototype.visitTimestampNanosecond=me;le.prototype.visitTime=me;le.prototype.visitTimeSecond=me;le.prototype.visitTimeMillisecond=me;le.prototype.visitTimeMicrosecond=me;le.prototype.visitTimeNanosecond=me;le.prototype.visitDecimal=me;le.prototype.visitList=me;le.prototype.visitStruct=me;le.prototype.visitUnion=me;le.prototype.visitDenseUnion=vT;le.prototype.visitSparseUnion=vT;le.prototype.visitDictionary=me;le.prototype.visitInterval=me;le.prototype.visitIntervalDayTime=me;le.prototype.visitIntervalYearMonth=me;le.prototype.visitDuration=me;le.prototype.visitDurationSecond=me;le.prototype.visitDurationMillisecond=me;le.prototype.visitDurationMicrosecond=me;le.prototype.visitDurationNanosecond=me;le.prototype.visitFixedSizeList=me;le.prototype.visitMap=me;const ud=new le;class ae extends xe{}function de(t){const{type:e}=t;if(t.nullCount===0&&t.stride===1&&(ee.isInt(e)&&e.bitWidth!==64||ee.isTime(e)&&e.bitWidth!==64||ee.isFloat(e)&&e.precision!==Yt.HALF))return new PS(t.data.length,i=>{const r=t.data[i];return r.values.subarray(0,r.length)[Symbol.iterator]()});let n=0;return new PS(t.data.length,i=>{const s=t.data[i].length,o=t.slice(n,n+s);return n+=s,new H8(o)})}class H8{constructor(e){this.vector=e,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}ae.prototype.visitNull=de;ae.prototype.visitBool=de;ae.prototype.visitInt=de;ae.prototype.visitInt8=de;ae.prototype.visitInt16=de;ae.prototype.visitInt32=de;ae.prototype.visitInt64=de;ae.prototype.visitUint8=de;ae.prototype.visitUint16=de;ae.prototype.visitUint32=de;ae.prototype.visitUint64=de;ae.prototype.visitFloat=de;ae.prototype.visitFloat16=de;ae.prototype.visitFloat32=de;ae.prototype.visitFloat64=de;ae.prototype.visitUtf8=de;ae.prototype.visitLargeUtf8=de;ae.prototype.visitBinary=de;ae.prototype.visitLargeBinary=de;ae.prototype.visitFixedSizeBinary=de;ae.prototype.visitDate=de;ae.prototype.visitDateDay=de;ae.prototype.visitDateMillisecond=de;ae.prototype.visitTimestamp=de;ae.prototype.visitTimestampSecond=de;ae.prototype.visitTimestampMillisecond=de;ae.prototype.visitTimestampMicrosecond=de;ae.prototype.visitTimestampNanosecond=de;ae.prototype.visitTime=de;ae.prototype.visitTimeSecond=de;ae.prototype.visitTimeMillisecond=de;ae.prototype.visitTimeMicrosecond=de;ae.prototype.visitTimeNanosecond=de;ae.prototype.visitDecimal=de;ae.prototype.visitList=de;ae.prototype.visitStruct=de;ae.prototype.visitUnion=de;ae.prototype.visitDenseUnion=de;ae.prototype.visitSparseUnion=de;ae.prototype.visitDictionary=de;ae.prototype.visitInterval=de;ae.prototype.visitIntervalDayTime=de;ae.prototype.visitIntervalYearMonth=de;ae.prototype.visitDuration=de;ae.prototype.visitDurationSecond=de;ae.prototype.visitDurationMillisecond=de;ae.prototype.visitDurationMicrosecond=de;ae.prototype.visitDurationNanosecond=de;ae.prototype.visitFixedSizeList=de;ae.prototype.visitMap=de;const a1=new ae;var wT;const bT={},ST={};class Fe{constructor(e){var n,i,r;const s=e[0]instanceof Fe?e.flatMap(l=>l.data):e;if(s.length===0||s.some(l=>!(l instanceof Ve)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:l,set:a,indexOf:u}=bT[o.typeId],c=s[0];this.isValid=h=>l1(c,h),this.get=h=>l(c,h),this.set=(h,f)=>a(c,h,f),this.indexOf=h=>u(c,h),this._offsets=[0,c.length];break}default:Object.setPrototypeOf(this,ST[o.typeId]),this._offsets=pT(s);break}this.data=s,this.type=o,this.stride=yr(o),this.numChildren=(r=(i=o.children)===null||i===void 0?void 0:i.length)!==null&&r!==void 0?r:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((e,n)=>e+n.byteLength,0)}get nullable(){return j8(this.data)}get nullCount(){return dT(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${k[this.type.typeId]}Vector`}isValid(e){return!1}get(e){return null}at(e){return this.get(r1(e,this.length))}set(e,n){}indexOf(e,n){return-1}includes(e,n){return this.indexOf(e,n)>-1}[Symbol.iterator](){return a1.visit(this)}concat(...e){return new Fe(this.data.concat(e.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(e,n){return new Fe(hT(this,e,n,({data:i,_offsets:r},s,o)=>mT(i,r,s,o)))}toJSON(){return[...this]}toArray(){const{type:e,data:n,length:i,stride:r,ArrayType:s}=this;switch(e.typeId){case k.Int:case k.Float:case k.Decimal:case k.Time:case k.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,i*r);default:return n.reduce((o,{values:l,length:a})=>(o.array.set(l.subarray(0,a*r),o.offset),o.offset+=a*r,o),{array:new s(i*r),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(e){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.numChildren?new Fe(this.data.map(({children:n})=>n[e])):null}get isMemoized(){return ee.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(ee.isDictionary(this.type)){const e=new cd(this.data[0].dictionary),n=this.data.map(i=>{const r=i.clone();return r.dictionary=e,r});return new Fe(n)}return new cd(this)}unmemoize(){if(ee.isDictionary(this.type)&&this.isMemoized){const e=this.data[0].dictionary.unmemoize(),n=this.data.map(i=>{const r=i.clone();return r.dictionary=e,r});return new Fe(n)}return this}}wT=Symbol.toStringTag;Fe[wT]=(t=>{t.type=ee.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(k).map(n=>k[n]).filter(n=>typeof n=="number"&&n!==k.NONE);for(const n of e){const i=Tn.getVisitFnByTypeId(n),r=pi.getVisitFnByTypeId(n),s=ud.getVisitFnByTypeId(n);bT[n]={get:i,set:r,indexOf:s},ST[n]=Object.create(t,{isValid:{value:ad(l1)},get:{value:ad(Tn.getVisitFnByTypeId(n))},set:{value:gT(pi.getVisitFnByTypeId(n))},indexOf:{value:yT(ud.getVisitFnByTypeId(n))}})}return"Vector"})(Fe.prototype);class cd extends Fe{constructor(e){super(e.data);const n=this.get,i=this.set,r=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const l=s[o];if(l!==void 0)return l;const a=n.call(this,o);return s[o]=a,a}}),Object.defineProperty(this,"set",{value(o,l){i.call(this,o,l),s[o]=l}}),Object.defineProperty(this,"slice",{value:(o,l)=>new cd(r.call(this,o,l))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new Fe(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class Dy{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(e,n,i,r){return e.prep(8,24),e.writeInt64(BigInt(r??0)),e.pad(4),e.writeInt32(i),e.writeInt64(BigInt(n??0)),e.offset()}}class Fn{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsFooter(e,n){return(n||new Fn).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsFooter(e,n){return e.setPosition(e.position()+Ue),(n||new Fn).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):vt.V1}schema(e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new Vi).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(e,n){const i=this.bb.__offset(this.bb_pos,8);return i?(n||new Dy).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}dictionariesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}recordBatches(e,n){const i=this.bb.__offset(this.bb_pos,10);return i?(n||new Dy).__init(this.bb.__vector(this.bb_pos+i)+e*24,this.bb):null}recordBatchesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new It).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startFooter(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,vt.V1)}static addSchema(e,n){e.addFieldOffset(1,n,0)}static addDictionaries(e,n){e.addFieldOffset(2,n,0)}static startDictionariesVector(e,n){e.startVector(24,n,8)}static addRecordBatches(e,n){e.addFieldOffset(3,n,0)}static startRecordBatchesVector(e,n){e.startVector(24,n,8)}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endFooter(e){return e.endObject()}static finishFooterBuffer(e,n){e.finish(n)}static finishSizePrefixedFooterBuffer(e,n){e.finish(n,void 0,!0)}}class ze{constructor(e=[],n,i,r=vt.V5){this.fields=e||[],this.metadata=n||new Map,i||(i=My(this.fields)),this.dictionaries=i,this.metadataVersion=r}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(e=>e.name)}toString(){return`Schema<{ ${this.fields.map((e,n)=>`${n}: ${e}`).join(", ")} }>`}select(e){const n=new Set(e),i=this.fields.filter(r=>n.has(r.name));return new ze(i,this.metadata)}selectAt(e){const n=e.map(i=>this.fields[i]).filter(Boolean);return new ze(n,this.metadata)}assign(...e){const n=e[0]instanceof ze?e[0]:Array.isArray(e[0])?new ze(e[0]):new ze(e),i=[...this.fields],r=Xc(Xc(new Map,this.metadata),n.metadata),s=n.fields.filter(l=>{const a=i.findIndex(u=>u.name===l.name);return~a?(i[a]=l.clone({metadata:Xc(Xc(new Map,i[a].metadata),l.metadata)}))&&!1:!0}),o=My(s,new Map);return new ze([...i,...s],r,new Map([...this.dictionaries,...o]))}}ze.prototype.fields=null;ze.prototype.metadata=null;ze.prototype.dictionaries=null;class st{static new(...e){let[n,i,r,s]=e;return e[0]&&typeof e[0]=="object"&&({name:n}=e[0],i===void 0&&(i=e[0].type),r===void 0&&(r=e[0].nullable),s===void 0&&(s=e[0].metadata)),new st(`${n}`,i,r,s)}constructor(e,n,i=!1,r){this.name=e,this.type=n,this.nullable=i,this.metadata=r||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...e){let[n,i,r,s]=e;return!e[0]||typeof e[0]!="object"?[n=this.name,i=this.type,r=this.nullable,s=this.metadata]=e:{name:n=this.name,type:i=this.type,nullable:r=this.nullable,metadata:s=this.metadata}=e[0],st.new(n,i,r,s)}}st.prototype.type=null;st.prototype.name=null;st.prototype.nullable=null;st.prototype.metadata=null;function Xc(t,e){return new Map([...t||new Map,...e||new Map])}function My(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const s=t[n].type;if(ee.isDictionary(s)){if(!e.has(s.id))e.set(s.id,s.dictionary);else if(e.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&My(s.children,e)}return e}var W8=WA,q8=Ll;class Ru{static decode(e){e=new q8(Ae(e));const n=Fn.getRootAsFooter(e),i=ze.decode(n.schema(),new Map,n.version());return new Q8(i,n)}static encode(e){const n=new W8,i=ze.encode(n,e.schema);Fn.startRecordBatchesVector(n,e.numRecordBatches);for(const o of[...e.recordBatches()].slice().reverse())ks.encode(n,o);const r=n.endVector();Fn.startDictionariesVector(n,e.numDictionaries);for(const o of[...e.dictionaryBatches()].slice().reverse())ks.encode(n,o);const s=n.endVector();return Fn.startFooter(n),Fn.addSchema(n,i),Fn.addVersion(n,vt.V5),Fn.addRecordBatches(n,r),Fn.addDictionaries(n,s),Fn.finishFooterBuffer(n,Fn.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(e,n=vt.V5,i,r){this.schema=e,this.version=n,i&&(this._recordBatches=i),r&&(this._dictionaryBatches=r)}*recordBatches(){for(let e,n=-1,i=this.numRecordBatches;++n<i;)(e=this.getRecordBatch(n))&&(yield e)}*dictionaryBatches(){for(let e,n=-1,i=this.numDictionaries;++n<i;)(e=this.getDictionaryBatch(n))&&(yield e)}getRecordBatch(e){return e>=0&&e<this.numRecordBatches&&this._recordBatches[e]||null}getDictionaryBatch(e){return e>=0&&e<this.numDictionaries&&this._dictionaryBatches[e]||null}}class Q8 extends Ru{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(e,n){super(e,n.version()),this._footer=n}getRecordBatch(e){if(e>=0&&e<this.numRecordBatches){const n=this._footer.recordBatches(e);if(n)return ks.decode(n)}return null}getDictionaryBatch(e){if(e>=0&&e<this.numDictionaries){const n=this._footer.dictionaries(e);if(n)return ks.decode(n)}return null}}class ks{static decode(e){return new ks(e.metaDataLength(),e.bodyLength(),e.offset())}static encode(e,n){const{metaDataLength:i}=n,r=BigInt(n.offset),s=BigInt(n.bodyLength);return Dy.createBlock(e,r,i,s)}constructor(e,n,i){this.metaDataLength=e,this.offset=Ye(i),this.bodyLength=Ye(n)}}const ut=Object.freeze({done:!0,value:void 0});class FS{constructor(e){this._json=e}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class u1{tee(){return this._getDOMStream().tee()}pipe(e,n){return this._getNodeStream().pipe(e,n)}pipeTo(e,n){return this._getDOMStream().pipeTo(e,n)}pipeThrough(e,n){return this._getDOMStream().pipeThrough(e,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class K8 extends u1{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(e=>this._closedPromiseResolve=e)}get closed(){return this._closedPromise}cancel(e){return ge(this,void 0,void 0,function*(){yield this.return(e)})}write(e){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(e):this.resolvers.shift().resolve({done:!1,value:e}))}abort(e){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:e}:this.resolvers.shift().reject({done:!0,value:e}))}close(){if(this._closedPromiseResolve){const{resolvers:e}=this;for(;e.length>0;)e.shift().resolve(ut);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(e){return Xn.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,e)}toNodeStream(e){return Xn.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,e)}throw(e){return ge(this,void 0,void 0,function*(){return yield this.abort(e),ut})}return(e){return ge(this,void 0,void 0,function*(){return yield this.close(),ut})}read(e){return ge(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ge(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(...e){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,i)=>{this.resolvers.push({resolve:n,reject:i})}):Promise.resolve(ut)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class qh extends K8{write(e){if((e=Ae(e)).byteLength>0)return super.write(e)}toString(e=!1){return e?ky(this.toUint8Array(!0)):this.toUint8Array(!1).then(ky)}toUint8Array(e=!1){return e?rr(this._values)[0]:ge(this,void 0,void 0,function*(){var n,i,r,s;const o=[];let l=0;try{for(var a=!0,u=no(this),c;c=yield u.next(),n=c.done,!n;a=!0){s=c.value,a=!1;const h=s;o.push(h),l+=h.byteLength}}catch(h){i={error:h}}finally{try{!a&&!n&&(r=u.return)&&(yield r.call(u))}finally{if(i)throw i.error}}return rr(o,l)[0]})}}class hd{constructor(e){e&&(this.source=new Y8(Xn.fromIterable(e)))}[Symbol.iterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Pl{constructor(e){e instanceof Pl?this.source=e.source:e instanceof qh?this.source=new zs(Xn.fromAsyncIterable(e)):jA(e)?this.source=new zs(Xn.fromNodeStream(e)):Jv(e)?this.source=new zs(Xn.fromDOMStream(e)):UA(e)?this.source=new zs(Xn.fromDOMStream(e.body)):lc(e)?this.source=new zs(Xn.fromIterable(e)):ho(e)?this.source=new zs(Xn.fromAsyncIterable(e)):Zl(e)&&(this.source=new zs(Xn.fromAsyncIterable(e)))}[Symbol.asyncIterator](){return this}next(e){return this.source.next(e)}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}get closed(){return this.source.closed}cancel(e){return this.source.cancel(e)}peek(e){return this.source.peek(e)}read(e){return this.source.read(e)}}class Y8{constructor(e){this.source=e}cancel(e){this.return(e)}peek(e){return this.next(e,"peek").value}read(e){return this.next(e,"read").value}next(e,n="read"){return this.source.next({cmd:n,size:e})}throw(e){return Object.create(this.source.throw&&this.source.throw(e)||ut)}return(e){return Object.create(this.source.return&&this.source.return(e)||ut)}}class zs{constructor(e){this.source=e,this._closedPromise=new Promise(n=>this._closedPromiseResolve=n)}cancel(e){return ge(this,void 0,void 0,function*(){yield this.return(e)})}get closed(){return this._closedPromise}read(e){return ge(this,void 0,void 0,function*(){return(yield this.next(e,"read")).value})}peek(e){return ge(this,void 0,void 0,function*(){return(yield this.next(e,"peek")).value})}next(e){return ge(this,arguments,void 0,function*(n,i="read"){return yield this.source.next({cmd:i,size:n})})}throw(e){return ge(this,void 0,void 0,function*(){const n=this.source.throw&&(yield this.source.throw(e))||ut;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}return(e){return ge(this,void 0,void 0,function*(){const n=this.source.return&&(yield this.source.return(e))||ut;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(n)})}}class zS extends hd{constructor(e,n){super(),this.position=0,this.buffer=Ae(e),this.size=n===void 0?this.buffer.byteLength:n}readInt32(e){const{buffer:n,byteOffset:i}=this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)}seek(e){return this.position=Math.min(e,this.size),e<this.size}read(e){const{buffer:n,size:i,position:r}=this;return n&&r<i?(typeof e!="number"&&(e=Number.POSITIVE_INFINITY),this.position=Math.min(i,r+Math.min(i-r,e)),n.subarray(r,this.position)):null}readAt(e,n){const i=this.buffer,r=Math.min(this.size,e+n);return i?i.subarray(e,r):new Uint8Array(n)}close(){this.buffer&&(this.buffer=null)}throw(e){return this.close(),{done:!0,value:e}}return(e){return this.close(),{done:!0,value:e}}}class fd extends Pl{constructor(e,n){super(),this.position=0,this._handle=e,typeof n=="number"?this.size=n:this._pending=ge(this,void 0,void 0,function*(){this.size=(yield e.stat()).size,delete this._pending})}readInt32(e){return ge(this,void 0,void 0,function*(){const{buffer:n,byteOffset:i}=yield this.readAt(e,4);return new DataView(n,i).getInt32(0,!0)})}seek(e){return ge(this,void 0,void 0,function*(){return this._pending&&(yield this._pending),this.position=Math.min(e,this.size),e<this.size})}read(e){return ge(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:n,size:i,position:r}=this;if(n&&r<i){typeof e!="number"&&(e=Number.POSITIVE_INFINITY);let s=r,o=0,l=0;const a=Math.min(i,s+Math.min(i-s,e)),u=new Uint8Array(Math.max(0,(this.position=a)-s));for(;(s+=l)<a&&(o+=l)<u.byteLength;)({bytesRead:l}=yield n.read(u,o,u.byteLength-o,s));return u}return null})}readAt(e,n){return ge(this,void 0,void 0,function*(){this._pending&&(yield this._pending);const{_handle:i,size:r}=this;if(i&&e+n<r){const s=Math.min(r,e+n),o=new Uint8Array(s-e);return(yield i.read(o,0,n,e)).buffer}return new Uint8Array(n)})}close(){return ge(this,void 0,void 0,function*(){const e=this._handle;this._handle=null,e&&(yield e.close())})}throw(e){return ge(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}return(e){return ge(this,void 0,void 0,function*(){return yield this.close(),{done:!0,value:e}})}}const G8=65536;function il(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const Fl=8,c1=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class xT{constructor(e){this.buffer=e}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(e){const n=new Uint32Array([this.buffer[1]>>>16,this.buffer[1]&65535,this.buffer[0]>>>16,this.buffer[0]&65535]),i=new Uint32Array([e.buffer[1]>>>16,e.buffer[1]&65535,e.buffer[0]>>>16,e.buffer[0]&65535]);let r=n[3]*i[3];this.buffer[0]=r&65535;let s=r>>>16;return r=n[2]*i[3],s+=r,r=n[3]*i[2]>>>0,s+=r,this.buffer[0]+=s<<16,this.buffer[1]=s>>>0<r?G8:0,this.buffer[1]+=s>>>16,this.buffer[1]+=n[1]*i[3]+n[2]*i[2]+n[3]*i[1],this.buffer[1]+=n[0]*i[3]+n[1]*i[2]+n[2]*i[1]+n[3]*i[0]<<16,this}_plus(e){const n=this.buffer[0]+e.buffer[0]>>>0;this.buffer[1]+=e.buffer[1],n<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=n}lessThan(e){return this.buffer[1]<e.buffer[1]||this.buffer[1]===e.buffer[1]&&this.buffer[0]<e.buffer[0]}equals(e){return this.buffer[1]===e.buffer[1]&&this.buffer[0]==e.buffer[0]}greaterThan(e){return e.lessThan(this)}hex(){return`${il(this.buffer[1])} ${il(this.buffer[0])}`}}class $e extends xT{times(e){return this._times(e),this}plus(e){return this._plus(e),this}static from(e,n=new Uint32Array(2)){return $e.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return $e.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.length,r=new $e(n);for(let s=0;s<i;){const o=Fl<i-s?Fl:i-s,l=new $e(new Uint32Array([Number.parseInt(e.slice(s,s+o),10),0])),a=new $e(new Uint32Array([c1[o],0]));r.times(a),r.plus(l),s+=o}return r}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,r=e.length;++i<r;)$e.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new $e(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new $e(new Uint32Array(e.buffer)).plus(n)}}class mn extends xT{negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[0]==0&&++this.buffer[1],this}times(e){return this._times(e),this}plus(e){return this._plus(e),this}lessThan(e){const n=this.buffer[1]<<0,i=e.buffer[1]<<0;return n<i||n===i&&this.buffer[0]<e.buffer[0]}static from(e,n=new Uint32Array(2)){return mn.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(2)){return mn.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(2)){const i=e.startsWith("-"),r=e.length,s=new mn(n);for(let o=i?1:0;o<r;){const l=Fl<r-o?Fl:r-o,a=new mn(new Uint32Array([Number.parseInt(e.slice(o,o+l),10),0])),u=new mn(new Uint32Array([c1[l],0]));s.times(u),s.plus(a),o+=l}return i?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*2);for(let i=-1,r=e.length;++i<r;)mn.from(e[i],new Uint32Array(n.buffer,n.byteOffset+2*i*4,2));return n}static multiply(e,n){return new mn(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new mn(new Uint32Array(e.buffer)).plus(n)}}class $i{constructor(e){this.buffer=e}high(){return new mn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new mn(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=~this.buffer[0]+1,this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],this.buffer[0]==0&&++this.buffer[1],this.buffer[1]==0&&++this.buffer[2],this.buffer[2]==0&&++this.buffer[3],this}times(e){const n=new $e(new Uint32Array([this.buffer[3],0])),i=new $e(new Uint32Array([this.buffer[2],0])),r=new $e(new Uint32Array([this.buffer[1],0])),s=new $e(new Uint32Array([this.buffer[0],0])),o=new $e(new Uint32Array([e.buffer[3],0])),l=new $e(new Uint32Array([e.buffer[2],0])),a=new $e(new Uint32Array([e.buffer[1],0])),u=new $e(new Uint32Array([e.buffer[0],0]));let c=$e.multiply(s,u);this.buffer[0]=c.low();const h=new $e(new Uint32Array([c.high(),0]));return c=$e.multiply(r,u),h.plus(c),c=$e.multiply(s,a),h.plus(c),this.buffer[1]=h.low(),this.buffer[3]=h.lessThan(c)?1:0,this.buffer[2]=h.high(),new $e(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus($e.multiply(i,u)).plus($e.multiply(r,a)).plus($e.multiply(s,l)),this.buffer[3]+=$e.multiply(n,u).plus($e.multiply(i,a)).plus($e.multiply(r,l)).plus($e.multiply(s,o)).low(),this}plus(e){const n=new Uint32Array(4);return n[3]=this.buffer[3]+e.buffer[3]>>>0,n[2]=this.buffer[2]+e.buffer[2]>>>0,n[1]=this.buffer[1]+e.buffer[1]>>>0,n[0]=this.buffer[0]+e.buffer[0]>>>0,n[0]<this.buffer[0]>>>0&&++n[1],n[1]<this.buffer[1]>>>0&&++n[2],n[2]<this.buffer[2]>>>0&&++n[3],this.buffer[3]=n[3],this.buffer[2]=n[2],this.buffer[1]=n[1],this.buffer[0]=n[0],this}hex(){return`${il(this.buffer[3])} ${il(this.buffer[2])} ${il(this.buffer[1])} ${il(this.buffer[0])}`}static multiply(e,n){return new $i(new Uint32Array(e.buffer)).times(n)}static add(e,n){return new $i(new Uint32Array(e.buffer)).plus(n)}static from(e,n=new Uint32Array(4)){return $i.fromString(typeof e=="string"?e:e.toString(),n)}static fromNumber(e,n=new Uint32Array(4)){return $i.fromString(e.toString(),n)}static fromString(e,n=new Uint32Array(4)){const i=e.startsWith("-"),r=e.length,s=new $i(n);for(let o=i?1:0;o<r;){const l=Fl<r-o?Fl:r-o,a=new $i(new Uint32Array([Number.parseInt(e.slice(o,o+l),10),0,0,0])),u=new $i(new Uint32Array([c1[l],0,0,0]));s.times(u),s.plus(a),o+=l}return i?s.negate():s}static convertArray(e){const n=new Uint32Array(e.length*4);for(let i=-1,r=e.length;++i<r;)$i.from(e[i],new Uint32Array(n.buffer,n.byteOffset+4*4*i,4));return n}}class kT extends xe{constructor(e,n,i,r,s=vt.V5){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=e,this.nodes=n,this.buffers=i,this.dictionaries=r,this.metadataVersion=s}visit(e){return super.visit(e instanceof st?e.type:e)}visitNull(e,{length:n}=this.nextFieldNode()){return ke({type:e,length:n})}visitBool(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitInt(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFloat(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitUtf8(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeUtf8(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitLargeBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),data:this.readData(e)})}visitFixedSizeBinary(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDate(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTimestamp(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitTime(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDecimal(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitList(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}visitStruct(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),children:this.visitMany(e.children)})}visitUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return this.metadataVersion<vt.V5&&this.readNullBitmap(e,i),e.mode===Xt.Sparse?this.visitSparseUnion(e,{length:n,nullCount:i}):this.visitDenseUnion(e,{length:n,nullCount:i})}visitDenseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,typeIds:this.readTypeIds(e),valueOffsets:this.readOffsets(e),children:this.visitMany(e.children)})}visitSparseUnion(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,typeIds:this.readTypeIds(e),children:this.visitMany(e.children)})}visitDictionary(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e.indices),dictionary:this.readDictionary(e)})}visitInterval(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitDuration(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),data:this.readData(e)})}visitFixedSizeList(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),child:this.visit(e.children[0])})}visitMap(e,{length:n,nullCount:i}=this.nextFieldNode()){return ke({type:e,length:n,nullCount:i,nullBitmap:this.readNullBitmap(e,i),valueOffsets:this.readOffsets(e),child:this.visit(e.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(e,n,i=this.nextBufferRange()){return n>0&&this.readData(e,i)||new Uint8Array(0)}readOffsets(e,n){return this.readData(e,n)}readTypeIds(e,n){return this.readData(e,n)}readData(e,{length:n,offset:i}=this.nextBufferRange()){return this.bytes.subarray(i,i+n)}readDictionary(e){return this.dictionaries.get(e.id)}}class X8 extends kT{constructor(e,n,i,r,s){super(new Uint8Array(0),n,i,r,s),this.sources=e}readNullBitmap(e,n,{offset:i}=this.nextBufferRange()){return n<=0?new Uint8Array(0):ld(this.sources[i])}readOffsets(e,{offset:n}=this.nextBufferRange()){return He(Uint8Array,He(e.OffsetArrayType,this.sources[n]))}readTypeIds(e,{offset:n}=this.nextBufferRange()){return He(Uint8Array,He(e.ArrayType,this.sources[n]))}readData(e,{offset:n}=this.nextBufferRange()){const{sources:i}=this;return ee.isTimestamp(e)||(ee.isInt(e)||ee.isTime(e))&&e.bitWidth===64||ee.isDuration(e)||ee.isDate(e)&&e.unit===di.MILLISECOND?He(Uint8Array,mn.convertArray(i[n])):ee.isDecimal(e)?He(Uint8Array,$i.convertArray(i[n])):ee.isBinary(e)||ee.isLargeBinary(e)||ee.isFixedSizeBinary(e)?J8(i[n]):ee.isBool(e)?ld(i[n]):ee.isUtf8(e)||ee.isLargeUtf8(e)?Xv(i[n].join("")):He(Uint8Array,He(e.ArrayType,i[n].map(r=>+r)))}}function J8(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let i=0;i<e.length;i+=2)n[i>>1]=Number.parseInt(e.slice(i,i+2),16);return n}class ue extends xe{compareSchemas(e,n){return e===n||n instanceof e.constructor&&this.compareManyFields(e.fields,n.fields)}compareManyFields(e,n){return e===n||Array.isArray(e)&&Array.isArray(n)&&e.length===n.length&&e.every((i,r)=>this.compareFields(i,n[r]))}compareFields(e,n){return e===n||n instanceof e.constructor&&e.name===n.name&&e.nullable===n.nullable&&this.visit(e.type,n.type)}}function fn(t,e){return e instanceof t.constructor}function ko(t,e){return t===e||fn(t,e)}function Pr(t,e){return t===e||fn(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function wp(t,e){return t===e||fn(t,e)&&t.precision===e.precision}function Z8(t,e){return t===e||fn(t,e)&&t.byteWidth===e.byteWidth}function h1(t,e){return t===e||fn(t,e)&&t.unit===e.unit}function ac(t,e){return t===e||fn(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function uc(t,e){return t===e||fn(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function e6(t,e){return t===e||fn(t,e)&&t.children.length===e.children.length&&Cs.compareManyFields(t.children,e.children)}function t6(t,e){return t===e||fn(t,e)&&t.children.length===e.children.length&&Cs.compareManyFields(t.children,e.children)}function f1(t,e){return t===e||fn(t,e)&&t.mode===e.mode&&t.typeIds.every((n,i)=>n===e.typeIds[i])&&Cs.compareManyFields(t.children,e.children)}function n6(t,e){return t===e||fn(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&Cs.visit(t.indices,e.indices)&&Cs.visit(t.dictionary,e.dictionary)}function d1(t,e){return t===e||fn(t,e)&&t.unit===e.unit}function cc(t,e){return t===e||fn(t,e)&&t.unit===e.unit}function i6(t,e){return t===e||fn(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&Cs.compareManyFields(t.children,e.children)}function r6(t,e){return t===e||fn(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&Cs.compareManyFields(t.children,e.children)}ue.prototype.visitNull=ko;ue.prototype.visitBool=ko;ue.prototype.visitInt=Pr;ue.prototype.visitInt8=Pr;ue.prototype.visitInt16=Pr;ue.prototype.visitInt32=Pr;ue.prototype.visitInt64=Pr;ue.prototype.visitUint8=Pr;ue.prototype.visitUint16=Pr;ue.prototype.visitUint32=Pr;ue.prototype.visitUint64=Pr;ue.prototype.visitFloat=wp;ue.prototype.visitFloat16=wp;ue.prototype.visitFloat32=wp;ue.prototype.visitFloat64=wp;ue.prototype.visitUtf8=ko;ue.prototype.visitLargeUtf8=ko;ue.prototype.visitBinary=ko;ue.prototype.visitLargeBinary=ko;ue.prototype.visitFixedSizeBinary=Z8;ue.prototype.visitDate=h1;ue.prototype.visitDateDay=h1;ue.prototype.visitDateMillisecond=h1;ue.prototype.visitTimestamp=ac;ue.prototype.visitTimestampSecond=ac;ue.prototype.visitTimestampMillisecond=ac;ue.prototype.visitTimestampMicrosecond=ac;ue.prototype.visitTimestampNanosecond=ac;ue.prototype.visitTime=uc;ue.prototype.visitTimeSecond=uc;ue.prototype.visitTimeMillisecond=uc;ue.prototype.visitTimeMicrosecond=uc;ue.prototype.visitTimeNanosecond=uc;ue.prototype.visitDecimal=ko;ue.prototype.visitList=e6;ue.prototype.visitStruct=t6;ue.prototype.visitUnion=f1;ue.prototype.visitDenseUnion=f1;ue.prototype.visitSparseUnion=f1;ue.prototype.visitDictionary=n6;ue.prototype.visitInterval=d1;ue.prototype.visitIntervalDayTime=d1;ue.prototype.visitIntervalYearMonth=d1;ue.prototype.visitDuration=cc;ue.prototype.visitDurationSecond=cc;ue.prototype.visitDurationMillisecond=cc;ue.prototype.visitDurationMicrosecond=cc;ue.prototype.visitDurationNanosecond=cc;ue.prototype.visitFixedSizeList=i6;ue.prototype.visitMap=r6;const Cs=new ue;function Ry(t,e){return Cs.compareSchemas(t,e)}function Om(t,e){return s6(t,e.map(n=>n.data.concat()))}function s6(t,e){const n=[...t.fields],i=[],r={numBatches:e.reduce((h,f)=>Math.max(h,f.length),0)};let s=0,o=0,l=-1;const a=e.length;let u,c=[];for(;r.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,l=-1;++l<a;)c[l]=u=e[l].shift(),o=Math.min(o,u?u.length:o);Number.isFinite(o)&&(c=o6(n,o,c,e,r),o>0&&(i[s++]=ke({type:new rn(n),length:o,nullCount:0,children:c.slice()})))}return[t=t.assign(n),i.map(h=>new vn(t,h))]}function o6(t,e,n,i,r){var s;const o=(e+63&-64)>>3;for(let l=-1,a=i.length;++l<a;){const u=n[l],c=u==null?void 0:u.length;if(c>=e)c===e?n[l]=u:(n[l]=u.slice(0,e),r.numBatches=Math.max(r.numBatches,i[l].unshift(u.slice(e,c-e))));else{const h=t[l];t[l]=h.clone({nullable:!0}),n[l]=(s=u==null?void 0:u._changeLengthAndBackfillNullBitmap(e))!==null&&s!==void 0?s:ke({type:h.type,length:e,nullCount:e,nullBitmap:new Uint8Array(o)})}}return n}var CT;class tn{constructor(...e){var n,i;if(e.length===0)return this.batches=[],this.schema=new ze([]),this._offsets=[0],this;let r,s;e[0]instanceof ze&&(r=e.shift()),e.at(-1)instanceof Uint32Array&&(s=e.pop());const o=a=>{if(a){if(a instanceof vn)return[a];if(a instanceof tn)return a.batches;if(a instanceof Ve){if(a.type instanceof rn)return[new vn(new ze(a.type.children),a)]}else{if(Array.isArray(a))return a.flatMap(u=>o(u));if(typeof a[Symbol.iterator]=="function")return[...a].flatMap(u=>o(u));if(typeof a=="object"){const u=Object.keys(a),c=u.map(d=>new Fe([a[d]])),h=r??new ze(u.map((d,p)=>new st(String(d),c[p].type,c[p].nullable))),[,f]=Om(h,c);return f.length===0?[new vn(a)]:f}}}return[]},l=e.flatMap(a=>o(a));if(r=(i=r??((n=l[0])===null||n===void 0?void 0:n.schema))!==null&&i!==void 0?i:new ze([]),!(r instanceof ze))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const a of l){if(!(a instanceof vn))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Ry(r,a.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=r,this.batches=l,this._offsets=s??pT(this.data)}get data(){return this.batches.map(({data:e})=>e)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((e,n)=>e+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=dT(this.data)),this._nullCount}isValid(e){return!1}get(e){return null}at(e){return this.get(r1(e,this.numRows))}set(e,n){}indexOf(e,n){return-1}[Symbol.iterator](){return this.batches.length>0?a1.visit(new Fe(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...e){const n=this.schema,i=this.data.concat(e.flatMap(({data:r})=>r));return new tn(n,i.map(r=>new vn(n,r)))}slice(e,n){const i=this.schema;[e,n]=hT({length:this.numRows},e,n);const r=mT(this.data,this._offsets,e,n);return new tn(i,r.map(s=>new vn(i,s)))}getChild(e){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===e))}getChildAt(e){if(e>-1&&e<this.schema.fields.length){const n=this.data.map(i=>i.children[e]);if(n.length===0){const{type:i}=this.schema.fields[e],r=ke({type:i,length:0,nullCount:0});n.push(r._changeLengthAndBackfillNullBitmap(this.numRows))}return new Fe(n)}return null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===e),n)}setChildAt(e,n){let i=this.schema,r=[...this.batches];if(e>-1&&e<this.numCols){n||(n=new Fe([ke({type:new xs,length:this.numRows})]));const s=i.fields.slice(),o=s[e].clone({type:n.type}),l=this.schema.fields.map((a,u)=>this.getChildAt(u));[s[e],l[e]]=[o,n],[i,r]=Om(i,l)}return new tn(i,r)}select(e){const n=this.schema.fields.reduce((i,r,s)=>i.set(r.name,s),new Map);return this.selectAt(e.map(i=>n.get(i)).filter(i=>i>-1))}selectAt(e){const n=this.schema.selectAt(e),i=this.batches.map(r=>r.selectAt(e));return new tn(n,i)}assign(e){const n=this.schema.fields,[i,r]=e.schema.fields.reduce((l,a,u)=>{const[c,h]=l,f=n.findIndex(d=>d.name===a.name);return~f?h[f]=u:c.push(u),l},[[],[]]),s=this.schema.assign(e.schema),o=[...n.map((l,a)=>[a,r[a]]).map(([l,a])=>a===void 0?this.getChildAt(l):e.getChildAt(a)),...i.map(l=>e.getChildAt(l))].filter(Boolean);return new tn(...Om(s,o))}}CT=Symbol.toStringTag;tn[CT]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=ad(l1),t.get=ad(Tn.getVisitFn(k.Struct)),t.set=gT(pi.getVisitFn(k.Struct)),t.indexOf=yT(ud.getVisitFn(k.Struct)),"Table"))(tn.prototype);var _T;let vn=class Fa{constructor(...e){switch(e.length){case 2:{if([this.schema]=e,!(this.schema instanceof ze))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=ke({nullCount:0,type:new rn(this.schema.fields),children:this.schema.fields.map(n=>ke({type:n.type,nullCount:0}))})]=e,!(this.data instanceof Ve))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=US(this.schema,this.data.children);break}case 1:{const[n]=e,{fields:i,children:r,length:s}=Object.keys(n).reduce((a,u,c)=>(a.children[c]=n[u],a.length=Math.max(a.length,n[u].length),a.fields[c]=st.new({name:u,type:n[u].type,nullable:!0}),a),{length:0,fields:new Array,children:new Array}),o=new ze(i),l=ke({type:new rn(i),length:s,children:r,nullCount:0});[this.schema,this.data]=US(o,l.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=ET(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(e){return this.data.getValid(e)}get(e){return Tn.visit(this.data,e)}at(e){return this.get(r1(e,this.numRows))}set(e,n){return pi.visit(this.data,e,n)}indexOf(e,n){return ud.visit(this.data,e,n)}[Symbol.iterator](){return a1.visit(new Fe([this.data]))}toArray(){return[...this]}concat(...e){return new tn(this.schema,[this,...e])}slice(e,n){const[i]=new Fe([this.data]).slice(e,n).data;return new Fa(this.schema,i)}getChild(e){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(i=>i.name===e))}getChildAt(e){return e>-1&&e<this.schema.fields.length?new Fe([this.data.children[e]]):null}setChild(e,n){var i;return this.setChildAt((i=this.schema.fields)===null||i===void 0?void 0:i.findIndex(r=>r.name===e),n)}setChildAt(e,n){let i=this.schema,r=this.data;if(e>-1&&e<this.numCols){n||(n=new Fe([ke({type:new xs,length:this.numRows})]));const s=i.fields.slice(),o=r.children.slice(),l=s[e].clone({type:n.type});[s[e],o[e]]=[l,n.data[0]],i=new ze(s,new Map(this.schema.metadata)),r=ke({type:new rn(s),children:o})}return new Fa(i,r)}select(e){const n=this.schema.select(e),i=new rn(n.fields),r=[];for(const s of e){const o=this.schema.fields.findIndex(l=>l.name===s);~o&&(r[o]=this.data.children[o])}return new Fa(n,ke({type:i,length:this.numRows,children:r}))}selectAt(e){const n=this.schema.selectAt(e),i=e.map(s=>this.data.children[s]).filter(Boolean),r=ke({type:new rn(n.fields),length:this.numRows,children:i});return new Fa(n,r)}};_T=Symbol.toStringTag;vn[_T]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(vn.prototype);function US(t,e,n=e.reduce((i,r)=>Math.max(i,r.length),0)){var i;const r=[...t.fields],s=[...e],o=(n+63&-64)>>3;for(const[l,a]of t.fields.entries()){const u=e[l];(!u||u.length!==n)&&(r[l]=a.clone({nullable:!0}),s[l]=(i=u==null?void 0:u._changeLengthAndBackfillNullBitmap(n))!==null&&i!==void 0?i:ke({type:a.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[t.assign(r),ke({type:new rn(r),length:n,children:s})]}function ET(t,e,n=new Map){var i,r;if(((i=t==null?void 0:t.length)!==null&&i!==void 0?i:0)>0&&(t==null?void 0:t.length)===(e==null?void 0:e.length))for(let s=-1,o=t.length;++s<o;){const{type:l}=t[s],a=e[s];for(const u of[a,...((r=a==null?void 0:a.dictionary)===null||r===void 0?void 0:r.data)||[]])ET(l.children,u==null?void 0:u.children,n);if(ee.isDictionary(l)){const{id:u}=l;if(!n.has(u))a!=null&&a.dictionary&&n.set(u,a.dictionary);else if(n.get(u)!==a.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class p1 extends vn{constructor(e){const n=e.fields.map(r=>ke({type:r.type})),i=ke({type:new rn(e.fields),nullCount:0,children:n});super(e,i)}}let Wr=class Fi{constructor(){this.bb=null,this.bb_pos=0}__init(e,n){return this.bb_pos=e,this.bb=n,this}static getRootAsMessage(e,n){return(n||new Fi).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsMessage(e,n){return e.setPosition(e.position()+Ue),(n||new Fi).__init(e.readInt32(e.position())+e.position(),e)}version(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt16(this.bb_pos+e):vt.V1}headerType(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb_pos+e):Be.NONE}header(e){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(e,this.bb_pos+n):null}bodyLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}customMetadata(e,n){const i=this.bb.__offset(this.bb_pos,12);return i?(n||new It).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+e*4),this.bb):null}customMetadataLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static startMessage(e){e.startObject(5)}static addVersion(e,n){e.addFieldInt16(0,n,vt.V1)}static addHeaderType(e,n){e.addFieldInt8(1,n,Be.NONE)}static addHeader(e,n){e.addFieldOffset(2,n,0)}static addBodyLength(e,n){e.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(e,n){e.addFieldOffset(4,n,0)}static createCustomMetadataVector(e,n){e.startVector(4,n.length,4);for(let i=n.length-1;i>=0;i--)e.addOffset(n[i]);return e.endVector()}static startCustomMetadataVector(e,n){e.startVector(4,n,4)}static endMessage(e){return e.endObject()}static finishMessageBuffer(e,n){e.finish(n)}static finishSizePrefixedMessageBuffer(e,n){e.finish(n,void 0,!0)}static createMessage(e,n,i,r,s,o){return Fi.startMessage(e),Fi.addVersion(e,n),Fi.addHeaderType(e,i),Fi.addHeader(e,r),Fi.addBodyLength(e,s),Fi.addCustomMetadata(e,o),Fi.endMessage(e)}};class l6 extends xe{visit(e,n){return e==null||n==null?void 0:super.visit(e,n)}visitNull(e,n){return DS.startNull(n),DS.endNull(n)}visitInt(e,n){return jn.startInt(n),jn.addBitWidth(n,e.bitWidth),jn.addIsSigned(n,e.isSigned),jn.endInt(n)}visitFloat(e,n){return qi.startFloatingPoint(n),qi.addPrecision(n,e.precision),qi.endFloatingPoint(n)}visitBinary(e,n){return ES.startBinary(n),ES.endBinary(n)}visitLargeBinary(e,n){return IS.startLargeBinary(n),IS.endLargeBinary(n)}visitBool(e,n){return AS.startBool(n),AS.endBool(n)}visitUtf8(e,n){return MS.startUtf8(n),MS.endUtf8(n)}visitLargeUtf8(e,n){return TS.startLargeUtf8(n),TS.endLargeUtf8(n)}visitDecimal(e,n){return No.startDecimal(n),No.addScale(n,e.scale),No.addPrecision(n,e.precision),No.addBitWidth(n,e.bitWidth),No.endDecimal(n)}visitDate(e,n){return Uh.startDate(n),Uh.addUnit(n,e.unit),Uh.endDate(n)}visitTime(e,n){return ti.startTime(n),ti.addUnit(n,e.unit),ti.addBitWidth(n,e.bitWidth),ti.endTime(n)}visitTimestamp(e,n){const i=e.timezone&&n.createString(e.timezone)||void 0;return ni.startTimestamp(n),ni.addUnit(n,e.unit),i!==void 0&&ni.addTimezone(n,i),ni.endTimestamp(n)}visitInterval(e,n){return Qi.startInterval(n),Qi.addUnit(n,e.unit),Qi.endInterval(n)}visitDuration(e,n){return jh.startDuration(n),jh.addUnit(n,e.unit),jh.endDuration(n)}visitList(e,n){return OS.startList(n),OS.endList(n)}visitStruct(e,n){return Xs.startStruct_(n),Xs.endStruct_(n)}visitUnion(e,n){yn.startTypeIdsVector(n,e.typeIds.length);const i=yn.createTypeIdsVector(n,e.typeIds);return yn.startUnion(n),yn.addMode(n,e.mode),yn.addTypeIds(n,i),yn.endUnion(n)}visitDictionary(e,n){const i=this.visit(e.indices,n);return Sr.startDictionaryEncoding(n),Sr.addId(n,BigInt(e.id)),Sr.addIsOrdered(n,e.isOrdered),i!==void 0&&Sr.addIndexType(n,i),Sr.endDictionaryEncoding(n)}visitFixedSizeBinary(e,n){return Vh.startFixedSizeBinary(n),Vh.addByteWidth(n,e.byteWidth),Vh.endFixedSizeBinary(n)}visitFixedSizeList(e,n){return $h.startFixedSizeList(n),$h.addListSize(n,e.listSize),$h.endFixedSizeList(n)}visitMap(e,n){return Hh.startMap(n),Hh.addKeysSorted(n,e.keysSorted),Hh.endMap(n)}}const Dm=new l6;function a6(t,e=new Map){return new ze(c6(t,e),Qh(t.metadata),e)}function AT(t){return new Qn(t.count,IT(t.columns),TT(t.columns))}function u6(t){return new or(AT(t.data),t.id,t.isDelta)}function c6(t,e){return(t.fields||[]).filter(Boolean).map(n=>st.fromJSON(n,e))}function jS(t,e){return(t.children||[]).filter(Boolean).map(n=>st.fromJSON(n,e))}function IT(t){return(t||[]).reduce((e,n)=>[...e,new _s(n.count,h6(n.VALIDITY)),...IT(n.children)],[])}function TT(t,e=[]){for(let n=-1,i=(t||[]).length;++n<i;){const r=t[n];r.VALIDITY&&e.push(new Ji(e.length,r.VALIDITY.length)),r.TYPE_ID&&e.push(new Ji(e.length,r.TYPE_ID.length)),r.OFFSET&&e.push(new Ji(e.length,r.OFFSET.length)),r.DATA&&e.push(new Ji(e.length,r.DATA.length)),e=TT(r.children,e)}return e}function h6(t){return(t||[]).reduce((e,n)=>e+ +(n===0),0)}function f6(t,e){let n,i,r,s,o,l;return!e||!(s=t.dictionary)?(o=$S(t,jS(t,e)),r=new st(t.name,o,t.nullable,Qh(t.metadata))):e.has(n=s.id)?(i=(i=s.indexType)?VS(i):new Mu,l=new Bl(e.get(n),i,n,s.isOrdered),r=new st(t.name,l,t.nullable,Qh(t.metadata))):(i=(i=s.indexType)?VS(i):new Mu,e.set(n,o=$S(t,jS(t,e))),l=new Bl(o,i,n,s.isOrdered),r=new st(t.name,l,t.nullable,Qh(t.metadata))),r||null}function Qh(t=[]){return new Map(t.map(({key:e,value:n})=>[e,n]))}function VS(t){return new fo(t.isSigned,t.bitWidth)}function $S(t,e){const n=t.type.name;switch(n){case"NONE":return new xs;case"null":return new xs;case"binary":return new Hf;case"largebinary":return new Wf;case"utf8":return new qf;case"largeutf8":return new Qf;case"bool":return new Kf;case"list":return new td((e||[])[0]);case"struct":return new rn(e||[]);case"struct_":return new rn(e||[])}switch(n){case"int":{const i=t.type;return new fo(i.isSigned,i.bitWidth)}case"floatingpoint":{const i=t.type;return new $f(Yt[i.precision])}case"decimal":{const i=t.type;return new Yf(i.scale,i.precision,i.bitWidth)}case"date":{const i=t.type;return new Gf(di[i.unit])}case"time":{const i=t.type;return new Xf(ce[i.unit],i.bitWidth)}case"timestamp":{const i=t.type;return new Jf(ce[i.unit],i.timezone)}case"interval":{const i=t.type;return new Zf(sr[i.unit])}case"duration":{const i=t.type;return new ed(ce[i.unit])}case"union":{const i=t.type,[r,...s]=(i.mode+"").toLowerCase(),o=r.toUpperCase()+s.join("");return new nd(Xt[o],i.typeIds||[],e||[])}case"fixedsizebinary":{const i=t.type;return new id(i.byteWidth)}case"fixedsizelist":{const i=t.type;return new rd(i.listSize,(e||[])[0])}case"map":{const i=t.type;return new sd((e||[])[0],i.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var d6=WA,p6=Ll;class sn{static fromJSON(e,n){const i=new sn(0,vt.V5,n);return i._createHeader=m6(e,n),i}static decode(e){e=new p6(Ae(e));const n=Wr.getRootAsMessage(e),i=n.bodyLength(),r=n.version(),s=n.headerType(),o=new sn(i,r,s);return o._createHeader=g6(n,s),o}static encode(e){const n=new d6;let i=-1;return e.isSchema()?i=ze.encode(n,e.header()):e.isRecordBatch()?i=Qn.encode(n,e.header()):e.isDictionaryBatch()&&(i=or.encode(n,e.header())),Wr.startMessage(n),Wr.addVersion(n,vt.V5),Wr.addHeader(n,i),Wr.addHeaderType(n,e.headerType),Wr.addBodyLength(n,BigInt(e.bodyLength)),Wr.finishMessageBuffer(n,Wr.endMessage(n)),n.asUint8Array()}static from(e,n=0){if(e instanceof ze)return new sn(0,vt.V5,Be.Schema,e);if(e instanceof Qn)return new sn(n,vt.V5,Be.RecordBatch,e);if(e instanceof or)return new sn(n,vt.V5,Be.DictionaryBatch,e);throw new Error(`Unrecognized Message header: ${e}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Be.Schema}isRecordBatch(){return this.headerType===Be.RecordBatch}isDictionaryBatch(){return this.headerType===Be.DictionaryBatch}constructor(e,n,i,r){this._version=n,this._headerType=i,this.body=new Uint8Array(0),r&&(this._createHeader=()=>r),this._bodyLength=Ye(e)}}class Qn{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(e,n,i){this._nodes=n,this._buffers=i,this._length=Ye(e)}}class or{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(e,n,i=!1){this._data=e,this._isDelta=i,this._id=Ye(n)}}class Ji{constructor(e,n){this.offset=Ye(e),this.length=Ye(n)}}class _s{constructor(e,n){this.length=Ye(e),this.nullCount=Ye(n)}}function m6(t,e){return()=>{switch(e){case Be.Schema:return ze.fromJSON(t);case Be.RecordBatch:return Qn.fromJSON(t);case Be.DictionaryBatch:return or.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${Be[e]}, type: ${e} }`)}}function g6(t,e){return()=>{switch(e){case Be.Schema:return ze.decode(t.header(new Vi),new Map,t.version());case Be.RecordBatch:return Qn.decode(t.header(new mr),t.version());case Be.DictionaryBatch:return or.decode(t.header(new Ro),t.version())}throw new Error(`Unrecognized Message type: { name: ${Be[e]}, type: ${e} }`)}}st.encode=A6;st.decode=_6;st.fromJSON=f6;ze.encode=E6;ze.decode=y6;ze.fromJSON=a6;Qn.encode=I6;Qn.decode=v6;Qn.fromJSON=AT;or.encode=T6;or.decode=w6;or.fromJSON=u6;_s.encode=O6;_s.decode=S6;Ji.encode=D6;Ji.decode=b6;function y6(t,e=new Map,n=vt.V5){const i=C6(t,e);return new ze(i,Kh(t),e,n)}function v6(t,e=vt.V5){if(t.compression()!==null)throw new Error("Record batch compression not implemented");return new Qn(t.length(),x6(t),k6(t,e))}function w6(t,e=vt.V5){return new or(Qn.decode(t.data(),e),t.id(),t.isDelta())}function b6(t){return new Ji(t.offset(),t.length())}function S6(t){return new _s(t.length(),t.nullCount())}function x6(t){const e=[];for(let n,i=-1,r=-1,s=t.nodesLength();++i<s;)(n=t.nodes(i))&&(e[++r]=_s.decode(n));return e}function k6(t,e){const n=[];for(let i,r=-1,s=-1,o=t.buffersLength();++r<o;)(i=t.buffers(r))&&(e<vt.V4&&(i.bb_pos+=8*(r+1)),n[++s]=Ji.decode(i));return n}function C6(t,e){const n=[];for(let i,r=-1,s=-1,o=t.fieldsLength();++r<o;)(i=t.fields(r))&&(n[++s]=st.decode(i,e));return n}function HS(t,e){const n=[];for(let i,r=-1,s=-1,o=t.childrenLength();++r<o;)(i=t.children(r))&&(n[++s]=st.decode(i,e));return n}function _6(t,e){let n,i,r,s,o,l;return!e||!(l=t.dictionary())?(r=qS(t,HS(t,e)),i=new st(t.name(),r,t.nullable(),Kh(t))):e.has(n=Ye(l.id()))?(s=(s=l.indexType())?WS(s):new Mu,o=new Bl(e.get(n),s,n,l.isOrdered()),i=new st(t.name(),o,t.nullable(),Kh(t))):(s=(s=l.indexType())?WS(s):new Mu,e.set(n,r=qS(t,HS(t,e))),o=new Bl(r,s,n,l.isOrdered()),i=new st(t.name(),o,t.nullable(),Kh(t))),i||null}function Kh(t){const e=new Map;if(t)for(let n,i,r=-1,s=Math.trunc(t.customMetadataLength());++r<s;)(n=t.customMetadata(r))&&(i=n.key())!=null&&e.set(i,n.value());return e}function WS(t){return new fo(t.isSigned(),t.bitWidth())}function qS(t,e){const n=t.typeType();switch(n){case Je.NONE:return new xs;case Je.Null:return new xs;case Je.Binary:return new Hf;case Je.LargeBinary:return new Wf;case Je.Utf8:return new qf;case Je.LargeUtf8:return new Qf;case Je.Bool:return new Kf;case Je.List:return new td((e||[])[0]);case Je.Struct_:return new rn(e||[])}switch(n){case Je.Int:{const i=t.type(new jn);return new fo(i.isSigned(),i.bitWidth())}case Je.FloatingPoint:{const i=t.type(new qi);return new $f(i.precision())}case Je.Decimal:{const i=t.type(new No);return new Yf(i.scale(),i.precision(),i.bitWidth())}case Je.Date:{const i=t.type(new Uh);return new Gf(i.unit())}case Je.Time:{const i=t.type(new ti);return new Xf(i.unit(),i.bitWidth())}case Je.Timestamp:{const i=t.type(new ni);return new Jf(i.unit(),i.timezone())}case Je.Interval:{const i=t.type(new Qi);return new Zf(i.unit())}case Je.Duration:{const i=t.type(new jh);return new ed(i.unit())}case Je.Union:{const i=t.type(new yn);return new nd(i.mode(),i.typeIdsArray()||[],e||[])}case Je.FixedSizeBinary:{const i=t.type(new Vh);return new id(i.byteWidth())}case Je.FixedSizeList:{const i=t.type(new $h);return new rd(i.listSize(),(e||[])[0])}case Je.Map:{const i=t.type(new Hh);return new sd((e||[])[0],i.keysSorted())}}throw new Error(`Unrecognized type: "${Je[n]}" (${n})`)}function E6(t,e){const n=e.fields.map(s=>st.encode(t,s));Vi.startFieldsVector(t,n.length);const i=Vi.createFieldsVector(t,n),r=e.metadata&&e.metadata.size>0?Vi.createCustomMetadataVector(t,[...e.metadata].map(([s,o])=>{const l=t.createString(`${s}`),a=t.createString(`${o}`);return It.startKeyValue(t),It.addKey(t,l),It.addValue(t,a),It.endKeyValue(t)})):-1;return Vi.startSchema(t),Vi.addFields(t,i),Vi.addEndianness(t,M6?Nl.Little:Nl.Big),r!==-1&&Vi.addCustomMetadata(t,r),Vi.endSchema(t)}function A6(t,e){let n=-1,i=-1,r=-1;const s=e.type;let o=e.typeId;ee.isDictionary(s)?(o=s.dictionary.typeId,r=Dm.visit(s,t),i=Dm.visit(s.dictionary,t)):i=Dm.visit(s,t);const l=(s.children||[]).map(c=>st.encode(t,c)),a=Gn.createChildrenVector(t,l),u=e.metadata&&e.metadata.size>0?Gn.createCustomMetadataVector(t,[...e.metadata].map(([c,h])=>{const f=t.createString(`${c}`),d=t.createString(`${h}`);return It.startKeyValue(t),It.addKey(t,f),It.addValue(t,d),It.endKeyValue(t)})):-1;return e.name&&(n=t.createString(e.name)),Gn.startField(t),Gn.addType(t,i),Gn.addTypeType(t,o),Gn.addChildren(t,a),Gn.addNullable(t,!!e.nullable),n!==-1&&Gn.addName(t,n),r!==-1&&Gn.addDictionary(t,r),u!==-1&&Gn.addCustomMetadata(t,u),Gn.endField(t)}function I6(t,e){const n=e.nodes||[],i=e.buffers||[];mr.startNodesVector(t,n.length);for(const o of n.slice().reverse())_s.encode(t,o);const r=t.endVector();mr.startBuffersVector(t,i.length);for(const o of i.slice().reverse())Ji.encode(t,o);const s=t.endVector();return mr.startRecordBatch(t),mr.addLength(t,BigInt(e.length)),mr.addNodes(t,r),mr.addBuffers(t,s),mr.endRecordBatch(t)}function T6(t,e){const n=Qn.encode(t,e.data);return Ro.startDictionaryBatch(t),Ro.addId(t,BigInt(e.id)),Ro.addIsDelta(t,e.isDelta),Ro.addData(t,n),Ro.endDictionaryBatch(t)}function O6(t,e){return KA.createFieldNode(t,BigInt(e.length),BigInt(e.nullCount))}function D6(t,e){return QA.createBuffer(t,BigInt(e.offset),BigInt(e.length))}const M6=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),new Int16Array(t)[0]===256})(),m1=t=>`Expected ${Be[t]} Message in stream, but was null or length 0.`,g1=t=>`Header pointer of flatbuffer-encoded ${Be[t]} Message is null or length 0.`,OT=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,DT=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class MT{constructor(e){this.source=e instanceof hd?e:new hd(e)}[Symbol.iterator](){return this}next(){let e;return(e=this.readMetadataLength()).done||e.value===-1&&(e=this.readMetadataLength()).done||(e=this.readMetadata(e.value)).done?ut:e}throw(e){return this.source.throw(e)}return(e){return this.source.return(e)}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(m1(e));return n.value}readMessageBody(e){if(e<=0)return new Uint8Array(0);const n=Ae(this.source.read(e));if(n.byteLength<e)throw new Error(DT(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()}readSchema(e=!1){const n=Be.Schema,i=this.readMessage(n),r=i==null?void 0:i.header();if(e&&!r)throw new Error(g1(n));return r}readMetadataLength(){const e=this.source.read(bp),n=e&&new Ll(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}}readMetadata(e){const n=this.source.read(e);if(!n)return ut;if(n.byteLength<e)throw new Error(OT(e,n.byteLength));return{done:!1,value:sn.decode(n)}}}class R6{constructor(e,n){this.source=e instanceof Pl?e:zA(e)?new fd(e,n):new Pl(e)}[Symbol.asyncIterator](){return this}next(){return ge(this,void 0,void 0,function*(){let e;return(e=yield this.readMetadataLength()).done||e.value===-1&&(e=yield this.readMetadataLength()).done||(e=yield this.readMetadata(e.value)).done?ut:e})}throw(e){return ge(this,void 0,void 0,function*(){return yield this.source.throw(e)})}return(e){return ge(this,void 0,void 0,function*(){return yield this.source.return(e)})}readMessage(e){return ge(this,void 0,void 0,function*(){let n;if((n=yield this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(m1(e));return n.value})}readMessageBody(e){return ge(this,void 0,void 0,function*(){if(e<=0)return new Uint8Array(0);const n=Ae(yield this.source.read(e));if(n.byteLength<e)throw new Error(DT(e,n.byteLength));return n.byteOffset%8===0&&n.byteOffset+n.byteLength<=n.buffer.byteLength?n:n.slice()})}readSchema(){return ge(this,arguments,void 0,function*(e=!1){const n=Be.Schema,i=yield this.readMessage(n),r=i==null?void 0:i.header();if(e&&!r)throw new Error(g1(n));return r})}readMetadataLength(){return ge(this,void 0,void 0,function*(){const e=yield this.source.read(bp),n=e&&new Ll(e),i=(n==null?void 0:n.readInt32(0))||0;return{done:i===0,value:i}})}readMetadata(e){return ge(this,void 0,void 0,function*(){const n=yield this.source.read(e);if(!n)return ut;if(n.byteLength<e)throw new Error(OT(e,n.byteLength));return{done:!1,value:sn.decode(n)}})}}class L6 extends MT{constructor(e){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=e instanceof FS?e:new FS(e)}next(){const{_json:e}=this;if(!this._schema)return this._schema=!0,{done:!1,value:sn.fromJSON(e.schema,Be.Schema)};if(this._dictionaryIndex<e.dictionaries.length){const n=e.dictionaries[this._dictionaryIndex++];return this._body=n.data.columns,{done:!1,value:sn.fromJSON(n,Be.DictionaryBatch)}}if(this._batchIndex<e.batches.length){const n=e.batches[this._batchIndex++];return this._body=n.columns,{done:!1,value:sn.fromJSON(n,Be.RecordBatch)}}return this._body=[],ut}readMessageBody(e){return n(this._body);function n(i){return(i||[]).reduce((r,s)=>[...r,...s.VALIDITY&&[s.VALIDITY]||[],...s.TYPE_ID&&[s.TYPE_ID]||[],...s.OFFSET&&[s.OFFSET]||[],...s.DATA&&[s.DATA]||[],...n(s.children)],[])}}readMessage(e){let n;if((n=this.next()).done)return null;if(e!=null&&n.value.headerType!==e)throw new Error(m1(e));return n.value}readSchema(){const e=Be.Schema,n=this.readMessage(e),i=n==null?void 0:n.header();if(!n||!i)throw new Error(g1(e));return i}}const bp=4,Ly="ARROW1",Lu=new Uint8Array(Ly.length);for(let t=0;t<Ly.length;t+=1)Lu[t]=Ly.codePointAt(t);function y1(t,e=0){for(let n=-1,i=Lu.length;++n<i;)if(Lu[n]!==t[e+n])return!1;return!0}const hc=Lu.length,RT=hc+bp,N6=hc*2+bp;class ai extends u1{constructor(e){super(),this._impl=e}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(e){return this._impl.throw(e)}return(e){return this._impl.return(e)}cancel(){return this._impl.cancel()}reset(e){return this._impl.reset(e),this._DOMStream=void 0,this._nodeStream=void 0,this}open(e){const n=this._impl.open(e);return ho(n)?n.then(()=>this):this}readRecordBatch(e){return this._impl.isFile()?this._impl.readRecordBatch(e):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return Xn.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return Xn.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}static from(e){return e instanceof ai?e:Cy(e)?z6(e):zA(e)?V6(e):ho(e)?ge(this,void 0,void 0,function*(){return yield ai.from(yield e)}):UA(e)||Jv(e)||jA(e)||Zl(e)?j6(new Pl(e)):U6(new hd(e))}static readAll(e){return e instanceof ai?e.isSync()?QS(e):KS(e):Cy(e)||ArrayBuffer.isView(e)||lc(e)||FA(e)?QS(e):KS(e)}}class dd extends ai{constructor(e){super(e),this._impl=e}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return Xi(this,arguments,function*(){yield Se(yield*zh(no(this[Symbol.iterator]())))})}}class pd extends ai{constructor(e){super(e),this._impl=e}readAll(){return ge(this,void 0,void 0,function*(){var e,n,i,r;const s=new Array;try{for(var o=!0,l=no(this),a;a=yield l.next(),e=a.done,!e;o=!0){r=a.value,o=!1;const u=r;s.push(u)}}catch(u){n={error:u}}finally{try{!o&&!e&&(i=l.return)&&(yield i.call(l))}finally{if(n)throw n.error}}return s})}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class LT extends dd{constructor(e){super(e),this._impl=e}}class B6 extends pd{constructor(e){super(e),this._impl=e}}class NT{get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}constructor(e=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=e}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(e){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=e,this.dictionaries=new Map,this}_loadRecordBatch(e,n){const i=this._loadVectors(e,n,this.schema.fields),r=ke({type:new rn(this.schema.fields),length:e.length,children:i});return new vn(this.schema,r)}_loadDictionaryBatch(e,n){const{id:i,isDelta:r}=e,{dictionaries:s,schema:o}=this,l=s.get(i),a=o.dictionaries.get(i),u=this._loadVectors(e.data,n,[a]);return(l&&r?l.concat(new Fe(u)):new Fe(u)).memoize()}_loadVectors(e,n,i){return new kT(n,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(i)}}class md extends NT{constructor(e,n){super(n),this._reader=Cy(e)?new L6(this._handle=e):new MT(this._handle=e)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(e){return this.closed||(this.autoDestroy=PT(this,e),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(e):ut}return(e){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(e):ut}next(){if(this.closed)return ut;let e;const{_reader:n}=this;for(;e=this._readNextMessageAndValidate();)if(e.isSchema())this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),r=n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),r=n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new p1(this.schema)}):this.return()}_readNextMessageAndValidate(e){return this._reader.readMessage(e)}}class gd extends NT{constructor(e,n){super(n),this._reader=new R6(this._handle=e)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ge(this,void 0,void 0,function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)})}open(e){return ge(this,void 0,void 0,function*(){return this.closed||(this.autoDestroy=PT(this,e),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this})}throw(e){return ge(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(e):ut})}return(e){return ge(this,void 0,void 0,function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(e):ut})}next(){return ge(this,void 0,void 0,function*(){if(this.closed)return ut;let e;const{_reader:n}=this;for(;e=yield this._readNextMessageAndValidate();)if(e.isSchema())yield this.reset(e.header());else if(e.isRecordBatch()){this._recordBatchIndex++;const i=e.header(),r=yield n.readMessageBody(e.bodyLength);return{done:!1,value:this._loadRecordBatch(i,r)}}else if(e.isDictionaryBatch()){this._dictionaryIndex++;const i=e.header(),r=yield n.readMessageBody(e.bodyLength),s=this._loadDictionaryBatch(i,r);this.dictionaries.set(i.id,s)}return this.schema&&this._recordBatchIndex===0?(this._recordBatchIndex++,{done:!1,value:new p1(this.schema)}):yield this.return()})}_readNextMessageAndValidate(e){return ge(this,void 0,void 0,function*(){return yield this._reader.readMessage(e)})}}class BT extends md{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,n){super(e instanceof zS?e:new zS(e),n)}isSync(){return!0}isFile(){return!0}open(e){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const n of this._footer.dictionaryBatches())n&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(e)}readRecordBatch(e){var n;if(this.closed)return null;this._footer||this.open();const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(Be.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),o=this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,o)}}return null}_readDictionaryBatch(e){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&this._handle.seek(i.offset)){const r=this._reader.readMessage(Be.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),o=this._reader.readMessageBody(r.bodyLength),l=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,l)}}}_readFooter(){const{_handle:e}=this,n=e.size-RT,i=e.readInt32(n),r=e.readAt(n-i,i);return Ru.decode(r)}_readNextMessageAndValidate(e){var n;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(this._recordBatchIndex);if(i&&this._handle.seek(i.offset))return this._reader.readMessage(e)}return null}}class P6 extends gd{get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}constructor(e,...n){const i=typeof n[0]!="number"?n.shift():void 0,r=n[0]instanceof Map?n.shift():void 0;super(e instanceof fd?e:new fd(e,i),r)}isFile(){return!0}isAsync(){return!0}open(e){const n=Object.create(null,{open:{get:()=>super.open}});return ge(this,void 0,void 0,function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const i of this._footer.dictionaryBatches())i&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield n.open.call(this,e)})}readRecordBatch(e){return ge(this,void 0,void 0,function*(){var n;if(this.closed)return null;this._footer||(yield this.open());const i=(n=this._footer)===null||n===void 0?void 0:n.getRecordBatch(e);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(Be.RecordBatch);if(r!=null&&r.isRecordBatch()){const s=r.header(),o=yield this._reader.readMessageBody(r.bodyLength);return this._loadRecordBatch(s,o)}}return null})}_readDictionaryBatch(e){return ge(this,void 0,void 0,function*(){var n;const i=(n=this._footer)===null||n===void 0?void 0:n.getDictionaryBatch(e);if(i&&(yield this._handle.seek(i.offset))){const r=yield this._reader.readMessage(Be.DictionaryBatch);if(r!=null&&r.isDictionaryBatch()){const s=r.header(),o=yield this._reader.readMessageBody(r.bodyLength),l=this._loadDictionaryBatch(s,o);this.dictionaries.set(s.id,l)}}})}_readFooter(){return ge(this,void 0,void 0,function*(){const{_handle:e}=this;e._pending&&(yield e._pending);const n=e.size-RT,i=yield e.readInt32(n),r=yield e.readAt(n-i,i);return Ru.decode(r)})}_readNextMessageAndValidate(e){return ge(this,void 0,void 0,function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=this._footer.getRecordBatch(this._recordBatchIndex);if(n&&(yield this._handle.seek(n.offset)))return yield this._reader.readMessage(e)}return null})}}class F6 extends md{constructor(e,n){super(e,n)}_loadVectors(e,n,i){return new X8(n,e.nodes,e.buffers,this.dictionaries,this.schema.metadataVersion).visitMany(i)}}function PT(t,e){return e&&typeof e.autoDestroy=="boolean"?e.autoDestroy:t.autoDestroy}function*QS(t){const e=ai.from(t);try{if(!e.open({autoDestroy:!1}).closed)do yield e;while(!e.reset().open().closed)}finally{e.cancel()}}function KS(t){return Xi(this,arguments,function*(){const n=yield Se(ai.from(t));try{if(!(yield Se(n.open({autoDestroy:!1}))).closed)do yield yield Se(n);while(!(yield Se(n.reset().open())).closed)}finally{yield Se(n.cancel())}})}function z6(t){return new dd(new F6(t))}function U6(t){const e=t.peek(hc+7&-8);return e&&e.byteLength>=4?y1(e)?new LT(new BT(t.read())):new dd(new md(t)):new dd(new md(function*(){}()))}function j6(t){return ge(this,void 0,void 0,function*(){const e=yield t.peek(hc+7&-8);return e&&e.byteLength>=4?y1(e)?new LT(new BT(yield t.read())):new pd(new gd(t)):new pd(new gd(function(){return Xi(this,arguments,function*(){})}()))})}function V6(t){return ge(this,void 0,void 0,function*(){const{size:e}=yield t.stat(),n=new fd(t,e);return e>=N6&&y1(yield n.readAt(0,hc+7&-8))?new B6(new P6(n)):new pd(new gd(n))})}class ft extends xe{static assemble(...e){const n=r=>r.flatMap(s=>Array.isArray(s)?n(s):s instanceof vn?s.data.children:s.data),i=new ft;return i.visitMany(n(e)),i}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(e){if(e instanceof Fe)return this.visitMany(e.data),this;const{type:n}=e;if(!ee.isDictionary(n)){const{length:i}=e;if(i>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(ee.isUnion(n))this.nodes.push(new _s(i,0));else{const{nullCount:r}=e;ee.isNull(n)||Ei.call(this,r<=0?new Uint8Array(0):od(e.offset,i,e.nullBitmap)),this.nodes.push(new _s(i,r))}}return super.visit(e)}visitNull(e){return this}visitDictionary(e){return this.visit(e.clone(e.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Ei(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new Ji(this._byteLength,e)),this._byteLength+=e,this}function $6(t){var e;const{type:n,length:i,typeIds:r,valueOffsets:s}=t;if(Ei.call(this,r),n.mode===Xt.Sparse)return Ny.call(this,t);if(n.mode===Xt.Dense){if(t.offset<=0)return Ei.call(this,s),Ny.call(this,t);{const o=new Int32Array(i),l=Object.create(null),a=Object.create(null);for(let u,c,h=-1;++h<i;)(u=r[h])!==void 0&&((c=l[u])===void 0&&(c=l[u]=s[h]),o[h]=s[h]-c,a[u]=((e=a[u])!==null&&e!==void 0?e:0)+1);Ei.call(this,o),this.visitMany(t.children.map((u,c)=>{const h=n.typeIds[c],f=l[h],d=a[h];return u.slice(f,Math.min(i,d))}))}}return this}function H6(t){let e;return t.nullCount>=t.length?Ei.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Ei.call(this,od(t.offset,t.length,e)):Ei.call(this,ld(t.values))}function Fr(t){return Ei.call(this,t.values.subarray(0,t.length*t.stride))}function Sp(t){const{length:e,values:n,valueOffsets:i}=t,r=Ye(i[0]),s=Ye(i[e]),o=Math.min(s-r,n.byteLength-r);return Ei.call(this,$A(-r,e+1,i)),Ei.call(this,n.subarray(r,r+o)),this}function v1(t){const{length:e,valueOffsets:n}=t;if(n){const{[0]:i,[e]:r}=n;return Ei.call(this,$A(-i,e+1,n)),this.visit(t.children[0].slice(i,r-i))}return this.visit(t.children[0])}function Ny(t){return this.visitMany(t.type.children.map((e,n)=>t.children[n]).filter(Boolean))[0]}ft.prototype.visitBool=H6;ft.prototype.visitInt=Fr;ft.prototype.visitFloat=Fr;ft.prototype.visitUtf8=Sp;ft.prototype.visitLargeUtf8=Sp;ft.prototype.visitBinary=Sp;ft.prototype.visitLargeBinary=Sp;ft.prototype.visitFixedSizeBinary=Fr;ft.prototype.visitDate=Fr;ft.prototype.visitTimestamp=Fr;ft.prototype.visitTime=Fr;ft.prototype.visitDecimal=Fr;ft.prototype.visitList=v1;ft.prototype.visitStruct=Ny;ft.prototype.visitUnion=$6;ft.prototype.visitInterval=Fr;ft.prototype.visitDuration=Fr;ft.prototype.visitFixedSizeList=v1;ft.prototype.visitMap=v1;class FT extends u1{static throughNode(e){throw new Error('"throughNode" not available in this environment')}static throughDOM(e,n){throw new Error('"throughDOM" not available in this environment')}constructor(e){super(),this._position=0,this._started=!1,this._sink=new qh,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,In(e)||(e={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof e.autoDestroy=="boolean"?e.autoDestroy:!0,this._writeLegacyIpcFormat=typeof e.writeLegacyIpcFormat=="boolean"?e.writeLegacyIpcFormat:!1}toString(e=!1){return this._sink.toString(e)}toUint8Array(e=!1){return this._sink.toUint8Array(e)}writeAll(e){return ho(e)?e.then(n=>this.writeAll(n)):Zl(e)?x1(this,e):S1(this,e)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(e){return this._sink.toDOMStream(e)}toNodeStream(e){return this._sink.toNodeStream(e)}close(){return this.reset()._sink.close()}abort(e){return this.reset()._sink.abort(e)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(e=this._sink,n=null){return e===this._sink||e instanceof qh?this._sink=e:(this._sink=new qh,e&&SU(e)?this.toDOMStream({type:"bytes"}).pipeTo(e):e&&xU(e)&&this.toNodeStream({objectMode:!1}).pipe(e)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._seenDictionaries=new Map,this._dictionaryDeltaOffsets=new Map,(!n||!Ry(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(e){let n=null;if(this._sink){if(e==null)return this.finish()&&void 0;if(e instanceof tn&&!(n=e.schema))return this.finish()&&void 0;if(e instanceof vn&&!(n=e.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Ry(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}e instanceof vn?e instanceof p1||this._writeRecordBatch(e):e instanceof tn?this.writeAll(e.batches):lc(e)&&this.writeAll(e)}_writeMessage(e,n=8){const i=n-1,r=sn.encode(e),s=r.byteLength,o=this._writeLegacyIpcFormat?4:8,l=s+o+i&~i,a=l-s-o;return e.headerType===Be.RecordBatch?this._recordBatchBlocks.push(new ks(l,e.bodyLength,this._position)):e.headerType===Be.DictionaryBatch&&this._dictionaryBlocks.push(new ks(l,e.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(l-o)),s>0&&this._write(r),this._writePadding(a)}_write(e){if(this._started){const n=Ae(e);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(e){return this._writeMessage(sn.from(e))}_writeFooter(e){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(Lu)}_writePadding(e){return e>0?this._write(new Uint8Array(e)):this}_writeRecordBatch(e){const{byteLength:n,nodes:i,bufferRegions:r,buffers:s}=ft.assemble(e),o=new Qn(e.numRows,i,r),l=sn.from(o,n);return this._writeDictionaries(e)._writeMessage(l)._writeBodyBuffers(s)}_writeDictionaryBatch(e,n,i=!1){const{byteLength:r,nodes:s,bufferRegions:o,buffers:l}=ft.assemble(new Fe([e])),a=new Qn(e.length,s,o),u=new or(a,n,i),c=sn.from(u,r);return this._writeMessage(c)._writeBodyBuffers(l)}_writeBodyBuffers(e){let n,i,r;for(let s=-1,o=e.length;++s<o;)(n=e[s])&&(i=n.byteLength)>0&&(this._write(n),(r=(i+7&-8)-i)>0&&this._writePadding(r));return this}_writeDictionaries(e){var n,i;for(const[r,s]of e.dictionaries){const o=(n=s==null?void 0:s.data)!==null&&n!==void 0?n:[],l=this._seenDictionaries.get(r),a=(i=this._dictionaryDeltaOffsets.get(r))!==null&&i!==void 0?i:0;if(!l||l.data[0]!==o[0])for(const[u,c]of o.entries())this._writeDictionaryBatch(c,r,u>0);else if(a<o.length)for(const u of o.slice(a))this._writeDictionaryBatch(u,r,!0);this._seenDictionaries.set(r,s),this._dictionaryDeltaOffsets.set(r,o.length)}return this}}class w1 extends FT{static writeAll(e,n){const i=new w1(n);return ho(e)?e.then(r=>i.writeAll(r)):Zl(e)?x1(i,e):S1(i,e)}}class b1 extends FT{static writeAll(e){const n=new b1;return ho(e)?e.then(i=>n.writeAll(i)):Zl(e)?x1(n,e):S1(n,e)}constructor(){super(),this._autoDestroy=!0}_writeSchema(e){return this._writeMagic()._writePadding(2)}_writeDictionaryBatch(e,n,i=!1){if(!i&&this._seenDictionaries.has(n))throw new Error("The Arrow File format does not support replacement dictionaries. ");return super._writeDictionaryBatch(e,n,i)}_writeFooter(e){const n=Ru.encode(new Ru(e,vt.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(e)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function S1(t,e){let n=e;e instanceof tn&&(n=e.batches,t.reset(void 0,e.schema));for(const i of n)t.write(i);return t.finish()}function x1(t,e){return ge(this,void 0,void 0,function*(){var n,i,r,s,o,l,a;try{for(n=!0,i=no(e);r=yield i.next(),s=r.done,!s;n=!0){a=r.value,n=!1;const u=a;t.write(u)}}catch(u){o={error:u}}finally{try{!n&&!s&&(l=i.return)&&(yield l.call(i))}finally{if(o)throw o.error}}return t.finish()})}function W6(t,e="stream"){return(e==="stream"?w1:b1).writeAll(t).toUint8Array(!0)}var q6=Object.create,zT=Object.defineProperty,Q6=Object.getOwnPropertyDescriptor,K6=Object.getOwnPropertyNames,Y6=Object.getPrototypeOf,G6=Object.prototype.hasOwnProperty,X6=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),J6=(t,e,n,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of K6(e))!G6.call(t,r)&&r!==n&&zT(t,r,{get:()=>e[r],enumerable:!(i=Q6(e,r))||i.enumerable});return t},Z6=(t,e,n)=>(n=t!=null?q6(Y6(t)):{},J6(!t||!t.__esModule?zT(n,"default",{value:t,enumerable:!0}):n,t)),ej=X6((t,e)=>{e.exports=Worker}),tj=(t=>(t[t.UNDEFINED=0]="UNDEFINED",t[t.AUTOMATIC=1]="AUTOMATIC",t[t.READ_ONLY=2]="READ_ONLY",t[t.READ_WRITE=3]="READ_WRITE",t))(tj||{}),nj=(t=>(t[t.IDENTIFIER=0]="IDENTIFIER",t[t.NUMERIC_CONSTANT=1]="NUMERIC_CONSTANT",t[t.STRING_CONSTANT=2]="STRING_CONSTANT",t[t.OPERATOR=3]="OPERATOR",t[t.KEYWORD=4]="KEYWORD",t[t.COMMENT=5]="COMMENT",t))(nj||{}),ij=(t=>(t[t.NONE=0]="NONE",t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARNING=3]="WARNING",t[t.ERROR=4]="ERROR",t))(ij||{}),rj=(t=>(t[t.NONE=0]="NONE",t[t.CONNECT=1]="CONNECT",t[t.DISCONNECT=2]="DISCONNECT",t[t.OPEN=3]="OPEN",t[t.QUERY=4]="QUERY",t[t.INSTANTIATE=5]="INSTANTIATE",t))(rj||{}),sj=(t=>(t[t.NONE=0]="NONE",t[t.OK=1]="OK",t[t.ERROR=2]="ERROR",t[t.START=3]="START",t[t.RUN=4]="RUN",t[t.CAPTURE=5]="CAPTURE",t))(sj||{}),oj=(t=>(t[t.NONE=0]="NONE",t[t.WEB_WORKER=1]="WEB_WORKER",t[t.NODE_WORKER=2]="NODE_WORKER",t[t.BINDINGS=3]="BINDINGS",t[t.ASYNC_DUCKDB=4]="ASYNC_DUCKDB",t))(oj||{}),lj=class{constructor(t=2){this.level=t}log(t){t.level>=this.level&&console.log(t)}},aj=(t=>(t[t.SUCCESS=0]="SUCCESS",t))(aj||{}),uj=class{constructor(t,e){this._bindings=t,this._conn=e}get bindings(){return this._bindings}async close(){return this._bindings.disconnect(this._conn)}useUnsafe(t){return t(this._bindings,this._conn)}async query(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let e=await this._bindings.runQuery(this._conn,t),n=ai.from(e);return console.assert(n.isSync(),"Reader is not sync"),console.assert(n.isFile(),"Reader is not file"),new tn(n)}async send(t){this._bindings.logger.log({timestamp:new Date,level:2,origin:4,topic:4,event:4,value:t});let e=await this._bindings.startPendingQuery(this._conn,t);for(;e==null;)e=await this._bindings.pollPendingQuery(this._conn);let n=new UT(this._bindings,this._conn,e),i=await ai.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}async cancelSent(){return await this._bindings.cancelPendingQuery(this._conn)}async getTableNames(t){return await this._bindings.getTableNames(this._conn,t)}async prepare(t){let e=await this._bindings.createPrepared(this._conn,t);return new cj(this._bindings,this._conn,e)}async insertArrowTable(t,e){let n=W6(t,"stream");await this.insertArrowFromIPCStream(n,e)}async insertArrowFromIPCStream(t,e){await this._bindings.insertArrowFromIPCStream(this._conn,t,e)}async insertCSVFromPath(t,e){await this._bindings.insertCSVFromPath(this._conn,t,e)}async insertJSONFromPath(t,e){await this._bindings.insertJSONFromPath(this._conn,t,e)}},UT=class{constructor(t,e,n){this.db=t,this.conn=e,this.header=n,this._first=!0,this._depleted=!1,this._inFlight=null}async next(){if(this._first)return this._first=!1,{done:!1,value:this.header};if(this._depleted)return{done:!0,value:null};let t;return this._inFlight!=null?(t=await this._inFlight,this._inFlight=null):t=await this.db.fetchQueryResults(this.conn),this._depleted=t.length==0,this._depleted||(this._inFlight=this.db.fetchQueryResults(this.conn)),{done:this._depleted,value:t}}[Symbol.asyncIterator](){return this}},cj=class{constructor(t,e,n){this.bindings=t,this.connectionId=e,this.statementId=n}async close(){await this.bindings.closePrepared(this.connectionId,this.statementId)}async query(...t){let e=await this.bindings.runPrepared(this.connectionId,this.statementId,t),n=ai.from(e);return console.assert(n.isSync()),console.assert(n.isFile()),new tn(n)}async send(...t){let e=await this.bindings.sendPrepared(this.connectionId,this.statementId,t),n=new UT(this.bindings,this.connectionId,e),i=await ai.from(n);return console.assert(i.isAsync()),console.assert(i.isStream()),i}},hj=(t=>(t.CANCEL_PENDING_QUERY="CANCEL_PENDING_QUERY",t.CLOSE_PREPARED="CLOSE_PREPARED",t.COLLECT_FILE_STATISTICS="COLLECT_FILE_STATISTICS",t.CONNECT="CONNECT",t.COPY_FILE_TO_BUFFER="COPY_FILE_TO_BUFFER",t.COPY_FILE_TO_PATH="COPY_FILE_TO_PATH",t.CREATE_PREPARED="CREATE_PREPARED",t.DISCONNECT="DISCONNECT",t.DROP_FILE="DROP_FILE",t.DROP_FILES="DROP_FILES",t.EXPORT_FILE_STATISTICS="EXPORT_FILE_STATISTICS",t.FETCH_QUERY_RESULTS="FETCH_QUERY_RESULTS",t.FLUSH_FILES="FLUSH_FILES",t.GET_FEATURE_FLAGS="GET_FEATURE_FLAGS",t.GET_TABLE_NAMES="GET_TABLE_NAMES",t.GET_VERSION="GET_VERSION",t.GLOB_FILE_INFOS="GLOB_FILE_INFOS",t.INSERT_ARROW_FROM_IPC_STREAM="INSERT_ARROW_FROM_IPC_STREAM",t.INSERT_CSV_FROM_PATH="IMPORT_CSV_FROM_PATH",t.INSERT_JSON_FROM_PATH="IMPORT_JSON_FROM_PATH",t.INSTANTIATE="INSTANTIATE",t.OPEN="OPEN",t.PING="PING",t.POLL_PENDING_QUERY="POLL_PENDING_QUERY",t.REGISTER_FILE_BUFFER="REGISTER_FILE_BUFFER",t.REGISTER_FILE_HANDLE="REGISTER_FILE_HANDLE",t.REGISTER_FILE_URL="REGISTER_FILE_URL",t.RESET="RESET",t.RUN_PREPARED="RUN_PREPARED",t.RUN_QUERY="RUN_QUERY",t.SEND_PREPARED="SEND_PREPARED",t.START_PENDING_QUERY="START_PENDING_QUERY",t.TOKENIZE="TOKENIZE",t))(hj||{}),fj=(t=>(t.CONNECTION_INFO="CONNECTION_INFO",t.ERROR="ERROR",t.FEATURE_FLAGS="FEATURE_FLAGS",t.FILE_BUFFER="FILE_BUFFER",t.FILE_INFOS="FILE_INFOS",t.FILE_SIZE="FILE_SIZE",t.FILE_STATISTICS="FILE_STATISTICS",t.INSTANTIATE_PROGRESS="INSTANTIATE_PROGRESS",t.LOG="LOG",t.OK="OK",t.PREPARED_STATEMENT_ID="PREPARED_STATEMENT_ID",t.QUERY_PLAN="QUERY_PLAN",t.QUERY_RESULT="QUERY_RESULT",t.QUERY_RESULT_CHUNK="QUERY_RESULT_CHUNK",t.QUERY_RESULT_HEADER="QUERY_RESULT_HEADER",t.QUERY_RESULT_HEADER_OR_NULL="QUERY_RESULT_HEADER_OR_NULL",t.REGISTERED_FILE="REGISTERED_FILE",t.SCRIPT_TOKENS="SCRIPT_TOKENS",t.SUCCESS="SUCCESS",t.TABLE_NAMES="TABLE_NAMES",t.VERSION_STRING="VERSION_STRING",t))(fj||{}),De=class{constructor(t,e){this.promiseResolver=()=>{},this.promiseRejecter=()=>{},this.type=t,this.data=e,this.promise=new Promise((n,i)=>{this.promiseResolver=n,this.promiseRejecter=i})}};function Yh(t){switch(t.typeId){case k.Binary:return{sqlType:"binary"};case k.Bool:return{sqlType:"bool"};case k.Date:return{sqlType:"date"};case k.DateDay:return{sqlType:"date32[d]"};case k.DateMillisecond:return{sqlType:"date64[ms]"};case k.Decimal:{let e=t;return{sqlType:"decimal",precision:e.precision,scale:e.scale}}case k.Float:return{sqlType:"float"};case k.Float16:return{sqlType:"float16"};case k.Float32:return{sqlType:"float32"};case k.Float64:return{sqlType:"float64"};case k.Int:return{sqlType:"int32"};case k.Int16:return{sqlType:"int16"};case k.Int32:return{sqlType:"int32"};case k.Int64:return{sqlType:"int64"};case k.Uint16:return{sqlType:"uint16"};case k.Uint32:return{sqlType:"uint32"};case k.Uint64:return{sqlType:"uint64"};case k.Uint8:return{sqlType:"uint8"};case k.IntervalDayTime:return{sqlType:"interval[dt]"};case k.IntervalYearMonth:return{sqlType:"interval[m]"};case k.List:return{sqlType:"list",valueType:Yh(t.valueType)};case k.FixedSizeBinary:return{sqlType:"fixedsizebinary",byteWidth:t.byteWidth};case k.Null:return{sqlType:"null"};case k.Utf8:return{sqlType:"utf8"};case k.Struct:return{sqlType:"struct",fields:t.children.map(e=>By(e.name,e.type))};case k.Map:{let e=t;return{sqlType:"map",keyType:Yh(e.keyType),valueType:Yh(e.valueType)}}case k.Time:return{sqlType:"time[s]"};case k.TimeMicrosecond:return{sqlType:"time[us]"};case k.TimeMillisecond:return{sqlType:"time[ms]"};case k.TimeNanosecond:return{sqlType:"time[ns]"};case k.TimeSecond:return{sqlType:"time[s]"};case k.Timestamp:return{sqlType:"timestamp",timezone:t.timezone||void 0};case k.TimestampSecond:return{sqlType:"timestamp[s]",timezone:t.timezone||void 0};case k.TimestampMicrosecond:return{sqlType:"timestamp[us]",timezone:t.timezone||void 0};case k.TimestampNanosecond:return{sqlType:"timestamp[ns]",timezone:t.timezone||void 0};case k.TimestampMillisecond:return{sqlType:"timestamp[ms]",timezone:t.timezone||void 0}}throw new Error("unsupported arrow type: ".concat(t.toString()))}function By(t,e){let n=Yh(e);return n.name=t,n}var dj=new TextEncoder,pj=class{constructor(t,e=null){this._onInstantiationProgress=[],this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{},this._nextMessageId=0,this._pendingRequests=new Map,this._logger=t,this._onMessageHandler=this.onMessage.bind(this),this._onErrorHandler=this.onError.bind(this),this._onCloseHandler=this.onClose.bind(this),e!=null&&this.attach(e)}get logger(){return this._logger}attach(t){this._worker=t,this._worker.addEventListener("message",this._onMessageHandler),this._worker.addEventListener("error",this._onErrorHandler),this._worker.addEventListener("close",this._onCloseHandler),this._workerShutdownPromise=new Promise((e,n)=>{this._workerShutdownResolver=e})}detach(){this._worker&&(this._worker.removeEventListener("message",this._onMessageHandler),this._worker.removeEventListener("error",this._onErrorHandler),this._worker.removeEventListener("close",this._onCloseHandler),this._worker=null,this._workerShutdownResolver(null),this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async terminate(){this._worker&&(this._worker.terminate(),this._worker=null,this._workerShutdownPromise=null,this._workerShutdownResolver=()=>{})}async postTask(t,e=[]){if(!this._worker){console.error("cannot send a message since the worker is not set!");return}let n=this._nextMessageId++;return this._pendingRequests.set(n,t),this._worker.postMessage({messageId:n,type:t.type,data:t.data},e),await t.promise}onMessage(t){var e;let n=t.data;switch(n.type){case"LOG":{this._logger.log(n.data);return}case"INSTANTIATE_PROGRESS":{for(let r of this._onInstantiationProgress)r(n.data);return}}let i=this._pendingRequests.get(n.requestId);if(!i){console.warn("unassociated response: [".concat(n.requestId,", ").concat(n.type.toString(),"]"));return}if(this._pendingRequests.delete(n.requestId),n.type=="ERROR"){let r=new Error(n.data.message);r.name=n.data.name,(e=Object.getOwnPropertyDescriptor(r,"stack"))!=null&&e.writable&&(r.stack=n.data.stack),i.promiseRejecter(r);return}switch(i.type){case"CLOSE_PREPARED":case"COLLECT_FILE_STATISTICS":case"COPY_FILE_TO_PATH":case"DISCONNECT":case"DROP_FILE":case"DROP_FILES":case"FLUSH_FILES":case"INSERT_ARROW_FROM_IPC_STREAM":case"IMPORT_CSV_FROM_PATH":case"IMPORT_JSON_FROM_PATH":case"OPEN":case"PING":case"REGISTER_FILE_BUFFER":case"REGISTER_FILE_HANDLE":case"REGISTER_FILE_URL":case"RESET":if(n.type=="OK"){i.promiseResolver(n.data);return}break;case"INSTANTIATE":if(this._onInstantiationProgress=[],n.type=="OK"){i.promiseResolver(n.data);return}break;case"GLOB_FILE_INFOS":if(n.type=="FILE_INFOS"){i.promiseResolver(n.data);return}break;case"GET_VERSION":if(n.type=="VERSION_STRING"){i.promiseResolver(n.data);return}break;case"GET_FEATURE_FLAGS":if(n.type=="FEATURE_FLAGS"){i.promiseResolver(n.data);return}break;case"GET_TABLE_NAMES":if(n.type=="TABLE_NAMES"){i.promiseResolver(n.data);return}break;case"TOKENIZE":if(n.type=="SCRIPT_TOKENS"){i.promiseResolver(n.data);return}break;case"COPY_FILE_TO_BUFFER":if(n.type=="FILE_BUFFER"){i.promiseResolver(n.data);return}break;case"EXPORT_FILE_STATISTICS":if(n.type=="FILE_STATISTICS"){i.promiseResolver(n.data);return}break;case"CONNECT":if(n.type=="CONNECTION_INFO"){i.promiseResolver(n.data);return}break;case"RUN_PREPARED":case"RUN_QUERY":if(n.type=="QUERY_RESULT"){i.promiseResolver(n.data);return}break;case"SEND_PREPARED":if(n.type=="QUERY_RESULT_HEADER"){i.promiseResolver(n.data);return}break;case"START_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(n.data);return}break;case"POLL_PENDING_QUERY":if(n.type=="QUERY_RESULT_HEADER_OR_NULL"){i.promiseResolver(n.data);return}break;case"CANCEL_PENDING_QUERY":if(this._onInstantiationProgress=[],n.type=="SUCCESS"){i.promiseResolver(n.data);return}break;case"FETCH_QUERY_RESULTS":if(n.type=="QUERY_RESULT_CHUNK"){i.promiseResolver(n.data);return}break;case"CREATE_PREPARED":if(n.type=="PREPARED_STATEMENT_ID"){i.promiseResolver(n.data);return}break}i.promiseRejecter(new Error("unexpected response type: ".concat(n.type.toString())))}onError(t){console.error(t),console.error("error in duckdb worker: ".concat(t.message)),this._pendingRequests.clear()}onClose(){if(this._workerShutdownResolver(null),this._pendingRequests.size!=0){console.warn("worker terminated with ".concat(this._pendingRequests.size," pending requests"));return}this._pendingRequests.clear()}async reset(){let t=new De("RESET",null);return await this.postTask(t)}async ping(){let t=new De("PING",null);await this.postTask(t)}async dropFile(t){let e=new De("DROP_FILE",t);return await this.postTask(e)}async dropFiles(){let t=new De("DROP_FILES",null);return await this.postTask(t)}async flushFiles(){let t=new De("FLUSH_FILES",null);return await this.postTask(t)}async instantiate(t,e=null,n=i=>{}){this._onInstantiationProgress.push(n);let i=new De("INSTANTIATE",[t,e]);return await this.postTask(i)}async getVersion(){let t=new De("GET_VERSION",null);return await this.postTask(t)}async getFeatureFlags(){let t=new De("GET_FEATURE_FLAGS",null);return await this.postTask(t)}async open(t){let e=new De("OPEN",t);await this.postTask(e)}async tokenize(t){let e=new De("TOKENIZE",t);return await this.postTask(e)}async connectInternal(){let t=new De("CONNECT",null);return await this.postTask(t)}async connect(){let t=await this.connectInternal();return new uj(this,t)}async disconnect(t){let e=new De("DISCONNECT",t);await this.postTask(e)}async runQuery(t,e){let n=new De("RUN_QUERY",[t,e]);return await this.postTask(n)}async startPendingQuery(t,e){let n=new De("START_PENDING_QUERY",[t,e]);return await this.postTask(n)}async pollPendingQuery(t){let e=new De("POLL_PENDING_QUERY",t);return await this.postTask(e)}async cancelPendingQuery(t){let e=new De("CANCEL_PENDING_QUERY",t);return await this.postTask(e)}async fetchQueryResults(t){let e=new De("FETCH_QUERY_RESULTS",t);return await this.postTask(e)}async getTableNames(t,e){let n=new De("GET_TABLE_NAMES",[t,e]);return await this.postTask(n)}async createPrepared(t,e){let n=new De("CREATE_PREPARED",[t,e]);return await this.postTask(n)}async closePrepared(t,e){let n=new De("CLOSE_PREPARED",[t,e]);await this.postTask(n)}async runPrepared(t,e,n){let i=new De("RUN_PREPARED",[t,e,n]);return await this.postTask(i)}async sendPrepared(t,e,n){let i=new De("SEND_PREPARED",[t,e,n]);return await this.postTask(i)}async globFiles(t){let e=new De("GLOB_FILE_INFOS",t);return await this.postTask(e)}async registerFileText(t,e){let n=dj.encode(e);await this.registerFileBuffer(t,n)}async registerFileURL(t,e,n,i){e===void 0&&(e=t);let r=new De("REGISTER_FILE_URL",[t,e,n,i]);await this.postTask(r)}async registerEmptyFileBuffer(t){}async registerFileBuffer(t,e){let n=new De("REGISTER_FILE_BUFFER",[t,e]);await this.postTask(n,[e.buffer])}async registerFileHandle(t,e,n,i){let r=new De("REGISTER_FILE_HANDLE",[t,e,n,i]);await this.postTask(r,[])}async collectFileStatistics(t,e){let n=new De("COLLECT_FILE_STATISTICS",[t,e]);await this.postTask(n,[])}async exportFileStatistics(t){let e=new De("EXPORT_FILE_STATISTICS",t);return await this.postTask(e,[])}async copyFileToBuffer(t){let e=new De("COPY_FILE_TO_BUFFER",t);return await this.postTask(e)}async copyFileToPath(t,e){let n=new De("COPY_FILE_TO_PATH",[t,e]);await this.postTask(n)}async insertArrowFromIPCStream(t,e,n){if(e.length==0)return;let i=new De("INSERT_ARROW_FROM_IPC_STREAM",[t,e,n]);await this.postTask(i,[e.buffer])}async insertCSVFromPath(t,e,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let o=n.columns[s];r.push(By(s,o))}n.columnsFlat=r,delete n.columns}let i=new De("IMPORT_CSV_FROM_PATH",[t,e,n]);await this.postTask(i)}async insertJSONFromPath(t,e,n){if(n.columns!==void 0){let r=[];for(let s in n.columns){let o=n.columns[s];r.push(By(s,o))}n.columnsFlat=r,delete n.columns}let i=new De("IMPORT_JSON_FROM_PATH",[t,e,n]);await this.postTask(i)}},mj=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,3,1,0,1,10,14,1,12,0,65,0,65,0,65,0,252,10,0,0,11])),gj=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,8,1,6,0,6,64,25,11,11])),yj=async()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),vj=()=>(async t=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(t)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),k1={name:"@duckdb/duckdb-wasm",version:"1.29.0"},wj=k1.name,bj=k1.version,C1=k1.version.split(".");C1[0];C1[1];C1[2];var Sj=()=>typeof navigator>"u";function xj(){let t="https://cdn.jsdelivr.net/npm/".concat(wj,"@").concat(bj,"/dist/");return{mvp:{mainModule:"".concat(t,"duckdb-mvp.wasm"),mainWorker:"".concat(t,"duckdb-browser-mvp.worker.js")},eh:{mainModule:"".concat(t,"duckdb-eh.wasm"),mainWorker:"".concat(t,"duckdb-browser-eh.worker.js")}}}var Mm=null,Rm=null,Lm=null,Nm=null,Bm=null;async function kj(){return Mm==null&&(Mm=typeof BigInt64Array<"u"),Rm==null&&(Rm=await gj()),Lm==null&&(Lm=await vj()),Nm==null&&(Nm=await yj()),Bm==null&&(Bm=await mj()),{bigInt64Array:Mm,crossOriginIsolated:Sj()||globalThis.crossOriginIsolated||!1,wasmExceptions:Rm,wasmSIMD:Nm,wasmThreads:Lm,wasmBulkMemory:Bm}}async function Cj(t){let e=await kj();if(e.wasmExceptions){if(e.wasmSIMD&&e.wasmThreads&&e.crossOriginIsolated&&t.coi)return{mainModule:t.coi.mainModule,mainWorker:t.coi.mainWorker,pthreadWorker:t.coi.pthreadWorker};if(t.eh)return{mainModule:t.eh.mainModule,mainWorker:t.eh.mainWorker,pthreadWorker:null}}return{mainModule:t.mvp.mainModule,mainWorker:t.mvp.mainWorker,pthreadWorker:null}}Z6(ej());function _j(){let t=new TextDecoder;return e=>(typeof SharedArrayBuffer<"u"&&e.buffer instanceof SharedArrayBuffer&&(e=new Uint8Array(e)),t.decode(e))}_j();var Ej=(t=>(t[t.BUFFER=0]="BUFFER",t[t.NODE_FS=1]="NODE_FS",t[t.BROWSER_FILEREADER=2]="BROWSER_FILEREADER",t[t.BROWSER_FSACCESS=3]="BROWSER_FSACCESS",t[t.HTTP=4]="HTTP",t[t.S3=5]="S3",t))(Ej||{});let Pm=null;async function Xr(){return Pm||(Pm=(async()=>{const t=xj(),e=await Cj(t),n=new Blob([`importScripts("${e.mainWorker}");`],{type:"text/javascript"}),i=new Worker(URL.createObjectURL(n)),r=new lj,s=new pj(r,i);return await s.instantiate(e.mainModule,e.pthreadWorker),s})()),Pm}function jT(){return new Promise((t,e)=>{const n=indexedDB.open("duckdb-playground",1);n.onupgradeneeded=()=>{const i=n.result;i.objectStoreNames.contains("kv")||i.createObjectStore("kv")},n.onsuccess=()=>t(n.result),n.onerror=()=>e(n.error)})}async function Jc(t){const e=await jT();return new Promise((n,i)=>{const o=e.transaction("kv","readonly").objectStore("kv").get(t);o.onsuccess=()=>n(o.result),o.onerror=()=>i(o.error)})}async function Zc(t,e){const n=await jT();return new Promise((i,r)=>{const l=n.transaction("kv","readwrite").objectStore("kv").put(e,t);l.onsuccess=()=>i(),l.onerror=()=>r(l.error)})}let Py=[],VT=[];(()=>{let t="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,n=0;e<t.length;e++)(e%2?VT:Py).push(n=n+t[e])})();function Aj(t){if(t<768)return!1;for(let e=0,n=Py.length;;){let i=e+n>>1;if(t<Py[i])n=i;else if(t>=VT[i])e=i+1;else return!0;if(e==n)return!1}}function YS(t){return t>=127462&&t<=127487}const GS=8205;function Ij(t,e,n=!0,i=!0){return(n?$T:Tj)(t,e,i)}function $T(t,e,n){if(e==t.length)return e;e&&HT(t.charCodeAt(e))&&WT(t.charCodeAt(e-1))&&e--;let i=Fm(t,e);for(e+=XS(i);e<t.length;){let r=Fm(t,e);if(i==GS||r==GS||n&&Aj(r))e+=XS(r),i=r;else if(YS(r)){let s=0,o=e-2;for(;o>=0&&YS(Fm(t,o));)s++,o-=2;if(s%2==0)break;e+=2}else break}return e}function Tj(t,e,n){for(;e>0;){let i=$T(t,e-2,n);if(i<e)return i;e--}return 0}function Fm(t,e){let n=t.charCodeAt(e);if(!WT(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return HT(i)?(n-55296<<10)+(i-56320)+65536:n}function HT(t){return t>=56320&&t<57344}function WT(t){return t>=55296&&t<56320}function XS(t){return t<65536?1:2}class Re{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,n,i){[e,n]=zl(this,e,n);let r=[];return this.decompose(0,e,r,2),i.length&&i.decompose(0,i.length,r,3),this.decompose(n,this.length,r,1),Ki.from(r,this.length-(n-e)+i.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,n=this.length){[e,n]=zl(this,e,n);let i=[];return this.decompose(e,n,i,0),Ki.from(i,n-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let n=this.scanIdentical(e,1),i=this.length-this.scanIdentical(e,-1),r=new nu(this),s=new nu(e);for(let o=n,l=n;;){if(r.next(o),s.next(o),o=0,r.lineBreak!=s.lineBreak||r.done!=s.done||r.value!=s.value)return!1;if(l+=r.value.length,r.done||l>=i)return!0}}iter(e=1){return new nu(this,e)}iterRange(e,n=this.length){return new qT(this,e,n)}iterLines(e,n){let i;if(e==null)i=this.iter();else{n==null&&(n=this.lines+1);let r=this.line(e).from;i=this.iterRange(r,Math.max(r,n==this.lines+1?this.length:n<=1?0:this.line(n-1).to))}return new QT(i)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Re.empty:e.length<=32?new gt(e):Ki.from(gt.split(e,[]))}}class gt extends Re{constructor(e,n=Oj(e)){super(),this.text=e,this.length=n}get lines(){return this.text.length}get children(){return null}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.text[s],l=r+o.length;if((n?i:l)>=e)return new Dj(r,l,i,o);r=l+1,i++}}decompose(e,n,i,r){let s=e<=0&&n>=this.length?this:new gt(JS(this.text,e,n),Math.min(n,this.length)-Math.max(0,e));if(r&1){let o=i.pop(),l=Gh(s.text,o.text.slice(),0,s.length);if(l.length<=32)i.push(new gt(l,o.length+s.length));else{let a=l.length>>1;i.push(new gt(l.slice(0,a)),new gt(l.slice(a)))}}else i.push(s)}replace(e,n,i){if(!(i instanceof gt))return super.replace(e,n,i);[e,n]=zl(this,e,n);let r=Gh(this.text,Gh(i.text,JS(this.text,0,e)),n),s=this.length+i.length-(n-e);return r.length<=32?new gt(r,s):Ki.from(gt.split(r,[]),s)}sliceString(e,n=this.length,i=`
`){[e,n]=zl(this,e,n);let r="";for(let s=0,o=0;s<=n&&o<this.text.length;o++){let l=this.text[o],a=s+l.length;s>e&&o&&(r+=i),e<a&&n>s&&(r+=l.slice(Math.max(0,e-s),n-s)),s=a+1}return r}flatten(e){for(let n of this.text)e.push(n)}scanIdentical(){return 0}static split(e,n){let i=[],r=-1;for(let s of e)i.push(s),r+=s.length+1,i.length==32&&(n.push(new gt(i,r)),i=[],r=-1);return r>-1&&n.push(new gt(i,r)),n}}class Ki extends Re{constructor(e,n){super(),this.children=e,this.length=n,this.lines=0;for(let i of e)this.lines+=i.lines}lineInner(e,n,i,r){for(let s=0;;s++){let o=this.children[s],l=r+o.length,a=i+o.lines-1;if((n?a:l)>=e)return o.lineInner(e,n,i,r);r=l+1,i=a+1}}decompose(e,n,i,r){for(let s=0,o=0;o<=n&&s<this.children.length;s++){let l=this.children[s],a=o+l.length;if(e<=a&&n>=o){let u=r&((o<=e?1:0)|(a>=n?2:0));o>=e&&a<=n&&!u?i.push(l):l.decompose(e-o,n-o,i,u)}o=a+1}}replace(e,n,i){if([e,n]=zl(this,e,n),i.lines<this.lines)for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e>=s&&n<=l){let a=o.replace(e-s,n-s,i),u=this.lines-o.lines+a.lines;if(a.lines<u>>4&&a.lines>u>>6){let c=this.children.slice();return c[r]=a,new Ki(c,this.length-(n-e)+i.length)}return super.replace(s,l,a)}s=l+1}return super.replace(e,n,i)}sliceString(e,n=this.length,i=`
`){[e,n]=zl(this,e,n);let r="";for(let s=0,o=0;s<this.children.length&&o<=n;s++){let l=this.children[s],a=o+l.length;o>e&&s&&(r+=i),e<a&&n>o&&(r+=l.sliceString(e-o,n-o,i)),o=a+1}return r}flatten(e){for(let n of this.children)n.flatten(e)}scanIdentical(e,n){if(!(e instanceof Ki))return 0;let i=0,[r,s,o,l]=n>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=n,s+=n){if(r==o||s==l)return i;let a=this.children[r],u=e.children[s];if(a!=u)return i+a.scanIdentical(u,n);i+=a.length+1}}static from(e,n=e.reduce((i,r)=>i+r.length+1,-1)){let i=0;for(let d of e)i+=d.lines;if(i<32){let d=[];for(let p of e)p.flatten(d);return new gt(d,n)}let r=Math.max(32,i>>5),s=r<<1,o=r>>1,l=[],a=0,u=-1,c=[];function h(d){let p;if(d.lines>s&&d instanceof Ki)for(let g of d.children)h(g);else d.lines>o&&(a>o||!a)?(f(),l.push(d)):d instanceof gt&&a&&(p=c[c.length-1])instanceof gt&&d.lines+p.lines<=32?(a+=d.lines,u+=d.length+1,c[c.length-1]=new gt(p.text.concat(d.text),p.length+1+d.length)):(a+d.lines>r&&f(),a+=d.lines,u+=d.length+1,c.push(d))}function f(){a!=0&&(l.push(c.length==1?c[0]:Ki.from(c,u)),u=-1,a=c.length=0)}for(let d of e)h(d);return f(),l.length==1?l[0]:new Ki(l,n)}}Re.empty=new gt([""],0);function Oj(t){let e=-1;for(let n of t)e+=n.length+1;return e}function Gh(t,e,n=0,i=1e9){for(let r=0,s=0,o=!0;s<t.length&&r<=i;s++){let l=t[s],a=r+l.length;a>=n&&(a>i&&(l=l.slice(0,i-r)),r<n&&(l=l.slice(n-r)),o?(e[e.length-1]+=l,o=!1):e.push(l)),r=a+1}return e}function JS(t,e,n){return Gh(t,[""],e,n)}class nu{constructor(e,n=1){this.dir=n,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[n>0?1:(e instanceof gt?e.text.length:e.children.length)<<1]}nextInner(e,n){for(this.done=this.lineBreak=!1;;){let i=this.nodes.length-1,r=this.nodes[i],s=this.offsets[i],o=s>>1,l=r instanceof gt?r.text.length:r.children.length;if(o==(n>0?l:0)){if(i==0)return this.done=!0,this.value="",this;n>0&&this.offsets[i-1]++,this.nodes.pop(),this.offsets.pop()}else if((s&1)==(n>0?0:1)){if(this.offsets[i]+=n,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(r instanceof gt){let a=r.text[o+(n<0?-1:0)];if(this.offsets[i]+=n,a.length>Math.max(0,e))return this.value=e==0?a:n>0?a.slice(e):a.slice(0,a.length-e),this;e-=a.length}else{let a=r.children[o+(n<0?-1:0)];e>a.length?(e-=a.length,this.offsets[i]+=n):(n<0&&this.offsets[i]--,this.nodes.push(a),this.offsets.push(n>0?1:(a instanceof gt?a.text.length:a.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class qT{constructor(e,n,i){this.value="",this.done=!1,this.cursor=new nu(e,n>i?-1:1),this.pos=n>i?e.length:0,this.from=Math.min(n,i),this.to=Math.max(n,i)}nextInner(e,n){if(n<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,n<0?this.pos-this.to:this.from-this.pos);let i=n<0?this.pos-this.from:this.to-this.pos;e>i&&(e=i),i-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*n,this.value=r.length<=i?r:n<0?r.slice(r.length-i):r.slice(0,i),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class QT{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:n,lineBreak:i,value:r}=this.inner.next(e);return n&&this.afterBreak?(this.value="",this.afterBreak=!1):n?(this.done=!0,this.value=""):i?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Re.prototype[Symbol.iterator]=function(){return this.iter()},nu.prototype[Symbol.iterator]=qT.prototype[Symbol.iterator]=QT.prototype[Symbol.iterator]=function(){return this});class Dj{constructor(e,n,i,r){this.from=e,this.to=n,this.number=i,this.text=r}get length(){return this.to-this.from}}function zl(t,e,n){return e=Math.max(0,Math.min(t.length,e)),[e,Math.max(e,Math.min(t.length,n))]}function zt(t,e,n=!0,i=!0){return Ij(t,e,n,i)}function Mj(t){return t>=56320&&t<57344}function Rj(t){return t>=55296&&t<56320}function wn(t,e){let n=t.charCodeAt(e);if(!Rj(n)||e+1==t.length)return n;let i=t.charCodeAt(e+1);return Mj(i)?(n-55296<<10)+(i-56320)+65536:n}function _1(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode((t>>10)+55296,(t&1023)+56320))}function Yi(t){return t<65536?1:2}const Fy=/\r\n?|\n/;var on=function(t){return t[t.Simple=0]="Simple",t[t.TrackDel=1]="TrackDel",t[t.TrackBefore=2]="TrackBefore",t[t.TrackAfter=3]="TrackAfter",t}(on||(on={}));class ir{constructor(e){this.sections=e}get length(){let e=0;for(let n=0;n<this.sections.length;n+=2)e+=this.sections[n];return e}get newLength(){let e=0;for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n+1];e+=i<0?this.sections[n]:i}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let n=0,i=0,r=0;n<this.sections.length;){let s=this.sections[n++],o=this.sections[n++];o<0?(e(i,r,s),r+=s):r+=o,i+=s}}iterChangedRanges(e,n=!1){zy(this,e,n)}get invertedDesc(){let e=[];for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];r<0?e.push(i,r):e.push(r,i)}return new ir(e)}composeDesc(e){return this.empty?e:e.empty?this:KT(this,e)}mapDesc(e,n=!1){return e.empty?this:Uy(this,e,n)}mapPos(e,n=-1,i=on.Simple){let r=0,s=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],u=r+l;if(a<0){if(u>e)return s+(e-r);s+=l}else{if(i!=on.Simple&&u>=e&&(i==on.TrackDel&&r<e&&u>e||i==on.TrackBefore&&r<e||i==on.TrackAfter&&u>e))return null;if(u>e||u==e&&n<0&&!l)return e==r||n<0?s:s+a;s+=a}r=u}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return s}touchesRange(e,n=e){for(let i=0,r=0;i<this.sections.length&&r<=n;){let s=this.sections[i++],o=this.sections[i++],l=r+s;if(o>=0&&r<=n&&l>=e)return r<e&&l>n?"cover":!0;r=l}return!1}toString(){let e="";for(let n=0;n<this.sections.length;){let i=this.sections[n++],r=this.sections[n++];e+=(e?" ":"")+i+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(n=>typeof n!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new ir(e)}static create(e){return new ir(e)}}class At extends ir{constructor(e,n){super(e),this.inserted=n}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return zy(this,(n,i,r,s,o)=>e=e.replace(r,r+(i-n),o),!1),e}mapDesc(e,n=!1){return Uy(this,e,n,!0)}invert(e){let n=this.sections.slice(),i=[];for(let r=0,s=0;r<n.length;r+=2){let o=n[r],l=n[r+1];if(l>=0){n[r]=l,n[r+1]=o;let a=r>>1;for(;i.length<a;)i.push(Re.empty);i.push(o?e.slice(s,s+o):Re.empty)}s+=o}return new At(n,i)}compose(e){return this.empty?e:e.empty?this:KT(this,e,!0)}map(e,n=!1){return e.empty?this:Uy(this,e,n,!0)}iterChanges(e,n=!1){zy(this,e,n)}get desc(){return ir.create(this.sections)}filter(e){let n=[],i=[],r=[],s=new Nu(this);e:for(let o=0,l=0;;){let a=o==e.length?1e9:e[o++];for(;l<a||l==a&&s.len==0;){if(s.done)break e;let c=Math.min(s.len,a-l);Wt(r,c,-1);let h=s.ins==-1?-1:s.off==0?s.ins:0;Wt(n,c,h),h>0&&os(i,n,s.text),s.forward(c),l+=c}let u=e[o++];for(;l<u;){if(s.done)break e;let c=Math.min(s.len,u-l);Wt(n,c,-1),Wt(r,c,s.ins==-1?-1:s.off==0?s.ins:0),s.forward(c),l+=c}}return{changes:new At(n,i),filtered:ir.create(r)}}toJSON(){let e=[];for(let n=0;n<this.sections.length;n+=2){let i=this.sections[n],r=this.sections[n+1];r<0?e.push(i):r==0?e.push([i]):e.push([i].concat(this.inserted[n>>1].toJSON()))}return e}static of(e,n,i){let r=[],s=[],o=0,l=null;function a(c=!1){if(!c&&!r.length)return;o<n&&Wt(r,n-o,-1);let h=new At(r,s);l=l?l.compose(h.map(l)):h,r=[],s=[],o=0}function u(c){if(Array.isArray(c))for(let h of c)u(h);else if(c instanceof At){if(c.length!=n)throw new RangeError(`Mismatched change set length (got ${c.length}, expected ${n})`);a(),l=l?l.compose(c.map(l)):c}else{let{from:h,to:f=h,insert:d}=c;if(h>f||h<0||f>n)throw new RangeError(`Invalid change range ${h} to ${f} (in doc of length ${n})`);let p=d?typeof d=="string"?Re.of(d.split(i||Fy)):d:Re.empty,g=p.length;if(h==f&&g==0)return;h<o&&a(),h>o&&Wt(r,h-o,-1),Wt(r,f-h,g),os(s,r,p),o=f}}return u(e),a(!l),l}static empty(e){return new At(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let n=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if(typeof s=="number")n.push(s,-1);else{if(!Array.isArray(s)||typeof s[0]!="number"||s.some((o,l)=>l&&typeof o!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(s.length==1)n.push(s[0],0);else{for(;i.length<r;)i.push(Re.empty);i[r]=Re.of(s.slice(1)),n.push(s[0],i[r].length)}}}return new At(n,i)}static createSet(e,n){return new At(e,n)}}function Wt(t,e,n,i=!1){if(e==0&&n<=0)return;let r=t.length-2;r>=0&&n<=0&&n==t[r+1]?t[r]+=e:r>=0&&e==0&&t[r]==0?t[r+1]+=n:i?(t[r]+=e,t[r+1]+=n):t.push(e,n)}function os(t,e,n){if(n.length==0)return;let i=e.length-2>>1;if(i<t.length)t[t.length-1]=t[t.length-1].append(n);else{for(;t.length<i;)t.push(Re.empty);t.push(n)}}function zy(t,e,n){let i=t.inserted;for(let r=0,s=0,o=0;o<t.sections.length;){let l=t.sections[o++],a=t.sections[o++];if(a<0)r+=l,s+=l;else{let u=r,c=s,h=Re.empty;for(;u+=l,c+=a,a&&i&&(h=h.append(i[o-2>>1])),!(n||o==t.sections.length||t.sections[o+1]<0);)l=t.sections[o++],a=t.sections[o++];e(r,u,s,c,h),r=u,s=c}}}function Uy(t,e,n,i=!1){let r=[],s=i?[]:null,o=new Nu(t),l=new Nu(e);for(let a=-1;;){if(o.done&&l.len||l.done&&o.len)throw new Error("Mismatched change set lengths");if(o.ins==-1&&l.ins==-1){let u=Math.min(o.len,l.len);Wt(r,u,-1),o.forward(u),l.forward(u)}else if(l.ins>=0&&(o.ins<0||a==o.i||o.off==0&&(l.len<o.len||l.len==o.len&&!n))){let u=l.len;for(Wt(r,l.ins,-1);u;){let c=Math.min(o.len,u);o.ins>=0&&a<o.i&&o.len<=c&&(Wt(r,0,o.ins),s&&os(s,r,o.text),a=o.i),o.forward(c),u-=c}l.next()}else if(o.ins>=0){let u=0,c=o.len;for(;c;)if(l.ins==-1){let h=Math.min(c,l.len);u+=h,c-=h,l.forward(h)}else if(l.ins==0&&l.len<c)c-=l.len,l.next();else break;Wt(r,u,a<o.i?o.ins:0),s&&a<o.i&&os(s,r,o.text),a=o.i,o.forward(o.len-c)}else{if(o.done&&l.done)return s?At.createSet(r,s):ir.create(r);throw new Error("Mismatched change set lengths")}}}function KT(t,e,n=!1){let i=[],r=n?[]:null,s=new Nu(t),o=new Nu(e);for(let l=!1;;){if(s.done&&o.done)return r?At.createSet(i,r):ir.create(i);if(s.ins==0)Wt(i,s.len,0,l),s.next();else if(o.len==0&&!o.done)Wt(i,0,o.ins,l),r&&os(r,i,o.text),o.next();else{if(s.done||o.done)throw new Error("Mismatched change set lengths");{let a=Math.min(s.len2,o.len),u=i.length;if(s.ins==-1){let c=o.ins==-1?-1:o.off?0:o.ins;Wt(i,a,c,l),r&&c&&os(r,i,o.text)}else o.ins==-1?(Wt(i,s.off?0:s.len,a,l),r&&os(r,i,s.textBit(a))):(Wt(i,s.off?0:s.len,o.off?0:o.ins,l),r&&!o.off&&os(r,i,o.text));l=(s.ins>a||o.ins>=0&&o.len>a)&&(l||i.length>u),s.forward2(a),o.forward(a)}}}}class Nu{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,n=this.i-2>>1;return n>=e.length?Re.empty:e[n]}textBit(e){let{inserted:n}=this.set,i=this.i-2>>1;return i>=n.length&&!e?Re.empty:n[i].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Js{constructor(e,n,i){this.from=e,this.to=n,this.flags=i}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,n=-1){let i,r;return this.empty?i=r=e.mapPos(this.from,n):(i=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),i==this.from&&r==this.to?this:new Js(i,r,this.flags)}extend(e,n=e){if(e<=this.anchor&&n>=this.anchor)return z.range(e,n);let i=Math.abs(e-this.anchor)>Math.abs(n-this.anchor)?e:n;return z.range(this.anchor,i)}eq(e,n=!1){return this.anchor==e.anchor&&this.head==e.head&&(!n||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return z.range(e.anchor,e.head)}static create(e,n,i){return new Js(e,n,i)}}class z{constructor(e,n){this.ranges=e,this.mainIndex=n}map(e,n=-1){return e.empty?this:z.create(this.ranges.map(i=>i.map(e,n)),this.mainIndex)}eq(e,n=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let i=0;i<this.ranges.length;i++)if(!this.ranges[i].eq(e.ranges[i],n))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new z([this.main],0)}addRange(e,n=!0){return z.create([e].concat(this.ranges),n?0:this.mainIndex+1)}replaceRange(e,n=this.mainIndex){let i=this.ranges.slice();return i[n]=e,z.create(i,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new z(e.ranges.map(n=>Js.fromJSON(n)),e.main)}static single(e,n=e){return new z([z.range(e,n)],0)}static create(e,n=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let i=0,r=0;r<e.length;r++){let s=e[r];if(s.empty?s.from<=i:s.from<i)return z.normalized(e.slice(),n);i=s.to}return new z(e,n)}static cursor(e,n=0,i,r){return Js.create(e,e,(n==0?0:n<0?8:16)|(i==null?7:Math.min(6,i))|(r??16777215)<<6)}static range(e,n,i,r){let s=(i??16777215)<<6|(r==null?7:Math.min(6,r));return n<e?Js.create(n,e,48|s):Js.create(e,n,(n>e?8:0)|s)}static normalized(e,n=0){let i=e[n];e.sort((r,s)=>r.from-s.from),n=e.indexOf(i);for(let r=1;r<e.length;r++){let s=e[r],o=e[r-1];if(s.empty?s.from<=o.to:s.from<o.to){let l=o.from,a=Math.max(s.to,o.to);r<=n&&n--,e.splice(--r,2,s.anchor>s.head?z.range(a,l):z.range(l,a))}}return new z(e,n)}}function YT(t,e){for(let n of t.ranges)if(n.to>e)throw new RangeError("Selection points outside of document")}let E1=0;class X{constructor(e,n,i,r,s){this.combine=e,this.compareInput=n,this.compare=i,this.isStatic=r,this.id=E1++,this.default=e([]),this.extensions=typeof s=="function"?s(this):s}get reader(){return this}static define(e={}){return new X(e.combine||(n=>n),e.compareInput||((n,i)=>n===i),e.compare||(e.combine?(n,i)=>n===i:A1),!!e.static,e.enables)}of(e){return new Xh([],this,0,e)}compute(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xh(e,this,1,n)}computeN(e,n){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xh(e,this,2,n)}from(e,n){return n||(n=i=>i),this.compute([e],i=>n(i.field(e)))}}function A1(t,e){return t==e||t.length==e.length&&t.every((n,i)=>n===e[i])}class Xh{constructor(e,n,i,r){this.dependencies=e,this.facet=n,this.type=i,this.value=r,this.id=E1++}dynamicSlot(e){var n;let i=this.value,r=this.facet.compareInput,s=this.id,o=e[s]>>1,l=this.type==2,a=!1,u=!1,c=[];for(let h of this.dependencies)h=="doc"?a=!0:h=="selection"?u=!0:((n=e[h.id])!==null&&n!==void 0?n:1)&1||c.push(e[h.id]);return{create(h){return h.values[o]=i(h),1},update(h,f){if(a&&f.docChanged||u&&(f.docChanged||f.selection)||jy(h,c)){let d=i(h);if(l?!ZS(d,h.values[o],r):!r(d,h.values[o]))return h.values[o]=d,1}return 0},reconfigure:(h,f)=>{let d,p=f.config.address[s];if(p!=null){let g=vd(f,p);if(this.dependencies.every(w=>w instanceof X?f.facet(w)===h.facet(w):w instanceof Vt?f.field(w,!1)==h.field(w,!1):!0)||(l?ZS(d=i(h),g,r):r(d=i(h),g)))return h.values[o]=g,0}else d=i(h);return h.values[o]=d,1}}}}function ZS(t,e,n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!n(t[i],e[i]))return!1;return!0}function jy(t,e){let n=!1;for(let i of e)iu(t,i)&1&&(n=!0);return n}function Lj(t,e,n){let i=n.map(a=>t[a.id]),r=n.map(a=>a.type),s=i.filter(a=>!(a&1)),o=t[e.id]>>1;function l(a){let u=[];for(let c=0;c<i.length;c++){let h=vd(a,i[c]);if(r[c]==2)for(let f of h)u.push(f);else u.push(h)}return e.combine(u)}return{create(a){for(let u of i)iu(a,u);return a.values[o]=l(a),1},update(a,u){if(!jy(a,s))return 0;let c=l(a);return e.compare(c,a.values[o])?0:(a.values[o]=c,1)},reconfigure(a,u){let c=jy(a,i),h=u.config.facets[e.id],f=u.facet(e);if(h&&!c&&A1(n,h))return a.values[o]=f,0;let d=l(a);return e.compare(d,f)?(a.values[o]=f,0):(a.values[o]=d,1)}}}const eh=X.define({static:!0});class Vt{constructor(e,n,i,r,s){this.id=e,this.createF=n,this.updateF=i,this.compareF=r,this.spec=s,this.provides=void 0}static define(e){let n=new Vt(E1++,e.create,e.update,e.compare||((i,r)=>i===r),e);return e.provide&&(n.provides=e.provide(n)),n}create(e){let n=e.facet(eh).find(i=>i.field==this);return((n==null?void 0:n.create)||this.createF)(e)}slot(e){let n=e[this.id]>>1;return{create:i=>(i.values[n]=this.create(i),1),update:(i,r)=>{let s=i.values[n],o=this.updateF(s,r);return this.compareF(s,o)?0:(i.values[n]=o,1)},reconfigure:(i,r)=>{let s=i.facet(eh),o=r.facet(eh),l;return(l=s.find(a=>a.field==this))&&l!=o.find(a=>a.field==this)?(i.values[n]=l.create(i),1):r.config.address[this.id]!=null?(i.values[n]=r.field(this),0):(i.values[n]=this.create(i),1)}}}init(e){return[this,eh.of({field:this,create:e})]}get extension(){return this}}const qs={lowest:4,low:3,default:2,high:1,highest:0};function ba(t){return e=>new GT(e,t)}const Co={highest:ba(qs.highest),high:ba(qs.high),default:ba(qs.default),low:ba(qs.low),lowest:ba(qs.lowest)};class GT{constructor(e,n){this.inner=e,this.prec=n}}class xp{of(e){return new Vy(this,e)}reconfigure(e){return xp.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Vy{constructor(e,n){this.compartment=e,this.inner=n}}class yd{constructor(e,n,i,r,s,o){for(this.base=e,this.compartments=n,this.dynamicSlots=i,this.address=r,this.staticValues=s,this.facets=o,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let n=this.address[e.id];return n==null?e.default:this.staticValues[n>>1]}static resolve(e,n,i){let r=[],s=Object.create(null),o=new Map;for(let f of Nj(e,n,o))f instanceof Vt?r.push(f):(s[f.facet.id]||(s[f.facet.id]=[])).push(f);let l=Object.create(null),a=[],u=[];for(let f of r)l[f.id]=u.length<<1,u.push(d=>f.slot(d));let c=i==null?void 0:i.config.facets;for(let f in s){let d=s[f],p=d[0].facet,g=c&&c[f]||[];if(d.every(w=>w.type==0))if(l[p.id]=a.length<<1|1,A1(g,d))a.push(i.facet(p));else{let w=p.combine(d.map(m=>m.value));a.push(i&&p.compare(w,i.facet(p))?i.facet(p):w)}else{for(let w of d)w.type==0?(l[w.id]=a.length<<1|1,a.push(w.value)):(l[w.id]=u.length<<1,u.push(m=>w.dynamicSlot(m)));l[p.id]=u.length<<1,u.push(w=>Lj(w,p,d))}}let h=u.map(f=>f(l));return new yd(e,o,h,l,a,s)}}function Nj(t,e,n){let i=[[],[],[],[],[]],r=new Map;function s(o,l){let a=r.get(o);if(a!=null){if(a<=l)return;let u=i[a].indexOf(o);u>-1&&i[a].splice(u,1),o instanceof Vy&&n.delete(o.compartment)}if(r.set(o,l),Array.isArray(o))for(let u of o)s(u,l);else if(o instanceof Vy){if(n.has(o.compartment))throw new RangeError("Duplicate use of compartment in extensions");let u=e.get(o.compartment)||o.inner;n.set(o.compartment,u),s(u,l)}else if(o instanceof GT)s(o.inner,o.prec);else if(o instanceof Vt)i[l].push(o),o.provides&&s(o.provides,l);else if(o instanceof Xh)i[l].push(o),o.facet.extensions&&s(o.facet.extensions,qs.default);else{let u=o.extension;if(!u)throw new Error(`Unrecognized extension value in extension set (${o}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);s(u,l)}}return s(t,qs.default),i.reduce((o,l)=>o.concat(l))}function iu(t,e){if(e&1)return 2;let n=e>>1,i=t.status[n];if(i==4)throw new Error("Cyclic dependency between fields and/or facets");if(i&2)return i;t.status[n]=4;let r=t.computeSlot(t,t.config.dynamicSlots[n]);return t.status[n]=2|r}function vd(t,e){return e&1?t.config.staticValues[e>>1]:t.values[e>>1]}const XT=X.define(),$y=X.define({combine:t=>t.some(e=>e),static:!0}),JT=X.define({combine:t=>t.length?t[0]:void 0,static:!0}),ZT=X.define(),eO=X.define(),tO=X.define(),nO=X.define({combine:t=>t.length?t[0]:!1});class ur{constructor(e,n){this.type=e,this.value=n}static define(){return new Bj}}class Bj{of(e){return new ur(this,e)}}class Pj{constructor(e){this.map=e}of(e){return new we(this,e)}}class we{constructor(e,n){this.type=e,this.value=n}map(e){let n=this.type.map(this.value,e);return n===void 0?void 0:n==this.value?this:new we(this.type,n)}is(e){return this.type==e}static define(e={}){return new Pj(e.map||(n=>n))}static mapEffects(e,n){if(!e.length)return e;let i=[];for(let r of e){let s=r.map(n);s&&i.push(s)}return i}}we.reconfigure=we.define();we.appendConfig=we.define();class Ot{constructor(e,n,i,r,s,o){this.startState=e,this.changes=n,this.selection=i,this.effects=r,this.annotations=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&YT(i,n.newLength),s.some(l=>l.type==Ot.time)||(this.annotations=s.concat(Ot.time.of(Date.now())))}static create(e,n,i,r,s,o){return new Ot(e,n,i,r,s,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let n of this.annotations)if(n.type==e)return n.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let n=this.annotation(Ot.userEvent);return!!(n&&(n==e||n.length>e.length&&n.slice(0,e.length)==e&&n[e.length]=="."))}}Ot.time=ur.define();Ot.userEvent=ur.define();Ot.addToHistory=ur.define();Ot.remote=ur.define();function Fj(t,e){let n=[];for(let i=0,r=0;;){let s,o;if(i<t.length&&(r==e.length||e[r]>=t[i]))s=t[i++],o=t[i++];else if(r<e.length)s=e[r++],o=e[r++];else return n;!n.length||n[n.length-1]<s?n.push(s,o):n[n.length-1]<o&&(n[n.length-1]=o)}}function iO(t,e,n){var i;let r,s,o;return n?(r=e.changes,s=At.empty(e.changes.length),o=t.changes.compose(e.changes)):(r=e.changes.map(t.changes),s=t.changes.mapDesc(e.changes,!0),o=t.changes.compose(r)),{changes:o,selection:e.selection?e.selection.map(s):(i=t.selection)===null||i===void 0?void 0:i.map(r),effects:we.mapEffects(t.effects,r).concat(we.mapEffects(e.effects,s)),annotations:t.annotations.length?t.annotations.concat(e.annotations):e.annotations,scrollIntoView:t.scrollIntoView||e.scrollIntoView}}function Hy(t,e,n){let i=e.selection,r=wl(e.annotations);return e.userEvent&&(r=r.concat(Ot.userEvent.of(e.userEvent))),{changes:e.changes instanceof At?e.changes:At.of(e.changes||[],n,t.facet(JT)),selection:i&&(i instanceof z?i:z.single(i.anchor,i.head)),effects:wl(e.effects),annotations:r,scrollIntoView:!!e.scrollIntoView}}function rO(t,e,n){let i=Hy(t,e.length?e[0]:{},t.doc.length);e.length&&e[0].filter===!1&&(n=!1);for(let s=1;s<e.length;s++){e[s].filter===!1&&(n=!1);let o=!!e[s].sequential;i=iO(i,Hy(t,e[s],o?i.changes.newLength:t.doc.length),o)}let r=Ot.create(t,i.changes,i.selection,i.effects,i.annotations,i.scrollIntoView);return Uj(n?zj(r):r)}function zj(t){let e=t.startState,n=!0;for(let r of e.facet(ZT)){let s=r(t);if(s===!1){n=!1;break}Array.isArray(s)&&(n=n===!0?s:Fj(n,s))}if(n!==!0){let r,s;if(n===!1)s=t.changes.invertedDesc,r=At.empty(e.doc.length);else{let o=t.changes.filter(n);r=o.changes,s=o.filtered.mapDesc(o.changes).invertedDesc}t=Ot.create(e,r,t.selection&&t.selection.map(s),we.mapEffects(t.effects,s),t.annotations,t.scrollIntoView)}let i=e.facet(eO);for(let r=i.length-1;r>=0;r--){let s=i[r](t);s instanceof Ot?t=s:Array.isArray(s)&&s.length==1&&s[0]instanceof Ot?t=s[0]:t=rO(e,wl(s),!1)}return t}function Uj(t){let e=t.startState,n=e.facet(tO),i=t;for(let r=n.length-1;r>=0;r--){let s=n[r](t);s&&Object.keys(s).length&&(i=iO(i,Hy(e,s,t.changes.newLength),!0))}return i==t?t:Ot.create(e,t.changes,t.selection,i.effects,i.annotations,i.scrollIntoView)}const jj=[];function wl(t){return t==null?jj:Array.isArray(t)?t:[t]}var lt=function(t){return t[t.Word=0]="Word",t[t.Space=1]="Space",t[t.Other=2]="Other",t}(lt||(lt={}));const Vj=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Wy;try{Wy=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function $j(t){if(Wy)return Wy.test(t);for(let e=0;e<t.length;e++){let n=t[e];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||Vj.test(n)))return!0}return!1}function Hj(t){return e=>{if(!/\S/.test(e))return lt.Space;if($j(e))return lt.Word;for(let n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return lt.Word;return lt.Other}}class Ie{constructor(e,n,i,r,s,o){this.config=e,this.doc=n,this.selection=i,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=s,o&&(o._state=this);for(let l=0;l<this.config.dynamicSlots.length;l++)iu(this,l<<1);this.computeSlot=null}field(e,n=!0){let i=this.config.address[e.id];if(i==null){if(n)throw new RangeError("Field is not present in this state");return}return iu(this,i),vd(this,i)}update(...e){return rO(this,e,!0)}applyTransaction(e){let n=this.config,{base:i,compartments:r}=n;for(let l of e.effects)l.is(xp.reconfigure)?(n&&(r=new Map,n.compartments.forEach((a,u)=>r.set(u,a)),n=null),r.set(l.value.compartment,l.value.extension)):l.is(we.reconfigure)?(n=null,i=l.value):l.is(we.appendConfig)&&(n=null,i=wl(i).concat(l.value));let s;n?s=e.startState.values.slice():(n=yd.resolve(i,r,this),s=new Ie(n,this.doc,this.selection,n.dynamicSlots.map(()=>null),(a,u)=>u.reconfigure(a,this),null).values);let o=e.startState.facet($y)?e.newSelection:e.newSelection.asSingle();new Ie(n,e.newDoc,o,s,(l,a)=>a.update(l,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(n=>({changes:{from:n.from,to:n.to,insert:e},range:z.cursor(n.from+e.length)}))}changeByRange(e){let n=this.selection,i=e(n.ranges[0]),r=this.changes(i.changes),s=[i.range],o=wl(i.effects);for(let l=1;l<n.ranges.length;l++){let a=e(n.ranges[l]),u=this.changes(a.changes),c=u.map(r);for(let f=0;f<l;f++)s[f]=s[f].map(c);let h=r.mapDesc(u,!0);s.push(a.range.map(h)),r=r.compose(c),o=we.mapEffects(o,c).concat(we.mapEffects(wl(a.effects),h))}return{changes:r,selection:z.create(s,n.mainIndex),effects:o}}changes(e=[]){return e instanceof At?e:At.of(e,this.doc.length,this.facet(Ie.lineSeparator))}toText(e){return Re.of(e.split(this.facet(Ie.lineSeparator)||Fy))}sliceDoc(e=0,n=this.doc.length){return this.doc.sliceString(e,n,this.lineBreak)}facet(e){let n=this.config.address[e.id];return n==null?e.default:(iu(this,n),vd(this,n))}toJSON(e){let n={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let i in e){let r=e[i];r instanceof Vt&&this.config.address[r.id]!=null&&(n[i]=r.spec.toJSON(this.field(e[i]),this))}return n}static fromJSON(e,n={},i){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(i){for(let s in i)if(Object.prototype.hasOwnProperty.call(e,s)){let o=i[s],l=e[s];r.push(o.init(a=>o.spec.fromJSON(l,a)))}}return Ie.create({doc:e.doc,selection:z.fromJSON(e.selection),extensions:n.extensions?r.concat([n.extensions]):r})}static create(e={}){let n=yd.resolve(e.extensions||[],new Map),i=e.doc instanceof Re?e.doc:Re.of((e.doc||"").split(n.staticFacet(Ie.lineSeparator)||Fy)),r=e.selection?e.selection instanceof z?e.selection:z.single(e.selection.anchor,e.selection.head):z.single(0);return YT(r,i.length),n.staticFacet($y)||(r=r.asSingle()),new Ie(n,i,r,n.dynamicSlots.map(()=>null),(s,o)=>o.create(s),null)}get tabSize(){return this.facet(Ie.tabSize)}get lineBreak(){return this.facet(Ie.lineSeparator)||`
`}get readOnly(){return this.facet(nO)}phrase(e,...n){for(let i of this.facet(Ie.phrases))if(Object.prototype.hasOwnProperty.call(i,e)){e=i[e];break}return n.length&&(e=e.replace(/\$(\$|\d*)/g,(i,r)=>{if(r=="$")return"$";let s=+(r||1);return!s||s>n.length?i:n[s-1]})),e}languageDataAt(e,n,i=-1){let r=[];for(let s of this.facet(XT))for(let o of s(this,n,i))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return Hj(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:n,from:i,length:r}=this.doc.lineAt(e),s=this.charCategorizer(e),o=e-i,l=e-i;for(;o>0;){let a=zt(n,o,!1);if(s(n.slice(a,o))!=lt.Word)break;o=a}for(;l<r;){let a=zt(n,l);if(s(n.slice(l,a))!=lt.Word)break;l=a}return o==l?null:z.range(o+i,l+i)}}Ie.allowMultipleSelections=$y;Ie.tabSize=X.define({combine:t=>t.length?t[0]:4});Ie.lineSeparator=JT;Ie.readOnly=nO;Ie.phrases=X.define({compare(t,e){let n=Object.keys(t),i=Object.keys(e);return n.length==i.length&&n.every(r=>t[r]==e[r])}});Ie.languageData=XT;Ie.changeFilter=ZT;Ie.transactionFilter=eO;Ie.transactionExtender=tO;xp.reconfigure=we.define();function cr(t,e,n={}){let i={};for(let r of t)for(let s of Object.keys(r)){let o=r[s],l=i[s];if(l===void 0)i[s]=o;else if(!(l===o||o===void 0))if(Object.hasOwnProperty.call(n,s))i[s]=n[s](l,o);else throw new Error("Config merge conflict for field "+s)}for(let r in e)i[r]===void 0&&(i[r]=e[r]);return i}class po{eq(e){return this==e}range(e,n=e){return qy.create(e,n,this)}}po.prototype.startSide=po.prototype.endSide=0;po.prototype.point=!1;po.prototype.mapMode=on.TrackDel;let qy=class sO{constructor(e,n,i){this.from=e,this.to=n,this.value=i}static create(e,n,i){return new sO(e,n,i)}};function Qy(t,e){return t.from-e.from||t.value.startSide-e.value.startSide}class I1{constructor(e,n,i,r){this.from=e,this.to=n,this.value=i,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,n,i,r=0){let s=i?this.to:this.from;for(let o=r,l=s.length;;){if(o==l)return o;let a=o+l>>1,u=s[a]-e||(i?this.value[a].endSide:this.value[a].startSide)-n;if(a==o)return u>=0?o:l;u>=0?l=a:o=a+1}}between(e,n,i,r){for(let s=this.findIndex(n,-1e9,!0),o=this.findIndex(i,1e9,!1,s);s<o;s++)if(r(this.from[s]+e,this.to[s]+e,this.value[s])===!1)return!1}map(e,n){let i=[],r=[],s=[],o=-1,l=-1;for(let a=0;a<this.value.length;a++){let u=this.value[a],c=this.from[a]+e,h=this.to[a]+e,f,d;if(c==h){let p=n.mapPos(c,u.startSide,u.mapMode);if(p==null||(f=d=p,u.startSide!=u.endSide&&(d=n.mapPos(c,u.endSide),d<f)))continue}else if(f=n.mapPos(c,u.startSide),d=n.mapPos(h,u.endSide),f>d||f==d&&u.startSide>0&&u.endSide<=0)continue;(d-f||u.endSide-u.startSide)<0||(o<0&&(o=f),u.point&&(l=Math.max(l,d-f)),i.push(u),r.push(f-o),s.push(d-o))}return{mapped:i.length?new I1(r,s,i,l):null,pos:o}}}class Me{constructor(e,n,i,r){this.chunkPos=e,this.chunk=n,this.nextLayer=i,this.maxPoint=r}static create(e,n,i,r){return new Me(e,n,i,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let n of this.chunk)e+=n.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:n=[],sort:i=!1,filterFrom:r=0,filterTo:s=this.length}=e,o=e.filter;if(n.length==0&&!o)return this;if(i&&(n=n.slice().sort(Qy)),this.isEmpty)return n.length?Me.of(n):this;let l=new oO(this,null,-1).goto(0),a=0,u=[],c=new Dr;for(;l.value||a<n.length;)if(a<n.length&&(l.from-n[a].from||l.startSide-n[a].value.startSide)>=0){let h=n[a++];c.addInner(h.from,h.to,h.value)||u.push(h)}else l.rangeIndex==1&&l.chunkIndex<this.chunk.length&&(a==n.length||this.chunkEnd(l.chunkIndex)<n[a].from)&&(!o||r>this.chunkEnd(l.chunkIndex)||s<this.chunkPos[l.chunkIndex])&&c.addChunk(this.chunkPos[l.chunkIndex],this.chunk[l.chunkIndex])?l.nextChunk():((!o||r>l.to||s<l.from||o(l.from,l.to,l.value))&&(c.addInner(l.from,l.to,l.value)||u.push(qy.create(l.from,l.to,l.value))),l.next());return c.finishInner(this.nextLayer.isEmpty&&!u.length?Me.empty:this.nextLayer.update({add:u,filter:o,filterFrom:r,filterTo:s}))}map(e){if(e.empty||this.isEmpty)return this;let n=[],i=[],r=-1;for(let o=0;o<this.chunk.length;o++){let l=this.chunkPos[o],a=this.chunk[o],u=e.touchesRange(l,l+a.length);if(u===!1)r=Math.max(r,a.maxPoint),n.push(a),i.push(e.mapPos(l));else if(u===!0){let{mapped:c,pos:h}=a.map(l,e);c&&(r=Math.max(r,c.maxPoint),n.push(c),i.push(h))}}let s=this.nextLayer.map(e);return n.length==0?s:new Me(i,n,s||Me.empty,r)}between(e,n,i){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r];if(n>=s&&e<=s+o.length&&o.between(s,e-s,n-s,i)===!1)return}this.nextLayer.between(e,n,i)}}iter(e=0){return Bu.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,n=0){return Bu.from(e).goto(n)}static compare(e,n,i,r,s=-1){let o=e.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),l=n.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=s),a=ex(o,l,i),u=new Sa(o,a,s),c=new Sa(l,a,s);i.iterGaps((h,f,d)=>tx(u,h,c,f,d,r)),i.empty&&i.length==0&&tx(u,0,c,0,0,r)}static eq(e,n,i=0,r){r==null&&(r=999999999);let s=e.filter(c=>!c.isEmpty&&n.indexOf(c)<0),o=n.filter(c=>!c.isEmpty&&e.indexOf(c)<0);if(s.length!=o.length)return!1;if(!s.length)return!0;let l=ex(s,o),a=new Sa(s,l,0).goto(i),u=new Sa(o,l,0).goto(i);for(;;){if(a.to!=u.to||!Ky(a.active,u.active)||a.point&&(!u.point||!a.point.eq(u.point)))return!1;if(a.to>r)return!0;a.next(),u.next()}}static spans(e,n,i,r,s=-1){let o=new Sa(e,null,s).goto(n),l=n,a=o.openStart;for(;;){let u=Math.min(o.to,i);if(o.point){let c=o.activeForPoint(o.to),h=o.pointFrom<n?c.length+1:o.point.startSide<0?c.length:Math.min(c.length,a);r.point(l,u,o.point,c,h,o.pointRank),a=Math.min(o.openEnd(u),c.length)}else u>l&&(r.span(l,u,o.active,a),a=o.openEnd(u));if(o.to>i)return a+(o.point&&o.to>i?1:0);l=o.to,o.next()}}static of(e,n=!1){let i=new Dr;for(let r of e instanceof qy?[e]:n?Wj(e):e)i.add(r.from,r.to,r.value);return i.finish()}static join(e){if(!e.length)return Me.empty;let n=e[e.length-1];for(let i=e.length-2;i>=0;i--)for(let r=e[i];r!=Me.empty;r=r.nextLayer)n=new Me(r.chunkPos,r.chunk,n,Math.max(r.maxPoint,n.maxPoint));return n}}Me.empty=new Me([],[],null,-1);function Wj(t){if(t.length>1)for(let e=t[0],n=1;n<t.length;n++){let i=t[n];if(Qy(e,i)>0)return t.slice().sort(Qy);e=i}return t}Me.empty.nextLayer=Me.empty;class Dr{finishChunk(e){this.chunks.push(new I1(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,n,i){this.addInner(e,n,i)||(this.nextLayer||(this.nextLayer=new Dr)).add(e,n,i)}addInner(e,n,i){let r=e-this.lastTo||i.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return r<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(n-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=n,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,n-e)),!0)}addChunk(e,n){if((e-this.lastTo||n.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,n.maxPoint),this.chunks.push(n),this.chunkPos.push(e);let i=n.value.length-1;return this.last=n.value[i],this.lastFrom=n.from[i]+e,this.lastTo=n.to[i]+e,!0}finish(){return this.finishInner(Me.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let n=Me.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,n}}function ex(t,e,n){let i=new Map;for(let s of t)for(let o=0;o<s.chunk.length;o++)s.chunk[o].maxPoint<=0&&i.set(s.chunk[o],s.chunkPos[o]);let r=new Set;for(let s of e)for(let o=0;o<s.chunk.length;o++){let l=i.get(s.chunk[o]);l!=null&&(n?n.mapPos(l):l)==s.chunkPos[o]&&!(n!=null&&n.touchesRange(l,l+s.chunk[o].length))&&r.add(s.chunk[o])}return r}class oO{constructor(e,n,i,r=0){this.layer=e,this.skip=n,this.minPoint=i,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,n=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,n,!1),this}gotoInner(e,n,i){for(;this.chunkIndex<this.layer.chunk.length;){let r=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(r)||this.layer.chunkEnd(this.chunkIndex)<e||r.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],n,!0);(!i||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,n){(this.to-e||this.endSide-n)<0&&this.gotoInner(e,n,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],n=this.layer.chunk[this.chunkIndex],i=e+n.from[this.rangeIndex];if(this.from=i,this.to=e+n.to[this.rangeIndex],this.value=n.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Bu{constructor(e){this.heap=e}static from(e,n=null,i=-1){let r=[];for(let s=0;s<e.length;s++)for(let o=e[s];!o.isEmpty;o=o.nextLayer)o.maxPoint>=i&&r.push(new oO(o,n,i,s));return r.length==1?r[0]:new Bu(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,n=-1e9){for(let i of this.heap)i.goto(e,n);for(let i=this.heap.length>>1;i>=0;i--)zm(this.heap,i);return this.next(),this}forward(e,n){for(let i of this.heap)i.forward(e,n);for(let i=this.heap.length>>1;i>=0;i--)zm(this.heap,i);(this.to-e||this.value.endSide-n)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),zm(this.heap,0)}}}function zm(t,e){for(let n=t[e];;){let i=(e<<1)+1;if(i>=t.length)break;let r=t[i];if(i+1<t.length&&r.compare(t[i+1])>=0&&(r=t[i+1],i++),n.compare(r)<0)break;t[i]=n,t[e]=r,e=i}}class Sa{constructor(e,n,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Bu.from(e,n,i)}goto(e,n=-1e9){return this.cursor.goto(e,n),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=n,this.openStart=-1,this.next(),this}forward(e,n){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-n)<0;)this.removeActive(this.minActive);this.cursor.forward(e,n)}removeActive(e){th(this.active,e),th(this.activeTo,e),th(this.activeRank,e),this.minActive=nx(this.active,this.activeTo)}addActive(e){let n=0,{value:i,to:r,rank:s}=this.cursor;for(;n<this.activeRank.length&&(s-this.activeRank[n]||r-this.activeTo[n])>0;)n++;nh(this.active,n,i),nh(this.activeTo,n,r),nh(this.activeRank,n,s),e&&nh(e,n,this.cursor.from),this.minActive=nx(this.active,this.activeTo)}next(){let e=this.to,n=this.point;this.point=null;let i=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),i&&th(i,r)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let s=this.cursor.value;if(!s.point)this.addActive(i),this.cursor.next();else if(n&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=s,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=s.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(i){this.openStart=0;for(let r=i.length-1;r>=0&&i[r]<e;r--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let n=[];for(let i=this.active.length-1;i>=0&&!(this.activeRank[i]<this.pointRank);i--)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>=this.point.endSide)&&n.push(this.active[i]);return n.reverse()}openEnd(e){let n=0;for(let i=this.activeTo.length-1;i>=0&&this.activeTo[i]>e;i--)n++;return n}}function tx(t,e,n,i,r,s){t.goto(e),n.goto(i);let o=i+r,l=i,a=i-e;for(;;){let u=t.to+a-n.to,c=u||t.endSide-n.endSide,h=c<0?t.to+a:n.to,f=Math.min(h,o);if(t.point||n.point?t.point&&n.point&&(t.point==n.point||t.point.eq(n.point))&&Ky(t.activeForPoint(t.to),n.activeForPoint(n.to))||s.comparePoint(l,f,t.point,n.point):f>l&&!Ky(t.active,n.active)&&s.compareRange(l,f,t.active,n.active),h>o)break;(u||t.openEnd!=n.openEnd)&&s.boundChange&&s.boundChange(h),l=h,c<=0&&t.next(),c>=0&&n.next()}}function Ky(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!=e[n]&&!t[n].eq(e[n]))return!1;return!0}function th(t,e){for(let n=e,i=t.length-1;n<i;n++)t[n]=t[n+1];t.pop()}function nh(t,e,n){for(let i=t.length-1;i>=e;i--)t[i+1]=t[i];t[e]=n}function nx(t,e){let n=-1,i=1e9;for(let r=0;r<e.length;r++)(e[r]-i||t[r].endSide-t[n].endSide)<0&&(n=r,i=e[r]);return n}function ta(t,e,n=t.length){let i=0;for(let r=0;r<n&&r<t.length;)t.charCodeAt(r)==9?(i+=e-i%e,r++):(i++,r=zt(t,r));return i}function Yy(t,e,n,i){for(let r=0,s=0;;){if(s>=e)return r;if(r==t.length)break;s+=t.charCodeAt(r)==9?n-s%n:1,r=zt(t,r)}return i===!0?-1:t.length}const Gy="ͼ",ix=typeof Symbol>"u"?"__"+Gy:Symbol.for(Gy),Xy=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),rx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Es{constructor(e,n){this.rules=[];let{finish:i}=n||{};function r(o){return/^@/.test(o)?[o]:o.split(/,\s*/)}function s(o,l,a,u){let c=[],h=/^@(\w+)\b/.exec(o[0]),f=h&&h[1]=="keyframes";if(h&&l==null)return a.push(o[0]+";");for(let d in l){let p=l[d];if(/&/.test(d))s(d.split(/,\s*/).map(g=>o.map(w=>g.replace(/&/,w))).reduce((g,w)=>g.concat(w)),p,a);else if(p&&typeof p=="object"){if(!h)throw new RangeError("The value of a property ("+d+") should be a primitive value.");s(r(d),p,c,f)}else p!=null&&c.push(d.replace(/_.*/,"").replace(/[A-Z]/g,g=>"-"+g.toLowerCase())+": "+p+";")}(c.length||f)&&a.push((i&&!h&&!u?o.map(i):o).join(", ")+" {"+c.join(" ")+"}")}for(let o in e)s(r(o),e[o],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=rx[ix]||1;return rx[ix]=e+1,Gy+e.toString(36)}static mount(e,n,i){let r=e[Xy],s=i&&i.nonce;r?s&&r.setNonce(s):r=new qj(e,s),r.mount(Array.isArray(n)?n:[n],e)}}let sx=new Map;class qj{constructor(e,n){let i=e.ownerDocument||e,r=i.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let s=sx.get(i);if(s)return e[Xy]=s;this.sheet=new r.CSSStyleSheet,sx.set(i,this)}else this.styleTag=i.createElement("style"),n&&this.styleTag.setAttribute("nonce",n);this.modules=[],e[Xy]=this}mount(e,n){let i=this.sheet,r=0,s=0;for(let o=0;o<e.length;o++){let l=e[o],a=this.modules.indexOf(l);if(a<s&&a>-1&&(this.modules.splice(a,1),s--,a=-1),a==-1){if(this.modules.splice(s++,0,l),i)for(let u=0;u<l.rules.length;u++)i.insertRule(l.rules[u],r++)}else{for(;s<a;)r+=this.modules[s++].rules.length;r+=l.rules.length,s++}}if(i)n.adoptedStyleSheets.indexOf(this.sheet)<0&&(n.adoptedStyleSheets=[this.sheet,...n.adoptedStyleSheets]);else{let o="";for(let a=0;a<this.modules.length;a++)o+=this.modules[a].getRules()+`
`;this.styleTag.textContent=o;let l=n.head||n;this.styleTag.parentNode!=l&&l.insertBefore(this.styleTag,l.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var As={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Pu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Qj=typeof navigator<"u"&&/Mac/.test(navigator.platform),Kj=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ft=0;Ft<10;Ft++)As[48+Ft]=As[96+Ft]=String(Ft);for(var Ft=1;Ft<=24;Ft++)As[Ft+111]="F"+Ft;for(var Ft=65;Ft<=90;Ft++)As[Ft]=String.fromCharCode(Ft+32),Pu[Ft]=String.fromCharCode(Ft);for(var Um in As)Pu.hasOwnProperty(Um)||(Pu[Um]=As[Um]);function Yj(t){var e=Qj&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||Kj&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Pu:As)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}function qe(){var t=arguments[0];typeof t=="string"&&(t=document.createElement(t));var e=1,n=arguments[1];if(n&&typeof n=="object"&&n.nodeType==null&&!Array.isArray(n)){for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){var r=n[i];typeof r=="string"?t.setAttribute(i,r):r!=null&&(t[i]=r)}e++}for(;e<arguments.length;e++)lO(t,arguments[e]);return t}function lO(t,e){if(typeof e=="string")t.appendChild(document.createTextNode(e));else if(e!=null)if(e.nodeType!=null)t.appendChild(e);else if(Array.isArray(e))for(var n=0;n<e.length;n++)lO(t,e[n]);else throw new RangeError("Unsupported child node: "+e)}function Fu(t){let e;return t.nodeType==11?e=t.getSelection?t:t.ownerDocument:e=t,e.getSelection()}function Jy(t,e){return e?t==e||t.contains(e.nodeType!=1?e.parentNode:e):!1}function Jh(t,e){if(!e.anchorNode)return!1;try{return Jy(t,e.anchorNode)}catch{return!1}}function Ul(t){return t.nodeType==3?go(t,0,t.nodeValue.length).getClientRects():t.nodeType==1?t.getClientRects():[]}function ru(t,e,n,i){return n?ox(t,e,n,i,-1)||ox(t,e,n,i,1):!1}function mo(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e}function wd(t){return t.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(t.nodeName)}function ox(t,e,n,i,r){for(;;){if(t==n&&e==i)return!0;if(e==(r<0?0:lr(t))){if(t.nodeName=="DIV")return!1;let s=t.parentNode;if(!s||s.nodeType!=1)return!1;e=mo(t)+(r<0?0:1),t=s}else if(t.nodeType==1){if(t=t.childNodes[e+(r<0?-1:0)],t.nodeType==1&&t.contentEditable=="false")return!1;e=r<0?lr(t):0}else return!1}}function lr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function fc(t,e){let n=e?t.left:t.right;return{left:n,right:n,top:t.top,bottom:t.bottom}}function Gj(t){let e=t.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.innerWidth,top:0,bottom:t.innerHeight}}function aO(t,e){let n=e.width/t.offsetWidth,i=e.height/t.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(e.width-t.offsetWidth)<1)&&(n=1),(i>.995&&i<1.005||!isFinite(i)||Math.abs(e.height-t.offsetHeight)<1)&&(i=1),{scaleX:n,scaleY:i}}function Xj(t,e,n,i,r,s,o,l){let a=t.ownerDocument,u=a.defaultView||window;for(let c=t,h=!1;c&&!h;)if(c.nodeType==1){let f,d=c==a.body,p=1,g=1;if(d)f=Gj(u);else{if(/^(fixed|sticky)$/.test(getComputedStyle(c).position)&&(h=!0),c.scrollHeight<=c.clientHeight&&c.scrollWidth<=c.clientWidth){c=c.assignedSlot||c.parentNode;continue}let y=c.getBoundingClientRect();({scaleX:p,scaleY:g}=aO(c,y)),f={left:y.left,right:y.left+c.clientWidth*p,top:y.top,bottom:y.top+c.clientHeight*g}}let w=0,m=0;if(r=="nearest")e.top<f.top?(m=e.top-(f.top+o),n>0&&e.bottom>f.bottom+m&&(m=e.bottom-f.bottom+o)):e.bottom>f.bottom&&(m=e.bottom-f.bottom+o,n<0&&e.top-m<f.top&&(m=e.top-(f.top+o)));else{let y=e.bottom-e.top,v=f.bottom-f.top;m=(r=="center"&&y<=v?e.top+y/2-v/2:r=="start"||r=="center"&&n<0?e.top-o:e.bottom-v+o)-f.top}if(i=="nearest"?e.left<f.left?(w=e.left-(f.left+s),n>0&&e.right>f.right+w&&(w=e.right-f.right+s)):e.right>f.right&&(w=e.right-f.right+s,n<0&&e.left<f.left+w&&(w=e.left-(f.left+s))):w=(i=="center"?e.left+(e.right-e.left)/2-(f.right-f.left)/2:i=="start"==l?e.left-s:e.right-(f.right-f.left)+s)-f.left,w||m)if(d)u.scrollBy(w,m);else{let y=0,v=0;if(m){let x=c.scrollTop;c.scrollTop+=m/g,v=(c.scrollTop-x)*g}if(w){let x=c.scrollLeft;c.scrollLeft+=w/p,y=(c.scrollLeft-x)*p}e={left:e.left-y,top:e.top-v,right:e.right-y,bottom:e.bottom-v},y&&Math.abs(y-w)<1&&(i="nearest"),v&&Math.abs(v-m)<1&&(r="nearest")}if(d)break;(e.top<f.top||e.bottom>f.bottom||e.left<f.left||e.right>f.right)&&(e={left:Math.max(e.left,f.left),right:Math.min(e.right,f.right),top:Math.max(e.top,f.top),bottom:Math.min(e.bottom,f.bottom)}),c=c.assignedSlot||c.parentNode}else if(c.nodeType==11)c=c.host;else break}function Jj(t){let e=t.ownerDocument,n,i;for(let r=t.parentNode;r&&!(r==e.body||n&&i);)if(r.nodeType==1)!i&&r.scrollHeight>r.clientHeight&&(i=r),!n&&r.scrollWidth>r.clientWidth&&(n=r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;return{x:n,y:i}}class Zj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:n,focusNode:i}=e;this.set(n,Math.min(e.anchorOffset,n?lr(n):0),i,Math.min(e.focusOffset,i?lr(i):0))}set(e,n,i,r){this.anchorNode=e,this.anchorOffset=n,this.focusNode=i,this.focusOffset=r}}let Oo=null;function uO(t){if(t.setActive)return t.setActive();if(Oo)return t.focus(Oo);let e=[];for(let n=t;n&&(e.push(n,n.scrollTop,n.scrollLeft),n!=n.ownerDocument);n=n.parentNode);if(t.focus(Oo==null?{get preventScroll(){return Oo={preventScroll:!0},!0}}:void 0),!Oo){Oo=!1;for(let n=0;n<e.length;){let i=e[n++],r=e[n++],s=e[n++];i.scrollTop!=r&&(i.scrollTop=r),i.scrollLeft!=s&&(i.scrollLeft=s)}}}let lx;function go(t,e,n=e){let i=lx||(lx=document.createRange());return i.setEnd(t,n),i.setStart(t,e),i}function bl(t,e,n,i){let r={key:e,code:e,keyCode:n,which:n,cancelable:!0};i&&({altKey:r.altKey,ctrlKey:r.ctrlKey,shiftKey:r.shiftKey,metaKey:r.metaKey}=i);let s=new KeyboardEvent("keydown",r);s.synthetic=!0,t.dispatchEvent(s);let o=new KeyboardEvent("keyup",r);return o.synthetic=!0,t.dispatchEvent(o),s.defaultPrevented||o.defaultPrevented}function e5(t){for(;t;){if(t&&(t.nodeType==9||t.nodeType==11&&t.host))return t;t=t.assignedSlot||t.parentNode}return null}function cO(t){for(;t.attributes.length;)t.removeAttributeNode(t.attributes[0])}function t5(t,e){let n=e.focusNode,i=e.focusOffset;if(!n||e.anchorNode!=n||e.anchorOffset!=i)return!1;for(i=Math.min(i,lr(n));;)if(i){if(n.nodeType!=1)return!1;let r=n.childNodes[i-1];r.contentEditable=="false"?i--:(n=r,i=lr(n))}else{if(n==t)return!0;i=mo(n),n=n.parentNode}}function hO(t){return t.scrollTop>Math.max(1,t.scrollHeight-t.clientHeight-4)}function fO(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i>0)return{node:n,offset:i};if(n.nodeType==1&&i>0){if(n.contentEditable=="false")return null;n=n.childNodes[i-1],i=lr(n)}else if(n.parentNode&&!wd(n))i=mo(n),n=n.parentNode;else return null}}function dO(t,e){for(let n=t,i=e;;){if(n.nodeType==3&&i<n.nodeValue.length)return{node:n,offset:i};if(n.nodeType==1&&i<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[i],i=0}else if(n.parentNode&&!wd(n))i=mo(n)+1,n=n.parentNode;else return null}}class Qt{constructor(e,n,i=!0){this.node=e,this.offset=n,this.precise=i}static before(e,n){return new Qt(e.parentNode,mo(e),n)}static after(e,n){return new Qt(e.parentNode,mo(e)+1,n)}}const T1=[];class Ke{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let n=this.posAtStart;for(let i of this.children){if(i==e)return n;n+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,n){if(this.flags&2){let i=this.dom,r=null,s;for(let o of this.children){if(o.flags&7){if(!o.dom&&(s=r?r.nextSibling:i.firstChild)){let l=Ke.get(s);(!l||!l.parent&&l.canReuseDOM(o))&&o.reuseDOM(s)}o.sync(e,n),o.flags&=-8}if(s=r?r.nextSibling:i.firstChild,n&&!n.written&&n.node==i&&s!=o.dom&&(n.written=!0),o.dom.parentNode==i)for(;s&&s!=o.dom;)s=ax(s);else i.insertBefore(o.dom,s);r=o.dom}for(s=r?r.nextSibling:i.firstChild,s&&n&&n.node==i&&(n.written=!0);s;)s=ax(s)}else if(this.flags&1)for(let i of this.children)i.flags&7&&(i.sync(e,n),i.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,n){let i;if(e==this.dom)i=this.dom.childNodes[n];else{let r=lr(e)==0?0:n==0?-1:1;for(;;){let s=e.parentNode;if(s==this.dom)break;r==0&&s.firstChild!=s.lastChild&&(e==s.firstChild?r=-1:r=1),e=s}r<0?i=e:i=e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!Ke.get(i);)i=i.nextSibling;if(!i)return this.length;for(let r=0,s=0;;r++){let o=this.children[r];if(o.dom==i)return s;s+=o.length+o.breakAfter}}domBoundsAround(e,n,i=0){let r=-1,s=-1,o=-1,l=-1;for(let a=0,u=i,c=i;a<this.children.length;a++){let h=this.children[a],f=u+h.length;if(u<e&&f>n)return h.domBoundsAround(e,n,u);if(f>=e&&r==-1&&(r=a,s=u),u>n&&h.dom.parentNode==this.dom){o=a,l=c;break}c=f,u=f+h.breakAfter}return{from:s,to:l<0?i+this.length:l,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let n=this.parent;n;n=n.parent){if(e&&(n.flags|=2),n.flags&1)return;n.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let n=e.parent;if(!n)return e;e=n}}replaceChildren(e,n,i=T1){this.markDirty();for(let r=e;r<n;r++){let s=this.children[r];s.parent==this&&i.indexOf(s)<0&&s.destroy()}i.length<250?this.children.splice(e,n-e,...i):this.children=[].concat(this.children.slice(0,e),i,this.children.slice(n));for(let r=0;r<i.length;r++)i[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new pO(this.children,e,this.children.length)}childPos(e,n=1){return this.childCursor().findPos(e,n)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,n,i,r,s,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ke.prototype.breakAfter=0;function ax(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class pO{constructor(e,n,i){this.children=e,this.pos=n,this.i=i,this.off=0}findPos(e,n=1){for(;;){if(e>this.pos||e==this.pos&&(n>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}function mO(t,e,n,i,r,s,o,l,a){let{children:u}=t,c=u.length?u[e]:null,h=s.length?s[s.length-1]:null,f=h?h.breakAfter:o;if(!(e==i&&c&&!o&&!f&&s.length<2&&c.merge(n,r,s.length?h:null,n==0,l,a))){if(i<u.length){let d=u[i];d&&(r<d.length||d.breakAfter&&(h!=null&&h.breakAfter))?(e==i&&(d=d.split(r),r=0),!f&&h&&d.merge(0,r,h,!0,0,a)?s[s.length-1]=d:((r||d.children.length&&!d.children[0].length)&&d.merge(0,r,null,!1,0,a),s.push(d))):d!=null&&d.breakAfter&&(h?h.breakAfter=1:o=1),i++}for(c&&(c.breakAfter=o,n>0&&(!o&&s.length&&c.merge(n,c.length,s[0],!1,l,0)?c.breakAfter=s.shift().breakAfter:(n<c.length||c.children.length&&c.children[c.children.length-1].length==0)&&c.merge(n,c.length,null,!1,l,0),e++));e<i&&s.length;)if(u[i-1].become(s[s.length-1]))i--,s.pop(),a=s.length?0:l;else if(u[e].become(s[0]))e++,s.shift(),l=s.length?0:a;else break;!s.length&&e&&i<u.length&&!u[e-1].breakAfter&&u[i].merge(0,0,u[e-1],!1,l,a)&&e--,(e<i||s.length)&&t.replaceChildren(e,i,s)}}function gO(t,e,n,i,r,s){let o=t.childCursor(),{i:l,off:a}=o.findPos(n,1),{i:u,off:c}=o.findPos(e,-1),h=e-n;for(let f of i)h+=f.length;t.length+=h,mO(t,u,c,l,a,i,0,r,s)}let bn=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Zy=typeof document<"u"?document:{documentElement:{style:{}}};const e0=/Edge\/(\d+)/.exec(bn.userAgent),yO=/MSIE \d/.test(bn.userAgent),t0=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(bn.userAgent),kp=!!(yO||t0||e0),ux=!kp&&/gecko\/(\d+)/i.test(bn.userAgent),jm=!kp&&/Chrome\/(\d+)/.exec(bn.userAgent),n5="webkitFontSmoothing"in Zy.documentElement.style,vO=!kp&&/Apple Computer/.test(bn.vendor),cx=vO&&(/Mobile\/\w+/.test(bn.userAgent)||bn.maxTouchPoints>2);var G={mac:cx||/Mac/.test(bn.platform),windows:/Win/.test(bn.platform),linux:/Linux|X11/.test(bn.platform),ie:kp,ie_version:yO?Zy.documentMode||6:t0?+t0[1]:e0?+e0[1]:0,gecko:ux,gecko_version:ux?+(/Firefox\/(\d+)/.exec(bn.userAgent)||[0,0])[1]:0,chrome:!!jm,chrome_version:jm?+jm[1]:0,ios:cx,android:/Android\b/.test(bn.userAgent),safari:vO,webkit_version:n5?+(/\bAppleWebKit\/(\d+)/.exec(bn.userAgent)||[0,0])[1]:0,tabSize:Zy.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};const i5=256;class Ii extends Ke{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,n){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(n&&n.node==this.dom&&(n.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,n,i){return this.flags&8||i&&(!(i instanceof Ii)||this.length-(n-e)+i.length>i5||i.flags&8)?!1:(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(n),this.markDirty(),!0)}split(e){let n=new Ii(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),n.flags|=this.flags&8,n}localPosFromDOM(e,n){return e==this.dom?n:n?this.text.length:0}domAtPos(e){return new Qt(this.dom,e)}domBoundsAround(e,n,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,n){return r5(this.dom,e,n)}}class Mr extends Ke{constructor(e,n=[],i=0){super(),this.mark=e,this.children=n,this.length=i;for(let r of n)r.setParent(this)}setAttrs(e){if(cO(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let n in this.mark.attrs)e.setAttribute(n,this.mark.attrs[n]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,n){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,n)}merge(e,n,i,r,s,o){return i&&(!(i instanceof Mr&&i.mark.eq(this.mark))||e&&s<=0||n<this.length&&o<=0)?!1:(gO(this,e,n,i?i.children.slice():[],s-1,o-1),this.markDirty(),!0)}split(e){let n=[],i=0,r=-1,s=0;for(let l of this.children){let a=i+l.length;a>e&&n.push(i<e?l.split(e-i):l),r<0&&i>=e&&(r=s),i=a,s++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new Mr(this.mark,n,o)}domAtPos(e){return wO(this,e)}coordsAt(e,n){return SO(this,e,n)}}function r5(t,e,n){let i=t.nodeValue.length;e>i&&(e=i);let r=e,s=e,o=0;e==0&&n<0||e==i&&n>=0?G.chrome||G.gecko||(e?(r--,o=1):s<i&&(s++,o=-1)):n<0?r--:s<i&&s++;let l=go(t,r,s).getClientRects();if(!l.length)return null;let a=l[(o?o<0:n>=0)?0:l.length-1];return G.safari&&!o&&a.width==0&&(a=Array.prototype.find.call(l,u=>u.width)||a),o?fc(a,o<0):a||null}class ls extends Ke{static create(e,n,i){return new ls(e,n,i)}constructor(e,n,i){super(),this.widget=e,this.length=n,this.side=i,this.prevWidget=null}split(e){let n=ls.create(this.widget,this.length-e,this.side);return this.length-=e,n}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,n,i,r,s,o){return i&&(!(i instanceof ls)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}become(e){return e instanceof ls&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Re.empty;let e=this;for(;e.parent;)e=e.parent;let{view:n}=e,i=n&&n.state.doc,r=this.posAtStart;return i?i.slice(r,r+this.length):Re.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Qt.before(this.dom):Qt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);if(i)return i;let r=this.dom.getClientRects(),s=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let l=o?r.length-1:0;s=r[l],!(e>0?l==0:l==r.length-1||s.top<s.bottom);l+=o?-1:1);return fc(s,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class jl extends Ke{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof jl&&e.side==this.side}split(){return new jl(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Qt.before(this.dom):Qt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Re.empty}get isHidden(){return!0}}Ii.prototype.children=ls.prototype.children=jl.prototype.children=T1;function wO(t,e){let n=t.dom,{children:i}=t,r=0;for(let s=0;r<i.length;r++){let o=i[r],l=s+o.length;if(!(l==s&&o.getSide()<=0)){if(e>s&&e<l&&o.dom.parentNode==n)return o.domAtPos(e-s);if(e<=s)break;s=l}}for(let s=r;s>0;s--){let o=i[s-1];if(o.dom.parentNode==n)return o.domAtPos(o.length)}for(let s=r;s<i.length;s++){let o=i[s];if(o.dom.parentNode==n)return o.domAtPos(0)}return new Qt(n,0)}function bO(t,e,n){let i,{children:r}=t;n>0&&e instanceof Mr&&r.length&&(i=r[r.length-1])instanceof Mr&&i.mark.eq(e.mark)?bO(i,e.children[0],n-1):(r.push(e),e.setParent(t)),t.length+=e.length}function SO(t,e,n){let i=null,r=-1,s=null,o=-1;function l(u,c){for(let h=0,f=0;h<u.children.length&&f<=c;h++){let d=u.children[h],p=f+d.length;p>=c&&(d.children.length?l(d,c-f):(!s||s.isHidden&&(n>0||o5(s,d)))&&(p>c||f==p&&d.getSide()>0)?(s=d,o=c-f):(f<c||f==p&&d.getSide()<0&&!d.isHidden)&&(i=d,r=c-f)),f=p}}l(t,e);let a=(n<0?i:s)||i||s;return a?a.coordsAt(Math.max(0,a==i?r:o),n):s5(t)}function s5(t){let e=t.dom.lastChild;if(!e)return t.dom.getBoundingClientRect();let n=Ul(e);return n[n.length-1]||null}function o5(t,e){let n=t.coordsAt(0,1),i=e.coordsAt(0,1);return n&&i&&i.top<n.bottom}function n0(t,e){for(let n in t)n=="class"&&e.class?e.class+=" "+t.class:n=="style"&&e.style?e.style+=";"+t.style:e[n]=t[n];return e}const hx=Object.create(null);function bd(t,e,n){if(t==e)return!0;t||(t=hx),e||(e=hx);let i=Object.keys(t),r=Object.keys(e);if(i.length-(n&&i.indexOf(n)>-1?1:0)!=r.length-(n&&r.indexOf(n)>-1?1:0))return!1;for(let s of i)if(s!=n&&(r.indexOf(s)==-1||t[s]!==e[s]))return!1;return!0}function i0(t,e,n){let i=!1;if(e)for(let r in e)n&&r in n||(i=!0,r=="style"?t.style.cssText="":t.removeAttribute(r));if(n)for(let r in n)e&&e[r]==n[r]||(i=!0,r=="style"?t.style.cssText=n[r]:t.setAttribute(r,n[r]));return i}function l5(t){let e=Object.create(null);for(let n=0;n<t.attributes.length;n++){let i=t.attributes[n];e[i.name]=i.value}return e}class zr{eq(e){return!1}updateDOM(e,n){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,n,i){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var an=function(t){return t[t.Text=0]="Text",t[t.WidgetBefore=1]="WidgetBefore",t[t.WidgetAfter=2]="WidgetAfter",t[t.WidgetRange=3]="WidgetRange",t}(an||(an={}));class ne extends po{constructor(e,n,i,r){super(),this.startSide=e,this.endSide=n,this.widget=i,this.spec=r}get heightRelevant(){return!1}static mark(e){return new dc(e)}static widget(e){let n=Math.max(-1e4,Math.min(1e4,e.side||0)),i=!!e.block;return n+=i&&!e.inlineOrder?n>0?3e8:-4e8:n>0?1e8:-1e8,new Is(e,n,n,i,e.widget||null,!1)}static replace(e){let n=!!e.block,i,r;if(e.isBlockGap)i=-5e8,r=4e8;else{let{start:s,end:o}=xO(e,n);i=(s?n?-3e8:-1:5e8)-1,r=(o?n?2e8:1:-6e8)+1}return new Is(e,i,r,n,e.widget||null,!0)}static line(e){return new pc(e)}static set(e,n=!1){return Me.of(e,n)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ne.none=Me.empty;class dc extends ne{constructor(e){let{start:n,end:i}=xO(e);super(n?-1:5e8,i?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var n,i;return this==e||e instanceof dc&&this.tagName==e.tagName&&(this.class||((n=this.attrs)===null||n===void 0?void 0:n.class))==(e.class||((i=e.attrs)===null||i===void 0?void 0:i.class))&&bd(this.attrs,e.attrs,"class")}range(e,n=e){if(e>=n)throw new RangeError("Mark decorations may not be empty");return super.range(e,n)}}dc.prototype.point=!1;class pc extends ne{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof pc&&this.spec.class==e.spec.class&&bd(this.spec.attributes,e.spec.attributes)}range(e,n=e){if(n!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,n)}}pc.prototype.mapMode=on.TrackBefore;pc.prototype.point=!0;class Is extends ne{constructor(e,n,i,r,s,o){super(n,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?n<=0?on.TrackBefore:on.TrackAfter:on.TrackDel}get type(){return this.startSide!=this.endSide?an.WidgetRange:this.startSide<=0?an.WidgetBefore:an.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Is&&a5(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,n=e){if(this.isReplace&&(e>n||e==n&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&n!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,n)}}Is.prototype.point=!0;function xO(t,e=!1){let{inclusiveStart:n,inclusiveEnd:i}=t;return n==null&&(n=t.inclusive),i==null&&(i=t.inclusive),{start:n??e,end:i??e}}function a5(t,e){return t==e||!!(t&&e&&t.compare(e))}function Zh(t,e,n,i=0){let r=n.length-1;r>=0&&n[r]+i>=t?n[r]=Math.max(n[r],e):n.push(t,e)}class St extends Ke{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,n,i,r,s,o){if(i){if(!(i instanceof St))return!1;this.dom||i.transferDOM(this)}return r&&this.setDeco(i?i.attrs:null),gO(this,e,n,i?i.children.slice():[],s,o),!0}split(e){let n=new St;if(n.breakAfter=this.breakAfter,this.length==0)return n;let{i,off:r}=this.childPos(e);r&&(n.append(this.children[i].split(r),0),this.children[i].merge(r,this.children[i].length,null,!1,0,0),i++);for(let s=i;s<this.children.length;s++)n.append(this.children[s],0);for(;i>0&&this.children[i-1].length==0;)this.children[--i].destroy();return this.children.length=i,this.markDirty(),this.length=e,n}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){bd(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,n){bO(this,e,n)}addLineDeco(e){let n=e.spec.attributes,i=e.spec.class;n&&(this.attrs=n0(n,this.attrs||{})),i&&(this.attrs=n0({class:i},this.attrs||{}))}domAtPos(e){return wO(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,n){var i;this.dom?this.flags&4&&(cO(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(i0(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,n);let r=this.dom.lastChild;for(;r&&Ke.get(r)instanceof Mr;)r=r.lastChild;if(!r||!this.length||r.nodeName!="BR"&&((i=Ke.get(r))===null||i===void 0?void 0:i.isEditable)==!1&&(!G.ios||!this.children.some(s=>s instanceof Ii))){let s=document.createElement("BR");s.cmIgnore=!0,this.dom.appendChild(s)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,n;for(let i of this.children){if(!(i instanceof Ii)||/[^ -~]/.test(i.text))return null;let r=Ul(i.dom);if(r.length!=1)return null;e+=r[0].width,n=r[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:n}:null}coordsAt(e,n){let i=SO(this,e,n);if(!this.children.length&&i&&this.parent){let{heightOracle:r}=this.parent.view.viewState,s=i.bottom-i.top;if(Math.abs(s-r.lineHeight)<2&&r.textHeight<s){let o=(s-r.textHeight)/2;return{top:i.top+o,bottom:i.bottom-o,left:i.left,right:i.left}}}return i}become(e){return e instanceof St&&this.children.length==0&&e.children.length==0&&bd(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,n){for(let i=0,r=0;i<e.children.length;i++){let s=e.children[i],o=r+s.length;if(o>=n){if(s instanceof St)return s;if(o>n)break}r=o+s.breakAfter}return null}}class Er extends Ke{constructor(e,n,i){super(),this.widget=e,this.length=n,this.deco=i,this.breakAfter=0,this.prevWidget=null}merge(e,n,i,r,s,o){return i&&(!(i instanceof Er)||!this.widget.compare(i.widget)||e>0&&s<=0||n<this.length&&o<=0)?!1:(this.length=e+(i?i.length:0)+(this.length-n),!0)}domAtPos(e){return e==0?Qt.before(this.dom):Qt.after(this.dom,e==this.length)}split(e){let n=this.length-e;this.length=e;let i=new Er(this.widget,n,this.deco);return i.breakAfter=this.breakAfter,i}get children(){return T1}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Re.empty}domBoundsAround(){return null}become(e){return e instanceof Er&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,n){let i=this.widget.coordsAt(this.dom,e,n);return i||(this.widget instanceof r0?null:fc(this.dom.getBoundingClientRect(),this.length?e==0:n<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:n,endSide:i}=this.deco;return n==i?!1:e<0?n<0:i>0}}class r0 extends zr{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class su{constructor(e,n,i,r){this.doc=e,this.pos=n,this.end=i,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=n}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Er&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new St),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(ih(new jl(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Er)&&this.getLine()}buildText(e,n,i){for(;e>0;){if(this.textOff==this.text.length){let{value:s,lineBreak:o,done:l}=this.cursor.next(this.skip);if(this.skip=0,l)throw new Error("Ran out of text content when drawing inline views");if(o){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=s,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(n.slice(n.length-i)),this.getLine().append(ih(new Ii(this.text.slice(this.textOff,this.textOff+r)),n),i),this.atCursorPos=!0,this.textOff+=r,e-=r,i=0}}span(e,n,i,r){this.buildText(n-e,i,r),this.pos=n,this.openStart<0&&(this.openStart=r)}point(e,n,i,r,s,o){if(this.disallowBlockEffectsFor[o]&&i instanceof Is){if(i.block)throw new RangeError("Block decorations may not be specified via plugins");if(n>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let l=n-e;if(i instanceof Is)if(i.block)i.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Er(i.widget||Vl.block,l,i));else{let a=ls.create(i.widget||Vl.inline,l,l?0:i.startSide),u=this.atCursorPos&&!a.isEditable&&s<=r.length&&(e<n||i.startSide>0),c=!a.isEditable&&(e<n||s>r.length||i.startSide<=0),h=this.getLine();this.pendingBuffer==2&&!u&&!a.isEditable&&(this.pendingBuffer=0),this.flushBuffer(r),u&&(h.append(ih(new jl(1),r),s),s=r.length+Math.max(0,s-r.length)),h.append(ih(a,r),s),this.atCursorPos=c,this.pendingBuffer=c?e<n||s>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);l&&(this.textOff+l<=this.text.length?this.textOff+=l:(this.skip+=l-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=n),this.openStart<0&&(this.openStart=s)}static build(e,n,i,r,s){let o=new su(e,n,i,s);return o.openEnd=Me.spans(r,n,i,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function ih(t,e){for(let n of e)t=new Mr(n,[t],t.length);return t}class Vl extends zr{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Vl.inline=new Vl("span");Vl.block=new Vl("div");var rt=function(t){return t[t.LTR=0]="LTR",t[t.RTL=1]="RTL",t}(rt||(rt={}));const yo=rt.LTR,O1=rt.RTL;function kO(t){let e=[];for(let n=0;n<t.length;n++)e.push(1<<+t[n]);return e}const u5=kO("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),c5=kO("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),s0=Object.create(null),Ni=[];for(let t of["()","[]","{}"]){let e=t.charCodeAt(0),n=t.charCodeAt(1);s0[e]=n,s0[n]=-e}function CO(t){return t<=247?u5[t]:1424<=t&&t<=1524?2:1536<=t&&t<=1785?c5[t-1536]:1774<=t&&t<=2220?4:8192<=t&&t<=8204?256:64336<=t&&t<=65023?4:1}const h5=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class as{get dir(){return this.level%2?O1:yo}constructor(e,n,i){this.from=e,this.to=n,this.level=i}side(e,n){return this.dir==n==e?this.to:this.from}forward(e,n){return e==(this.dir==n)}static find(e,n,i,r){let s=-1;for(let o=0;o<e.length;o++){let l=e[o];if(l.from<=n&&l.to>=n){if(l.level==i)return o;(s<0||(r!=0?r<0?l.from<n:l.to>n:e[s].level>l.level))&&(s=o)}}if(s<0)throw new RangeError("Index out of range");return s}}function _O(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],r=e[n];if(i.from!=r.from||i.to!=r.to||i.direction!=r.direction||!_O(i.inner,r.inner))return!1}return!0}const Qe=[];function f5(t,e,n,i,r){for(let s=0;s<=i.length;s++){let o=s?i[s-1].to:e,l=s<i.length?i[s].from:n,a=s?256:r;for(let u=o,c=a,h=a;u<l;u++){let f=CO(t.charCodeAt(u));f==512?f=c:f==8&&h==4&&(f=16),Qe[u]=f==4?2:f,f&7&&(h=f),c=f}for(let u=o,c=a,h=a;u<l;u++){let f=Qe[u];if(f==128)u<l-1&&c==Qe[u+1]&&c&24?f=Qe[u]=c:Qe[u]=256;else if(f==64){let d=u+1;for(;d<l&&Qe[d]==64;)d++;let p=u&&c==8||d<n&&Qe[d]==8?h==1?1:8:256;for(let g=u;g<d;g++)Qe[g]=p;u=d-1}else f==8&&h==1&&(Qe[u]=1);c=f,f&7&&(h=f)}}}function d5(t,e,n,i,r){let s=r==1?2:1;for(let o=0,l=0,a=0;o<=i.length;o++){let u=o?i[o-1].to:e,c=o<i.length?i[o].from:n;for(let h=u,f,d,p;h<c;h++)if(d=s0[f=t.charCodeAt(h)])if(d<0){for(let g=l-3;g>=0;g-=3)if(Ni[g+1]==-d){let w=Ni[g+2],m=w&2?r:w&4?w&1?s:r:0;m&&(Qe[h]=Qe[Ni[g]]=m),l=g;break}}else{if(Ni.length==189)break;Ni[l++]=h,Ni[l++]=f,Ni[l++]=a}else if((p=Qe[h])==2||p==1){let g=p==r;a=g?0:1;for(let w=l-3;w>=0;w-=3){let m=Ni[w+2];if(m&2)break;if(g)Ni[w+2]|=2;else{if(m&4)break;Ni[w+2]|=4}}}}}function p5(t,e,n,i){for(let r=0,s=i;r<=n.length;r++){let o=r?n[r-1].to:t,l=r<n.length?n[r].from:e;for(let a=o;a<l;){let u=Qe[a];if(u==256){let c=a+1;for(;;)if(c==l){if(r==n.length)break;c=n[r++].to,l=r<n.length?n[r].from:e}else if(Qe[c]==256)c++;else break;let h=s==1,f=(c<e?Qe[c]:i)==1,d=h==f?h?1:2:i;for(let p=c,g=r,w=g?n[g-1].to:t;p>a;)p==w&&(p=n[--g].from,w=g?n[g-1].to:t),Qe[--p]=d;a=c}else s=u,a++}}}function o0(t,e,n,i,r,s,o){let l=i%2?2:1;if(i%2==r%2)for(let a=e,u=0;a<n;){let c=!0,h=!1;if(u==s.length||a<s[u].from){let g=Qe[a];g!=l&&(c=!1,h=g==16)}let f=!c&&l==1?[]:null,d=c?i:i+1,p=a;e:for(;;)if(u<s.length&&p==s[u].from){if(h)break e;let g=s[u];if(!c)for(let w=g.to,m=u+1;;){if(w==n)break e;if(m<s.length&&s[m].from==w)w=s[m++].to;else{if(Qe[w]==l)break e;break}}if(u++,f)f.push(g);else{g.from>a&&o.push(new as(a,g.from,d));let w=g.direction==yo!=!(d%2);l0(t,w?i+1:i,r,g.inner,g.from,g.to,o),a=g.to}p=g.to}else{if(p==n||(c?Qe[p]!=l:Qe[p]==l))break;p++}f?o0(t,a,p,i+1,r,f,o):a<p&&o.push(new as(a,p,d)),a=p}else for(let a=n,u=s.length;a>e;){let c=!0,h=!1;if(!u||a>s[u-1].to){let g=Qe[a-1];g!=l&&(c=!1,h=g==16)}let f=!c&&l==1?[]:null,d=c?i:i+1,p=a;e:for(;;)if(u&&p==s[u-1].to){if(h)break e;let g=s[--u];if(!c)for(let w=g.from,m=u;;){if(w==e)break e;if(m&&s[m-1].to==w)w=s[--m].from;else{if(Qe[w-1]==l)break e;break}}if(f)f.push(g);else{g.to<a&&o.push(new as(g.to,a,d));let w=g.direction==yo!=!(d%2);l0(t,w?i+1:i,r,g.inner,g.from,g.to,o),a=g.from}p=g.from}else{if(p==e||(c?Qe[p-1]!=l:Qe[p-1]==l))break;p--}f?o0(t,p,a,i+1,r,f,o):p<a&&o.push(new as(p,a,d)),a=p}}function l0(t,e,n,i,r,s,o){let l=e%2?2:1;f5(t,r,s,i,l),d5(t,r,s,i,l),p5(r,s,i,l),o0(t,r,s,e,n,i,o)}function m5(t,e,n){if(!t)return[new as(0,0,e==O1?1:0)];if(e==yo&&!n.length&&!h5.test(t))return EO(t.length);if(n.length)for(;t.length>Qe.length;)Qe[Qe.length]=256;let i=[],r=e==yo?0:1;return l0(t,r,r,n,0,t.length,i),i}function EO(t){return[new as(0,t,0)]}let AO="";function g5(t,e,n,i,r){var s;let o=i.head-t.from,l=as.find(e,o,(s=i.bidiLevel)!==null&&s!==void 0?s:-1,i.assoc),a=e[l],u=a.side(r,n);if(o==u){let f=l+=r?1:-1;if(f<0||f>=e.length)return null;a=e[l=f],o=a.side(!r,n),u=a.side(r,n)}let c=zt(t.text,o,a.forward(r,n));(c<a.from||c>a.to)&&(c=u),AO=t.text.slice(Math.min(o,c),Math.max(o,c));let h=l==(r?e.length-1:0)?null:e[l+(r?1:-1)];return h&&c==u&&h.level+(r?0:1)<a.level?z.cursor(h.side(!r,n)+t.from,h.forward(r,n)?1:-1,h.level):z.cursor(c+t.from,a.forward(r,n)?-1:1,a.level)}function y5(t,e,n){for(let i=e;i<n;i++){let r=CO(t.charCodeAt(i));if(r==1)return yo;if(r==2||r==4)return O1}return yo}const IO=X.define(),TO=X.define(),OO=X.define(),DO=X.define(),a0=X.define(),MO=X.define(),RO=X.define(),D1=X.define(),M1=X.define(),LO=X.define({combine:t=>t.some(e=>e)}),NO=X.define({combine:t=>t.some(e=>e)}),BO=X.define();class Sl{constructor(e,n="nearest",i="nearest",r=5,s=5,o=!1){this.range=e,this.y=n,this.x=i,this.yMargin=r,this.xMargin=s,this.isSnapshot=o}map(e){return e.empty?this:new Sl(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Sl(z.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const rh=we.define({map:(t,e)=>t.map(e)}),PO=we.define();function kn(t,e,n){let i=t.facet(DO);i.length?i[0](e):window.onerror&&window.onerror(String(e),n,void 0,void 0,e)||(n?console.error(n+":",e):console.error(e))}const xr=X.define({combine:t=>t.length?t[0]:!0});let v5=0;const rl=X.define({combine(t){return t.filter((e,n)=>{for(let i=0;i<n;i++)if(t[i].plugin==e.plugin)return!1;return!0})}});class wt{constructor(e,n,i,r,s){this.id=e,this.create=n,this.domEventHandlers=i,this.domEventObservers=r,this.baseExtensions=s(this),this.extension=this.baseExtensions.concat(rl.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(rl.of({plugin:this,arg:e}))}static define(e,n){const{eventHandlers:i,eventObservers:r,provide:s,decorations:o}=n||{};return new wt(v5++,e,i,r,l=>{let a=[];return o&&a.push(zu.of(u=>{let c=u.plugin(l);return c?o(c):ne.none})),s&&a.push(s(l)),a})}static fromClass(e,n){return wt.define((i,r)=>new e(i,r),n)}}class Vm{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let n=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(n)}catch(i){if(kn(n.state,i,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(n){kn(e.state,n,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var n;if(!((n=this.value)===null||n===void 0)&&n.destroy)try{this.value.destroy()}catch(i){kn(e.state,i,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const FO=X.define(),R1=X.define(),zu=X.define(),zO=X.define(),L1=X.define(),UO=X.define();function fx(t,e){let n=t.state.facet(UO);if(!n.length)return n;let i=n.map(s=>s instanceof Function?s(t):s),r=[];return Me.spans(i,e.from,e.to,{point(){},span(s,o,l,a){let u=s-e.from,c=o-e.from,h=r;for(let f=l.length-1;f>=0;f--,a--){let d=l[f].spec.bidiIsolate,p;if(d==null&&(d=y5(e.text,u,c)),a>0&&h.length&&(p=h[h.length-1]).to==u&&p.direction==d)p.to=c,h=p.inner;else{let g={from:u,to:c,direction:d,inner:[]};h.push(g),h=g.inner}}}}),r}const jO=X.define();function N1(t){let e=0,n=0,i=0,r=0;for(let s of t.state.facet(jO)){let o=s(t);o&&(o.left!=null&&(e=Math.max(e,o.left)),o.right!=null&&(n=Math.max(n,o.right)),o.top!=null&&(i=Math.max(i,o.top)),o.bottom!=null&&(r=Math.max(r,o.bottom)))}return{left:e,right:n,top:i,bottom:r}}const za=X.define();class ui{constructor(e,n,i,r){this.fromA=e,this.toA=n,this.fromB=i,this.toB=r}join(e){return new ui(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let n=e.length,i=this;for(;n>0;n--){let r=e[n-1];if(!(r.fromA>i.toA)){if(r.toA<i.fromA)break;i=i.join(r),e.splice(n-1,1)}}return e.splice(n,0,i),e}static extendWithRanges(e,n){if(n.length==0)return e;let i=[];for(let r=0,s=0,o=0,l=0;;r++){let a=r==e.length?null:e[r],u=o-l,c=a?a.fromB:1e9;for(;s<n.length&&n[s]<c;){let h=n[s],f=n[s+1],d=Math.max(l,h),p=Math.min(c,f);if(d<=p&&new ui(d+u,p+u,d,p).addToSet(i),f>c)break;s+=2}if(!a)return i;new ui(a.fromA,a.toA,a.fromB,a.toB).addToSet(i),o=a.toA,l=a.toB}}}class Sd{constructor(e,n,i){this.view=e,this.state=n,this.transactions=i,this.flags=0,this.startState=e.state,this.changes=At.empty(this.startState.doc.length);for(let s of i)this.changes=this.changes.compose(s.changes);let r=[];this.changes.iterChangedRanges((s,o,l,a)=>r.push(new ui(s,o,l,a))),this.changedRanges=r}static create(e,n,i){return new Sd(e,n,i)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class dx extends Ke{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ne.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new St],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ui(0,0,0,e.state.doc.length)],0,null)}update(e){var n;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every(({fromA:u,toA:c})=>c<this.minWidthFrom||u>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((n=this.domChanged)===null||n===void 0)&&n.newSel?r=this.domChanged.newSel.head:!_5(e.changes,this.hasComposition)&&!e.selectionSet&&(r=e.state.selection.main.head));let s=r>-1?b5(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:u,to:c}=this.hasComposition;i=new ui(u,c,e.changes.mapPos(u,-1),e.changes.mapPos(c,1)).addToSet(i.slice())}this.hasComposition=s?{from:s.range.fromB,to:s.range.toB}:null,(G.ie||G.chrome)&&!s&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,l=this.updateDeco(),a=k5(o,l,e.changes);return i=ui.extendWithRanges(i,a),!(this.flags&7)&&i.length==0?!1:(this.updateInner(i,e.startState.doc.length,s),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,n,i){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,n,i);let{observer:r}=this.view;r.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let o=G.chrome||G.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,o),this.flags&=-8,o&&(o.written||r.selectionRange.focusNode!=o.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(o=>o.flags&=-9);let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof Er&&o.widget instanceof r0&&s.push(o.dom);r.updateGaps(s)}updateChildren(e,n,i){let r=i?i.range.addToSet(e.slice()):e,s=this.childCursor(n);for(let o=r.length-1;;o--){let l=o>=0?r[o]:null;if(!l)break;let{fromA:a,toA:u,fromB:c,toB:h}=l,f,d,p,g;if(i&&i.range.fromB<h&&i.range.toB>c){let x=su.build(this.view.state.doc,c,i.range.fromB,this.decorations,this.dynamicDecorationMap),_=su.build(this.view.state.doc,i.range.toB,h,this.decorations,this.dynamicDecorationMap);d=x.breakAtStart,p=x.openStart,g=_.openEnd;let b=this.compositionView(i);_.breakAtStart?b.breakAfter=1:_.content.length&&b.merge(b.length,b.length,_.content[0],!1,_.openStart,0)&&(b.breakAfter=_.content[0].breakAfter,_.content.shift()),x.content.length&&b.merge(0,0,x.content[x.content.length-1],!0,0,x.openEnd)&&x.content.pop(),f=x.content.concat(b).concat(_.content)}else({content:f,breakAtStart:d,openStart:p,openEnd:g}=su.build(this.view.state.doc,c,h,this.decorations,this.dynamicDecorationMap));let{i:w,off:m}=s.findPos(u,1),{i:y,off:v}=s.findPos(a,-1);mO(this,y,v,w,m,f,d,p,g)}i&&this.fixCompositionDOM(i)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let n of e.transactions)for(let i of n.effects)i.is(PO)&&(this.editContextFormatting=i.value)}compositionView(e){let n=new Ii(e.text.nodeValue);n.flags|=8;for(let{deco:r}of e.marks)n=new Mr(r,[n],n.length);let i=new St;return i.append(n,0),i}fixCompositionDOM(e){let n=(s,o)=>{o.flags|=8|(o.children.some(a=>a.flags&7)?1:0),this.markedForComposition.add(o);let l=Ke.get(s);l&&l!=o&&(l.dom=null),o.setDOM(s)},i=this.childPos(e.range.fromB,1),r=this.children[i.i];n(e.line,r);for(let s=e.marks.length-1;s>=-1;s--)i=r.childPos(i.off,1),r=r.children[i.i],n(s>=0?e.marks[s].node:e.text,r)}updateSelection(e=!1,n=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let i=this.view.root.activeElement,r=i==this.dom,s=!r&&!(this.view.state.facet(xr)||this.dom.tabIndex>-1)&&Jh(this.dom,this.view.observer.selectionRange)&&!(i&&this.dom.contains(i));if(!(r||n||s))return;let o=this.forceSelection;this.forceSelection=!1;let l=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(l.anchor)),u=l.empty?a:this.moveToLine(this.domAtPos(l.head));if(G.gecko&&l.empty&&!this.hasComposition&&w5(a)){let h=document.createTextNode("");this.view.observer.ignore(()=>a.node.insertBefore(h,a.node.childNodes[a.offset]||null)),a=u=new Qt(h,0),o=!0}let c=this.view.observer.selectionRange;(o||!c.focusNode||(!ru(a.node,a.offset,c.anchorNode,c.anchorOffset)||!ru(u.node,u.offset,c.focusNode,c.focusOffset))&&!this.suppressWidgetCursorChange(c,l))&&(this.view.observer.ignore(()=>{G.android&&G.chrome&&this.dom.contains(c.focusNode)&&C5(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=Fu(this.view.root);if(h)if(l.empty){if(G.gecko){let f=S5(a.node,a.offset);if(f&&f!=3){let d=(f==1?fO:dO)(a.node,a.offset);d&&(a=new Qt(d.node,d.offset))}}h.collapse(a.node,a.offset),l.bidiLevel!=null&&h.caretBidiLevel!==void 0&&(h.caretBidiLevel=l.bidiLevel)}else if(h.extend){h.collapse(a.node,a.offset);try{h.extend(u.node,u.offset)}catch{}}else{let f=document.createRange();l.anchor>l.head&&([a,u]=[u,a]),f.setEnd(u.node,u.offset),f.setStart(a.node,a.offset),h.removeAllRanges(),h.addRange(f)}s&&this.view.root.activeElement==this.dom&&(this.dom.blur(),i&&i.focus())}),this.view.observer.setSelectionRange(a,u)),this.impreciseAnchor=a.precise?null:new Qt(c.anchorNode,c.anchorOffset),this.impreciseHead=u.precise?null:new Qt(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,n){return this.hasComposition&&n.empty&&ru(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==n.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,n=e.state.selection.main,i=Fu(e.root),{anchorNode:r,anchorOffset:s}=e.observer.selectionRange;if(!i||!n.empty||!n.assoc||!i.modify)return;let o=St.find(this,n.head);if(!o)return;let l=o.posAtStart;if(n.head==l||n.head==l+o.length)return;let a=this.coordsAt(n.head,-1),u=this.coordsAt(n.head,1);if(!a||!u||a.bottom>u.top)return;let c=this.domAtPos(n.head+n.assoc);i.collapse(c.node,c.offset),i.modify("move",n.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let h=e.observer.selectionRange;e.docView.posFromDOM(h.anchorNode,h.anchorOffset)!=n.from&&i.collapse(r,s)}moveToLine(e){let n=this.dom,i;if(e.node!=n)return e;for(let r=e.offset;!i&&r<n.childNodes.length;r++){let s=Ke.get(n.childNodes[r]);s instanceof St&&(i=s.domAtPos(0))}for(let r=e.offset-1;!i&&r>=0;r--){let s=Ke.get(n.childNodes[r]);s instanceof St&&(i=s.domAtPos(s.length))}return i?new Qt(i.node,i.offset,!0):e}nearest(e){for(let n=e;n;){let i=Ke.get(n);if(i&&i.rootView==this)return i;n=n.parentNode}return null}posFromDOM(e,n){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,n)+i.posAtStart}domAtPos(e){let{i:n,off:i}=this.childCursor().findPos(e,-1);for(;n<this.children.length-1;){let r=this.children[n];if(i<r.length||r instanceof St)break;n++,i=0}return this.children[n].domAtPos(i)}coordsAt(e,n){let i=null,r=0;for(let s=this.length,o=this.children.length-1;o>=0;o--){let l=this.children[o],a=s-l.breakAfter,u=a-l.length;if(a<e)break;if(u<=e&&(u<e||l.covers(-1))&&(a>e||l.covers(1))&&(!i||l instanceof St&&!(i instanceof St&&n>=0)))i=l,r=u;else if(i&&u==e&&a==e&&l instanceof Er&&Math.abs(n)<2){if(l.deco.startSide<0)break;o&&(i=null)}s=u}return i?i.coordsAt(e-r,n):null}coordsForChar(e){let{i:n,off:i}=this.childPos(e,1),r=this.children[n];if(!(r instanceof St))return null;for(;r.children.length;){let{i:l,off:a}=r.childPos(i,1);for(;;l++){if(l==r.children.length)return null;if((r=r.children[l]).length)break}i=a}if(!(r instanceof Ii))return null;let s=zt(r.text,i);if(s==i)return null;let o=go(r.dom,i,s).getClientRects();for(let l=0;l<o.length;l++){let a=o[l];if(l==o.length-1||a.top<a.bottom&&a.left<a.right)return a}return null}measureVisibleLineHeights(e){let n=[],{from:i,to:r}=e,s=this.view.contentDOM.clientWidth,o=s>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,l=-1,a=this.view.textDirection==rt.LTR;for(let u=0,c=0;c<this.children.length;c++){let h=this.children[c],f=u+h.length;if(f>r)break;if(u>=i){let d=h.dom.getBoundingClientRect();if(n.push(d.height),o){let p=h.dom.lastChild,g=p?Ul(p):[];if(g.length){let w=g[g.length-1],m=a?w.right-d.left:d.right-w.left;m>l&&(l=m,this.minWidth=s,this.minWidthFrom=u,this.minWidthTo=f)}}}u=f+h.breakAfter}return n}textDirectionAt(e){let{i:n}=this.childPos(e,1);return getComputedStyle(this.children[n].dom).direction=="rtl"?rt.RTL:rt.LTR}measureTextSize(){for(let s of this.children)if(s instanceof St){let o=s.measureTextSize();if(o)return o}let e=document.createElement("div"),n,i,r;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let s=Ul(e.firstChild)[0];n=e.getBoundingClientRect().height,i=s?s.width/27:7,r=s?s.height:n,e.remove()}),{lineHeight:n,charWidth:i,textHeight:r}}childCursor(e=this.length){let n=this.children.length;return n&&(e-=this.children[--n].length),new pO(this.children,e,n)}computeBlockGapDeco(){let e=[],n=this.view.viewState;for(let i=0,r=0;;r++){let s=r==n.viewports.length?null:n.viewports[r],o=s?s.from-1:this.length;if(o>i){let l=(n.lineBlockAt(o).bottom-n.lineBlockAt(i).top)/this.view.scaleY;e.push(ne.replace({widget:new r0(l),block:!0,inclusive:!0,isBlockGap:!0}).range(i,o))}if(!s)break;i=s.to+1}return ne.set(e)}updateDeco(){let e=1,n=this.view.state.facet(zu).map(s=>(this.dynamicDecorationMap[e++]=typeof s=="function")?s(this.view):s),i=!1,r=this.view.state.facet(zO).map((s,o)=>{let l=typeof s=="function";return l&&(i=!0),l?s(this.view):s});for(r.length&&(this.dynamicDecorationMap[e++]=i,n.push(Me.join(r))),this.decorations=[this.editContextFormatting,...n,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let u=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=u.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let u of this.view.state.facet(BO))try{if(u(this.view,e.range,e))return!0}catch(c){kn(this.view.state,c,"scroll handler")}let{range:n}=e,i=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1),r;if(!i)return;!n.empty&&(r=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(i={left:Math.min(i.left,r.left),top:Math.min(i.top,r.top),right:Math.max(i.right,r.right),bottom:Math.max(i.bottom,r.bottom)});let s=N1(this.view),o={left:i.left-s.left,top:i.top-s.top,right:i.right+s.right,bottom:i.bottom+s.bottom},{offsetWidth:l,offsetHeight:a}=this.view.scrollDOM;Xj(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,l),-l),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==rt.LTR)}}function w5(t){return t.node.nodeType==1&&t.node.firstChild&&(t.offset==0||t.node.childNodes[t.offset-1].contentEditable=="false")&&(t.offset==t.node.childNodes.length||t.node.childNodes[t.offset].contentEditable=="false")}function VO(t,e){let n=t.observer.selectionRange;if(!n.focusNode)return null;let i=fO(n.focusNode,n.focusOffset),r=dO(n.focusNode,n.focusOffset),s=i||r;if(r&&i&&r.node!=i.node){let l=Ke.get(r.node);if(!l||l instanceof Ii&&l.text!=r.node.nodeValue)s=r;else if(t.docView.lastCompositionAfterCursor){let a=Ke.get(i.node);!a||a instanceof Ii&&a.text!=i.node.nodeValue||(s=r)}}if(t.docView.lastCompositionAfterCursor=s!=i,!s)return null;let o=e-s.offset;return{from:o,to:o+s.node.nodeValue.length,node:s.node}}function b5(t,e,n){let i=VO(t,n);if(!i)return null;let{node:r,from:s,to:o}=i,l=r.nodeValue;if(/[\n\r]/.test(l)||t.state.doc.sliceString(i.from,i.to)!=l)return null;let a=e.invertedDesc,u=new ui(a.mapPos(s),a.mapPos(o),s,o),c=[];for(let h=r.parentNode;;h=h.parentNode){let f=Ke.get(h);if(f instanceof Mr)c.push({node:h,deco:f.mark});else{if(f instanceof St||h.nodeName=="DIV"&&h.parentNode==t.contentDOM)return{range:u,text:r,marks:c,line:h};if(h!=t.contentDOM)c.push({node:h,deco:new dc({inclusive:!0,attributes:l5(h),tagName:h.tagName.toLowerCase()})});else return null}}}function S5(t,e){return t.nodeType!=1?0:(e&&t.childNodes[e-1].contentEditable=="false"?1:0)|(e<t.childNodes.length&&t.childNodes[e].contentEditable=="false"?2:0)}let x5=class{constructor(){this.changes=[]}compareRange(e,n){Zh(e,n,this.changes)}comparePoint(e,n){Zh(e,n,this.changes)}boundChange(e){Zh(e,e,this.changes)}};function k5(t,e,n){let i=new x5;return Me.compare(t,e,n,i),i.changes}function C5(t,e){for(let n=t;n&&n!=e;n=n.assignedSlot||n.parentNode)if(n.nodeType==1&&n.contentEditable=="false")return!0;return!1}function _5(t,e){let n=!1;return e&&t.iterChangedRanges((i,r)=>{i<e.to&&r>e.from&&(n=!0)}),n}function E5(t,e,n=1){let i=t.charCategorizer(e),r=t.doc.lineAt(e),s=e-r.from;if(r.length==0)return z.cursor(e);s==0?n=1:s==r.length&&(n=-1);let o=s,l=s;n<0?o=zt(r.text,s,!1):l=zt(r.text,s);let a=i(r.text.slice(o,l));for(;o>0;){let u=zt(r.text,o,!1);if(i(r.text.slice(u,o))!=a)break;o=u}for(;l<r.length;){let u=zt(r.text,l);if(i(r.text.slice(l,u))!=a)break;l=u}return z.range(o+r.from,l+r.from)}function A5(t,e){return e.left>t?e.left-t:Math.max(0,t-e.right)}function I5(t,e){return e.top>t?e.top-t:Math.max(0,t-e.bottom)}function $m(t,e){return t.top<e.bottom-1&&t.bottom>e.top+1}function px(t,e){return e<t.top?{top:e,left:t.left,right:t.right,bottom:t.bottom}:t}function mx(t,e){return e>t.bottom?{top:t.top,left:t.left,right:t.right,bottom:e}:t}function u0(t,e,n){let i,r,s,o,l=!1,a,u,c,h;for(let p=t.firstChild;p;p=p.nextSibling){let g=Ul(p);for(let w=0;w<g.length;w++){let m=g[w];r&&$m(r,m)&&(m=px(mx(m,r.bottom),r.top));let y=A5(e,m),v=I5(n,m);if(y==0&&v==0)return p.nodeType==3?gx(p,e,n):u0(p,e,n);(!i||o>v||o==v&&s>y)&&(i=p,r=m,s=y,o=v,l=y?e<m.left?w>0:w<g.length-1:!0),y==0?n>m.bottom&&(!c||c.bottom<m.bottom)?(a=p,c=m):n<m.top&&(!h||h.top>m.top)&&(u=p,h=m):c&&$m(c,m)?c=mx(c,m.bottom):h&&$m(h,m)&&(h=px(h,m.top))}}if(c&&c.bottom>=n?(i=a,r=c):h&&h.top<=n&&(i=u,r=h),!i)return{node:t,offset:0};let f=Math.max(r.left,Math.min(r.right,e));if(i.nodeType==3)return gx(i,f,n);if(l&&i.contentEditable!="false")return u0(i,f,n);let d=Array.prototype.indexOf.call(t.childNodes,i)+(e>=(r.left+r.right)/2?1:0);return{node:t,offset:d}}function gx(t,e,n){let i=t.nodeValue.length,r=-1,s=1e9,o=0;for(let l=0;l<i;l++){let a=go(t,l,l+1).getClientRects();for(let u=0;u<a.length;u++){let c=a[u];if(c.top==c.bottom)continue;o||(o=e-c.left);let h=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=e&&c.right+1>=e&&h<s){let f=e>=(c.left+c.right)/2,d=f;if((G.chrome||G.gecko)&&go(t,l).getBoundingClientRect().left==c.right&&(d=!f),h<=0)return{node:t,offset:l+(d?1:0)};r=l+(d?1:0),s=h}}}return{node:t,offset:r>-1?r:o>0?t.nodeValue.length:0}}function $O(t,e,n,i=-1){var r,s;let o=t.contentDOM.getBoundingClientRect(),l=o.top+t.viewState.paddingTop,a,{docHeight:u}=t.viewState,{x:c,y:h}=e,f=h-l;if(f<0)return 0;if(f>u)return t.state.doc.length;for(let x=t.viewState.heightOracle.textHeight/2,_=!1;a=t.elementAtHeight(f),a.type!=an.Text;)for(;f=i>0?a.bottom+x:a.top-x,!(f>=0&&f<=u);){if(_)return n?null:0;_=!0,i=-i}h=l+f;let d=a.from;if(d<t.viewport.from)return t.viewport.from==0?0:n?null:yx(t,o,a,c,h);if(d>t.viewport.to)return t.viewport.to==t.state.doc.length?t.state.doc.length:n?null:yx(t,o,a,c,h);let p=t.dom.ownerDocument,g=t.root.elementFromPoint?t.root:p,w=g.elementFromPoint(c,h);w&&!t.contentDOM.contains(w)&&(w=null),w||(c=Math.max(o.left+1,Math.min(o.right-1,c)),w=g.elementFromPoint(c,h),w&&!t.contentDOM.contains(w)&&(w=null));let m,y=-1;if(w&&((r=t.docView.nearest(w))===null||r===void 0?void 0:r.isEditable)!=!1){if(p.caretPositionFromPoint){let x=p.caretPositionFromPoint(c,h);x&&({offsetNode:m,offset:y}=x)}else if(p.caretRangeFromPoint){let x=p.caretRangeFromPoint(c,h);x&&({startContainer:m,startOffset:y}=x,(!t.contentDOM.contains(m)||G.safari&&T5(m,y,c)||G.chrome&&O5(m,y,c))&&(m=void 0))}m&&(y=Math.min(lr(m),y))}if(!m||!t.docView.dom.contains(m)){let x=St.find(t.docView,d);if(!x)return f>a.top+a.height/2?a.to:a.from;({node:m,offset:y}=u0(x.dom,c,h))}let v=t.docView.nearest(m);if(!v)return null;if(v.isWidget&&((s=v.dom)===null||s===void 0?void 0:s.nodeType)==1){let x=v.dom.getBoundingClientRect();return e.y<x.top||e.y<=x.bottom&&e.x<=(x.left+x.right)/2?v.posAtStart:v.posAtEnd}else return v.localPosFromDOM(m,y)+v.posAtStart}function yx(t,e,n,i,r){let s=Math.round((i-e.left)*t.defaultCharacterWidth);if(t.lineWrapping&&n.height>t.defaultLineHeight*1.5){let l=t.viewState.heightOracle.textHeight,a=Math.floor((r-n.top-(t.defaultLineHeight-l)*.5)/l);s+=a*t.viewState.heightOracle.lineLength}let o=t.state.sliceDoc(n.from,n.to);return n.from+Yy(o,s,t.state.tabSize)}function T5(t,e,n){let i,r=t;if(t.nodeType!=3||e!=(i=t.nodeValue.length))return!1;for(;;){let s=r.nextSibling;if(s){if(s.nodeName=="BR")break;return!1}else{let o=r.parentNode;if(!o||o.nodeName=="DIV")break;r=o}}return go(t,i-1,i).getBoundingClientRect().right>n}function O5(t,e,n){if(e!=0)return!1;for(let r=t;;){let s=r.parentNode;if(!s||s.nodeType!=1||s.firstChild!=r)return!1;if(s.classList.contains("cm-line"))break;r=s}let i=t.nodeType==1?t.getBoundingClientRect():go(t,0,Math.max(t.nodeValue.length,1)).getBoundingClientRect();return n-i.left>5}function c0(t,e,n){let i=t.lineBlockAt(e);if(Array.isArray(i.type)){let r;for(let s of i.type){if(s.from>e)break;if(!(s.to<e)){if(s.from<e&&s.to>e)return s;(!r||s.type==an.Text&&(r.type!=s.type||(n<0?s.from<e:s.to>e)))&&(r=s)}}return r||i}return i}function D5(t,e,n,i){let r=c0(t,e.head,e.assoc||-1),s=!i||r.type!=an.Text||!(t.lineWrapping||r.widgetLineBreaks)?null:t.coordsAtPos(e.assoc<0&&e.head>r.from?e.head-1:e.head);if(s){let o=t.dom.getBoundingClientRect(),l=t.textDirectionAt(r.from),a=t.posAtCoords({x:n==(l==rt.LTR)?o.right-1:o.left+1,y:(s.top+s.bottom)/2});if(a!=null)return z.cursor(a,n?-1:1)}return z.cursor(n?r.to:r.from,n?-1:1)}function vx(t,e,n,i){let r=t.state.doc.lineAt(e.head),s=t.bidiSpans(r),o=t.textDirectionAt(r.from);for(let l=e,a=null;;){let u=g5(r,s,o,l,n),c=AO;if(!u){if(r.number==(n?t.state.doc.lines:1))return l;c=`
`,r=t.state.doc.line(r.number+(n?1:-1)),s=t.bidiSpans(r),u=t.visualLineSide(r,!n)}if(a){if(!a(c))return l}else{if(!i)return u;a=i(c)}l=u}}function M5(t,e,n){let i=t.state.charCategorizer(e),r=i(n);return s=>{let o=i(s);return r==lt.Space&&(r=o),r==o}}function R5(t,e,n,i){let r=e.head,s=n?1:-1;if(r==(n?t.state.doc.length:0))return z.cursor(r,e.assoc);let o=e.goalColumn,l,a=t.contentDOM.getBoundingClientRect(),u=t.coordsAtPos(r,e.assoc||-1),c=t.documentTop;if(u)o==null&&(o=u.left-a.left),l=s<0?u.top:u.bottom;else{let d=t.viewState.lineBlockAt(r);o==null&&(o=Math.min(a.right-a.left,t.defaultCharacterWidth*(r-d.from))),l=(s<0?d.top:d.bottom)+c}let h=a.left+o,f=i??t.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let p=l+(f+d)*s,g=$O(t,{x:h,y:p},!1,s);if(p<a.top||p>a.bottom||(s<0?g<r:g>r)){let w=t.docView.coordsForChar(g),m=!w||p<w.top?-1:1;return z.cursor(g,m,void 0,o)}}}function ef(t,e,n){for(;;){let i=0;for(let r of t)r.between(e-1,e+1,(s,o,l)=>{if(e>s&&e<o){let a=i||n||(e-s<o-e?-1:1);e=a<0?s:o,i=a}});if(!i)return e}}function Hm(t,e,n){let i=ef(t.state.facet(L1).map(r=>r(t)),n.from,e.head>n.from?-1:1);return i==n.from?n:z.cursor(i,i<n.from?1:-1)}const Ua="￿";class L5{constructor(e,n){this.points=e,this.text="",this.lineSeparator=n.facet(Ie.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ua}readRange(e,n){if(!e)return this;let i=e.parentNode;for(let r=e;;){this.findPointBefore(i,r);let s=this.text.length;this.readNode(r);let o=r.nextSibling;if(o==n)break;let l=Ke.get(r),a=Ke.get(o);(l&&a?l.breakAfter:(l?l.breakAfter:wd(r))||wd(o)&&(r.nodeName!="BR"||r.cmIgnore)&&this.text.length>s)&&this.lineBreak(),r=o}return this.findPointBefore(i,n),this}readTextNode(e){let n=e.nodeValue;for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,n.length));for(let i=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let s=-1,o=1,l;if(this.lineSeparator?(s=n.indexOf(this.lineSeparator,i),o=this.lineSeparator.length):(l=r.exec(n))&&(s=l.index,o=l[0].length),this.append(n.slice(i,s<0?n.length:s)),s<0)break;if(this.lineBreak(),o>1)for(let a of this.points)a.node==e&&a.pos>this.text.length&&(a.pos-=o-1);i=s+o}}readNode(e){if(e.cmIgnore)return;let n=Ke.get(e),i=n&&n.overrideDOMText;if(i!=null){this.findPointInside(e,i.length);for(let r=i.iter();!r.next().done;)r.lineBreak?this.lineBreak():this.append(r.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,n){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==n&&(i.pos=this.text.length)}findPointInside(e,n){for(let i of this.points)(e.nodeType==3?i.node==e:e.contains(i.node))&&(i.pos=this.text.length+(N5(e,i.node,i.offset)?n:0))}}function N5(t,e,n){for(;;){if(!e||n<lr(e))return!1;if(e==t)return!0;n=mo(e)+1,e=e.parentNode}}class wx{constructor(e,n){this.node=e,this.offset=n,this.pos=-1}}class B5{constructor(e,n,i,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=n>-1;let{impreciseHead:s,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&n>-1)this.newSel=null;else if(n>-1&&(this.bounds=e.docView.domBoundsAround(n,i,0))){let l=s||o?[]:z5(e),a=new L5(l,e.state);a.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=a.text,this.newSel=U5(l,this.bounds.from)}else{let l=e.observer.selectionRange,a=s&&s.node==l.focusNode&&s.offset==l.focusOffset||!Jy(e.contentDOM,l.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(l.focusNode,l.focusOffset),u=o&&o.node==l.anchorNode&&o.offset==l.anchorOffset||!Jy(e.contentDOM,l.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(l.anchorNode,l.anchorOffset),c=e.viewport;if((G.ios||G.chrome)&&e.state.selection.main.empty&&a!=u&&(c.from>0||c.to<e.state.doc.length)){let h=Math.min(a,u),f=Math.max(a,u),d=c.from-h,p=c.to-f;(d==0||d==1||h==0)&&(p==0||p==-1||f==e.state.doc.length)&&(a=0,u=e.state.doc.length)}this.newSel=z.single(u,a)}}}function HO(t,e){let n,{newSel:i}=e,r=t.state.selection.main,s=t.inputState.lastKeyTime>Date.now()-100?t.inputState.lastKeyCode:-1;if(e.bounds){let{from:o,to:l}=e.bounds,a=r.from,u=null;(s===8||G.android&&e.text.length<l-o)&&(a=r.to,u="end");let c=F5(t.state.doc.sliceString(o,l,Ua),e.text,a-o,u);c&&(G.chrome&&s==13&&c.toB==c.from+2&&e.text.slice(c.from,c.toB)==Ua+Ua&&c.toB--,n={from:o+c.from,to:o+c.toA,insert:Re.of(e.text.slice(c.from,c.toB).split(Ua))})}else i&&(!t.hasFocus&&t.state.facet(xr)||i.main.eq(r))&&(i=null);if(!n&&!i)return!1;if(!n&&e.typeOver&&!r.empty&&i&&i.main.empty?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,r.to)}:(G.mac||G.android)&&n&&n.from==n.to&&n.from==r.head-1&&/^\. ?$/.test(n.insert.toString())&&t.contentDOM.getAttribute("autocorrect")=="off"?(i&&n.insert.length==2&&(i=z.single(i.main.anchor-1,i.main.head-1)),n={from:n.from,to:n.to,insert:Re.of([n.insert.toString().replace("."," ")])}):n&&n.from>=r.from&&n.to<=r.to&&(n.from!=r.from||n.to!=r.to)&&r.to-r.from-(n.to-n.from)<=4?n={from:r.from,to:r.to,insert:t.state.doc.slice(r.from,n.from).append(n.insert).append(t.state.doc.slice(n.to,r.to))}:G.chrome&&n&&n.from==n.to&&n.from==r.head&&n.insert.toString()==`
 `&&t.lineWrapping&&(i&&(i=z.single(i.main.anchor-1,i.main.head-1)),n={from:r.from,to:r.to,insert:Re.of([" "])}),n)return B1(t,n,i,s);if(i&&!i.main.eq(r)){let o=!1,l="select";return t.inputState.lastSelectionTime>Date.now()-50&&(t.inputState.lastSelectionOrigin=="select"&&(o=!0),l=t.inputState.lastSelectionOrigin),t.dispatch({selection:i,scrollIntoView:o,userEvent:l}),!0}else return!1}function B1(t,e,n,i=-1){if(G.ios&&t.inputState.flushIOSKey(e))return!0;let r=t.state.selection.main;if(G.android&&(e.to==r.to&&(e.from==r.from||e.from==r.from-1&&t.state.sliceDoc(e.from,r.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&bl(t.contentDOM,"Enter",13)||(e.from==r.from-1&&e.to==r.to&&e.insert.length==0||i==8&&e.insert.length<e.to-e.from&&e.to>r.head)&&bl(t.contentDOM,"Backspace",8)||e.from==r.from&&e.to==r.to+1&&e.insert.length==0&&bl(t.contentDOM,"Delete",46)))return!0;let s=e.insert.toString();t.inputState.composing>=0&&t.inputState.composing++;let o,l=()=>o||(o=P5(t,e,n));return t.state.facet(MO).some(a=>a(t,e.from,e.to,s,l))||t.dispatch(l()),!0}function P5(t,e,n){let i,r=t.state,s=r.selection.main;if(e.from>=s.from&&e.to<=s.to&&e.to-e.from>=(s.to-s.from)/3&&(!n||n.main.empty&&n.main.from==e.from+e.insert.length)&&t.inputState.composing<0){let l=s.from<e.from?r.sliceDoc(s.from,e.from):"",a=s.to>e.to?r.sliceDoc(e.to,s.to):"";i=r.replaceSelection(t.state.toText(l+e.insert.sliceString(0,void 0,t.state.lineBreak)+a))}else{let l=r.changes(e),a=n&&n.main.to<=l.newLength?n.main:void 0;if(r.selection.ranges.length>1&&t.inputState.composing>=0&&e.to<=s.to&&e.to>=s.to-10){let u=t.state.sliceDoc(e.from,e.to),c,h=n&&VO(t,n.main.head);if(h){let p=e.insert.length-(e.to-e.from);c={from:h.from,to:h.to-p}}else c=t.state.doc.lineAt(s.head);let f=s.to-e.to,d=s.to-s.from;i=r.changeByRange(p=>{if(p.from==s.from&&p.to==s.to)return{changes:l,range:a||p.map(l)};let g=p.to-f,w=g-u.length;if(p.to-p.from!=d||t.state.sliceDoc(w,g)!=u||p.to>=c.from&&p.from<=c.to)return{range:p};let m=r.changes({from:w,to:g,insert:e.insert}),y=p.to-s.to;return{changes:m,range:a?z.range(Math.max(0,a.anchor+y),Math.max(0,a.head+y)):p.map(m)}})}else i={changes:l,selection:a&&r.selection.replaceRange(a)}}let o="input.type";return(t.composing||t.inputState.compositionPendingChange&&t.inputState.compositionEndedAt>Date.now()-50)&&(t.inputState.compositionPendingChange=!1,o+=".compose",t.inputState.compositionFirstChange&&(o+=".start",t.inputState.compositionFirstChange=!1)),r.update(i,{userEvent:o,scrollIntoView:!0})}function F5(t,e,n,i){let r=Math.min(t.length,e.length),s=0;for(;s<r&&t.charCodeAt(s)==e.charCodeAt(s);)s++;if(s==r&&t.length==e.length)return null;let o=t.length,l=e.length;for(;o>0&&l>0&&t.charCodeAt(o-1)==e.charCodeAt(l-1);)o--,l--;if(i=="end"){let a=Math.max(0,s-Math.min(o,l));n-=o+a-s}if(o<s&&t.length<e.length){let a=n<=s&&n>=o?s-n:0;s-=a,l=s+(l-o),o=s}else if(l<s){let a=n<=s&&n>=l?s-n:0;s-=a,o=s+(o-l),l=s}return{from:s,toA:o,toB:l}}function z5(t){let e=[];if(t.root.activeElement!=t.contentDOM)return e;let{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}=t.observer.selectionRange;return n&&(e.push(new wx(n,i)),(r!=n||s!=i)&&e.push(new wx(r,s))),e}function U5(t,e){if(t.length==0)return null;let n=t[0].pos,i=t.length==2?t[1].pos:n;return n>-1&&i>-1?z.single(n+e,i+e):null}class j5{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,G.safari&&e.contentDOM.addEventListener("input",()=>null),G.gecko&&iV(e.contentDOM.ownerDocument)}handleEvent(e){!Y5(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,n){let i=this.handlers[e];if(i){for(let r of i.observers)r(this.view,n);for(let r of i.handlers){if(n.defaultPrevented)break;if(r(this.view,n)){n.preventDefault();break}}}}ensureHandlers(e){let n=V5(e),i=this.handlers,r=this.view.contentDOM;for(let s in n)if(s!="scroll"){let o=!n[s].handlers.length,l=i[s];l&&o!=!l.handlers.length&&(r.removeEventListener(s,this.handleEvent),l=null),l||r.addEventListener(s,this.handleEvent,{passive:o})}for(let s in i)s!="scroll"&&!n[s]&&r.removeEventListener(s,this.handleEvent);this.handlers=n}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&qO.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),G.android&&G.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let n;return G.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((n=WO.find(i=>i.keyCode==e.keyCode))&&!e.ctrlKey||$5.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=n||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let n=this.pendingIOSKey;return!n||n.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,bl(this.view.contentDOM,n.key,n.keyCode,n instanceof KeyboardEvent?n:void 0))}ignoreDuringComposition(e){return/^key/.test(e.type)?this.composing>0?!0:G.safari&&!G.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1:!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function bx(t,e){return(n,i)=>{try{return e.call(t,i,n)}catch(r){kn(n.state,r)}}}function V5(t){let e=Object.create(null);function n(i){return e[i]||(e[i]={observers:[],handlers:[]})}for(let i of t){let r=i.spec,s=r&&r.plugin.domEventHandlers,o=r&&r.plugin.domEventObservers;if(s)for(let l in s){let a=s[l];a&&n(l).handlers.push(bx(i.value,a))}if(o)for(let l in o){let a=o[l];a&&n(l).observers.push(bx(i.value,a))}}for(let i in Ti)n(i).handlers.push(Ti[i]);for(let i in mi)n(i).observers.push(mi[i]);return e}const WO=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],$5="dthko",qO=[16,17,18,20,91,92,224,225],sh=6;function oh(t){return Math.max(0,t)*.7+8}function H5(t,e){return Math.max(Math.abs(t.clientX-e.clientX),Math.abs(t.clientY-e.clientY))}class W5{constructor(e,n,i,r){this.view=e,this.startEvent=n,this.style=i,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=n,this.scrollParents=Jj(e.contentDOM),this.atoms=e.state.facet(L1).map(o=>o(e));let s=e.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=n.shiftKey,this.multiple=e.state.facet(Ie.allowMultipleSelections)&&q5(e,n),this.dragging=K5(e,n)&&YO(n)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&H5(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let n=0,i=0,r=0,s=0,o=this.view.win.innerWidth,l=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:s,bottom:l}=this.scrollParents.y.getBoundingClientRect());let a=N1(this.view);e.clientX-a.left<=r+sh?n=-oh(r-e.clientX):e.clientX+a.right>=o-sh&&(n=oh(e.clientX-o)),e.clientY-a.top<=s+sh?i=-oh(s-e.clientY):e.clientY+a.bottom>=l-sh&&(i=oh(e.clientY-l)),this.setScrollSpeed(n,i)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,n){this.scrollSpeed={x:e,y:n},e||n?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:n}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),n&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=n,n=0),(e||n)&&this.view.win.scrollBy(e,n),this.dragging===!1&&this.select(this.lastEvent)}skipAtoms(e){let n=null;for(let i=0;i<e.ranges.length;i++){let r=e.ranges[i],s=null;if(r.empty){let o=ef(this.atoms,r.from,0);o!=r.from&&(s=z.cursor(o,-1))}else{let o=ef(this.atoms,r.from,-1),l=ef(this.atoms,r.to,1);(o!=r.from||l!=r.to)&&(s=z.range(r.from==r.anchor?o:l,r.from==r.head?o:l))}s&&(n||(n=e.ranges.slice()),n[i]=s)}return n?z.create(n,e.mainIndex):e}select(e){let{view:n}=this,i=this.skipAtoms(this.style.get(e,this.extend,this.multiple));(this.mustSelect||!i.eq(n.state.selection,this.dragging===!1))&&this.view.dispatch({selection:i,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(n=>n.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function q5(t,e){let n=t.state.facet(IO);return n.length?n[0](e):G.mac?e.metaKey:e.ctrlKey}function Q5(t,e){let n=t.state.facet(TO);return n.length?n[0](e):G.mac?!e.altKey:!e.ctrlKey}function K5(t,e){let{main:n}=t.state.selection;if(n.empty)return!1;let i=Fu(t.root);if(!i||i.rangeCount==0)return!0;let r=i.getRangeAt(0).getClientRects();for(let s=0;s<r.length;s++){let o=r[s];if(o.left<=e.clientX&&o.right>=e.clientX&&o.top<=e.clientY&&o.bottom>=e.clientY)return!0}return!1}function Y5(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target,i;n!=t.contentDOM;n=n.parentNode)if(!n||n.nodeType==11||(i=Ke.get(n))&&i.ignoreEvent(e))return!1;return!0}const Ti=Object.create(null),mi=Object.create(null),QO=G.ie&&G.ie_version<15||G.ios&&G.webkit_version<604;function G5(t){let e=t.dom.parentNode;if(!e)return;let n=e.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout(()=>{t.focus(),n.remove(),KO(t,n.value)},50)}function Cp(t,e,n){for(let i of t.facet(e))n=i(n,t);return n}function KO(t,e){e=Cp(t.state,D1,e);let{state:n}=t,i,r=1,s=n.toText(e),o=s.lines==n.selection.ranges.length;if(h0!=null&&n.selection.ranges.every(a=>a.empty)&&h0==s.toString()){let a=-1;i=n.changeByRange(u=>{let c=n.doc.lineAt(u.from);if(c.from==a)return{range:u};a=c.from;let h=n.toText((o?s.line(r++).text:e)+n.lineBreak);return{changes:{from:c.from,insert:h},range:z.cursor(u.from+h.length)}})}else o?i=n.changeByRange(a=>{let u=s.line(r++);return{changes:{from:a.from,to:a.to,insert:u.text},range:z.cursor(a.from+u.length)}}):i=n.replaceSelection(s);t.dispatch(i,{userEvent:"input.paste",scrollIntoView:!0})}mi.scroll=t=>{t.inputState.lastScrollTop=t.scrollDOM.scrollTop,t.inputState.lastScrollLeft=t.scrollDOM.scrollLeft};Ti.keydown=(t,e)=>(t.inputState.setSelectionOrigin("select"),e.keyCode==27&&t.inputState.tabFocusMode!=0&&(t.inputState.tabFocusMode=Date.now()+2e3),!1);mi.touchstart=(t,e)=>{t.inputState.lastTouchTime=Date.now(),t.inputState.setSelectionOrigin("select.pointer")};mi.touchmove=t=>{t.inputState.setSelectionOrigin("select.pointer")};Ti.mousedown=(t,e)=>{if(t.observer.flush(),t.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let i of t.state.facet(OO))if(n=i(t,e),n)break;if(!n&&e.button==0&&(n=Z5(t,e)),n){let i=!t.hasFocus;t.inputState.startMouseSelection(new W5(t,e,n,i)),i&&t.observer.ignore(()=>{uO(t.contentDOM);let s=t.root.activeElement;s&&!s.contains(t.contentDOM)&&s.blur()});let r=t.inputState.mouseSelection;if(r)return r.start(e),r.dragging===!1}return!1};function Sx(t,e,n,i){if(i==1)return z.cursor(e,n);if(i==2)return E5(t.state,e,n);{let r=St.find(t.docView,e),s=t.state.doc.lineAt(r?r.posAtEnd:e),o=r?r.posAtStart:s.from,l=r?r.posAtEnd:s.to;return l<t.state.doc.length&&l==s.to&&l++,z.range(o,l)}}let xx=(t,e,n)=>e>=n.top&&e<=n.bottom&&t>=n.left&&t<=n.right;function X5(t,e,n,i){let r=St.find(t.docView,e);if(!r)return 1;let s=e-r.posAtStart;if(s==0)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&xx(n,i,o))return-1;let l=r.coordsAt(s,1);return l&&xx(n,i,l)?1:o&&o.bottom>=i?-1:1}function kx(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:n,bias:X5(t,n,e.clientX,e.clientY)}}const J5=G.ie&&G.ie_version<=11;let Cx=null,_x=0,Ex=0;function YO(t){if(!J5)return t.detail;let e=Cx,n=Ex;return Cx=t,Ex=Date.now(),_x=!e||n>Date.now()-400&&Math.abs(e.clientX-t.clientX)<2&&Math.abs(e.clientY-t.clientY)<2?(_x+1)%3:1}function Z5(t,e){let n=kx(t,e),i=YO(e),r=t.state.selection;return{update(s){s.docChanged&&(n.pos=s.changes.mapPos(n.pos),r=r.map(s.changes))},get(s,o,l){let a=kx(t,s),u,c=Sx(t,a.pos,a.bias,i);if(n.pos!=a.pos&&!o){let h=Sx(t,n.pos,n.bias,i),f=Math.min(h.from,c.from),d=Math.max(h.to,c.to);c=f<c.from?z.range(f,d):z.range(d,f)}return o?r.replaceRange(r.main.extend(c.from,c.to)):l&&i==1&&r.ranges.length>1&&(u=eV(r,a.pos))?u:l?r.addRange(c):z.create([c])}}}function eV(t,e){for(let n=0;n<t.ranges.length;n++){let{from:i,to:r}=t.ranges[n];if(i<=e&&r>=e)return z.create(t.ranges.slice(0,n).concat(t.ranges.slice(n+1)),t.mainIndex==n?0:t.mainIndex-(t.mainIndex>n?1:0))}return null}Ti.dragstart=(t,e)=>{let{selection:{main:n}}=t.state;if(e.target.draggable){let r=t.docView.nearest(e.target);if(r&&r.isWidget){let s=r.posAtStart,o=s+r.length;(s>=n.to||o<=n.from)&&(n=z.range(s,o))}}let{inputState:i}=t;return i.mouseSelection&&(i.mouseSelection.dragging=!0),i.draggedContent=n,e.dataTransfer&&(e.dataTransfer.setData("Text",Cp(t.state,M1,t.state.sliceDoc(n.from,n.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ti.dragend=t=>(t.inputState.draggedContent=null,!1);function Ax(t,e,n,i){if(n=Cp(t.state,D1,n),!n)return;let r=t.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:s}=t.inputState,o=i&&s&&Q5(t,e)?{from:s.from,to:s.to}:null,l={from:r,insert:n},a=t.state.changes(o?[o,l]:l);t.focus(),t.dispatch({changes:a,selection:{anchor:a.mapPos(r,-1),head:a.mapPos(r,1)},userEvent:o?"move.drop":"input.drop"}),t.inputState.draggedContent=null}Ti.drop=(t,e)=>{if(!e.dataTransfer)return!1;if(t.state.readOnly)return!0;let n=e.dataTransfer.files;if(n&&n.length){let i=Array(n.length),r=0,s=()=>{++r==n.length&&Ax(t,e,i.filter(o=>o!=null).join(t.state.lineBreak),!1)};for(let o=0;o<n.length;o++){let l=new FileReader;l.onerror=s,l.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(l.result)||(i[o]=l.result),s()},l.readAsText(n[o])}return!0}else{let i=e.dataTransfer.getData("Text");if(i)return Ax(t,e,i,!0),!0}return!1};Ti.paste=(t,e)=>{if(t.state.readOnly)return!0;t.observer.flush();let n=QO?null:e.clipboardData;return n?(KO(t,n.getData("text/plain")||n.getData("text/uri-list")),!0):(G5(t),!1)};function tV(t,e){let n=t.dom.parentNode;if(!n)return;let i=n.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.value=e,i.focus(),i.selectionEnd=e.length,i.selectionStart=0,setTimeout(()=>{i.remove(),t.focus()},50)}function nV(t){let e=[],n=[],i=!1;for(let r of t.selection.ranges)r.empty||(e.push(t.sliceDoc(r.from,r.to)),n.push(r));if(!e.length){let r=-1;for(let{from:s}of t.selection.ranges){let o=t.doc.lineAt(s);o.number>r&&(e.push(o.text),n.push({from:o.from,to:Math.min(t.doc.length,o.to+1)})),r=o.number}i=!0}return{text:Cp(t,M1,e.join(t.lineBreak)),ranges:n,linewise:i}}let h0=null;Ti.copy=Ti.cut=(t,e)=>{let{text:n,ranges:i,linewise:r}=nV(t.state);if(!n&&!r)return!1;h0=r?n:null,e.type=="cut"&&!t.state.readOnly&&t.dispatch({changes:i,scrollIntoView:!0,userEvent:"delete.cut"});let s=QO?null:e.clipboardData;return s?(s.clearData(),s.setData("text/plain",n),!0):(tV(t,n),!1)};const GO=ur.define();function XO(t,e){let n=[];for(let i of t.facet(RO)){let r=i(t,e);r&&n.push(r)}return n.length?t.update({effects:n,annotations:GO.of(!0)}):null}function JO(t){setTimeout(()=>{let e=t.hasFocus;if(e!=t.inputState.notifiedFocused){let n=XO(t.state,e);n?t.dispatch(n):t.update([])}},10)}mi.focus=t=>{t.inputState.lastFocusTime=Date.now(),!t.scrollDOM.scrollTop&&(t.inputState.lastScrollTop||t.inputState.lastScrollLeft)&&(t.scrollDOM.scrollTop=t.inputState.lastScrollTop,t.scrollDOM.scrollLeft=t.inputState.lastScrollLeft),JO(t)};mi.blur=t=>{t.observer.clearSelectionRange(),JO(t)};mi.compositionstart=mi.compositionupdate=t=>{t.observer.editContext||(t.inputState.compositionFirstChange==null&&(t.inputState.compositionFirstChange=!0),t.inputState.composing<0&&(t.inputState.composing=0))};mi.compositionend=t=>{t.observer.editContext||(t.inputState.composing=-1,t.inputState.compositionEndedAt=Date.now(),t.inputState.compositionPendingKey=!0,t.inputState.compositionPendingChange=t.observer.pendingRecords().length>0,t.inputState.compositionFirstChange=null,G.chrome&&G.android?t.observer.flushSoon():t.inputState.compositionPendingChange?Promise.resolve().then(()=>t.observer.flush()):setTimeout(()=>{t.inputState.composing<0&&t.docView.hasComposition&&t.update([])},50))};mi.contextmenu=t=>{t.inputState.lastContextMenu=Date.now()};Ti.beforeinput=(t,e)=>{var n,i;if(e.inputType=="insertReplacementText"&&t.observer.editContext){let s=(n=e.dataTransfer)===null||n===void 0?void 0:n.getData("text/plain"),o=e.getTargetRanges();if(s&&o.length){let l=o[0],a=t.posAtDOM(l.startContainer,l.startOffset),u=t.posAtDOM(l.endContainer,l.endOffset);return B1(t,{from:a,to:u,insert:t.state.toText(s)},null),!0}}let r;if(G.chrome&&G.android&&(r=WO.find(s=>s.inputType==e.inputType))&&(t.observer.delayAndroidKey(r.key,r.keyCode),r.key=="Backspace"||r.key=="Delete")){let s=((i=window.visualViewport)===null||i===void 0?void 0:i.height)||0;setTimeout(()=>{var o;(((o=window.visualViewport)===null||o===void 0?void 0:o.height)||0)>s+10&&t.hasFocus&&(t.contentDOM.blur(),t.focus())},100)}return G.ios&&e.inputType=="deleteContentForward"&&t.observer.flushSoon(),G.safari&&e.inputType=="insertText"&&t.inputState.composing>=0&&setTimeout(()=>mi.compositionend(t,e),20),!1};const Ix=new Set;function iV(t){Ix.has(t)||(Ix.add(t),t.addEventListener("copy",()=>{}),t.addEventListener("cut",()=>{}))}const Tx=["pre-wrap","normal","pre-line","break-spaces"];let $l=!1;function Ox(){$l=!1}class rV{constructor(e){this.lineWrapping=e,this.doc=Re.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,n){let i=this.doc.lineAt(n).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.max(0,Math.ceil((n-e-i*this.lineLength*.5)/this.lineLength))),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return Tx.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let n=!1;for(let i=0;i<e.length;i++){let r=e[i];r<0?i++:this.heightSamples[Math.floor(r*10)]||(n=!0,this.heightSamples[Math.floor(r*10)]=!0)}return n}refresh(e,n,i,r,s,o){let l=Tx.indexOf(e)>-1,a=Math.round(n)!=Math.round(this.lineHeight)||this.lineWrapping!=l;if(this.lineWrapping=l,this.lineHeight=n,this.charWidth=i,this.textHeight=r,this.lineLength=s,a){this.heightSamples={};for(let u=0;u<o.length;u++){let c=o[u];c<0?u++:this.heightSamples[Math.floor(c*10)]=!0}}return a}}class sV{constructor(e,n){this.from=e,this.heights=n,this.index=0}get more(){return this.index<this.heights.length}}class Gi{constructor(e,n,i,r,s){this.from=e,this.length=n,this.top=i,this.height=r,this._content=s}get type(){return typeof this._content=="number"?an.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Is?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let n=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Gi(this.from,this.length+e.length,this.top,this.height+e.height,n)}}var nt=function(t){return t[t.ByPos=0]="ByPos",t[t.ByHeight=1]="ByHeight",t[t.ByPosNoHeight=2]="ByPosNoHeight",t}(nt||(nt={}));const tf=.001;class un{constructor(e,n,i=2){this.length=e,this.height=n,this.flags=i}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>tf&&($l=!0),this.height=e)}replace(e,n,i){return un.of(i)}decomposeLeft(e,n){n.push(this)}decomposeRight(e,n){n.push(this)}applyChanges(e,n,i,r){let s=this,o=i.doc;for(let l=r.length-1;l>=0;l--){let{fromA:a,toA:u,fromB:c,toB:h}=r[l],f=s.lineAt(a,nt.ByPosNoHeight,i.setDoc(n),0,0),d=f.to>=u?f:s.lineAt(u,nt.ByPosNoHeight,i,0,0);for(h+=d.to-u,u=d.to;l>0&&f.from<=r[l-1].toA;)a=r[l-1].fromA,c=r[l-1].fromB,l--,a<f.from&&(f=s.lineAt(a,nt.ByPosNoHeight,i,0,0));c+=f.from-a,a=f.from;let p=P1.build(i.setDoc(o),e,c,h);s=xd(s,s.replace(a,u,p))}return s.updateHeight(i,0)}static empty(){return new Un(0,0)}static of(e){if(e.length==1)return e[0];let n=0,i=e.length,r=0,s=0;for(;;)if(n==i)if(r>s*2){let l=e[n-1];l.break?e.splice(--n,1,l.left,null,l.right):e.splice(--n,1,l.left,l.right),i+=1+l.break,r-=l.size}else if(s>r*2){let l=e[i];l.break?e.splice(i,1,l.left,null,l.right):e.splice(i,1,l.left,l.right),i+=2+l.break,s-=l.size}else break;else if(r<s){let l=e[n++];l&&(r+=l.size)}else{let l=e[--i];l&&(s+=l.size)}let o=0;return e[n-1]==null?(o=1,n--):e[n]==null&&(o=1,i++),new oV(un.of(e.slice(0,n)),o,un.of(e.slice(i)))}}function xd(t,e){return t==e?t:(t.constructor!=e.constructor&&($l=!0),e)}un.prototype.size=1;class ZO extends un{constructor(e,n,i){super(e,n),this.deco=i}blockAt(e,n,i,r){return new Gi(r,this.length,i,this.height,this.deco||0)}lineAt(e,n,i,r,s){return this.blockAt(0,i,r,s)}forEachLine(e,n,i,r,s,o){e<=s+this.length&&n>=s&&o(this.blockAt(0,i,r,s))}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Un extends ZO{constructor(e,n){super(e,n,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,n,i,r){return new Gi(r,this.length,i,this.height,this.breaks)}replace(e,n,i){let r=i[0];return i.length==1&&(r instanceof Un||r instanceof Pt&&r.flags&4)&&Math.abs(this.length-r.length)<10?(r instanceof Pt?r=new Un(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):un.of(i)}updateHeight(e,n=0,i=!1,r){return r&&r.from<=n&&r.more?this.setHeight(r.heights[r.index++]):(i||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Pt extends un{constructor(e){super(e,0)}heightMetrics(e,n){let i=e.doc.lineAt(n).number,r=e.doc.lineAt(n+this.length).number,s=r-i+1,o,l=0;if(e.lineWrapping){let a=Math.min(this.height,e.lineHeight*s);o=a/s,this.length>s+1&&(l=(this.height-a)/(this.length-s-1))}else o=this.height/s;return{firstLine:i,lastLine:r,perLine:o,perChar:l}}blockAt(e,n,i,r){let{firstLine:s,lastLine:o,perLine:l,perChar:a}=this.heightMetrics(n,r);if(n.lineWrapping){let u=r+(e<n.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-i)/this.height))*this.length)),c=n.doc.lineAt(u),h=l+c.length*a,f=Math.max(i,e-h/2);return new Gi(c.from,c.length,f,h,0)}else{let u=Math.max(0,Math.min(o-s,Math.floor((e-i)/l))),{from:c,length:h}=n.doc.line(s+u);return new Gi(c,h,i+l*u,l,0)}}lineAt(e,n,i,r,s){if(n==nt.ByHeight)return this.blockAt(e,i,r,s);if(n==nt.ByPosNoHeight){let{from:d,to:p}=i.doc.lineAt(e);return new Gi(d,p-d,0,0,0)}let{firstLine:o,perLine:l,perChar:a}=this.heightMetrics(i,s),u=i.doc.lineAt(e),c=l+u.length*a,h=u.number-o,f=r+l*h+a*(u.from-s-h);return new Gi(u.from,u.length,Math.max(r,Math.min(f,r+this.height-c)),c,0)}forEachLine(e,n,i,r,s,o){e=Math.max(e,s),n=Math.min(n,s+this.length);let{firstLine:l,perLine:a,perChar:u}=this.heightMetrics(i,s);for(let c=e,h=r;c<=n;){let f=i.doc.lineAt(c);if(c==e){let p=f.number-l;h+=a*p+u*(e-s-p)}let d=a+u*f.length;o(new Gi(f.from,f.length,h,d,0)),h+=d,c=f.to+1}}replace(e,n,i){let r=this.length-n;if(r>0){let s=i[i.length-1];s instanceof Pt?i[i.length-1]=new Pt(s.length+r):i.push(null,new Pt(r-1))}if(e>0){let s=i[0];s instanceof Pt?i[0]=new Pt(e+s.length):i.unshift(new Pt(e-1),null)}return un.of(i)}decomposeLeft(e,n){n.push(new Pt(e-1),null)}decomposeRight(e,n){n.push(null,new Pt(this.length-e-1))}updateHeight(e,n=0,i=!1,r){let s=n+this.length;if(r&&r.from<=n+this.length&&r.more){let o=[],l=Math.max(n,r.from),a=-1;for(r.from>n&&o.push(new Pt(r.from-n-1).updateHeight(e,n));l<=s&&r.more;){let c=e.doc.lineAt(l).length;o.length&&o.push(null);let h=r.heights[r.index++];a==-1?a=h:Math.abs(h-a)>=tf&&(a=-2);let f=new Un(c,h);f.outdated=!1,o.push(f),l+=c+1}l<=s&&o.push(null,new Pt(s-l).updateHeight(e,l));let u=un.of(o);return(a<0||Math.abs(u.height-this.height)>=tf||Math.abs(a-this.heightMetrics(e,n).perLine)>=tf)&&($l=!0),xd(this,u)}else(i||this.outdated)&&(this.setHeight(e.heightForGap(n,n+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class oV extends un{constructor(e,n,i){super(e.length+n+i.length,e.height+i.height,n|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return this.flags&1}blockAt(e,n,i,r){let s=i+this.left.height;return e<s?this.left.blockAt(e,n,i,r):this.right.blockAt(e,n,s,r+this.left.length+this.break)}lineAt(e,n,i,r,s){let o=r+this.left.height,l=s+this.left.length+this.break,a=n==nt.ByHeight?e<o:e<l,u=a?this.left.lineAt(e,n,i,r,s):this.right.lineAt(e,n,i,o,l);if(this.break||(a?u.to<l:u.from>l))return u;let c=n==nt.ByPosNoHeight?nt.ByPosNoHeight:nt.ByPos;return a?u.join(this.right.lineAt(l,c,i,o,l)):this.left.lineAt(l,c,i,r,s).join(u)}forEachLine(e,n,i,r,s,o){let l=r+this.left.height,a=s+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,n,i,r,s,o),n>=a&&this.right.forEachLine(e,n,i,l,a,o);else{let u=this.lineAt(a,nt.ByPos,i,r,s);e<u.from&&this.left.forEachLine(e,u.from-1,i,r,s,o),u.to>=e&&u.from<=n&&o(u),n>u.to&&this.right.forEachLine(u.to+1,n,i,l,a,o)}}replace(e,n,i){let r=this.left.length+this.break;if(n<r)return this.balanced(this.left.replace(e,n,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,n-r,i));let s=[];e>0&&this.decomposeLeft(e,s);let o=s.length;for(let l of i)s.push(l);if(e>0&&Dx(s,o-1),n<this.length){let l=s.length;this.decomposeRight(n,s),Dx(s,l)}return un.of(s)}decomposeLeft(e,n){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,n);n.push(this.left),this.break&&(i++,e>=i&&n.push(null)),e>i&&this.right.decomposeLeft(e-i,n)}decomposeRight(e,n){let i=this.left.length,r=i+this.break;if(e>=r)return this.right.decomposeRight(e-r,n);e<i&&this.left.decomposeRight(e,n),this.break&&e<r&&n.push(null),n.push(this.right)}balanced(e,n){return e.size>2*n.size||n.size>2*e.size?un.of(this.break?[e,null,n]:[e,n]):(this.left=xd(this.left,e),this.right=xd(this.right,n),this.setHeight(e.height+n.height),this.outdated=e.outdated||n.outdated,this.size=e.size+n.size,this.length=e.length+this.break+n.length,this)}updateHeight(e,n=0,i=!1,r){let{left:s,right:o}=this,l=n+s.length+this.break,a=null;return r&&r.from<=n+s.length&&r.more?a=s=s.updateHeight(e,n,i,r):s.updateHeight(e,n,i),r&&r.from<=l+o.length&&r.more?a=o=o.updateHeight(e,l,i,r):o.updateHeight(e,l,i),a?this.balanced(s,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Dx(t,e){let n,i;t[e]==null&&(n=t[e-1])instanceof Pt&&(i=t[e+1])instanceof Pt&&t.splice(e-1,3,new Pt(n.length+1+i.length))}const lV=5;class P1{constructor(e,n){this.pos=e,this.oracle=n,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,n){if(this.lineStart>-1){let i=Math.min(n,this.lineEnd),r=this.nodes[this.nodes.length-1];r instanceof Un?r.length+=i-this.pos:(i>this.pos||!this.isCovered)&&this.nodes.push(new Un(i-this.pos,-1)),this.writtenTo=i,n>i&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=n}point(e,n,i){if(e<n||i.heightRelevant){let r=i.widget?i.widget.estimatedHeight:0,s=i.widget?i.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=n-e;i.block?this.addBlock(new ZO(o,r,i)):(o||s||r>=lV)&&this.addLineDeco(r,s,o)}else n>e&&this.span(e,n);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:n}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=n,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Un(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,n){let i=new Pt(n-e);return this.oracle.doc.lineAt(e).to==n&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Un)return e;let n=new Un(0,-1);return this.nodes.push(n),n}addBlock(e){this.enterLine();let n=e.deco;n&&n.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,n&&n.endSide>0&&(this.covering=e)}addLineDeco(e,n,i){let r=this.ensureLine();r.length+=i,r.collapsed+=i,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=n,this.writtenTo=this.pos=this.pos+i}finish(e){let n=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(n instanceof Un)&&!this.isCovered?this.nodes.push(new Un(0,-1)):(this.writtenTo<this.pos||n==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let i=e;for(let r of this.nodes)r instanceof Un&&r.updateHeight(this.oracle,i),i+=r?r.length:1;return this.nodes}static build(e,n,i,r){let s=new P1(i,e);return Me.spans(n,i,r,s,0),s.finish(i)}}function aV(t,e,n){let i=new uV;return Me.compare(t,e,n,i,0),i.changes}class uV{constructor(){this.changes=[]}compareRange(){}comparePoint(e,n,i,r){(e<n||i&&i.heightRelevant||r&&r.heightRelevant)&&Zh(e,n,this.changes,5)}}function cV(t,e){let n=t.getBoundingClientRect(),i=t.ownerDocument,r=i.defaultView||window,s=Math.max(0,n.left),o=Math.min(r.innerWidth,n.right),l=Math.max(0,n.top),a=Math.min(r.innerHeight,n.bottom);for(let u=t.parentNode;u&&u!=i.body;)if(u.nodeType==1){let c=u,h=window.getComputedStyle(c);if((c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth)&&h.overflow!="visible"){let f=c.getBoundingClientRect();s=Math.max(s,f.left),o=Math.min(o,f.right),l=Math.max(l,f.top),a=Math.min(u==t.parentNode?r.innerHeight:a,f.bottom)}u=h.position=="absolute"||h.position=="fixed"?c.offsetParent:c.parentNode}else if(u.nodeType==11)u=u.host;else break;return{left:s-n.left,right:Math.max(s,o)-n.left,top:l-(n.top+e),bottom:Math.max(l,a)-(n.top+e)}}function hV(t){let e=t.getBoundingClientRect(),n=t.ownerDocument.defaultView||window;return e.left<n.innerWidth&&e.right>0&&e.top<n.innerHeight&&e.bottom>0}function fV(t,e){let n=t.getBoundingClientRect();return{left:0,right:n.right-n.left,top:e,bottom:n.bottom-(n.top+e)}}class Wm{constructor(e,n,i,r){this.from=e,this.to=n,this.size=i,this.displaySize=r}static same(e,n){if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++){let r=e[i],s=n[i];if(r.from!=s.from||r.to!=s.to||r.size!=s.size)return!1}return!0}draw(e,n){return ne.replace({widget:new dV(this.displaySize*(n?e.scaleY:e.scaleX),n)}).range(this.from,this.to)}}class dV extends zr{constructor(e,n){super(),this.size=e,this.vertical=n}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Mx{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Rx,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=rt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let n=e.facet(R1).some(i=>typeof i!="function"&&i.class=="cm-lineWrapping");this.heightOracle=new rV(n),this.stateDeco=e.facet(zu).filter(i=>typeof i!="function"),this.heightMap=un.empty().applyChanges(this.stateDeco,Re.empty,this.heightOracle.setDoc(e.doc),[new ui(0,0,0,e.doc.length)]);for(let i=0;i<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());i++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ne.set(this.lineGaps.map(i=>i.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:n}=this.state.selection;for(let i=0;i<=1;i++){let r=i?n.head:n.anchor;if(!e.some(({from:s,to:o})=>r>=s&&r<=o)){let{from:s,to:o}=this.lineBlockAt(r);e.push(new lh(s,o))}}return this.viewports=e.sort((i,r)=>i.from-r.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Rx:new F1(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(ja(e,this.scaler))})}update(e,n=null){this.state=e.state;let i=this.stateDeco;this.stateDeco=this.state.facet(zu).filter(c=>typeof c!="function");let r=e.changedRanges,s=ui.extendWithRanges(r,aV(i,this.stateDeco,e?e.changes:At.empty(this.state.doc.length))),o=this.heightMap.height,l=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);Ox(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),s),(this.heightMap.height!=o||$l)&&(e.flags|=2),l?(this.scrollAnchorPos=e.changes.mapPos(l.from,-1),this.scrollAnchorHeight=l.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=o);let a=s.length?this.mapViewport(this.viewport,e.changes):this.viewport;(n&&(n.range.head<a.from||n.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,n));let u=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(u||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),n&&(this.scrollTarget=n),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(NO)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let n=e.contentDOM,i=window.getComputedStyle(n),r=this.heightOracle,s=i.whiteSpace;this.defaultTextDirection=i.direction=="rtl"?rt.RTL:rt.LTR;let o=this.heightOracle.mustRefreshForWrapping(s),l=n.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=l.height;this.contentDOMHeight=l.height,this.mustMeasureContent=!1;let u=0,c=0;if(l.width&&l.height){let{scaleX:x,scaleY:_}=aO(n,l);(x>.005&&Math.abs(this.scaleX-x)>.005||_>.005&&Math.abs(this.scaleY-_)>.005)&&(this.scaleX=x,this.scaleY=_,u|=16,o=a=!0)}let h=(parseInt(i.paddingTop)||0)*this.scaleY,f=(parseInt(i.paddingBottom)||0)*this.scaleY;(this.paddingTop!=h||this.paddingBottom!=f)&&(this.paddingTop=h,this.paddingBottom=f,u|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,u|=16);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=hO(e.scrollDOM);let p=(this.printing?fV:cV)(n,this.paddingTop),g=p.top-this.pixelViewport.top,w=p.bottom-this.pixelViewport.bottom;this.pixelViewport=p;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget&&!hV(e.dom))return 0;let y=l.width;if((this.contentDOMWidth!=y||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=l.width,this.editorHeight=e.scrollDOM.clientHeight,u|=16),a){let x=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(x)&&(o=!0),o||r.lineWrapping&&Math.abs(y-this.contentDOMWidth)>r.charWidth){let{lineHeight:_,charWidth:b,textHeight:I}=e.docView.measureTextSize();o=_>0&&r.refresh(s,_,b,I,Math.max(5,y/b),x),o&&(e.docView.minWidth=0,u|=16)}g>0&&w>0?c=Math.max(g,w):g<0&&w<0&&(c=Math.min(g,w)),Ox();for(let _ of this.viewports){let b=_.from==this.viewport.from?x:e.docView.measureVisibleLineHeights(_);this.heightMap=(o?un.empty().applyChanges(this.stateDeco,Re.empty,this.heightOracle,[new ui(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new sV(_.from,b))}$l&&(u|=2)}let v=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return v&&(u&2&&(u|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),u|=this.updateForViewport()),(u&2||v)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),u|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),u}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,n){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,s=this.heightOracle,{visibleTop:o,visibleBottom:l}=this,a=new lh(r.lineAt(o-i*1e3,nt.ByHeight,s,0,0).from,r.lineAt(l+(1-i)*1e3,nt.ByHeight,s,0,0).to);if(n){let{head:u}=n.range;if(u<a.from||u>a.to){let c=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),h=r.lineAt(u,nt.ByPos,s,0,0),f;n.y=="center"?f=(h.top+h.bottom)/2-c/2:n.y=="start"||n.y=="nearest"&&u<a.from?f=h.top:f=h.bottom-c,a=new lh(r.lineAt(f-1e3/2,nt.ByHeight,s,0,0).from,r.lineAt(f+c+1e3/2,nt.ByHeight,s,0,0).to)}}return a}mapViewport(e,n){let i=n.mapPos(e.from,-1),r=n.mapPos(e.to,1);return new lh(this.heightMap.lineAt(i,nt.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,nt.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:n},i=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,nt.ByPos,this.heightOracle,0,0),{bottom:s}=this.heightMap.lineAt(n,nt.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:l}=this;return(e==0||r<=o-Math.max(10,Math.min(-i,250)))&&(n==this.state.doc.length||s>=l+Math.max(10,Math.min(i,250)))&&r>o-2*1e3&&s<l+2*1e3}mapLineGaps(e,n){if(!e.length||n.empty)return e;let i=[];for(let r of e)n.touchesRange(r.from,r.to)||i.push(new Wm(n.mapPos(r.from),n.mapPos(r.to),r.size,r.displaySize));return i}ensureLineGaps(e,n){let i=this.heightOracle.lineWrapping,r=i?1e4:2e3,s=r>>1,o=r<<1;if(this.defaultTextDirection!=rt.LTR&&!i)return[];let l=[],a=(c,h,f,d)=>{if(h-c<s)return;let p=this.state.selection.main,g=[p.from];p.empty||g.push(p.to);for(let m of g)if(m>c&&m<h){a(c,m-10,f,d),a(m+10,h,f,d);return}let w=mV(e,m=>m.from>=f.from&&m.to<=f.to&&Math.abs(m.from-c)<s&&Math.abs(m.to-h)<s&&!g.some(y=>m.from<y&&m.to>y));if(!w){if(h<f.to&&n&&i&&n.visibleRanges.some(v=>v.from<=h&&v.to>=h)){let v=n.moveToLineBoundary(z.cursor(h),!1,!0).head;v>c&&(h=v)}let m=this.gapSize(f,c,h,d),y=i||m<2e6?m:2e6;w=new Wm(c,h,m,y)}l.push(w)},u=c=>{if(c.length<o||c.type!=an.Text)return;let h=pV(c.from,c.to,this.stateDeco);if(h.total<o)return;let f=this.scrollTarget?this.scrollTarget.range.head:null,d,p;if(i){let g=r/this.heightOracle.lineLength*this.heightOracle.lineHeight,w,m;if(f!=null){let y=uh(h,f),v=((this.visibleBottom-this.visibleTop)/2+g)/c.height;w=y-v,m=y+v}else w=(this.visibleTop-c.top-g)/c.height,m=(this.visibleBottom-c.top+g)/c.height;d=ah(h,w),p=ah(h,m)}else{let g=h.total*this.heightOracle.charWidth,w=r*this.heightOracle.charWidth,m=0;if(g>2e6)for(let b of e)b.from>=c.from&&b.from<c.to&&b.size!=b.displaySize&&b.from*this.heightOracle.charWidth+m<this.pixelViewport.left&&(m=b.size-b.displaySize);let y=this.pixelViewport.left+m,v=this.pixelViewport.right+m,x,_;if(f!=null){let b=uh(h,f),I=((v-y)/2+w)/g;x=b-I,_=b+I}else x=(y-w)/g,_=(v+w)/g;d=ah(h,x),p=ah(h,_)}d>c.from&&a(c.from,d,c,h),p<c.to&&a(p,c.to,c,h)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(u):u(c);return l}gapSize(e,n,i,r){let s=uh(r,i)-uh(r,n);return this.heightOracle.lineWrapping?e.height*s:r.total*this.heightOracle.charWidth*s}updateLineGaps(e){Wm.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ne.set(e.map(n=>n.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let n=this.stateDeco;this.lineGaps.length&&(n=n.concat(this.lineGapDeco));let i=[];Me.spans(n,this.viewport.from,this.viewport.to,{span(s,o){i.push({from:s,to:o})},point(){}},20);let r=0;if(i.length!=this.visibleRanges.length)r=12;else for(let s=0;s<i.length&&!(r&8);s++){let o=this.visibleRanges[s],l=i[s];(o.from!=l.from||o.to!=l.to)&&(r|=4,e&&e.mapPos(o.from,-1)==l.from&&e.mapPos(o.to,1)==l.to||(r|=8))}return this.visibleRanges=i,r}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(n=>n.from<=e&&n.to>=e)||ja(this.heightMap.lineAt(e,nt.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(n=>n.top<=e&&n.bottom>=e)||ja(this.heightMap.lineAt(this.scaler.fromDOM(e),nt.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let n=this.lineBlockAtHeight(e+8);return n.from>=this.viewport.from||this.viewportLines[0].top-e>200?n:this.viewportLines[0]}elementAtHeight(e){return ja(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class lh{constructor(e,n){this.from=e,this.to=n}}function pV(t,e,n){let i=[],r=t,s=0;return Me.spans(n,t,e,{span(){},point(o,l){o>r&&(i.push({from:r,to:o}),s+=o-r),r=l}},20),r<e&&(i.push({from:r,to:e}),s+=e-r),{total:s,ranges:i}}function ah({total:t,ranges:e},n){if(n<=0)return e[0].from;if(n>=1)return e[e.length-1].to;let i=Math.floor(t*n);for(let r=0;;r++){let{from:s,to:o}=e[r],l=o-s;if(i<=l)return s+i;i-=l}}function uh(t,e){let n=0;for(let{from:i,to:r}of t.ranges){if(e<=r){n+=e-i;break}n+=r-i}return n/t.total}function mV(t,e){for(let n of t)if(e(n))return n}const Rx={toDOM(t){return t},fromDOM(t){return t},scale:1,eq(t){return t==this}};class F1{constructor(e,n,i){let r=0,s=0,o=0;this.viewports=i.map(({from:l,to:a})=>{let u=n.lineAt(l,nt.ByPos,e,0,0).top,c=n.lineAt(a,nt.ByPos,e,0,0).bottom;return r+=c-u,{from:l,to:a,top:u,bottom:c,domTop:0,domBottom:0}}),this.scale=(7e6-r)/(n.height-r);for(let l of this.viewports)l.domTop=o+(l.top-s)*this.scale,o=l.domBottom=l.domTop+(l.bottom-l.top),s=l.bottom}toDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.top)return r+(e-i)*this.scale;if(e<=s.bottom)return s.domTop+(e-s.top);i=s.bottom,r=s.domBottom}}fromDOM(e){for(let n=0,i=0,r=0;;n++){let s=n<this.viewports.length?this.viewports[n]:null;if(!s||e<s.domTop)return i+(e-r)/this.scale;if(e<=s.domBottom)return s.top+(e-s.domTop);i=s.bottom,r=s.domBottom}}eq(e){return e instanceof F1?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((n,i)=>n.from==e.viewports[i].from&&n.to==e.viewports[i].to):!1}}function ja(t,e){if(e.scale==1)return t;let n=e.toDOM(t.top),i=e.toDOM(t.bottom);return new Gi(t.from,t.length,n,i-n,Array.isArray(t._content)?t._content.map(r=>ja(r,e)):t._content)}const ch=X.define({combine:t=>t.join(" ")}),f0=X.define({combine:t=>t.indexOf(!0)>-1}),d0=Es.newName(),e2=Es.newName(),t2=Es.newName(),n2={"&light":"."+e2,"&dark":"."+t2};function p0(t,e,n){return new Es(e,{finish(i){return/&/.test(i)?i.replace(/&\w*/,r=>{if(r=="&")return t;if(!n||!n[r])throw new RangeError(`Unsupported selector: ${r}`);return n[r]}):t+" "+i}})}const gV=p0("."+d0,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},n2),yV={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},qm=G.ie&&G.ie_version<=11;class vV{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Zj,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(n=>{for(let i of n)this.queue.push(i);(G.ie&&G.ie_version<=11||G.ios&&e.composing)&&n.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&G.android&&e.constructor.EDIT_CONTEXT!==!1&&!(G.chrome&&G.chrome_version<126)&&(this.editContext=new bV(e),e.state.facet(xr)&&(e.contentDOM.editContext=this.editContext.editContext)),qm&&(this.onCharData=n=>{this.queue.push({target:n.target,type:"characterData",oldValue:n.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var n;((n=this.view.docView)===null||n===void 0?void 0:n.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(n=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),n.length>0&&n[n.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(n=>{n.length>0&&n[n.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((n,i)=>n!=e[i]))){this.gapIntersection.disconnect();for(let n of e)this.gapIntersection.observe(n);this.gaps=e}}onSelectionChange(e){let n=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:i}=this,r=this.selectionRange;if(i.state.facet(xr)?i.root.activeElement!=this.dom:!Jh(this.dom,r))return;let s=r.anchorNode&&i.docView.nearest(r.anchorNode);if(s&&s.ignoreEvent(e)){n||(this.selectionChanged=!1);return}(G.ie&&G.ie_version<=11||G.android&&G.chrome)&&!i.state.selection.main.empty&&r.focusNode&&ru(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,n=Fu(e.root);if(!n)return!1;let i=G.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&wV(this.view,n)||n;if(!i||this.selectionRange.eq(i))return!1;let r=Jh(this.dom,i);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&t5(this.dom,i)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(i),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,n){this.selectionRange.set(e.node,e.offset,n.node,n.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,n=null;for(let i=this.dom;i;)if(i.nodeType==1)!n&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:n||(n=this.scrollTargets.slice(0,e)),n&&n.push(i),i=i.assignedSlot||i.parentNode;else if(i.nodeType==11)i=i.host;else break;if(e<this.scrollTargets.length&&!n&&(n=this.scrollTargets.slice(0,e)),n){for(let i of this.scrollTargets)i.removeEventListener("scroll",this.onScroll);for(let i of this.scrollTargets=n)i.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,yV),qm&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),qm&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,n){var i;if(!this.delayedAndroidKey){let r=()=>{let s=this.delayedAndroidKey;s&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=s.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&s.force&&bl(this.dom,s.key,s.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(r)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:n,force:this.lastChange<Date.now()-50||!!(!((i=this.delayedAndroidKey)===null||i===void 0)&&i.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let n=-1,i=-1,r=!1;for(let s of e){let o=this.readMutation(s);o&&(o.typeOver&&(r=!0),n==-1?{from:n,to:i}=o:(n=Math.min(o.from,n),i=Math.max(o.to,i)))}return{from:n,to:i,typeOver:r}}readChange(){let{from:e,to:n,typeOver:i}=this.processRecords(),r=this.selectionChanged&&Jh(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let s=new B5(this.view,e,n,i);return this.view.docView.domChanged={newSel:s.newSel?s.newSel.main:null},s}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let n=this.readChange();if(!n)return this.view.requestMeasure(),!1;let i=this.view.state,r=HO(this.view,n);return this.view.state==i&&(n.domChanged||n.newSel&&!n.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let n=this.view.docView.nearest(e.target);if(!n||n.ignoreMutation(e))return null;if(n.markDirty(e.type=="attributes"),e.type=="attributes"&&(n.flags|=4),e.type=="childList"){let i=Lx(n,e.previousSibling||e.target.previousSibling,-1),r=Lx(n,e.nextSibling||e.target.nextSibling,1);return{from:i?n.posAfter(i):n.posAtStart,to:r?n.posBefore(r):n.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:n.posAtStart,to:n.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(xr)!=e.state.facet(xr)&&(e.view.contentDOM.editContext=e.state.facet(xr)?this.editContext.editContext:null))}destroy(){var e,n,i;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(n=this.gapIntersection)===null||n===void 0||n.disconnect(),(i=this.resizeScroll)===null||i===void 0||i.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function Lx(t,e,n){for(;e;){let i=Ke.get(e);if(i&&i.parent==t)return i;let r=e.parentNode;e=r!=t.dom?r:n>0?e.nextSibling:e.previousSibling}return null}function Nx(t,e){let n=e.startContainer,i=e.startOffset,r=e.endContainer,s=e.endOffset,o=t.docView.domAtPos(t.state.selection.main.anchor);return ru(o.node,o.offset,r,s)&&([n,i,r,s]=[r,s,n,i]),{anchorNode:n,anchorOffset:i,focusNode:r,focusOffset:s}}function wV(t,e){if(e.getComposedRanges){let r=e.getComposedRanges(t.root)[0];if(r)return Nx(t,r)}let n=null;function i(r){r.preventDefault(),r.stopImmediatePropagation(),n=r.getTargetRanges()[0]}return t.contentDOM.addEventListener("beforeinput",i,!0),t.dom.ownerDocument.execCommand("indent"),t.contentDOM.removeEventListener("beforeinput",i,!0),n?Nx(t,n):null}class bV{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let n=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=i=>{let r=e.state.selection.main,{anchor:s,head:o}=r,l=this.toEditorPos(i.updateRangeStart),a=this.toEditorPos(i.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:i.updateRangeStart,editorBase:l,drifted:!1});let u={from:l,to:a,insert:Re.of(i.text.split(`
`))};if(u.from==this.from&&s<this.from?u.from=s:u.to==this.to&&s>this.to&&(u.to=s),u.from==u.to&&!u.insert.length){let c=z.single(this.toEditorPos(i.selectionStart),this.toEditorPos(i.selectionEnd));c.main.eq(r)||e.dispatch({selection:c,userEvent:"select"});return}if((G.mac||G.android)&&u.from==o-1&&/^\. ?$/.test(i.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(u={from:l,to:a,insert:Re.of([i.text.replace("."," ")])}),this.pendingContextChange=u,!e.state.readOnly){let c=this.to-this.from+(u.to-u.from+u.insert.length);B1(e,u,z.single(this.toEditorPos(i.selectionStart,c),this.toEditorPos(i.selectionEnd,c)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state))},this.handlers.characterboundsupdate=i=>{let r=[],s=null;for(let o=this.toEditorPos(i.rangeStart),l=this.toEditorPos(i.rangeEnd);o<l;o++){let a=e.coordsForChar(o);s=a&&new DOMRect(a.left,a.top,a.right-a.left,a.bottom-a.top)||s||new DOMRect,r.push(s)}n.updateCharacterBounds(i.rangeStart,r)},this.handlers.textformatupdate=i=>{let r=[];for(let s of i.getTextFormats()){let o=s.underlineStyle,l=s.underlineThickness;if(o!="None"&&l!="None"){let a=this.toEditorPos(s.rangeStart),u=this.toEditorPos(s.rangeEnd);if(a<u){let c=`text-decoration: underline ${o=="Dashed"?"dashed ":o=="Squiggle"?"wavy ":""}${l=="Thin"?1:2}px`;r.push(ne.mark({attributes:{style:c}}).range(a,u))}}}e.dispatch({effects:PO.of(ne.set(r))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:i}=this.composing;this.composing=null,i&&this.reset(e.state)}};for(let i in this.handlers)n.addEventListener(i,this.handlers[i]);this.measureReq={read:i=>{this.editContext.updateControlBounds(i.contentDOM.getBoundingClientRect());let r=Fu(i.root);r&&r.rangeCount&&this.editContext.updateSelectionBounds(r.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let n=0,i=!1,r=this.pendingContextChange;return e.changes.iterChanges((s,o,l,a,u)=>{if(i)return;let c=u.length-(o-s);if(r&&o>=r.to)if(r.from==s&&r.to==o&&r.insert.eq(u)){r=this.pendingContextChange=null,n+=c,this.to+=c;return}else r=null,this.revertPending(e.state);if(s+=n,o+=n,o<=this.from)this.from+=c,this.to+=c;else if(s<this.to){if(s<this.from||o>this.to||this.to-this.from+u.length>3e4){i=!0;return}this.editContext.updateText(this.toContextPos(s),this.toContextPos(o),u.toString()),this.to+=c}n+=c}),r&&!i&&this.revertPending(e.state),!i}update(e){let n=this.pendingContextChange,i=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(i.from,i.to)&&e.transactions.some(r=>!r.isUserEvent("input.type")&&r.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||n)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:n}=e.selection.main;this.from=Math.max(0,n-1e4),this.to=Math.min(e.doc.length,n+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let n=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(n.from),this.toContextPos(n.from+n.insert.length),e.doc.sliceString(n.from,n.to))}setSelection(e){let{main:n}=e.selection,i=this.toContextPos(Math.max(this.from,Math.min(this.to,n.anchor))),r=this.toContextPos(n.head);(this.editContext.selectionStart!=i||this.editContext.selectionEnd!=r)&&this.editContext.updateSelection(i,r)}rangeIsValid(e){let{head:n}=e.selection.main;return!(this.from>0&&n-this.from<500||this.to<e.doc.length&&this.to-n<500||this.to-this.from>1e4*3)}toEditorPos(e,n=this.to-this.from){e=Math.min(e,n);let i=this.composing;return i&&i.drifted?i.editorBase+(e-i.contextBase):e+this.from}toContextPos(e){let n=this.composing;return n&&n.drifted?n.contextBase+(e-n.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Y{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var n;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:i}=e;this.dispatchTransactions=e.dispatchTransactions||i&&(r=>r.forEach(s=>i(s,this)))||(r=>this.update(r)),this.dispatch=this.dispatch.bind(this),this._root=e.root||e5(e.parent)||document,this.viewState=new Mx(e.state||Ie.create(e)),e.scrollTo&&e.scrollTo.is(rh)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(rl).map(r=>new Vm(r));for(let r of this.plugins)r.update(this);this.observer=new vV(this),this.inputState=new j5(this),this.inputState.ensureHandlers(this.plugins),this.docView=new dx(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((n=document.fonts)===null||n===void 0)&&n.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let n=e.length==1&&e[0]instanceof Ot?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(n,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let n=!1,i=!1,r,s=this.state;for(let f of e){if(f.startState!=s)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");s=f.state}if(this.destroyed){this.viewState.state=s;return}let o=this.hasFocus,l=0,a=null;e.some(f=>f.annotation(GO))?(this.inputState.notifiedFocused=o,l=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=XO(s,o),a||(l=1));let u=this.observer.delayedAndroidKey,c=null;if(u?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(s.doc)||!this.state.selection.eq(s.selection))&&(c=null)):this.observer.clear(),s.facet(Ie.phrases)!=this.state.facet(Ie.phrases))return this.setState(s);r=Sd.create(this,s,e),r.flags|=l;let h=this.viewState.scrollTarget;try{this.updateState=2;for(let f of e){if(h&&(h=h.map(f.changes)),f.scrollIntoView){let{main:d}=f.state.selection;h=new Sl(d.empty?d:z.cursor(d.head,d.head>d.anchor?-1:1))}for(let d of f.effects)d.is(rh)&&(h=d.value.clip(this.state))}this.viewState.update(r,h),this.bidiCache=kd.update(this.bidiCache,r.changes),r.empty||(this.updatePlugins(r),this.inputState.update(r)),n=this.docView.update(r),this.state.facet(za)!=this.styleModules&&this.mountStyles(),i=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some(f=>f.isUserEvent("select.pointer")))}finally{this.updateState=0}if(r.startState.facet(ch)!=r.state.facet(ch)&&(this.viewState.mustMeasureContent=!0),(n||i||h||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!r.empty)for(let f of this.state.facet(a0))try{f(r)}catch(d){kn(this.state,d,"update listener")}(a||c)&&Promise.resolve().then(()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!HO(this,c)&&u.force&&bl(this.contentDOM,u.key,u.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let n=this.hasFocus;try{for(let i of this.plugins)i.destroy(this);this.viewState=new Mx(e),this.plugins=e.facet(rl).map(i=>new Vm(i)),this.pluginMap.clear();for(let i of this.plugins)i.update(this);this.docView.destroy(),this.docView=new dx(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}n&&this.focus(),this.requestMeasure()}updatePlugins(e){let n=e.startState.facet(rl),i=e.state.facet(rl);if(n!=i){let r=[];for(let s of i){let o=n.indexOf(s);if(o<0)r.push(new Vm(s));else{let l=this.plugins[o];l.mustUpdate=e,r.push(l)}}for(let s of this.plugins)s.mustUpdate!=e&&s.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);n!=i&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let n=e.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(i){kn(this.state,i,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let n=null,i=this.scrollDOM,r=i.scrollTop*this.scaleY,{scrollAnchorPos:s,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let l=0;;l++){if(o<0)if(hO(i))s=-1,o=this.viewState.heightMap.height;else{let d=this.viewState.scrollAnchorAt(r);s=d.from,o=d.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(l>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let u=[];a&4||([this.measureRequests,u]=[u,this.measureRequests]);let c=u.map(d=>{try{return d.read(this)}catch(p){return kn(this.state,p),Bx}}),h=Sd.create(this,this.state,[]),f=!1;h.flags|=a,n?n.flags|=a:n=h,this.updateState=2,h.empty||(this.updatePlugins(h),this.inputState.update(h),this.updateAttrs(),f=this.docView.update(h),f&&this.docViewUpdate());for(let d=0;d<u.length;d++)if(c[d]!=Bx)try{let p=u[d];p.write&&p.write(c[d],this)}catch(p){kn(this.state,p)}if(f&&this.docView.updateSelection(!0),!h.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}else{let p=(s<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(s).top)-o;if(p>1||p<-1){r=r+p,i.scrollTop=r/this.scaleY,o=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(n&&!n.empty)for(let l of this.state.facet(a0))l(n)}get themeClasses(){return d0+" "+(this.state.facet(f0)?t2:e2)+" "+this.state.facet(ch)}updateAttrs(){let e=Px(this,FO,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),n={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(xr)?"true":"false",class:"cm-content",style:`${G.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(n["aria-readonly"]="true"),Px(this,R1,n);let i=this.observer.ignore(()=>{let r=i0(this.contentDOM,this.contentAttrs,n),s=i0(this.dom,this.editorAttrs,e);return r||s});return this.editorAttrs=e,this.contentAttrs=n,i}showAnnouncements(e){let n=!0;for(let i of e)for(let r of i.effects)if(r.is(Y.announce)){n&&(this.announceDOM.textContent=""),n=!1;let s=this.announceDOM.appendChild(document.createElement("div"));s.textContent=r.value}}mountStyles(){this.styleModules=this.state.facet(za);let e=this.state.facet(Y.cspNonce);Es.mount(this.root,this.styleModules.concat(gV).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let n=0;n<this.measureRequests.length;n++)if(this.measureRequests[n].key===e.key){this.measureRequests[n]=e;return}}this.measureRequests.push(e)}}plugin(e){let n=this.pluginMap.get(e);return(n===void 0||n&&n.plugin!=e)&&this.pluginMap.set(e,n=this.plugins.find(i=>i.plugin==e)||null),n&&n.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,n,i){return Hm(this,e,vx(this,e,n,i))}moveByGroup(e,n){return Hm(this,e,vx(this,e,n,i=>M5(this,e.head,i)))}visualLineSide(e,n){let i=this.bidiSpans(e),r=this.textDirectionAt(e.from),s=i[n?i.length-1:0];return z.cursor(s.side(n,r)+e.from,s.forward(!n,r)?1:-1)}moveToLineBoundary(e,n,i=!0){return D5(this,e,n,i)}moveVertically(e,n,i){return Hm(this,e,R5(this,e,n,i))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,n=0){return this.docView.posFromDOM(e,n)}posAtCoords(e,n=!0){return this.readMeasured(),$O(this,e,n)}coordsAtPos(e,n=1){this.readMeasured();let i=this.docView.coordsAt(e,n);if(!i||i.left==i.right)return i;let r=this.state.doc.lineAt(e),s=this.bidiSpans(r),o=s[as.find(s,e-r.from,-1,n)];return fc(i,o.dir==rt.LTR==n>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(LO)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>SV)return EO(e.length);let n=this.textDirectionAt(e.from),i;for(let s of this.bidiCache)if(s.from==e.from&&s.dir==n&&(s.fresh||_O(s.isolates,i=fx(this,e))))return s.order;i||(i=fx(this,e));let r=m5(e.text,n,i);return this.bidiCache.push(new kd(e.from,e.to,n,i,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||G.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{uO(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,n={}){return rh.of(new Sl(typeof e=="number"?z.cursor(e):e,n.y,n.x,n.yMargin,n.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:n}=this.scrollDOM,i=this.viewState.scrollAnchorAt(e);return rh.of(new Sl(z.cursor(i.from),"start","start",i.top-e,n,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return wt.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return wt.define(()=>({}),{eventObservers:e})}static theme(e,n){let i=Es.newName(),r=[ch.of(i),za.of(p0(`.${i}`,e))];return n&&n.dark&&r.push(f0.of(!0)),r}static baseTheme(e){return Co.lowest(za.of(p0("."+d0,e,n2)))}static findFromDOM(e){var n;let i=e.querySelector(".cm-content"),r=i&&Ke.get(i)||Ke.get(e);return((n=r==null?void 0:r.rootView)===null||n===void 0?void 0:n.view)||null}}Y.styleModule=za;Y.inputHandler=MO;Y.clipboardInputFilter=D1;Y.clipboardOutputFilter=M1;Y.scrollHandler=BO;Y.focusChangeEffect=RO;Y.perLineTextDirection=LO;Y.exceptionSink=DO;Y.updateListener=a0;Y.editable=xr;Y.mouseSelectionStyle=OO;Y.dragMovesSelection=TO;Y.clickAddsSelectionRange=IO;Y.decorations=zu;Y.outerDecorations=zO;Y.atomicRanges=L1;Y.bidiIsolatedRanges=UO;Y.scrollMargins=jO;Y.darkTheme=f0;Y.cspNonce=X.define({combine:t=>t.length?t[0]:""});Y.contentAttributes=R1;Y.editorAttributes=FO;Y.lineWrapping=Y.contentAttributes.of({class:"cm-lineWrapping"});Y.announce=we.define();const SV=4096,Bx={};class kd{constructor(e,n,i,r,s,o){this.from=e,this.to=n,this.dir=i,this.isolates=r,this.fresh=s,this.order=o}static update(e,n){if(n.empty&&!e.some(s=>s.fresh))return e;let i=[],r=e.length?e[e.length-1].dir:rt.LTR;for(let s=Math.max(0,e.length-10);s<e.length;s++){let o=e[s];o.dir==r&&!n.touchesRange(o.from,o.to)&&i.push(new kd(n.mapPos(o.from,1),n.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return i}}function Px(t,e,n){for(let i=t.state.facet(e),r=i.length-1;r>=0;r--){let s=i[r],o=typeof s=="function"?s(t):s;o&&n0(o,n)}return n}const xV=G.mac?"mac":G.windows?"win":G.linux?"linux":"key";function kV(t,e){const n=t.split(/-(?!$)/);let i=n[n.length-1];i=="Space"&&(i=" ");let r,s,o,l;for(let a=0;a<n.length-1;++a){const u=n[a];if(/^(cmd|meta|m)$/i.test(u))l=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))s=!0;else if(/^s(hift)?$/i.test(u))o=!0;else if(/^mod$/i.test(u))e=="mac"?l=!0:s=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(i="Alt-"+i),s&&(i="Ctrl-"+i),l&&(i="Meta-"+i),o&&(i="Shift-"+i),i}function hh(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n!==!1&&e.shiftKey&&(t="Shift-"+t),t}const CV=Co.default(Y.domEventHandlers({keydown(t,e){return r2(i2(e.state),t,e,"editor")}})),_p=X.define({enables:CV}),Fx=new WeakMap;function i2(t){let e=t.facet(_p),n=Fx.get(e);return n||Fx.set(e,n=AV(e.reduce((i,r)=>i.concat(r),[]))),n}function _V(t,e,n){return r2(i2(t.state),e,t,n)}let ns=null;const EV=4e3;function AV(t,e=xV){let n=Object.create(null),i=Object.create(null),r=(o,l)=>{let a=i[o];if(a==null)i[o]=l;else if(a!=l)throw new Error("Key binding "+o+" is used both as a regular binding and as a multi-stroke prefix")},s=(o,l,a,u,c)=>{var h,f;let d=n[o]||(n[o]=Object.create(null)),p=l.split(/ (?!$)/).map(m=>kV(m,e));for(let m=1;m<p.length;m++){let y=p.slice(0,m).join(" ");r(y,!0),d[y]||(d[y]={preventDefault:!0,stopPropagation:!1,run:[v=>{let x=ns={view:v,prefix:y,scope:o};return setTimeout(()=>{ns==x&&(ns=null)},EV),!0}]})}let g=p.join(" ");r(g,!1);let w=d[g]||(d[g]={preventDefault:!1,stopPropagation:!1,run:((f=(h=d._any)===null||h===void 0?void 0:h.run)===null||f===void 0?void 0:f.slice())||[]});a&&w.run.push(a),u&&(w.preventDefault=!0),c&&(w.stopPropagation=!0)};for(let o of t){let l=o.scope?o.scope.split(" "):["editor"];if(o.any)for(let u of l){let c=n[u]||(n[u]=Object.create(null));c._any||(c._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:h}=o;for(let f in c)c[f].run.push(d=>h(d,m0))}let a=o[e]||o.key;if(a)for(let u of l)s(u,a,o.run,o.preventDefault,o.stopPropagation),o.shift&&s(u,"Shift-"+a,o.shift,o.preventDefault,o.stopPropagation)}return n}let m0=null;function r2(t,e,n,i){m0=e;let r=Yj(e),s=wn(r,0),o=Yi(s)==r.length&&r!=" ",l="",a=!1,u=!1,c=!1;ns&&ns.view==n&&ns.scope==i&&(l=ns.prefix+" ",qO.indexOf(e.keyCode)<0&&(u=!0,ns=null));let h=new Set,f=w=>{if(w){for(let m of w.run)if(!h.has(m)&&(h.add(m),m(n)))return w.stopPropagation&&(c=!0),!0;w.preventDefault&&(w.stopPropagation&&(c=!0),u=!0)}return!1},d=t[i],p,g;return d&&(f(d[l+hh(r,e,!o)])?a=!0:o&&(e.altKey||e.metaKey||e.ctrlKey)&&!(G.windows&&e.ctrlKey&&e.altKey)&&!(G.mac&&e.altKey&&!e.ctrlKey)&&(p=As[e.keyCode])&&p!=r?(f(d[l+hh(p,e,!0)])||e.shiftKey&&(g=Pu[e.keyCode])!=r&&g!=p&&f(d[l+hh(g,e,!1)]))&&(a=!0):o&&e.shiftKey&&f(d[l+hh(r,e,!0)])&&(a=!0),!a&&f(d._any)&&(a=!0)),u&&(a=!0),a&&c&&e.stopPropagation(),m0=null,a}class mc{constructor(e,n,i,r,s){this.className=e,this.left=n,this.top=i,this.width=r,this.height=s}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,n){return n.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,n,i){if(i.empty){let r=e.coordsAtPos(i.head,i.assoc||1);if(!r)return[];let s=s2(e);return[new mc(n,r.left-s.left,r.top-s.top,null,r.bottom-r.top)]}else return IV(e,n,i)}}function s2(t){let e=t.scrollDOM.getBoundingClientRect();return{left:(t.textDirection==rt.LTR?e.left:e.right-t.scrollDOM.clientWidth*t.scaleX)-t.scrollDOM.scrollLeft*t.scaleX,top:e.top-t.scrollDOM.scrollTop*t.scaleY}}function zx(t,e,n,i){let r=t.coordsAtPos(e,n*2);if(!r)return i;let s=t.dom.getBoundingClientRect(),o=(r.top+r.bottom)/2,l=t.posAtCoords({x:s.left+1,y:o}),a=t.posAtCoords({x:s.right-1,y:o});return l==null||a==null?i:{from:Math.max(i.from,Math.min(l,a)),to:Math.min(i.to,Math.max(l,a))}}function IV(t,e,n){if(n.to<=t.viewport.from||n.from>=t.viewport.to)return[];let i=Math.max(n.from,t.viewport.from),r=Math.min(n.to,t.viewport.to),s=t.textDirection==rt.LTR,o=t.contentDOM,l=o.getBoundingClientRect(),a=s2(t),u=o.querySelector(".cm-line"),c=u&&window.getComputedStyle(u),h=l.left+(c?parseInt(c.paddingLeft)+Math.min(0,parseInt(c.textIndent)):0),f=l.right-(c?parseInt(c.paddingRight):0),d=c0(t,i,1),p=c0(t,r,-1),g=d.type==an.Text?d:null,w=p.type==an.Text?p:null;if(g&&(t.lineWrapping||d.widgetLineBreaks)&&(g=zx(t,i,1,g)),w&&(t.lineWrapping||p.widgetLineBreaks)&&(w=zx(t,r,-1,w)),g&&w&&g.from==w.from&&g.to==w.to)return y(v(n.from,n.to,g));{let _=g?v(n.from,null,g):x(d,!1),b=w?v(null,n.to,w):x(p,!0),I=[];return(g||d).to<(w||p).from-(g&&w?1:0)||d.widgetLineBreaks>1&&_.bottom+t.defaultLineHeight/2<b.top?I.push(m(h,_.bottom,f,b.top)):_.bottom<b.top&&t.elementAtHeight((_.bottom+b.top)/2).type==an.Text&&(_.bottom=b.top=(_.bottom+b.top)/2),y(_).concat(I).concat(y(b))}function m(_,b,I,D){return new mc(e,_-a.left,b-a.top,I-_,D-b)}function y({top:_,bottom:b,horizontal:I}){let D=[];for(let F=0;F<I.length;F+=2)D.push(m(I[F],_,I[F+1],b));return D}function v(_,b,I){let D=1e9,F=-1e9,A=[];function B(K,U,Z,re,j){let q=t.coordsAtPos(K,K==I.to?-2:2),S=t.coordsAtPos(Z,Z==I.from?2:-2);!q||!S||(D=Math.min(q.top,S.top,D),F=Math.max(q.bottom,S.bottom,F),j==rt.LTR?A.push(s&&U?h:q.left,s&&re?f:S.right):A.push(!s&&re?h:S.left,!s&&U?f:q.right))}let N=_??I.from,W=b??I.to;for(let K of t.visibleRanges)if(K.to>N&&K.from<W)for(let U=Math.max(K.from,N),Z=Math.min(K.to,W);;){let re=t.state.doc.lineAt(U);for(let j of t.bidiSpans(re)){let q=j.from+re.from,S=j.to+re.from;if(q>=Z)break;S>U&&B(Math.max(q,U),_==null&&q<=N,Math.min(S,Z),b==null&&S>=W,j.dir)}if(U=re.to+1,U>=Z)break}return A.length==0&&B(N,_==null,W,b==null,t.textDirection),{top:D,bottom:F,horizontal:A}}function x(_,b){let I=l.top+(b?_.top:_.bottom);return{top:I,bottom:I,horizontal:[]}}}function TV(t,e){return t.constructor==e.constructor&&t.eq(e)}class OV{constructor(e,n){this.view=e,this.layer=n,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),n.above&&this.dom.classList.add("cm-layer-above"),n.class&&this.dom.classList.add(n.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),n.mount&&n.mount(this.dom,e)}update(e){e.startState.facet(nf)!=e.state.facet(nf)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let n=0,i=e.facet(nf);for(;n<i.length&&i[n]!=this.layer;)n++;this.dom.style.zIndex=String((this.layer.above?150:-1)-n)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:n}=this.view;(e!=this.scaleX||n!=this.scaleY)&&(this.scaleX=e,this.scaleY=n,this.dom.style.transform=`scale(${1/e}, ${1/n})`)}draw(e){if(e.length!=this.drawn.length||e.some((n,i)=>!TV(n,this.drawn[i]))){let n=this.dom.firstChild,i=0;for(let r of e)r.update&&n&&r.constructor&&this.drawn[i].constructor&&r.update(n,this.drawn[i])?(n=n.nextSibling,i++):this.dom.insertBefore(r.draw(),n);for(;n;){let r=n.nextSibling;n.remove(),n=r}this.drawn=e}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const nf=X.define();function o2(t){return[wt.define(e=>new OV(e,t)),nf.of(t)]}const Uu=X.define({combine(t){return cr(t,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,n)=>Math.min(e,n),drawRangeCursor:(e,n)=>e||n})}});function DV(t={}){return[Uu.of(t),MV,RV,LV,NO.of(!0)]}function l2(t){return t.startState.facet(Uu)!=t.state.facet(Uu)}const MV=o2({above:!0,markers(t){let{state:e}=t,n=e.facet(Uu),i=[];for(let r of e.selection.ranges){let s=r==e.selection.main;if(r.empty||n.drawRangeCursor){let o=s?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",l=r.empty?r:z.cursor(r.head,r.head>r.anchor?-1:1);for(let a of mc.forRange(t,o,l))i.push(a)}}return i},update(t,e){t.transactions.some(i=>i.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let n=l2(t);return n&&Ux(t.state,e),t.docChanged||t.selectionSet||n},mount(t,e){Ux(e.state,t)},class:"cm-cursorLayer"});function Ux(t,e){e.style.animationDuration=t.facet(Uu).cursorBlinkRate+"ms"}const RV=o2({above:!1,markers(t){return t.state.selection.ranges.map(e=>e.empty?[]:mc.forRange(t,"cm-selectionBackground",e)).reduce((e,n)=>e.concat(n))},update(t,e){return t.docChanged||t.selectionSet||t.viewportChanged||l2(t)},class:"cm-selectionLayer"}),LV=Co.highest(Y.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}})),a2=we.define({map(t,e){return t==null?null:e.mapPos(t)}}),Va=Vt.define({create(){return null},update(t,e){return t!=null&&(t=e.changes.mapPos(t)),e.effects.reduce((n,i)=>i.is(a2)?i.value:n,t)}}),NV=wt.fromClass(class{constructor(t){this.view=t,this.cursor=null,this.measureReq={read:this.readPos.bind(this),write:this.drawCursor.bind(this)}}update(t){var e;let n=t.state.field(Va);n==null?this.cursor!=null&&((e=this.cursor)===null||e===void 0||e.remove(),this.cursor=null):(this.cursor||(this.cursor=this.view.scrollDOM.appendChild(document.createElement("div")),this.cursor.className="cm-dropCursor"),(t.startState.field(Va)!=n||t.docChanged||t.geometryChanged)&&this.view.requestMeasure(this.measureReq))}readPos(){let{view:t}=this,e=t.state.field(Va),n=e!=null&&t.coordsAtPos(e);if(!n)return null;let i=t.scrollDOM.getBoundingClientRect();return{left:n.left-i.left+t.scrollDOM.scrollLeft*t.scaleX,top:n.top-i.top+t.scrollDOM.scrollTop*t.scaleY,height:n.bottom-n.top}}drawCursor(t){if(this.cursor){let{scaleX:e,scaleY:n}=this.view;t?(this.cursor.style.left=t.left/e+"px",this.cursor.style.top=t.top/n+"px",this.cursor.style.height=t.height/n+"px"):this.cursor.style.left="-100000px"}}destroy(){this.cursor&&this.cursor.remove()}setDropPos(t){this.view.state.field(Va)!=t&&this.view.dispatch({effects:a2.of(t)})}},{eventObservers:{dragover(t){this.setDropPos(this.view.posAtCoords({x:t.clientX,y:t.clientY}))},dragleave(t){(t.target==this.view.contentDOM||!this.view.contentDOM.contains(t.relatedTarget))&&this.setDropPos(null)},dragend(){this.setDropPos(null)},drop(){this.setDropPos(null)}}});function BV(){return[Va,NV]}function jx(t,e,n,i,r){e.lastIndex=0;for(let s=t.iterRange(n,i),o=n,l;!s.next().done;o+=s.value.length)if(!s.lineBreak)for(;l=e.exec(s.value);)r(o+l.index,l)}function PV(t,e){let n=t.visibleRanges;if(n.length==1&&n[0].from==t.viewport.from&&n[0].to==t.viewport.to)return n;let i=[];for(let{from:r,to:s}of n)r=Math.max(t.state.doc.lineAt(r).from,r-e),s=Math.min(t.state.doc.lineAt(s).to,s+e),i.length&&i[i.length-1].to>=r?i[i.length-1].to=s:i.push({from:r,to:s});return i}class FV{constructor(e){const{regexp:n,decoration:i,decorate:r,boundary:s,maxLength:o=1e3}=e;if(!n.global)throw new RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=n,r)this.addMatch=(l,a,u,c)=>r(c,u,u+l[0].length,l,a);else if(typeof i=="function")this.addMatch=(l,a,u,c)=>{let h=i(l,a,u);h&&c(u,u+l[0].length,h)};else if(i)this.addMatch=(l,a,u,c)=>c(u,u+l[0].length,i);else throw new RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=s,this.maxLength=o}createDeco(e){let n=new Dr,i=n.add.bind(n);for(let{from:r,to:s}of PV(e,this.maxLength))jx(e.state.doc,this.regexp,r,s,(o,l)=>this.addMatch(l,e,o,i));return n.finish()}updateDeco(e,n){let i=1e9,r=-1;return e.docChanged&&e.changes.iterChanges((s,o,l,a)=>{a>=e.view.viewport.from&&l<=e.view.viewport.to&&(i=Math.min(l,i),r=Math.max(a,r))}),e.viewportMoved||r-i>1e3?this.createDeco(e.view):r>-1?this.updateRange(e.view,n.map(e.changes),i,r):n}updateRange(e,n,i,r){for(let s of e.visibleRanges){let o=Math.max(s.from,i),l=Math.min(s.to,r);if(l>=o){let a=e.state.doc.lineAt(o),u=a.to<l?e.state.doc.lineAt(l):a,c=Math.max(s.from,a.from),h=Math.min(s.to,u.to);if(this.boundary){for(;o>a.from;o--)if(this.boundary.test(a.text[o-1-a.from])){c=o;break}for(;l<u.to;l++)if(this.boundary.test(u.text[l-u.from])){h=l;break}}let f=[],d,p=(g,w,m)=>f.push(m.range(g,w));if(a==u)for(this.regexp.lastIndex=c-a.from;(d=this.regexp.exec(a.text))&&d.index<h-a.from;)this.addMatch(d,e,d.index+a.from,p);else jx(e.state.doc,this.regexp,c,h,(g,w)=>this.addMatch(w,e,g,p));n=n.update({filterFrom:c,filterTo:h,filter:(g,w)=>g<c||w>h,add:f})}}return n}}const g0=/x/.unicode!=null?"gu":"g",zV=new RegExp(`[\0-\b
--­؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]`,g0),UV={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Qm=null;function jV(){var t;if(Qm==null&&typeof document<"u"&&document.body){let e=document.body.style;Qm=((t=e.tabSize)!==null&&t!==void 0?t:e.MozTabSize)!=null}return Qm||!1}const rf=X.define({combine(t){let e=cr(t,{render:null,specialChars:zV,addSpecialChars:null});return(e.replaceTabs=!jV())&&(e.specialChars=new RegExp("	|"+e.specialChars.source,g0)),e.addSpecialChars&&(e.specialChars=new RegExp(e.specialChars.source+"|"+e.addSpecialChars.source,g0)),e}});function VV(t={}){return[rf.of(t),$V()]}let Vx=null;function $V(){return Vx||(Vx=wt.fromClass(class{constructor(t){this.view=t,this.decorations=ne.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(t.state.facet(rf)),this.decorations=this.decorator.createDeco(t)}makeDecorator(t){return new FV({regexp:t.specialChars,decoration:(e,n,i)=>{let{doc:r}=n.state,s=wn(e[0],0);if(s==9){let o=r.lineAt(i),l=n.state.tabSize,a=ta(o.text,l,i-o.from);return ne.replace({widget:new QV((l-a%l)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[s]||(this.decorationCache[s]=ne.replace({widget:new qV(t,s)}))},boundary:t.replaceTabs?void 0:/[^]/})}update(t){let e=t.state.facet(rf);t.startState.facet(rf)!=e?(this.decorator=this.makeDecorator(e),this.decorations=this.decorator.createDeco(t.view)):this.decorations=this.decorator.updateDeco(t,this.decorations)}},{decorations:t=>t.decorations}))}const HV="•";function WV(t){return t>=32?HV:t==10?"␤":String.fromCharCode(9216+t)}class qV extends zr{constructor(e,n){super(),this.options=e,this.code=n}eq(e){return e.code==this.code}toDOM(e){let n=WV(this.code),i=e.state.phrase("Control character")+" "+(UV[this.code]||"0x"+this.code.toString(16)),r=this.options.render&&this.options.render(this.code,i,n);if(r)return r;let s=document.createElement("span");return s.textContent=n,s.title=i,s.setAttribute("aria-label",i),s.className="cm-specialChar",s}ignoreEvent(){return!1}}class QV extends zr{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="	",e.className="cm-tab",e.style.width=this.width+"px",e}ignoreEvent(){return!1}}function KV(){return GV}const YV=ne.line({class:"cm-activeLine"}),GV=wt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.docChanged||t.selectionSet)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=-1,n=[];for(let i of t.state.selection.ranges){let r=t.lineBlockAt(i.head);r.from>e&&(n.push(YV.range(r.from)),e=r.from)}return ne.set(n)}},{decorations:t=>t.decorations});class XV extends zr{constructor(e){super(),this.content=e}toDOM(e){let n=document.createElement("span");return n.className="cm-placeholder",n.style.pointerEvents="none",n.appendChild(typeof this.content=="string"?document.createTextNode(this.content):typeof this.content=="function"?this.content(e):this.content.cloneNode(!0)),n.setAttribute("aria-hidden","true"),n}coordsAt(e){let n=e.firstChild?Ul(e.firstChild):[];if(!n.length)return null;let i=window.getComputedStyle(e.parentNode),r=fc(n[0],i.direction!="rtl"),s=parseInt(i.lineHeight);return r.bottom-r.top>s*1.5?{left:r.left,right:r.right,top:r.top,bottom:r.top+s}:r}ignoreEvent(){return!1}}function JV(t){let e=wt.fromClass(class{constructor(n){this.view=n,this.placeholder=t?ne.set([ne.widget({widget:new XV(t),side:1}).range(0)]):ne.none}get decorations(){return this.view.state.doc.length?ne.none:this.placeholder}},{decorations:n=>n.decorations});return typeof t=="string"?[e,Y.contentAttributes.of({"aria-placeholder":t})]:e}const y0=2e3;function ZV(t,e,n){let i=Math.min(e.line,n.line),r=Math.max(e.line,n.line),s=[];if(e.off>y0||n.off>y0||e.col<0||n.col<0){let o=Math.min(e.off,n.off),l=Math.max(e.off,n.off);for(let a=i;a<=r;a++){let u=t.doc.line(a);u.length<=l&&s.push(z.range(u.from+o,u.to+l))}}else{let o=Math.min(e.col,n.col),l=Math.max(e.col,n.col);for(let a=i;a<=r;a++){let u=t.doc.line(a),c=Yy(u.text,o,t.tabSize,!0);if(c<0)s.push(z.cursor(u.to));else{let h=Yy(u.text,l,t.tabSize);s.push(z.range(u.from+c,u.from+h))}}}return s}function e$(t,e){let n=t.coordsAtPos(t.viewport.from);return n?Math.round(Math.abs((n.left-e)/t.defaultCharacterWidth)):-1}function $x(t,e){let n=t.posAtCoords({x:e.clientX,y:e.clientY},!1),i=t.state.doc.lineAt(n),r=n-i.from,s=r>y0?-1:r==i.length?e$(t,e.clientX):ta(i.text,t.state.tabSize,n-i.from);return{line:i.number,col:s,off:r}}function t$(t,e){let n=$x(t,e),i=t.state.selection;return n?{update(r){if(r.docChanged){let s=r.changes.mapPos(r.startState.doc.line(n.line).from),o=r.state.doc.lineAt(s);n={line:o.number,col:n.col,off:Math.min(n.off,o.length)},i=i.map(r.changes)}},get(r,s,o){let l=$x(t,r);if(!l)return i;let a=ZV(t.state,n,l);return a.length?o?z.create(a.concat(i.ranges)):z.create(a):i}}:null}function n$(t){let e=n=>n.altKey&&n.button==0;return Y.mouseSelectionStyle.of((n,i)=>e(i)?t$(n,i):null)}const i$={Alt:[18,t=>!!t.altKey],Control:[17,t=>!!t.ctrlKey],Shift:[16,t=>!!t.shiftKey],Meta:[91,t=>!!t.metaKey]},r$={style:"cursor: crosshair"};function s$(t={}){let[e,n]=i$[t.key||"Alt"],i=wt.fromClass(class{constructor(r){this.view=r,this.isDown=!1}set(r){this.isDown!=r&&(this.isDown=r,this.view.update([]))}},{eventObservers:{keydown(r){this.set(r.keyCode==e||n(r))},keyup(r){(r.keyCode==e||!n(r))&&this.set(!1)},mousemove(r){this.set(n(r))}}});return[i,Y.contentAttributes.of(r=>{var s;return!((s=r.plugin(i))===null||s===void 0)&&s.isDown?r$:null})]}const xa="-10000px";class u2{constructor(e,n,i,r){this.facet=n,this.createTooltipView=i,this.removeTooltipView=r,this.input=e.state.facet(n),this.tooltips=this.input.filter(o=>o);let s=null;this.tooltipViews=this.tooltips.map(o=>s=i(o,s))}update(e,n){var i;let r=e.state.facet(this.facet),s=r.filter(a=>a);if(r===this.input){for(let a of this.tooltipViews)a.update&&a.update(e);return!1}let o=[],l=n?[]:null;for(let a=0;a<s.length;a++){let u=s[a],c=-1;if(u){for(let h=0;h<this.tooltips.length;h++){let f=this.tooltips[h];f&&f.create==u.create&&(c=h)}if(c<0)o[a]=this.createTooltipView(u,a?o[a-1]:null),l&&(l[a]=!!u.above);else{let h=o[a]=this.tooltipViews[c];l&&(l[a]=n[c]),h.update&&h.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),(i=a.destroy)===null||i===void 0||i.call(a));return n&&(l.forEach((a,u)=>n[u]=a),n.length=l.length),this.input=r,this.tooltips=s,this.tooltipViews=o,!0}}function o$(t){let e=t.dom.ownerDocument.documentElement;return{top:0,left:0,bottom:e.clientHeight,right:e.clientWidth}}const Km=X.define({combine:t=>{var e,n,i;return{position:G.ios?"absolute":((e=t.find(r=>r.position))===null||e===void 0?void 0:e.position)||"fixed",parent:((n=t.find(r=>r.parent))===null||n===void 0?void 0:n.parent)||null,tooltipSpace:((i=t.find(r=>r.tooltipSpace))===null||i===void 0?void 0:i.tooltipSpace)||o$}}}),Hx=new WeakMap,z1=wt.fromClass(class{constructor(t){this.view=t,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let e=t.state.facet(Km);this.position=e.position,this.parent=e.parent,this.classes=t.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver=typeof ResizeObserver=="function"?new ResizeObserver(()=>this.measureSoon()):null,this.manager=new u2(t,U1,(n,i)=>this.createTooltip(n,i),n=>{this.resizeObserver&&this.resizeObserver.unobserve(n.dom),n.dom.remove()}),this.above=this.manager.tooltips.map(n=>!!n.above),this.intersectionObserver=typeof IntersectionObserver=="function"?new IntersectionObserver(n=>{Date.now()>this.lastTransaction-50&&n.length>0&&n[n.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),t.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let t of this.manager.tooltipViews)this.intersectionObserver.observe(t.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(t){t.transactions.length&&(this.lastTransaction=Date.now());let e=this.manager.update(t,this.above);e&&this.observeIntersection();let n=e||t.geometryChanged,i=t.state.facet(Km);if(i.position!=this.position&&!this.madeAbsolute){this.position=i.position;for(let r of this.manager.tooltipViews)r.dom.style.position=this.position;n=!0}if(i.parent!=this.parent){this.parent&&this.container.remove(),this.parent=i.parent,this.createContainer();for(let r of this.manager.tooltipViews)this.container.appendChild(r.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(t,e){let n=t.create(this.view),i=e?e.dom:null;if(n.dom.classList.add("cm-tooltip"),t.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let r=document.createElement("div");r.className="cm-tooltip-arrow",n.dom.appendChild(r)}return n.dom.style.position=this.position,n.dom.style.top=xa,n.dom.style.left="0px",this.container.insertBefore(n.dom,i),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var t,e,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let i of this.manager.tooltipViews)i.dom.remove(),(t=i.destroy)===null||t===void 0||t.call(i);this.parent&&this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(n=this.intersectionObserver)===null||n===void 0||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let t=1,e=1,n=!1;if(this.position=="fixed"&&this.manager.tooltipViews.length){let{dom:s}=this.manager.tooltipViews[0];if(G.gecko)n=s.offsetParent!=this.container.ownerDocument.body;else if(s.style.top==xa&&s.style.left=="0px"){let o=s.getBoundingClientRect();n=Math.abs(o.top+1e4)>1||Math.abs(o.left)>1}}if(n||this.position=="absolute")if(this.parent){let s=this.parent.getBoundingClientRect();s.width&&s.height&&(t=s.width/this.parent.offsetWidth,e=s.height/this.parent.offsetHeight)}else({scaleX:t,scaleY:e}=this.view.viewState);let i=this.view.scrollDOM.getBoundingClientRect(),r=N1(this.view);return{visible:{left:i.left+r.left,top:i.top+r.top,right:i.right-r.right,bottom:i.bottom-r.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map((s,o)=>{let l=this.manager.tooltipViews[o];return l.getCoords?l.getCoords(s.pos):this.view.coordsAtPos(s.pos)}),size:this.manager.tooltipViews.map(({dom:s})=>s.getBoundingClientRect()),space:this.view.state.facet(Km).tooltipSpace(this.view),scaleX:t,scaleY:e,makeAbsolute:n}}writeMeasure(t){var e;if(t.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let l of this.manager.tooltipViews)l.dom.style.position="absolute"}let{visible:n,space:i,scaleX:r,scaleY:s}=t,o=[];for(let l=0;l<this.manager.tooltips.length;l++){let a=this.manager.tooltips[l],u=this.manager.tooltipViews[l],{dom:c}=u,h=t.pos[l],f=t.size[l];if(!h||a.clip!==!1&&(h.bottom<=Math.max(n.top,i.top)||h.top>=Math.min(n.bottom,i.bottom)||h.right<Math.max(n.left,i.left)-.1||h.left>Math.min(n.right,i.right)+.1)){c.style.top=xa;continue}let d=a.arrow?u.dom.querySelector(".cm-tooltip-arrow"):null,p=d?7:0,g=f.right-f.left,w=(e=Hx.get(u))!==null&&e!==void 0?e:f.bottom-f.top,m=u.offset||a$,y=this.view.textDirection==rt.LTR,v=f.width>i.right-i.left?y?i.left:i.right-f.width:y?Math.max(i.left,Math.min(h.left-(d?14:0)+m.x,i.right-g)):Math.min(Math.max(i.left,h.left-g+(d?14:0)-m.x),i.right-g),x=this.above[l];!a.strictSide&&(x?h.top-w-p-m.y<i.top:h.bottom+w+p+m.y>i.bottom)&&x==i.bottom-h.bottom>h.top-i.top&&(x=this.above[l]=!x);let _=(x?h.top-i.top:i.bottom-h.bottom)-p;if(_<w&&u.resize!==!1){if(_<this.view.defaultLineHeight){c.style.top=xa;continue}Hx.set(u,w),c.style.height=(w=_)/s+"px"}else c.style.height&&(c.style.height="");let b=x?h.top-w-p-m.y:h.bottom+p+m.y,I=v+g;if(u.overlap!==!0)for(let D of o)D.left<I&&D.right>v&&D.top<b+w&&D.bottom>b&&(b=x?D.top-w-2-p:D.bottom+p+2);if(this.position=="absolute"?(c.style.top=(b-t.parent.top)/s+"px",Wx(c,(v-t.parent.left)/r)):(c.style.top=b/s+"px",Wx(c,v/r)),d){let D=h.left+(y?m.x:-m.x)-(v+14-7);d.style.left=D/r+"px"}u.overlap!==!0&&o.push({left:v,top:b,right:I,bottom:b+w}),c.classList.toggle("cm-tooltip-above",x),c.classList.toggle("cm-tooltip-below",!x),u.positioned&&u.positioned(t.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let t of this.manager.tooltipViews)t.dom.style.top=xa}},{eventObservers:{scroll(){this.maybeMeasure()}}});function Wx(t,e){let n=parseInt(t.style.left,10);(isNaN(n)||Math.abs(e-n)>1)&&(t.style.left=e+"px")}const l$=Y.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:`${7*2}px`,position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),a$={x:0,y:0},U1=X.define({enables:[z1,l$]}),Cd=X.define({combine:t=>t.reduce((e,n)=>e.concat(n),[])});class Ep{static create(e){return new Ep(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new u2(e,Cd,(n,i)=>this.createHostedView(n,i),n=>n.dom.remove())}createHostedView(e,n){let i=e.create(this.view);return i.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(i.dom,n?n.dom.nextSibling:this.dom.firstChild),this.mounted&&i.mount&&i.mount(this.view),i}mount(e){for(let n of this.manager.tooltipViews)n.mount&&n.mount(e);this.mounted=!0}positioned(e){for(let n of this.manager.tooltipViews)n.positioned&&n.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let n of this.manager.tooltipViews)(e=n.destroy)===null||e===void 0||e.call(n)}passProp(e){let n;for(let i of this.manager.tooltipViews){let r=i[e];if(r!==void 0){if(n===void 0)n=r;else if(n!==r)return}}return n}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const u$=U1.compute([Cd],t=>{let e=t.facet(Cd);return e.length===0?null:{pos:Math.min(...e.map(n=>n.pos)),end:Math.max(...e.map(n=>{var i;return(i=n.end)!==null&&i!==void 0?i:n.pos})),create:Ep.create,above:e[0].above,arrow:e.some(n=>n.arrow)}});class c${constructor(e,n,i,r,s){this.view=e,this.source=n,this.field=i,this.setHover=r,this.hoverTime=s,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout(()=>this.startHover(),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:n}=this,i=e.docView.nearest(n.target);if(!i)return;let r,s=1;if(i instanceof ls)r=i.posAtStart;else{if(r=e.posAtCoords(n),r==null)return;let l=e.coordsAtPos(r);if(!l||n.y<l.top||n.y>l.bottom||n.x<l.left-e.defaultCharacterWidth||n.x>l.right+e.defaultCharacterWidth)return;let a=e.bidiSpans(e.state.doc.lineAt(r)).find(c=>c.from<=r&&c.to>=r),u=a&&a.dir==rt.RTL?-1:1;s=n.x<l.left?-u:u}let o=this.source(e,r,s);if(o!=null&&o.then){let l=this.pending={pos:r};o.then(a=>{this.pending==l&&(this.pending=null,a&&!(Array.isArray(a)&&!a.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(a)?a:[a])}))},a=>kn(e.state,a,"hover tooltip"))}else o&&!(Array.isArray(o)&&!o.length)&&e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(z1),n=e?e.manager.tooltips.findIndex(i=>i.create==Ep.create):-1;return n>-1?e.manager.tooltipViews[n]:null}mousemove(e){var n,i;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:s}=this;if(r.length&&s&&!h$(s.dom,e)||this.pending){let{pos:o}=r[0]||this.pending,l=(i=(n=r[0])===null||n===void 0?void 0:n.end)!==null&&i!==void 0?i:o;(o==l?this.view.posAtCoords(this.lastMove)!=o:!f$(this.view,o,l,e.clientX,e.clientY))&&(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:n}=this;if(n.length){let{tooltip:i}=this;i&&i.dom.contains(e.relatedTarget)?this.watchTooltipLeave(i.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let n=i=>{e.removeEventListener("mouseleave",n),this.active.length&&!this.view.dom.contains(i.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",n)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const fh=4;function h$(t,e){let{left:n,right:i,top:r,bottom:s}=t.getBoundingClientRect(),o;if(o=t.querySelector(".cm-tooltip-arrow")){let l=o.getBoundingClientRect();r=Math.min(l.top,r),s=Math.max(l.bottom,s)}return e.clientX>=n-fh&&e.clientX<=i+fh&&e.clientY>=r-fh&&e.clientY<=s+fh}function f$(t,e,n,i,r,s){let o=t.scrollDOM.getBoundingClientRect(),l=t.documentTop+t.documentPadding.top+t.contentHeight;if(o.left>i||o.right<i||o.top>r||Math.min(o.bottom,l)<r)return!1;let a=t.posAtCoords({x:i,y:r},!1);return a>=e&&a<=n}function c2(t,e={}){let n=we.define(),i=Vt.define({create(){return[]},update(r,s){if(r.length&&(e.hideOnChange&&(s.docChanged||s.selection)?r=[]:e.hideOn&&(r=r.filter(o=>!e.hideOn(s,o))),s.docChanged)){let o=[];for(let l of r){let a=s.changes.mapPos(l.pos,-1,on.TrackDel);if(a!=null){let u=Object.assign(Object.create(null),l);u.pos=a,u.end!=null&&(u.end=s.changes.mapPos(u.end)),o.push(u)}}r=o}for(let o of s.effects)o.is(n)&&(r=o.value),o.is(d$)&&(r=[]);return r},provide:r=>Cd.from(r)});return{active:i,extension:[i,wt.define(r=>new c$(r,t,i,n,e.hoverTime||300)),u$]}}function h2(t,e){let n=t.plugin(z1);if(!n)return null;let i=n.manager.tooltips.indexOf(e);return i<0?null:n.manager.tooltipViews[i]}const d$=we.define(),qx=X.define({combine(t){let e,n;for(let i of t)e=e||i.topContainer,n=n||i.bottomContainer;return{topContainer:e,bottomContainer:n}}});function ju(t,e){let n=t.plugin(f2),i=n?n.specs.indexOf(e):-1;return i>-1?n.panels[i]:null}const f2=wt.fromClass(class{constructor(t){this.input=t.state.facet(Vu),this.specs=this.input.filter(n=>n),this.panels=this.specs.map(n=>n(t));let e=t.state.facet(qx);this.top=new dh(t,!0,e.topContainer),this.bottom=new dh(t,!1,e.bottomContainer),this.top.sync(this.panels.filter(n=>n.top)),this.bottom.sync(this.panels.filter(n=>!n.top));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(t){let e=t.state.facet(qx);this.top.container!=e.topContainer&&(this.top.sync([]),this.top=new dh(t.view,!0,e.topContainer)),this.bottom.container!=e.bottomContainer&&(this.bottom.sync([]),this.bottom=new dh(t.view,!1,e.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=t.state.facet(Vu);if(n!=this.input){let i=n.filter(a=>a),r=[],s=[],o=[],l=[];for(let a of i){let u=this.specs.indexOf(a),c;u<0?(c=a(t.view),l.push(c)):(c=this.panels[u],c.update&&c.update(t)),r.push(c),(c.top?s:o).push(c)}this.specs=i,this.panels=r,this.top.sync(s),this.bottom.sync(o);for(let a of l)a.dom.classList.add("cm-panel"),a.mount&&a.mount()}else for(let i of this.panels)i.update&&i.update(t)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:t=>Y.scrollMargins.of(e=>{let n=e.plugin(t);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}})});class dh{constructor(e,n,i){this.view=e,this.top=n,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let n of this.panels)n.destroy&&e.indexOf(n)<0&&n.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(this.panels.length==0){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let n=this.container||this.view.dom;n.insertBefore(this.dom,this.top?n.firstChild:null)}let e=this.dom.firstChild;for(let n of this.panels)if(n.dom.parentNode==this.dom){for(;e!=n.dom;)e=Qx(e);e=e.nextSibling}else this.dom.insertBefore(n.dom,e);for(;e;)e=Qx(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(!(!this.container||this.classes==this.view.themeClasses)){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function Qx(t){let e=t.nextSibling;return t.remove(),e}const Vu=X.define({enables:f2});class Rr extends po{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}Rr.prototype.elementClass="";Rr.prototype.toDOM=void 0;Rr.prototype.mapMode=on.TrackBefore;Rr.prototype.startSide=Rr.prototype.endSide=-1;Rr.prototype.point=!0;const sf=X.define(),p$=X.define(),m$={class:"",renderEmptyElements:!1,elementStyle:"",markers:()=>Me.empty,lineMarker:()=>null,widgetMarker:()=>null,lineMarkerChange:null,initialSpacer:null,updateSpacer:null,domEventHandlers:{},side:"before"},ou=X.define();function g$(t){return[d2(),ou.of({...m$,...t})]}const Kx=X.define({combine:t=>t.some(e=>e)});function d2(t){return[y$]}const y$=wt.fromClass(class{constructor(t){this.view=t,this.domAfter=null,this.prevViewport=t.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=t.state.facet(ou).map(e=>new Gx(t,e)),this.fixed=!t.state.facet(Kx);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),t.scrollDOM.insertBefore(this.dom,t.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(t){if(this.updateGutters(t)){let e=this.prevViewport,n=t.view.viewport,i=Math.min(e.to,n.to)-Math.max(e.from,n.from);this.syncGutters(i<(n.to-n.from)*.8)}if(t.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Kx)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=t.view.viewport}syncGutters(t){let e=this.dom.nextSibling;t&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let n=Me.iter(this.view.state.facet(sf),this.view.viewport.from),i=[],r=this.gutters.map(s=>new v$(s,this.view.viewport,-this.view.documentPadding.top));for(let s of this.view.viewportLineBlocks)if(i.length&&(i=[]),Array.isArray(s.type)){let o=!0;for(let l of s.type)if(l.type==an.Text&&o){v0(n,i,l.from);for(let a of r)a.line(this.view,l,i);o=!1}else if(l.widget)for(let a of r)a.widget(this.view,l)}else if(s.type==an.Text){v0(n,i,s.from);for(let o of r)o.line(this.view,s,i)}else if(s.widget)for(let o of r)o.widget(this.view,s);for(let s of r)s.finish();t&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(t){let e=t.startState.facet(ou),n=t.state.facet(ou),i=t.docChanged||t.heightChanged||t.viewportChanged||!Me.eq(t.startState.facet(sf),t.state.facet(sf),t.view.viewport.from,t.view.viewport.to);if(e==n)for(let r of this.gutters)r.update(t)&&(i=!0);else{i=!0;let r=[];for(let s of n){let o=e.indexOf(s);o<0?r.push(new Gx(this.view,s)):(this.gutters[o].update(t),r.push(this.gutters[o]))}for(let s of this.gutters)s.dom.remove(),r.indexOf(s)<0&&s.destroy();for(let s of r)s.config.side=="after"?this.getDOMAfter().appendChild(s.dom):this.dom.appendChild(s.dom);this.gutters=r}return i}destroy(){for(let t of this.gutters)t.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:t=>Y.scrollMargins.of(e=>{let n=e.plugin(t);if(!n||n.gutters.length==0||!n.fixed)return null;let i=n.dom.offsetWidth*e.scaleX,r=n.domAfter?n.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==rt.LTR?{left:i,right:r}:{right:i,left:r}})});function Yx(t){return Array.isArray(t)?t:[t]}function v0(t,e,n){for(;t.value&&t.from<=n;)t.from==n&&e.push(t.value),t.next()}class v${constructor(e,n,i){this.gutter=e,this.height=i,this.i=0,this.cursor=Me.iter(e.markers,n.from)}addElement(e,n,i){let{gutter:r}=this,s=(n.top-this.height)/e.scaleY,o=n.height/e.scaleY;if(this.i==r.elements.length){let l=new p2(e,o,s,i);r.elements.push(l),r.dom.appendChild(l.dom)}else r.elements[this.i].update(e,o,s,i);this.height=n.bottom,this.i++}line(e,n,i){let r=[];v0(this.cursor,r,n.from),i.length&&(r=r.concat(i));let s=this.gutter.config.lineMarker(e,n,r);s&&r.unshift(s);let o=this.gutter;r.length==0&&!o.config.renderEmptyElements||this.addElement(e,n,r)}widget(e,n){let i=this.gutter.config.widgetMarker(e,n.widget,n),r=i?[i]:null;for(let s of e.state.facet(p$)){let o=s(e,n.widget,n);o&&(r||(r=[])).push(o)}r&&this.addElement(e,n,r)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let n=e.elements.pop();e.dom.removeChild(n.dom),n.destroy()}}}class Gx{constructor(e,n){this.view=e,this.config=n,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let i in n.domEventHandlers)this.dom.addEventListener(i,r=>{let s=r.target,o;if(s!=this.dom&&this.dom.contains(s)){for(;s.parentNode!=this.dom;)s=s.parentNode;let a=s.getBoundingClientRect();o=(a.top+a.bottom)/2}else o=r.clientY;let l=e.lineBlockAtHeight(o-e.documentTop);n.domEventHandlers[i](e,l,r)&&r.preventDefault()});this.markers=Yx(n.markers(e)),n.initialSpacer&&(this.spacer=new p2(e,0,0,[n.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let n=this.markers;if(this.markers=Yx(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let r=this.config.updateSpacer(this.spacer.markers[0],e);r!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[r])}let i=e.view.viewport;return!Me.eq(this.markers,n,i.from,i.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class p2{constructor(e,n,i,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,n,i,r)}update(e,n,i,r){this.height!=n&&(this.height=n,this.dom.style.height=n+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),w$(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,n){let i="cm-gutterElement",r=this.dom.firstChild;for(let s=0,o=0;;){let l=o,a=s<n.length?n[s++]:null,u=!1;if(a){let c=a.elementClass;c&&(i+=" "+c);for(let h=o;h<this.markers.length;h++)if(this.markers[h].compare(a)){l=h,u=!0;break}}else l=this.markers.length;for(;o<l;){let c=this.markers[o++];if(c.toDOM){c.destroy(r);let h=r.nextSibling;r.remove(),r=h}}if(!a)break;a.toDOM&&(u?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),u&&o++}this.dom.className=i,this.markers=n}destroy(){this.setMarkers(null,[])}}function w$(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].compare(e[n]))return!1;return!0}const b$=X.define(),S$=X.define(),sl=X.define({combine(t){return cr(t,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,n){let i=Object.assign({},e);for(let r in n){let s=i[r],o=n[r];i[r]=s?(l,a,u)=>s(l,a,u)||o(l,a,u):o}return i}})}});class Ym extends Rr{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Gm(t,e){return t.state.facet(sl).formatNumber(e,t.state)}const x$=ou.compute([sl],t=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(b$)},lineMarker(e,n,i){return i.some(r=>r.toDOM)?null:new Ym(Gm(e,e.state.doc.lineAt(n.from).number))},widgetMarker:(e,n,i)=>{for(let r of e.state.facet(S$)){let s=r(e,n,i);if(s)return s}return null},lineMarkerChange:e=>e.startState.facet(sl)!=e.state.facet(sl),initialSpacer(e){return new Ym(Gm(e,Xx(e.state.doc.lines)))},updateSpacer(e,n){let i=Gm(n.view,Xx(n.view.state.doc.lines));return i==e.number?e:new Ym(i)},domEventHandlers:t.facet(sl).domEventHandlers,side:"before"}));function k$(t={}){return[sl.of(t),d2(),x$]}function Xx(t){let e=9;for(;e<t;)e=e*10+9;return e}const C$=new class extends Rr{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},_$=sf.compute(["selection"],t=>{let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.head).from;r>n&&(n=r,e.push(C$.range(r)))}return Me.of(e)});function E$(){return _$}function w0(){return w0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},w0.apply(null,arguments)}function A$(t,e){if(t==null)return{};var n={};for(var i in t)if({}.hasOwnProperty.call(t,i)){if(e.indexOf(i)!==-1)continue;n[i]=t[i]}return n}const m2=1024;let I$=0;class Xm{constructor(e,n){this.from=e,this.to=n}}class Ce{constructor(e={}){this.id=I$++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=On.match(e)),n=>{let i=e(n);return i===void 0?null:[this,i]}}}Ce.closedBy=new Ce({deserialize:t=>t.split(" ")});Ce.openedBy=new Ce({deserialize:t=>t.split(" ")});Ce.group=new Ce({deserialize:t=>t.split(" ")});Ce.isolate=new Ce({deserialize:t=>{if(t&&t!="rtl"&&t!="ltr"&&t!="auto")throw new RangeError("Invalid value for isolate: "+t);return t||"auto"}});Ce.contextHash=new Ce({perNode:!0});Ce.lookAhead=new Ce({perNode:!0});Ce.mounted=new Ce({perNode:!0});class _d{constructor(e,n,i){this.tree=e,this.overlay=n,this.parser=i}static get(e){return e&&e.props&&e.props[Ce.mounted.id]}}const T$=Object.create(null);class On{constructor(e,n,i,r=0){this.name=e,this.props=n,this.id=i,this.flags=r}static define(e){let n=e.props&&e.props.length?Object.create(null):T$,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),r=new On(e.name||"",n,e.id,i);if(e.props){for(let s of e.props)if(Array.isArray(s)||(s=s(r)),s){if(s[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");n[s[0].id]=s[1]}}return r}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let n=this.prop(Ce.group);return n?n.indexOf(e)>-1:!1}return this.id==e}static match(e){let n=Object.create(null);for(let i in e)for(let r of i.split(" "))n[r]=e[i];return i=>{for(let r=i.prop(Ce.group),s=-1;s<(r?r.length:0);s++){let o=n[s<0?i.name:r[s]];if(o)return o}}}}On.none=new On("",Object.create(null),0,8);class j1{constructor(e){this.types=e;for(let n=0;n<e.length;n++)if(e[n].id!=n)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let n=[];for(let i of this.types){let r=null;for(let s of e){let o=s(i);o&&(r||(r=Object.assign({},i.props)),r[o[0].id]=o[1])}n.push(r?new On(i.name,r,i.id,i.flags):i)}return new j1(n)}}const ph=new WeakMap,Jx=new WeakMap;var Mt;(function(t){t[t.ExcludeBuffers=1]="ExcludeBuffers",t[t.IncludeAnonymous=2]="IncludeAnonymous",t[t.IgnoreMounts=4]="IgnoreMounts",t[t.IgnoreOverlays=8]="IgnoreOverlays"})(Mt||(Mt={}));class kt{constructor(e,n,i,r,s){if(this.type=e,this.children=n,this.positions=i,this.length=r,this.props=null,s&&s.length){this.props=Object.create(null);for(let[o,l]of s)this.props[typeof o=="number"?o:o.id]=l}}toString(){let e=_d.get(this);if(e&&!e.overlay)return e.tree.toString();let n="";for(let i of this.children){let r=i.toString();r&&(n&&(n+=","),n+=r)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(n.length?"("+n+")":""):n}cursor(e=0){return new S0(this.topNode,e)}cursorAt(e,n=0,i=0){let r=ph.get(this)||this.topNode,s=new S0(r);return s.moveTo(e,n),ph.set(this,s._tree),s}get topNode(){return new ci(this,0,0,null)}resolve(e,n=0){let i=$u(ph.get(this)||this.topNode,e,n,!1);return ph.set(this,i),i}resolveInner(e,n=0){let i=$u(Jx.get(this)||this.topNode,e,n,!0);return Jx.set(this,i),i}resolveStack(e,n=0){return M$(this,e,n)}iterate(e){let{enter:n,leave:i,from:r=0,to:s=this.length}=e,o=e.mode||0,l=(o&Mt.IncludeAnonymous)>0;for(let a=this.cursor(o|Mt.IncludeAnonymous);;){let u=!1;if(a.from<=s&&a.to>=r&&(!l&&a.type.isAnonymous||n(a)!==!1)){if(a.firstChild())continue;u=!0}for(;u&&i&&(l||!a.type.isAnonymous)&&i(a),!a.nextSibling();){if(!a.parent())return;u=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let n in this.props)e.push([+n,this.props[n]]);return e}balance(e={}){return this.children.length<=8?this:H1(On.none,this.children,this.positions,0,this.children.length,0,this.length,(n,i,r)=>new kt(this.type,n,i,r,this.propValues),e.makeTree||((n,i,r)=>new kt(On.none,n,i,r)))}static build(e){return R$(e)}}kt.empty=new kt(On.none,[],[],0);class V1{constructor(e,n){this.buffer=e,this.index=n}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new V1(this.buffer,this.index)}}class Ts{constructor(e,n,i){this.buffer=e,this.length=n,this.set=i}get type(){return On.none}toString(){let e=[];for(let n=0;n<this.buffer.length;)e.push(this.childString(n)),n=this.buffer[n+3];return e.join(",")}childString(e){let n=this.buffer[e],i=this.buffer[e+3],r=this.set.types[n],s=r.name;if(/\W/.test(s)&&!r.isError&&(s=JSON.stringify(s)),e+=4,i==e)return s;let o=[];for(;e<i;)o.push(this.childString(e)),e=this.buffer[e+3];return s+"("+o.join(",")+")"}findChild(e,n,i,r,s){let{buffer:o}=this,l=-1;for(let a=e;a!=n&&!(g2(s,r,o[a+1],o[a+2])&&(l=a,i>0));a=o[a+3]);return l}slice(e,n,i){let r=this.buffer,s=new Uint16Array(n-e),o=0;for(let l=e,a=0;l<n;){s[a++]=r[l++],s[a++]=r[l++]-i;let u=s[a++]=r[l++]-i;s[a++]=r[l++]-e,o=Math.max(o,u)}return new Ts(s,o,this.set)}}function g2(t,e,n,i){switch(t){case-2:return n<e;case-1:return i>=e&&n<e;case 0:return n<e&&i>e;case 1:return n<=e&&i>e;case 2:return i>e;case 4:return!0}}function $u(t,e,n,i){for(var r;t.from==t.to||(n<1?t.from>=e:t.from>e)||(n>-1?t.to<=e:t.to<e);){let o=!i&&t instanceof ci&&t.index<0?null:t.parent;if(!o)return t;t=o}let s=i?0:Mt.IgnoreOverlays;if(i)for(let o=t,l=o.parent;l;o=l,l=o.parent)o instanceof ci&&o.index<0&&((r=l.enter(e,n,s))===null||r===void 0?void 0:r.from)!=o.from&&(t=l);for(;;){let o=t.enter(e,n,s);if(!o)return t;t=o}}class y2{cursor(e=0){return new S0(this,e)}getChild(e,n=null,i=null){let r=Zx(this,e,n,i);return r.length?r[0]:null}getChildren(e,n=null,i=null){return Zx(this,e,n,i)}resolve(e,n=0){return $u(this,e,n,!1)}resolveInner(e,n=0){return $u(this,e,n,!0)}matchContext(e){return b0(this.parent,e)}enterUnfinishedNodesBefore(e){let n=this.childBefore(e),i=this;for(;n;){let r=n.lastChild;if(!r||r.to!=n.to)break;r.type.isError&&r.from==r.to?(i=n,n=r.prevSibling):n=r}return i}get node(){return this}get next(){return this.parent}}class ci extends y2{constructor(e,n,i,r){super(),this._tree=e,this.from=n,this.index=i,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,n,i,r,s=0){for(let o=this;;){for(let{children:l,positions:a}=o._tree,u=n>0?l.length:-1;e!=u;e+=n){let c=l[e],h=a[e]+o.from;if(g2(r,i,h,h+c.length)){if(c instanceof Ts){if(s&Mt.ExcludeBuffers)continue;let f=c.findChild(0,c.buffer.length,n,i-h,r);if(f>-1)return new us(new O$(o,c,e,h),null,f)}else if(s&Mt.IncludeAnonymous||!c.type.isAnonymous||$1(c)){let f;if(!(s&Mt.IgnoreMounts)&&(f=_d.get(c))&&!f.overlay)return new ci(f.tree,h,e,o);let d=new ci(c,h,e,o);return s&Mt.IncludeAnonymous||!d.type.isAnonymous?d:d.nextChild(n<0?c.children.length-1:0,n,i,r)}}}if(s&Mt.IncludeAnonymous||!o.type.isAnonymous||(o.index>=0?e=o.index+n:e=n<0?-1:o._parent._tree.children.length,o=o._parent,!o))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,n,i=0){let r;if(!(i&Mt.IgnoreOverlays)&&(r=_d.get(this._tree))&&r.overlay){let s=e-this.from;for(let{from:o,to:l}of r.overlay)if((n>0?o<=s:o<s)&&(n<0?l>=s:l>s))return new ci(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,n,i)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Zx(t,e,n,i){let r=t.cursor(),s=[];if(!r.firstChild())return s;if(n!=null){for(let o=!1;!o;)if(o=r.type.is(n),!r.nextSibling())return s}for(;;){if(i!=null&&r.type.is(i))return s;if(r.type.is(e)&&s.push(r.node),!r.nextSibling())return i==null?s:[]}}function b0(t,e,n=e.length-1){for(let i=t;n>=0;i=i.parent){if(!i)return!1;if(!i.type.isAnonymous){if(e[n]&&e[n]!=i.name)return!1;n--}}return!0}class O${constructor(e,n,i,r){this.parent=e,this.buffer=n,this.index=i,this.start=r}}class us extends y2{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,n,i){super(),this.context=e,this._parent=n,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}child(e,n,i){let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.context.start,i);return s<0?null:new us(this.context,this,s)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,n,i=0){if(i&Mt.ExcludeBuffers)return null;let{buffer:r}=this.context,s=r.findChild(this.index+4,r.buffer[this.index+3],n>0?1:-1,e-this.context.start,n);return s<0?null:new us(this.context,this,s)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,n=e.buffer[this.index+3];return n<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new us(this.context,this._parent,n):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,n=this._parent?this._parent.index+4:0;return this.index==n?this.externalSibling(-1):new us(this.context,this._parent,e.findChild(n,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],n=[],{buffer:i}=this.context,r=this.index+4,s=i.buffer[this.index+3];if(s>r){let o=i.buffer[this.index+1];e.push(i.slice(r,s,o)),n.push(0)}return new kt(this.type,e,n,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function v2(t){if(!t.length)return null;let e=0,n=t[0];for(let s=1;s<t.length;s++){let o=t[s];(o.from>n.from||o.to<n.to)&&(n=o,e=s)}let i=n instanceof ci&&n.index<0?null:n.parent,r=t.slice();return i?r[e]=i:r.splice(e,1),new D$(r,n)}class D${constructor(e,n){this.heads=e,this.node=n}get next(){return v2(this.heads)}}function M$(t,e,n){let i=t.resolveInner(e,n),r=null;for(let s=i instanceof ci?i:i.context.parent;s;s=s.parent)if(s.index<0){let o=s.parent;(r||(r=[i])).push(o.resolve(e,n)),s=o}else{let o=_d.get(s.tree);if(o&&o.overlay&&o.overlay[0].from<=e&&o.overlay[o.overlay.length-1].to>=e){let l=new ci(o.tree,o.overlay[0].from+s.from,-1,s);(r||(r=[i])).push($u(l,e,n,!1))}}return r?v2(r):i}class S0{get name(){return this.type.name}constructor(e,n=0){if(this.mode=n,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof ci)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let i=e._parent;i;i=i._parent)this.stack.unshift(i.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,n){this.index=e;let{start:i,buffer:r}=this.buffer;return this.type=n||r.set.types[r.buffer[e]],this.from=i+r.buffer[e+1],this.to=i+r.buffer[e+2],!0}yield(e){return e?e instanceof ci?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,n,i){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,n,i,this.mode));let{buffer:r}=this.buffer,s=r.findChild(this.index+4,r.buffer[this.index+3],e,n-this.buffer.start,i);return s<0?!1:(this.stack.push(this.index),this.yieldBuf(s))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,n,i=this.mode){return this.buffer?i&Mt.ExcludeBuffers?!1:this.enterChild(1,e,n):this.yield(this._tree.enter(e,n,i))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Mt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Mt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:n}=this.buffer,i=this.stack.length-1;if(e<0){let r=i<0?0:this.stack[i]+4;if(this.index!=r)return this.yieldBuf(n.findChild(r,this.index,-1,0,4))}else{let r=n.buffer[this.index+3];if(r<(i<0?n.buffer.length:n.buffer[this.stack[i]+3]))return this.yieldBuf(r)}return i<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let n,i,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let s=0;s<this.index;s++)if(r.buffer.buffer[s+3]<this.index)return!1;({index:n,parent:i}=r)}else({index:n,_parent:i}=this._tree);for(;i;{index:n,_parent:i}=i)if(n>-1)for(let s=n+e,o=e<0?-1:i._tree.children.length;s!=o;s+=e){let l=i._tree.children[s];if(this.mode&Mt.IncludeAnonymous||l instanceof Ts||!l.type.isAnonymous||$1(l))return!1}return!0}move(e,n){if(n&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,n=0){for(;(this.from==this.to||(n<1?this.from>=e:this.from>e)||(n>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,n););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,n=null,i=0;if(e&&e.context==this.buffer)e:for(let r=this.index,s=this.stack.length;s>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;n=o,i=s+1;break e}r=this.stack[--s]}for(let r=i;r<this.stack.length;r++)n=new us(this.buffer,n,this.stack[r]);return this.bufferNode=new us(this.buffer,n,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,n){for(let i=0;;){let r=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){i++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&n&&n(this),r=this.type.isAnonymous,!i)return;if(this.nextSibling())break;this.parent(),i--,r=!0}}}matchContext(e){if(!this.buffer)return b0(this.node.parent,e);let{buffer:n}=this.buffer,{types:i}=n.set;for(let r=e.length-1,s=this.stack.length-1;r>=0;s--){if(s<0)return b0(this._tree,e,r);let o=i[n.buffer[this.stack[s]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function $1(t){return t.children.some(e=>e instanceof Ts||!e.type.isAnonymous||$1(e))}function R$(t){var e;let{buffer:n,nodeSet:i,maxBufferLength:r=m2,reused:s=[],minRepeatType:o=i.types.length}=t,l=Array.isArray(n)?new V1(n,n.length):n,a=i.types,u=0,c=0;function h(_,b,I,D,F,A){let{id:B,start:N,end:W,size:K}=l,U=c,Z=u;for(;K<0;)if(l.next(),K==-1){let te=s[B];I.push(te),D.push(N-_);return}else if(K==-3){u=B;return}else if(K==-4){c=B;return}else throw new RangeError(`Unrecognized record size: ${K}`);let re=a[B],j,q,S=N-_;if(W-N<=r&&(q=w(l.pos-b,F))){let te=new Uint16Array(q.size-q.skip),se=l.pos-q.size,C=te.length;for(;l.pos>se;)C=m(q.start,te,C);j=new Ts(te,W-q.start,i),S=q.start-_}else{let te=l.pos-K;l.next();let se=[],C=[],Ne=B>=o?B:-1,Pe=0,ve=W;for(;l.pos>te;)Ne>=0&&l.id==Ne&&l.size>=0?(l.end<=ve-r&&(p(se,C,N,Pe,l.end,ve,Ne,U,Z),Pe=se.length,ve=l.end),l.next()):A>2500?f(N,te,se,C):h(N,te,se,C,Ne,A+1);if(Ne>=0&&Pe>0&&Pe<se.length&&p(se,C,N,Pe,N,ve,Ne,U,Z),se.reverse(),C.reverse(),Ne>-1&&Pe>0){let Xe=d(re,Z);j=H1(re,se,C,0,se.length,0,W-N,Xe,Xe)}else j=g(re,se,C,W-N,U-W,Z)}I.push(j),D.push(S)}function f(_,b,I,D){let F=[],A=0,B=-1;for(;l.pos>b;){let{id:N,start:W,end:K,size:U}=l;if(U>4)l.next();else{if(B>-1&&W<B)break;B<0&&(B=K-r),F.push(N,W,K),A++,l.next()}}if(A){let N=new Uint16Array(A*4),W=F[F.length-2];for(let K=F.length-3,U=0;K>=0;K-=3)N[U++]=F[K],N[U++]=F[K+1]-W,N[U++]=F[K+2]-W,N[U++]=U;I.push(new Ts(N,F[2]-W,i)),D.push(W-_)}}function d(_,b){return(I,D,F)=>{let A=0,B=I.length-1,N,W;if(B>=0&&(N=I[B])instanceof kt){if(!B&&N.type==_&&N.length==F)return N;(W=N.prop(Ce.lookAhead))&&(A=D[B]+N.length+W)}return g(_,I,D,F,A,b)}}function p(_,b,I,D,F,A,B,N,W){let K=[],U=[];for(;_.length>D;)K.push(_.pop()),U.push(b.pop()+I-F);_.push(g(i.types[B],K,U,A-F,N-A,W)),b.push(F-I)}function g(_,b,I,D,F,A,B){if(A){let N=[Ce.contextHash,A];B=B?[N].concat(B):[N]}if(F>25){let N=[Ce.lookAhead,F];B=B?[N].concat(B):[N]}return new kt(_,b,I,D,B)}function w(_,b){let I=l.fork(),D=0,F=0,A=0,B=I.end-r,N={size:0,start:0,skip:0};e:for(let W=I.pos-_;I.pos>W;){let K=I.size;if(I.id==b&&K>=0){N.size=D,N.start=F,N.skip=A,A+=4,D+=4,I.next();continue}let U=I.pos-K;if(K<0||U<W||I.start<B)break;let Z=I.id>=o?4:0,re=I.start;for(I.next();I.pos>U;){if(I.size<0)if(I.size==-3)Z+=4;else break e;else I.id>=o&&(Z+=4);I.next()}F=re,D+=K,A+=Z}return(b<0||D==_)&&(N.size=D,N.start=F,N.skip=A),N.size>4?N:void 0}function m(_,b,I){let{id:D,start:F,end:A,size:B}=l;if(l.next(),B>=0&&D<o){let N=I;if(B>4){let W=l.pos-(B-4);for(;l.pos>W;)I=m(_,b,I)}b[--I]=N,b[--I]=A-_,b[--I]=F-_,b[--I]=D}else B==-3?u=D:B==-4&&(c=D);return I}let y=[],v=[];for(;l.pos>0;)h(t.start||0,t.bufferStart||0,y,v,-1,0);let x=(e=t.length)!==null&&e!==void 0?e:y.length?v[0]+y[0].length:0;return new kt(a[t.topID],y.reverse(),v.reverse(),x)}const ek=new WeakMap;function of(t,e){if(!t.isAnonymous||e instanceof Ts||e.type!=t)return 1;let n=ek.get(e);if(n==null){n=1;for(let i of e.children){if(i.type!=t||!(i instanceof kt)){n=1;break}n+=of(t,i)}ek.set(e,n)}return n}function H1(t,e,n,i,r,s,o,l,a){let u=0;for(let p=i;p<r;p++)u+=of(t,e[p]);let c=Math.ceil(u*1.5/8),h=[],f=[];function d(p,g,w,m,y){for(let v=w;v<m;){let x=v,_=g[v],b=of(t,p[v]);for(v++;v<m;v++){let I=of(t,p[v]);if(b+I>=c)break;b+=I}if(v==x+1){if(b>c){let I=p[x];d(I.children,I.positions,0,I.children.length,g[x]+y);continue}h.push(p[x])}else{let I=g[v-1]+p[v-1].length-_;h.push(H1(t,p,g,x,v,_,I,null,a))}f.push(_+y-s)}}return d(e,n,i,r,0),(l||a)(h,f,o)}class io{constructor(e,n,i,r,s=!1,o=!1){this.from=e,this.to=n,this.tree=i,this.offset=r,this.open=(s?1:0)|(o?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,n=[],i=!1){let r=[new io(0,e.length,e,0,!1,i)];for(let s of n)s.to>e.length&&r.push(s);return r}static applyChanges(e,n,i=128){if(!n.length)return e;let r=[],s=1,o=e.length?e[0]:null;for(let l=0,a=0,u=0;;l++){let c=l<n.length?n[l]:null,h=c?c.fromA:1e9;if(h-a>=i)for(;o&&o.from<h;){let f=o;if(a>=f.from||h<=f.to||u){let d=Math.max(f.from,a)-u,p=Math.min(f.to,h)-u;f=d>=p?null:new io(d,p,f.tree,f.offset+u,l>0,!!c)}if(f&&r.push(f),o.to>h)break;o=s<e.length?e[s++]:null}if(!c)break;a=c.toA,u=c.toA-c.toB}return r}}class w2{startParse(e,n,i){return typeof e=="string"&&(e=new L$(e)),i=i?i.length?i.map(r=>new Xm(r.from,r.to)):[new Xm(0,0)]:[new Xm(0,e.length)],this.createParse(e,n||[],i)}parse(e,n,i){let r=this.startParse(e,n,i);for(;;){let s=r.advance();if(s)return s}}}class L${constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,n){return this.string.slice(e,n)}}new Ce({perNode:!0});let N$=0;class ii{constructor(e,n,i,r){this.name=e,this.set=n,this.base=i,this.modified=r,this.id=N$++}toString(){let{name:e}=this;for(let n of this.modified)n.name&&(e=`${n.name}(${e})`);return e}static define(e,n){let i=typeof e=="string"?e:"?";if(e instanceof ii&&(n=e),n!=null&&n.base)throw new Error("Can not derive from a modified tag");let r=new ii(i,[],null,[]);if(r.set.push(r),n)for(let s of n.set)r.set.push(s);return r}static defineModifier(e){let n=new Ed(e);return i=>i.modified.indexOf(n)>-1?i:Ed.get(i.base||i,i.modified.concat(n).sort((r,s)=>r.id-s.id))}}let B$=0;class Ed{constructor(e){this.name=e,this.instances=[],this.id=B$++}static get(e,n){if(!n.length)return e;let i=n[0].instances.find(l=>l.base==e&&P$(n,l.modified));if(i)return i;let r=[],s=new ii(e.name,r,e,n);for(let l of n)l.instances.push(s);let o=F$(n);for(let l of e.set)if(!l.modified.length)for(let a of o)r.push(Ed.get(l,a));return s}}function P$(t,e){return t.length==e.length&&t.every((n,i)=>n==e[i])}function F$(t){let e=[[]];for(let n=0;n<t.length;n++)for(let i=0,r=e.length;i<r;i++)e.push(e[i].concat(t[n]));return e.sort((n,i)=>i.length-n.length)}function b2(t){let e=Object.create(null);for(let n in t){let i=t[n];Array.isArray(i)||(i=[i]);for(let r of n.split(" "))if(r){let s=[],o=2,l=r;for(let h=0;;){if(l=="..."&&h>0&&h+3==r.length){o=1;break}let f=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(l);if(!f)throw new RangeError("Invalid path: "+r);if(s.push(f[0]=="*"?"":f[0][0]=='"'?JSON.parse(f[0]):f[0]),h+=f[0].length,h==r.length)break;let d=r[h++];if(h==r.length&&d=="!"){o=0;break}if(d!="/")throw new RangeError("Invalid path: "+r);l=r.slice(h)}let a=s.length-1,u=s[a];if(!u)throw new RangeError("Invalid path: "+r);let c=new Ad(i,o,a>0?s.slice(0,a):null);e[u]=c.sort(e[u])}}return S2.add(e)}const S2=new Ce;class Ad{constructor(e,n,i,r){this.tags=e,this.mode=n,this.context=i,this.next=r}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Ad.empty=new Ad([],2,null);function x2(t,e){let n=Object.create(null);for(let s of t)if(!Array.isArray(s.tag))n[s.tag.id]=s.class;else for(let o of s.tag)n[o.id]=s.class;let{scope:i,all:r=null}=e||{};return{style:s=>{let o=r;for(let l of s)for(let a of l.set){let u=n[a.id];if(u){o=o?o+" "+u:u;break}}return o},scope:i}}function z$(t,e){let n=null;for(let i of t){let r=i.style(e);r&&(n=n?n+" "+r:r)}return n}function U$(t,e,n,i=0,r=t.length){let s=new j$(i,Array.isArray(e)?e:[e],n);s.highlightRange(t.cursor(),i,r,"",s.highlighters),s.flush(r)}class j${constructor(e,n,i){this.at=e,this.highlighters=n,this.span=i,this.class=""}startSpan(e,n){n!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=n)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,n,i,r,s){let{type:o,from:l,to:a}=e;if(l>=i||a<=n)return;o.isTop&&(s=this.highlighters.filter(d=>!d.scope||d.scope(o)));let u=r,c=V$(e)||Ad.empty,h=z$(s,c.tags);if(h&&(u&&(u+=" "),u+=h,c.mode==1&&(r+=(r?" ":"")+h)),this.startSpan(Math.max(n,l),u),c.opaque)return;let f=e.tree&&e.tree.prop(Ce.mounted);if(f&&f.overlay){let d=e.node.enter(f.overlay[0].from+l,1),p=this.highlighters.filter(w=>!w.scope||w.scope(f.tree.type)),g=e.firstChild();for(let w=0,m=l;;w++){let y=w<f.overlay.length?f.overlay[w]:null,v=y?y.from+l:a,x=Math.max(n,m),_=Math.min(i,v);if(x<_&&g)for(;e.from<_&&(this.highlightRange(e,x,_,r,s),this.startSpan(Math.min(_,e.to),u),!(e.to>=v||!e.nextSibling())););if(!y||v>i)break;m=y.to+l,m>n&&(this.highlightRange(d.cursor(),Math.max(n,y.from+l),Math.min(i,m),"",p),this.startSpan(Math.min(i,m),u))}g&&e.parent()}else if(e.firstChild()){f&&(r="");do if(!(e.to<=n)){if(e.from>=i)break;this.highlightRange(e,n,i,r,s),this.startSpan(Math.min(i,e.to),u)}while(e.nextSibling());e.parent()}}}function V$(t){let e=t.type.prop(S2);for(;e&&e.context&&!t.matchContext(e.context);)e=e.next;return e||null}const Q=ii.define,mh=Q(),Jr=Q(),tk=Q(Jr),nk=Q(Jr),Zr=Q(),gh=Q(Zr),Jm=Q(Zr),zi=Q(),Us=Q(zi),Bi=Q(),Pi=Q(),x0=Q(),ka=Q(x0),yh=Q(),M={comment:mh,lineComment:Q(mh),blockComment:Q(mh),docComment:Q(mh),name:Jr,variableName:Q(Jr),typeName:tk,tagName:Q(tk),propertyName:nk,attributeName:Q(nk),className:Q(Jr),labelName:Q(Jr),namespace:Q(Jr),macroName:Q(Jr),literal:Zr,string:gh,docString:Q(gh),character:Q(gh),attributeValue:Q(gh),number:Jm,integer:Q(Jm),float:Q(Jm),bool:Q(Zr),regexp:Q(Zr),escape:Q(Zr),color:Q(Zr),url:Q(Zr),keyword:Bi,self:Q(Bi),null:Q(Bi),atom:Q(Bi),unit:Q(Bi),modifier:Q(Bi),operatorKeyword:Q(Bi),controlKeyword:Q(Bi),definitionKeyword:Q(Bi),moduleKeyword:Q(Bi),operator:Pi,derefOperator:Q(Pi),arithmeticOperator:Q(Pi),logicOperator:Q(Pi),bitwiseOperator:Q(Pi),compareOperator:Q(Pi),updateOperator:Q(Pi),definitionOperator:Q(Pi),typeOperator:Q(Pi),controlOperator:Q(Pi),punctuation:x0,separator:Q(x0),bracket:ka,angleBracket:Q(ka),squareBracket:Q(ka),paren:Q(ka),brace:Q(ka),content:zi,heading:Us,heading1:Q(Us),heading2:Q(Us),heading3:Q(Us),heading4:Q(Us),heading5:Q(Us),heading6:Q(Us),contentSeparator:Q(zi),list:Q(zi),quote:Q(zi),emphasis:Q(zi),strong:Q(zi),link:Q(zi),monospace:Q(zi),strikethrough:Q(zi),inserted:Q(),deleted:Q(),changed:Q(),invalid:Q(),meta:yh,documentMeta:Q(yh),annotation:Q(yh),processingInstruction:Q(yh),definition:ii.defineModifier("definition"),constant:ii.defineModifier("constant"),function:ii.defineModifier("function"),standard:ii.defineModifier("standard"),local:ii.defineModifier("local"),special:ii.defineModifier("special")};for(let t in M){let e=M[t];e instanceof ii&&(e.name=t)}x2([{tag:M.link,class:"tok-link"},{tag:M.heading,class:"tok-heading"},{tag:M.emphasis,class:"tok-emphasis"},{tag:M.strong,class:"tok-strong"},{tag:M.keyword,class:"tok-keyword"},{tag:M.atom,class:"tok-atom"},{tag:M.bool,class:"tok-bool"},{tag:M.url,class:"tok-url"},{tag:M.labelName,class:"tok-labelName"},{tag:M.inserted,class:"tok-inserted"},{tag:M.deleted,class:"tok-deleted"},{tag:M.literal,class:"tok-literal"},{tag:M.string,class:"tok-string"},{tag:M.number,class:"tok-number"},{tag:[M.regexp,M.escape,M.special(M.string)],class:"tok-string2"},{tag:M.variableName,class:"tok-variableName"},{tag:M.local(M.variableName),class:"tok-variableName tok-local"},{tag:M.definition(M.variableName),class:"tok-variableName tok-definition"},{tag:M.special(M.variableName),class:"tok-variableName2"},{tag:M.definition(M.propertyName),class:"tok-propertyName tok-definition"},{tag:M.typeName,class:"tok-typeName"},{tag:M.namespace,class:"tok-namespace"},{tag:M.className,class:"tok-className"},{tag:M.macroName,class:"tok-macroName"},{tag:M.propertyName,class:"tok-propertyName"},{tag:M.operator,class:"tok-operator"},{tag:M.comment,class:"tok-comment"},{tag:M.meta,class:"tok-meta"},{tag:M.invalid,class:"tok-invalid"},{tag:M.punctuation,class:"tok-punctuation"}]);var Zm;const ol=new Ce;function $$(t){return X.define({combine:t?e=>e.concat(t):void 0})}const H$=new Ce;class xi{constructor(e,n,i=[],r=""){this.data=e,this.name=r,Ie.prototype.hasOwnProperty("tree")||Object.defineProperty(Ie.prototype,"tree",{get(){return Nt(this)}}),this.parser=n,this.extension=[Os.of(this),Ie.languageData.of((s,o,l)=>{let a=ik(s,o,l),u=a.type.prop(ol);if(!u)return[];let c=s.facet(u),h=a.type.prop(H$);if(h){let f=a.resolve(o-a.from,l);for(let d of h)if(d.test(f,s)){let p=s.facet(d.facet);return d.type=="replace"?p:p.concat(c)}}return c})].concat(i)}isActiveAt(e,n,i=-1){return ik(e,n,i).type.prop(ol)==this.data}findRegions(e){let n=e.facet(Os);if((n==null?void 0:n.data)==this.data)return[{from:0,to:e.doc.length}];if(!n||!n.allowsNesting)return[];let i=[],r=(s,o)=>{if(s.prop(ol)==this.data){i.push({from:o,to:o+s.length});return}let l=s.prop(Ce.mounted);if(l){if(l.tree.prop(ol)==this.data){if(l.overlay)for(let a of l.overlay)i.push({from:a.from+o,to:a.to+o});else i.push({from:o,to:o+s.length});return}else if(l.overlay){let a=i.length;if(r(l.tree,l.overlay[0].from+o),i.length>a)return}}for(let a=0;a<s.children.length;a++){let u=s.children[a];u instanceof kt&&r(u,s.positions[a]+o)}};return r(Nt(e),0),i}get allowsNesting(){return!0}}xi.setState=we.define();function ik(t,e,n){let i=t.facet(Os),r=Nt(t).topNode;if(!i||i.allowsNesting)for(let s=r;s;s=s.enter(e,n,Mt.ExcludeBuffers))s.type.isTop&&(r=s);return r}class Id extends xi{constructor(e,n,i){super(e,n,[],i),this.parser=n}static define(e){let n=$$(e.languageData);return new Id(n,e.parser.configure({props:[ol.add(i=>i.isTop?n:void 0)]}),e.name)}configure(e,n){return new Id(this.data,this.parser.configure(e),n||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Nt(t){let e=t.field(xi.state,!1);return e?e.tree:kt.empty}class W${constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,n){let i=this.cursorPos-this.string.length;return e<i||n>=this.cursorPos?this.doc.sliceString(e,n):this.string.slice(e-i,n-i)}}let Ca=null;class Td{constructor(e,n,i=[],r,s,o,l,a){this.parser=e,this.state=n,this.fragments=i,this.tree=r,this.treeLen=s,this.viewport=o,this.skipped=l,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,n,i){return new Td(e,n,[],kt.empty,0,i,[],null)}startParse(){return this.parser.startParse(new W$(this.state.doc),this.fragments)}work(e,n){return n!=null&&n>=this.state.doc.length&&(n=void 0),this.tree!=kt.empty&&this.isDone(n??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var i;if(typeof e=="number"){let r=Date.now()+e;e=()=>Date.now()>r}for(this.parse||(this.parse=this.startParse()),n!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>n)&&n<this.state.doc.length&&this.parse.stopAt(n);;){let r=this.parse.advance();if(r)if(this.fragments=this.withoutTempSkipped(io.addTree(r,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(i=this.parse.stoppedAt)!==null&&i!==void 0?i:this.state.doc.length,this.tree=r,this.parse=null,this.treeLen<(n??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,n;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(n=this.parse.advance()););}),this.treeLen=e,this.tree=n,this.fragments=this.withoutTempSkipped(io.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let n=Ca;Ca=this;try{return e()}finally{Ca=n}}withoutTempSkipped(e){for(let n;n=this.tempSkipped.pop();)e=rk(e,n.from,n.to);return e}changes(e,n){let{fragments:i,tree:r,treeLen:s,viewport:o,skipped:l}=this;if(this.takeTree(),!e.empty){let a=[];if(e.iterChangedRanges((u,c,h,f)=>a.push({fromA:u,toA:c,fromB:h,toB:f})),i=io.applyChanges(i,a),r=kt.empty,s=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){l=[];for(let u of this.skipped){let c=e.mapPos(u.from,1),h=e.mapPos(u.to,-1);c<h&&l.push({from:c,to:h})}}}return new Td(this.parser,n,i,r,s,o,l,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let n=this.skipped.length;for(let i=0;i<this.skipped.length;i++){let{from:r,to:s}=this.skipped[i];r<e.to&&s>e.from&&(this.fragments=rk(this.fragments,r,s),this.skipped.splice(i--,1))}return this.skipped.length>=n?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,n){this.skipped.push({from:e,to:n})}static getSkippingParser(e){return new class extends w2{createParse(n,i,r){let s=r[0].from,o=r[r.length-1].to;return{parsedPos:s,advance(){let a=Ca;if(a){for(let u of r)a.tempSkipped.push(u);e&&(a.scheduleOn=a.scheduleOn?Promise.all([a.scheduleOn,e]):e)}return this.parsedPos=o,new kt(On.none,[],[],o-s)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let n=this.fragments;return this.treeLen>=e&&n.length&&n[0].from==0&&n[0].to>=e}static get(){return Ca}}function rk(t,e,n){return io.applyChanges(t,[{fromA:e,toA:n,fromB:e,toB:n}])}class Hl{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let n=this.context.changes(e.changes,e.state),i=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),n.viewport.to);return n.work(20,i)||n.takeTree(),new Hl(n)}static init(e){let n=Math.min(3e3,e.doc.length),i=Td.create(e.facet(Os).parser,e,{from:0,to:n});return i.work(20,n)||i.takeTree(),new Hl(i)}}xi.state=Vt.define({create:Hl.init,update(t,e){for(let n of e.effects)if(n.is(xi.setState))return n.value;return e.startState.facet(Os)!=e.state.facet(Os)?Hl.init(e.state):t.apply(e)}});let k2=t=>{let e=setTimeout(()=>t(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(k2=t=>{let e=-1,n=setTimeout(()=>{e=requestIdleCallback(t,{timeout:400})},100);return()=>e<0?clearTimeout(n):cancelIdleCallback(e)});const eg=typeof navigator<"u"&&(!((Zm=navigator.scheduling)===null||Zm===void 0)&&Zm.isInputPending)?()=>navigator.scheduling.isInputPending():null,q$=wt.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let n=this.view.state.field(xi.state).context;(n.updateViewport(e.view.viewport)||this.view.viewport.to>n.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(n)}scheduleWork(){if(this.working)return;let{state:e}=this.view,n=e.field(xi.state);(n.tree!=n.context.tree||!n.context.isDone(e.doc.length))&&(this.working=k2(this.work))}work(e){this.working=null;let n=Date.now();if(this.chunkEnd<n&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=n+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:i,viewport:{to:r}}=this.view,s=i.field(xi.state);if(s.tree==s.context.tree&&s.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!eg?Math.max(25,e.timeRemaining()-5):1e9),l=s.context.treeLen<r&&i.doc.length>r+1e3,a=s.context.work(()=>eg&&eg()||Date.now()>o,r+(l?0:1e5));this.chunkBudget-=Date.now()-n,(a||this.chunkBudget<=0)&&(s.context.takeTree(),this.view.dispatch({effects:xi.setState.of(new Hl(s.context))})),this.chunkBudget>0&&!(a&&!l)&&this.scheduleWork(),this.checkAsyncSchedule(s.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(n=>kn(this.view.state,n)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Os=X.define({combine(t){return t.length?t[0]:null},enables:t=>[xi.state,q$,Y.contentAttributes.compute([t],e=>{let n=e.facet(t);return n&&n.name?{"data-language":n.name}:{}})]});class Q${constructor(e,n=[]){this.language=e,this.support=n,this.extension=[e,n]}}const K$=X.define(),Ap=X.define({combine:t=>{if(!t.length)return"  ";let e=t[0];if(!e||/\S/.test(e)||Array.from(e).some(n=>n!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(t[0]));return e}});function Od(t){let e=t.facet(Ap);return e.charCodeAt(0)==9?t.tabSize*e.length:e.length}function Hu(t,e){let n="",i=t.tabSize,r=t.facet(Ap)[0];if(r=="	"){for(;e>=i;)n+="	",e-=i;r=" "}for(let s=0;s<e;s++)n+=r;return n}function W1(t,e){t instanceof Ie&&(t=new Ip(t));for(let i of t.state.facet(K$)){let r=i(t,e);if(r!==void 0)return r}let n=Nt(t.state);return n.length>=e?Y$(t,n,e):null}class Ip{constructor(e,n={}){this.state=e,this.options=n,this.unit=Od(e)}lineAt(e,n=1){let i=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:s}=this.options;return r!=null&&r>=i.from&&r<=i.to?s&&r==e?{text:"",from:e}:(n<0?r<e:r<=e)?{text:i.text.slice(r-i.from),from:r}:{text:i.text.slice(0,r-i.from),from:i.from}:i}textAfterPos(e,n=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:i,from:r}=this.lineAt(e,n);return i.slice(e-r,Math.min(i.length,e+100-r))}column(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.countColumn(i,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(s+=o-this.countColumn(i,i.search(/\S|$/))),s}countColumn(e,n=e.length){return ta(e,this.state.tabSize,n)}lineIndent(e,n=1){let{text:i,from:r}=this.lineAt(e,n),s=this.options.overrideIndentation;if(s){let o=s(r);if(o>-1)return o}return this.countColumn(i,i.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const C2=new Ce;function Y$(t,e,n){let i=e.resolveStack(n),r=e.resolveInner(n,-1).resolve(n,0).enterUnfinishedNodesBefore(n);if(r!=i.node){let s=[];for(let o=r;o&&!(o.from<i.node.from||o.to>i.node.to||o.from==i.node.from&&o.type==i.node.type);o=o.parent)s.push(o);for(let o=s.length-1;o>=0;o--)i={node:s[o],next:i}}return _2(i,t,n)}function _2(t,e,n){for(let i=t;i;i=i.next){let r=X$(i.node);if(r)return r(q1.create(e,n,i))}return 0}function G$(t){return t.pos==t.options.simulateBreak&&t.options.simulateDoubleBreak}function X$(t){let e=t.type.prop(C2);if(e)return e;let n=t.firstChild,i;if(n&&(i=n.type.prop(Ce.closedBy))){let r=t.lastChild,s=r&&i.indexOf(r.name)>-1;return o=>t9(o,!0,1,void 0,s&&!G$(o)?r.from:void 0)}return t.parent==null?J$:null}function J$(){return 0}class q1 extends Ip{constructor(e,n,i){super(e.state,e.options),this.base=e,this.pos=n,this.context=i}get node(){return this.context.node}static create(e,n,i){return new q1(e,n,i)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let n=this.state.doc.lineAt(e.from);for(;;){let i=e.resolve(n.from);for(;i.parent&&i.parent.from==i.from;)i=i.parent;if(Z$(i,e))break;n=this.state.doc.lineAt(i.from)}return this.lineIndent(n.from)}continue(){return _2(this.context.next,this.base,this.pos)}}function Z$(t,e){for(let n=e;n;n=n.parent)if(t==n)return!0;return!1}function e9(t){let e=t.node,n=e.childAfter(e.from),i=e.lastChild;if(!n)return null;let r=t.options.simulateBreak,s=t.state.doc.lineAt(n.from),o=r==null||r<=s.from?s.to:Math.min(s.to,r);for(let l=n.to;;){let a=e.childAfter(l);if(!a||a==i)return null;if(!a.type.isSkipped){if(a.from>=o)return null;let u=/^ */.exec(s.text.slice(n.to-s.from))[0].length;return{from:n.from,to:n.to+u}}l=a.to}}function t9(t,e,n,i,r){let s=t.textAfter,o=s.match(/^\s*/)[0].length,l=i&&s.slice(o,o+i.length)==i||r==t.pos+o,a=e9(t);return a?l?t.column(a.from):t.column(a.to):t.baseIndent+(l?0:t.unit*n)}function n9({except:t,units:e=1}={}){return n=>{let i=t&&t.test(n.textAfter);return n.baseIndent+(i?0:e*n.unit)}}const i9=200;function r9(){return Ie.transactionFilter.of(t=>{if(!t.docChanged||!t.isUserEvent("input.type")&&!t.isUserEvent("input.complete"))return t;let e=t.startState.languageDataAt("indentOnInput",t.startState.selection.main.head);if(!e.length)return t;let n=t.newDoc,{head:i}=t.newSelection.main,r=n.lineAt(i);if(i>r.from+i9)return t;let s=n.sliceString(r.from,i);if(!e.some(u=>u.test(s)))return t;let{state:o}=t,l=-1,a=[];for(let{head:u}of o.selection.ranges){let c=o.doc.lineAt(u);if(c.from==l)continue;l=c.from;let h=W1(o,c.from);if(h==null)continue;let f=/^\s*/.exec(c.text)[0],d=Hu(o,h);f!=d&&a.push({from:c.from,to:c.from+f.length,insert:d})}return a.length?[t,{changes:a,sequential:!0}]:t})}const s9=X.define(),E2=new Ce;function o9(t,e,n){let i=Nt(t);if(i.length<n)return null;let r=i.resolveStack(n,1),s=null;for(let o=r;o;o=o.next){let l=o.node;if(l.to<=n||l.from>n)continue;if(s&&l.from<e)break;let a=l.type.prop(E2);if(a&&(l.to<i.length-50||i.length==t.doc.length||!l9(l))){let u=a(l,t);u&&u.from<=n&&u.from>=e&&u.to>n&&(s=u)}}return s}function l9(t){let e=t.lastChild;return e&&e.to==t.to&&e.type.isError}function Dd(t,e,n){for(let i of t.facet(s9)){let r=i(t,e,n);if(r)return r}return o9(t,e,n)}function A2(t,e){let n=e.mapPos(t.from,1),i=e.mapPos(t.to,-1);return n>=i?void 0:{from:n,to:i}}const Tp=we.define({map:A2}),gc=we.define({map:A2});function I2(t){let e=[];for(let{head:n}of t.state.selection.ranges)e.some(i=>i.from<=n&&i.to>=n)||e.push(t.lineBlockAt(n));return e}const vo=Vt.define({create(){return ne.none},update(t,e){e.isUserEvent("delete")&&e.changes.iterChangedRanges((n,i)=>t=sk(t,n,i)),t=t.map(e.changes);for(let n of e.effects)if(n.is(Tp)&&!a9(t,n.value.from,n.value.to)){let{preparePlaceholder:i}=e.state.facet(D2),r=i?ne.replace({widget:new m9(i(e.state,n.value))}):ok;t=t.update({add:[r.range(n.value.from,n.value.to)]})}else n.is(gc)&&(t=t.update({filter:(i,r)=>n.value.from!=i||n.value.to!=r,filterFrom:n.value.from,filterTo:n.value.to}));return e.selection&&(t=sk(t,e.selection.main.head)),t},provide:t=>Y.decorations.from(t),toJSON(t,e){let n=[];return t.between(0,e.doc.length,(i,r)=>{n.push(i,r)}),n},fromJSON(t){if(!Array.isArray(t)||t.length%2)throw new RangeError("Invalid JSON for fold state");let e=[];for(let n=0;n<t.length;){let i=t[n++],r=t[n++];if(typeof i!="number"||typeof r!="number")throw new RangeError("Invalid JSON for fold state");e.push(ok.range(i,r))}return ne.set(e,!0)}});function sk(t,e,n=e){let i=!1;return t.between(e,n,(r,s)=>{r<n&&s>e&&(i=!0)}),i?t.update({filterFrom:e,filterTo:n,filter:(r,s)=>r>=n||s<=e}):t}function Md(t,e,n){var i;let r=null;return(i=t.field(vo,!1))===null||i===void 0||i.between(e,n,(s,o)=>{(!r||r.from>s)&&(r={from:s,to:o})}),r}function a9(t,e,n){let i=!1;return t.between(e,e,(r,s)=>{r==e&&s==n&&(i=!0)}),i}function T2(t,e){return t.field(vo,!1)?e:e.concat(we.appendConfig.of(M2()))}const u9=t=>{for(let e of I2(t)){let n=Dd(t.state,e.from,e.to);if(n)return t.dispatch({effects:T2(t.state,[Tp.of(n),O2(t,n)])}),!0}return!1},c9=t=>{if(!t.state.field(vo,!1))return!1;let e=[];for(let n of I2(t)){let i=Md(t.state,n.from,n.to);i&&e.push(gc.of(i),O2(t,i,!1))}return e.length&&t.dispatch({effects:e}),e.length>0};function O2(t,e,n=!0){let i=t.state.doc.lineAt(e.from).number,r=t.state.doc.lineAt(e.to).number;return Y.announce.of(`${t.state.phrase(n?"Folded lines":"Unfolded lines")} ${i} ${t.state.phrase("to")} ${r}.`)}const h9=t=>{let{state:e}=t,n=[];for(let i=0;i<e.doc.length;){let r=t.lineBlockAt(i),s=Dd(e,r.from,r.to);s&&n.push(Tp.of(s)),i=(s?t.lineBlockAt(s.to):r).to+1}return n.length&&t.dispatch({effects:T2(t.state,n)}),!!n.length},f9=t=>{let e=t.state.field(vo,!1);if(!e||!e.size)return!1;let n=[];return e.between(0,t.state.doc.length,(i,r)=>{n.push(gc.of({from:i,to:r}))}),t.dispatch({effects:n}),!0},d9=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:u9},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:c9},{key:"Ctrl-Alt-[",run:h9},{key:"Ctrl-Alt-]",run:f9}],p9={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},D2=X.define({combine(t){return cr(t,p9)}});function M2(t){return[vo,v9]}function R2(t,e){let{state:n}=t,i=n.facet(D2),r=o=>{let l=t.lineBlockAt(t.posAtDOM(o.target)),a=Md(t.state,l.from,l.to);a&&t.dispatch({effects:gc.of(a)}),o.preventDefault()};if(i.placeholderDOM)return i.placeholderDOM(t,r,e);let s=document.createElement("span");return s.textContent=i.placeholderText,s.setAttribute("aria-label",n.phrase("folded code")),s.title=n.phrase("unfold"),s.className="cm-foldPlaceholder",s.onclick=r,s}const ok=ne.replace({widget:new class extends zr{toDOM(t){return R2(t,null)}}});class m9 extends zr{constructor(e){super(),this.value=e}eq(e){return this.value==e.value}toDOM(e){return R2(e,this.value)}}const g9={openText:"⌄",closedText:"›",markerDOM:null,domEventHandlers:{},foldingChanged:()=>!1};class tg extends Rr{constructor(e,n){super(),this.config=e,this.open=n}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){if(this.config.markerDOM)return this.config.markerDOM(this.open);let n=document.createElement("span");return n.textContent=this.open?this.config.openText:this.config.closedText,n.title=e.state.phrase(this.open?"Fold line":"Unfold line"),n}}function y9(t={}){let e={...g9,...t},n=new tg(e,!0),i=new tg(e,!1),r=wt.fromClass(class{constructor(o){this.from=o.viewport.from,this.markers=this.buildMarkers(o)}update(o){(o.docChanged||o.viewportChanged||o.startState.facet(Os)!=o.state.facet(Os)||o.startState.field(vo,!1)!=o.state.field(vo,!1)||Nt(o.startState)!=Nt(o.state)||e.foldingChanged(o))&&(this.markers=this.buildMarkers(o.view))}buildMarkers(o){let l=new Dr;for(let a of o.viewportLineBlocks){let u=Md(o.state,a.from,a.to)?i:Dd(o.state,a.from,a.to)?n:null;u&&l.add(a.from,a.from,u)}return l.finish()}}),{domEventHandlers:s}=e;return[r,g$({class:"cm-foldGutter",markers(o){var l;return((l=o.plugin(r))===null||l===void 0?void 0:l.markers)||Me.empty},initialSpacer(){return new tg(e,!1)},domEventHandlers:{...s,click:(o,l,a)=>{if(s.click&&s.click(o,l,a))return!0;let u=Md(o.state,l.from,l.to);if(u)return o.dispatch({effects:gc.of(u)}),!0;let c=Dd(o.state,l.from,l.to);return c?(o.dispatch({effects:Tp.of(c)}),!0):!1}}}),M2()]}const v9=Y.baseTheme({".cm-foldPlaceholder":{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},".cm-foldGutter span":{padding:"0 1px",cursor:"pointer"}});class yc{constructor(e,n){this.specs=e;let i;function r(l){let a=Es.newName();return(i||(i=Object.create(null)))["."+a]=l,a}const s=typeof n.all=="string"?n.all:n.all?r(n.all):void 0,o=n.scope;this.scope=o instanceof xi?l=>l.prop(ol)==o.data:o?l=>l==o:void 0,this.style=x2(e.map(l=>({tag:l.tag,class:l.class||r(Object.assign({},l,{tag:null}))})),{all:s}).style,this.module=i?new Es(i):null,this.themeType=n.themeType}static define(e,n){return new yc(e,n||{})}}const k0=X.define(),L2=X.define({combine(t){return t.length?[t[0]]:null}});function ng(t){let e=t.facet(k0);return e.length?e:t.facet(L2)}function N2(t,e){let n=[b9],i;return t instanceof yc&&(t.module&&n.push(Y.styleModule.of(t.module)),i=t.themeType),e!=null&&e.fallback?n.push(L2.of(t)):i?n.push(k0.computeN([Y.darkTheme],r=>r.facet(Y.darkTheme)==(i=="dark")?[t]:[])):n.push(k0.of(t)),n}class w9{constructor(e){this.markCache=Object.create(null),this.tree=Nt(e.state),this.decorations=this.buildDeco(e,ng(e.state)),this.decoratedTo=e.viewport.to}update(e){let n=Nt(e.state),i=ng(e.state),r=i!=ng(e.startState),{viewport:s}=e.view,o=e.changes.mapPos(this.decoratedTo,1);n.length<s.to&&!r&&n.type==this.tree.type&&o>=s.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(n!=this.tree||e.viewportChanged||r)&&(this.tree=n,this.decorations=this.buildDeco(e.view,i),this.decoratedTo=s.to)}buildDeco(e,n){if(!n||!this.tree.length)return ne.none;let i=new Dr;for(let{from:r,to:s}of e.visibleRanges)U$(this.tree,n,(o,l,a)=>{i.add(o,l,this.markCache[a]||(this.markCache[a]=ne.mark({class:a})))},r,s);return i.finish()}}const b9=Co.high(wt.fromClass(w9,{decorations:t=>t.decorations})),S9=yc.define([{tag:M.meta,color:"#404740"},{tag:M.link,textDecoration:"underline"},{tag:M.heading,textDecoration:"underline",fontWeight:"bold"},{tag:M.emphasis,fontStyle:"italic"},{tag:M.strong,fontWeight:"bold"},{tag:M.strikethrough,textDecoration:"line-through"},{tag:M.keyword,color:"#708"},{tag:[M.atom,M.bool,M.url,M.contentSeparator,M.labelName],color:"#219"},{tag:[M.literal,M.inserted],color:"#164"},{tag:[M.string,M.deleted],color:"#a11"},{tag:[M.regexp,M.escape,M.special(M.string)],color:"#e40"},{tag:M.definition(M.variableName),color:"#00f"},{tag:M.local(M.variableName),color:"#30a"},{tag:[M.typeName,M.namespace],color:"#085"},{tag:M.className,color:"#167"},{tag:[M.special(M.variableName),M.macroName],color:"#256"},{tag:M.definition(M.propertyName),color:"#00c"},{tag:M.comment,color:"#940"},{tag:M.invalid,color:"#f00"}]),x9=Y.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),B2=1e4,P2="()[]{}",F2=X.define({combine(t){return cr(t,{afterCursor:!0,brackets:P2,maxScanDistance:B2,renderMatch:_9})}}),k9=ne.mark({class:"cm-matchingBracket"}),C9=ne.mark({class:"cm-nonmatchingBracket"});function _9(t){let e=[],n=t.matched?k9:C9;return e.push(n.range(t.start.from,t.start.to)),t.end&&e.push(n.range(t.end.from,t.end.to)),e}const E9=Vt.define({create(){return ne.none},update(t,e){if(!e.docChanged&&!e.selection)return t;let n=[],i=e.state.facet(F2);for(let r of e.state.selection.ranges){if(!r.empty)continue;let s=Zi(e.state,r.head,-1,i)||r.head>0&&Zi(e.state,r.head-1,1,i)||i.afterCursor&&(Zi(e.state,r.head,1,i)||r.head<e.state.doc.length&&Zi(e.state,r.head+1,-1,i));s&&(n=n.concat(i.renderMatch(s,e.state)))}return ne.set(n,!0)},provide:t=>Y.decorations.from(t)}),A9=[E9,x9];function I9(t={}){return[F2.of(t),A9]}const T9=new Ce;function C0(t,e,n){let i=t.prop(e<0?Ce.openedBy:Ce.closedBy);if(i)return i;if(t.name.length==1){let r=n.indexOf(t.name);if(r>-1&&r%2==(e<0?1:0))return[n[r+e]]}return null}function _0(t){let e=t.type.prop(T9);return e?e(t.node):t}function Zi(t,e,n,i={}){let r=i.maxScanDistance||B2,s=i.brackets||P2,o=Nt(t),l=o.resolveInner(e,n);for(let a=l;a;a=a.parent){let u=C0(a.type,n,s);if(u&&a.from<a.to){let c=_0(a);if(c&&(n>0?e>=c.from&&e<c.to:e>c.from&&e<=c.to))return O9(t,e,n,a,c,u,s)}}return D9(t,e,n,o,l.type,r,s)}function O9(t,e,n,i,r,s,o){let l=i.parent,a={from:r.from,to:r.to},u=0,c=l==null?void 0:l.cursor();if(c&&(n<0?c.childBefore(i.from):c.childAfter(i.to)))do if(n<0?c.to<=i.from:c.from>=i.to){if(u==0&&s.indexOf(c.type.name)>-1&&c.from<c.to){let h=_0(c);return{start:a,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}else if(C0(c.type,n,o))u++;else if(C0(c.type,-n,o)){if(u==0){let h=_0(c);return{start:a,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}u--}}while(n<0?c.prevSibling():c.nextSibling());return{start:a,matched:!1}}function D9(t,e,n,i,r,s,o){let l=n<0?t.sliceDoc(e-1,e):t.sliceDoc(e,e+1),a=o.indexOf(l);if(a<0||a%2==0!=n>0)return null;let u={from:n<0?e-1:e,to:n>0?e+1:e},c=t.doc.iterRange(e,n>0?t.doc.length:0),h=0;for(let f=0;!c.next().done&&f<=s;){let d=c.value;n<0&&(f+=d.length);let p=e+f*n;for(let g=n>0?0:d.length-1,w=n>0?d.length:-1;g!=w;g+=n){let m=o.indexOf(d[g]);if(!(m<0||i.resolveInner(p+g,1).type!=r))if(m%2==0==n>0)h++;else{if(h==1)return{start:u,end:{from:p+g,to:p+g+1},matched:m>>1==a>>1};h--}}n>0&&(f+=d.length)}return c.done?{start:u,matched:!1}:null}const M9=Object.create(null),lk=[On.none],ak=[],uk=Object.create(null),R9=Object.create(null);for(let[t,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])R9[t]=L9(M9,e);function ig(t,e){ak.indexOf(t)>-1||(ak.push(t),console.warn(e))}function L9(t,e){let n=[];for(let l of e.split(" ")){let a=[];for(let u of l.split(".")){let c=t[u]||M[u];c?typeof c=="function"?a.length?a=a.map(c):ig(u,`Modifier ${u} used at start of tag`):a.length?ig(u,`Tag ${u} used as modifier`):a=Array.isArray(c)?c:[c]:ig(u,`Unknown highlighting tag ${u}`)}for(let u of a)n.push(u)}if(!n.length)return 0;let i=e.replace(/ /g,"_"),r=i+" "+n.map(l=>l.id),s=uk[r];if(s)return s.id;let o=uk[r]=On.define({id:lk.length,name:i,props:[b2({[i]:n})]});return lk.push(o),o.id}rt.RTL,rt.LTR;const N9=t=>{let{state:e}=t,n=e.doc.lineAt(e.selection.main.from),i=K1(t.state,n.from);return i.line?B9(t):i.block?F9(t):!1};function Q1(t,e){return({state:n,dispatch:i})=>{if(n.readOnly)return!1;let r=t(e,n);return r?(i(n.update(r)),!0):!1}}const B9=Q1(j9,0),P9=Q1(z2,0),F9=Q1((t,e)=>z2(t,e,U9(e)),0);function K1(t,e){let n=t.languageDataAt("commentTokens",e,1);return n.length?n[0]:{}}const _a=50;function z9(t,{open:e,close:n},i,r){let s=t.sliceDoc(i-_a,i),o=t.sliceDoc(r,r+_a),l=/\s*$/.exec(s)[0].length,a=/^\s*/.exec(o)[0].length,u=s.length-l;if(s.slice(u-e.length,u)==e&&o.slice(a,a+n.length)==n)return{open:{pos:i-l,margin:l&&1},close:{pos:r+a,margin:a&&1}};let c,h;r-i<=2*_a?c=h=t.sliceDoc(i,r):(c=t.sliceDoc(i,i+_a),h=t.sliceDoc(r-_a,r));let f=/^\s*/.exec(c)[0].length,d=/\s*$/.exec(h)[0].length,p=h.length-d-n.length;return c.slice(f,f+e.length)==e&&h.slice(p,p+n.length)==n?{open:{pos:i+f+e.length,margin:/\s/.test(c.charAt(f+e.length))?1:0},close:{pos:r-d-n.length,margin:/\s/.test(h.charAt(p-1))?1:0}}:null}function U9(t){let e=[];for(let n of t.selection.ranges){let i=t.doc.lineAt(n.from),r=n.to<=i.to?i:t.doc.lineAt(n.to);r.from>i.from&&r.from==n.to&&(r=n.to==i.to+1?i:t.doc.lineAt(n.to-1));let s=e.length-1;s>=0&&e[s].to>i.from?e[s].to=r.to:e.push({from:i.from+/^\s*/.exec(i.text)[0].length,to:r.to})}return e}function z2(t,e,n=e.selection.ranges){let i=n.map(s=>K1(e,s.from).block);if(!i.every(s=>s))return null;let r=n.map((s,o)=>z9(e,i[o],s.from,s.to));if(t!=2&&!r.every(s=>s))return{changes:e.changes(n.map((s,o)=>r[o]?[]:[{from:s.from,insert:i[o].open+" "},{from:s.to,insert:" "+i[o].close}]))};if(t!=1&&r.some(s=>s)){let s=[];for(let o=0,l;o<r.length;o++)if(l=r[o]){let a=i[o],{open:u,close:c}=l;s.push({from:u.pos-a.open.length,to:u.pos+u.margin},{from:c.pos-c.margin,to:c.pos+a.close.length})}return{changes:s}}return null}function j9(t,e,n=e.selection.ranges){let i=[],r=-1;for(let{from:s,to:o}of n){let l=i.length,a=1e9,u=K1(e,s).line;if(u){for(let c=s;c<=o;){let h=e.doc.lineAt(c);if(h.from>r&&(s==o||o>h.from)){r=h.from;let f=/^\s*/.exec(h.text)[0].length,d=f==h.length,p=h.text.slice(f,f+u.length)==u?f:-1;f<h.text.length&&f<a&&(a=f),i.push({line:h,comment:p,token:u,indent:f,empty:d,single:!1})}c=h.to+1}if(a<1e9)for(let c=l;c<i.length;c++)i[c].indent<i[c].line.text.length&&(i[c].indent=a);i.length==l+1&&(i[l].single=!0)}}if(t!=2&&i.some(s=>s.comment<0&&(!s.empty||s.single))){let s=[];for(let{line:l,token:a,indent:u,empty:c,single:h}of i)(h||!c)&&s.push({from:l.from+u,insert:a+" "});let o=e.changes(s);return{changes:o,selection:e.selection.map(o,1)}}else if(t!=1&&i.some(s=>s.comment>=0)){let s=[];for(let{line:o,comment:l,token:a}of i)if(l>=0){let u=o.from+l,c=u+a.length;o.text[c-o.from]==" "&&c++,s.push({from:u,to:c})}return{changes:s}}return null}const E0=ur.define(),V9=ur.define(),$9=X.define(),U2=X.define({combine(t){return cr(t,{minDepth:100,newGroupDelay:500,joinToEvent:(e,n)=>n},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(e,n)=>(i,r)=>e(i,r)||n(i,r)})}}),j2=Vt.define({create(){return er.empty},update(t,e){let n=e.state.facet(U2),i=e.annotation(E0);if(i){let a=Cn.fromTransaction(e,i.selection),u=i.side,c=u==0?t.undone:t.done;return a?c=Rd(c,c.length,n.minDepth,a):c=H2(c,e.startState.selection),new er(u==0?i.rest:c,u==0?c:i.rest)}let r=e.annotation(V9);if((r=="full"||r=="before")&&(t=t.isolate()),e.annotation(Ot.addToHistory)===!1)return e.changes.empty?t:t.addMapping(e.changes.desc);let s=Cn.fromTransaction(e),o=e.annotation(Ot.time),l=e.annotation(Ot.userEvent);return s?t=t.addChanges(s,o,l,n,e):e.selection&&(t=t.addSelection(e.startState.selection,o,l,n.newGroupDelay)),(r=="full"||r=="after")&&(t=t.isolate()),t},toJSON(t){return{done:t.done.map(e=>e.toJSON()),undone:t.undone.map(e=>e.toJSON())}},fromJSON(t){return new er(t.done.map(Cn.fromJSON),t.undone.map(Cn.fromJSON))}});function H9(t={}){return[j2,U2.of(t),Y.domEventHandlers({beforeinput(e,n){let i=e.inputType=="historyUndo"?V2:e.inputType=="historyRedo"?A0:null;return i?(e.preventDefault(),i(n)):!1}})]}function Op(t,e){return function({state:n,dispatch:i}){if(!e&&n.readOnly)return!1;let r=n.field(j2,!1);if(!r)return!1;let s=r.pop(t,n,e);return s?(i(s),!0):!1}}const V2=Op(0,!1),A0=Op(1,!1),W9=Op(0,!0),q9=Op(1,!0);class Cn{constructor(e,n,i,r,s){this.changes=e,this.effects=n,this.mapped=i,this.startSelection=r,this.selectionsAfter=s}setSelAfter(e){return new Cn(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,n,i;return{changes:(e=this.changes)===null||e===void 0?void 0:e.toJSON(),mapped:(n=this.mapped)===null||n===void 0?void 0:n.toJSON(),startSelection:(i=this.startSelection)===null||i===void 0?void 0:i.toJSON(),selectionsAfter:this.selectionsAfter.map(r=>r.toJSON())}}static fromJSON(e){return new Cn(e.changes&&At.fromJSON(e.changes),[],e.mapped&&ir.fromJSON(e.mapped),e.startSelection&&z.fromJSON(e.startSelection),e.selectionsAfter.map(z.fromJSON))}static fromTransaction(e,n){let i=si;for(let r of e.startState.facet($9)){let s=r(e);s.length&&(i=i.concat(s))}return!i.length&&e.changes.empty?null:new Cn(e.changes.invert(e.startState.doc),i,void 0,n||e.startState.selection,si)}static selection(e){return new Cn(void 0,si,void 0,void 0,e)}}function Rd(t,e,n,i){let r=e+1>n+20?e-n-1:0,s=t.slice(r,e);return s.push(i),s}function Q9(t,e){let n=[],i=!1;return t.iterChangedRanges((r,s)=>n.push(r,s)),e.iterChangedRanges((r,s,o,l)=>{for(let a=0;a<n.length;){let u=n[a++],c=n[a++];l>=u&&o<=c&&(i=!0)}}),i}function K9(t,e){return t.ranges.length==e.ranges.length&&t.ranges.filter((n,i)=>n.empty!=e.ranges[i].empty).length===0}function $2(t,e){return t.length?e.length?t.concat(e):t:e}const si=[],Y9=200;function H2(t,e){if(t.length){let n=t[t.length-1],i=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-Y9));return i.length&&i[i.length-1].eq(e)?t:(i.push(e),Rd(t,t.length-1,1e9,n.setSelAfter(i)))}else return[Cn.selection([e])]}function G9(t){let e=t[t.length-1],n=t.slice();return n[t.length-1]=e.setSelAfter(e.selectionsAfter.slice(0,e.selectionsAfter.length-1)),n}function rg(t,e){if(!t.length)return t;let n=t.length,i=si;for(;n;){let r=X9(t[n-1],e,i);if(r.changes&&!r.changes.empty||r.effects.length){let s=t.slice(0,n);return s[n-1]=r,s}else e=r.mapped,n--,i=r.selectionsAfter}return i.length?[Cn.selection(i)]:si}function X9(t,e,n){let i=$2(t.selectionsAfter.length?t.selectionsAfter.map(l=>l.map(e)):si,n);if(!t.changes)return Cn.selection(i);let r=t.changes.map(e),s=e.mapDesc(t.changes,!0),o=t.mapped?t.mapped.composeDesc(s):s;return new Cn(r,we.mapEffects(t.effects,e),o,t.startSelection.map(s),i)}const J9=/^(input\.type|delete)($|\.)/;class er{constructor(e,n,i=0,r=void 0){this.done=e,this.undone=n,this.prevTime=i,this.prevUserEvent=r}isolate(){return this.prevTime?new er(this.done,this.undone):this}addChanges(e,n,i,r,s){let o=this.done,l=o[o.length-1];return l&&l.changes&&!l.changes.empty&&e.changes&&(!i||J9.test(i))&&(!l.selectionsAfter.length&&n-this.prevTime<r.newGroupDelay&&r.joinToEvent(s,Q9(l.changes,e.changes))||i=="input.type.compose")?o=Rd(o,o.length-1,r.minDepth,new Cn(e.changes.compose(l.changes),$2(we.mapEffects(e.effects,l.changes),l.effects),l.mapped,l.startSelection,si)):o=Rd(o,o.length,r.minDepth,e),new er(o,si,n,i)}addSelection(e,n,i,r){let s=this.done.length?this.done[this.done.length-1].selectionsAfter:si;return s.length>0&&n-this.prevTime<r&&i==this.prevUserEvent&&i&&/^select($|\.)/.test(i)&&K9(s[s.length-1],e)?this:new er(H2(this.done,e),this.undone,n,i)}addMapping(e){return new er(rg(this.done,e),rg(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,n,i){let r=e==0?this.done:this.undone;if(r.length==0)return null;let s=r[r.length-1],o=s.selectionsAfter[0]||n.selection;if(i&&s.selectionsAfter.length)return n.update({selection:s.selectionsAfter[s.selectionsAfter.length-1],annotations:E0.of({side:e,rest:G9(r),selection:o}),userEvent:e==0?"select.undo":"select.redo",scrollIntoView:!0});if(s.changes){let l=r.length==1?si:r.slice(0,r.length-1);return s.mapped&&(l=rg(l,s.mapped)),n.update({changes:s.changes,selection:s.startSelection,effects:s.effects,annotations:E0.of({side:e,rest:l,selection:o}),filter:!1,userEvent:e==0?"undo":"redo",scrollIntoView:!0})}else return null}}er.empty=new er(si,si);const Z9=[{key:"Mod-z",run:V2,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:A0,preventDefault:!0},{linux:"Ctrl-Shift-z",run:A0,preventDefault:!0},{key:"Mod-u",run:W9,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:q9,preventDefault:!0}];function na(t,e){return z.create(t.ranges.map(e),t.mainIndex)}function hr(t,e){return t.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Di({state:t,dispatch:e},n){let i=na(t.selection,n);return i.eq(t.selection,!0)?!1:(e(hr(t,i)),!0)}function Dp(t,e){return z.cursor(e?t.to:t.from)}function W2(t,e){return Di(t,n=>n.empty?t.moveByChar(n,e):Dp(n,e))}function Zt(t){return t.textDirectionAt(t.state.selection.main.head)==rt.LTR}const q2=t=>W2(t,!Zt(t)),Q2=t=>W2(t,Zt(t));function K2(t,e){return Di(t,n=>n.empty?t.moveByGroup(n,e):Dp(n,e))}const eH=t=>K2(t,!Zt(t)),tH=t=>K2(t,Zt(t));function nH(t,e,n){if(e.type.prop(n))return!0;let i=e.to-e.from;return i&&(i>2||/[^\s,.;:]/.test(t.sliceDoc(e.from,e.to)))||e.firstChild}function Mp(t,e,n){let i=Nt(t).resolveInner(e.head),r=n?Ce.closedBy:Ce.openedBy;for(let a=e.head;;){let u=n?i.childAfter(a):i.childBefore(a);if(!u)break;nH(t,u,r)?i=u:a=n?u.to:u.from}let s=i.type.prop(r),o,l;return s&&(o=n?Zi(t,i.from,1):Zi(t,i.to,-1))&&o.matched?l=n?o.end.to:o.end.from:l=n?i.to:i.from,z.cursor(l,n?-1:1)}const iH=t=>Di(t,e=>Mp(t.state,e,!Zt(t))),rH=t=>Di(t,e=>Mp(t.state,e,Zt(t)));function Y2(t,e){return Di(t,n=>{if(!n.empty)return Dp(n,e);let i=t.moveVertically(n,e);return i.head!=n.head?i:t.moveToLineBoundary(n,e)})}const G2=t=>Y2(t,!1),X2=t=>Y2(t,!0);function J2(t){let e=t.scrollDOM.clientHeight<t.scrollDOM.scrollHeight-2,n=0,i=0,r;if(e){for(let s of t.state.facet(Y.scrollMargins)){let o=s(t);o!=null&&o.top&&(n=Math.max(o==null?void 0:o.top,n)),o!=null&&o.bottom&&(i=Math.max(o==null?void 0:o.bottom,i))}r=t.scrollDOM.clientHeight-n-i}else r=(t.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:n,marginBottom:i,selfScroll:e,height:Math.max(t.defaultLineHeight,r-5)}}function Z2(t,e){let n=J2(t),{state:i}=t,r=na(i.selection,o=>o.empty?t.moveVertically(o,e,n.height):Dp(o,e));if(r.eq(i.selection))return!1;let s;if(n.selfScroll){let o=t.coordsAtPos(i.selection.main.head),l=t.scrollDOM.getBoundingClientRect(),a=l.top+n.marginTop,u=l.bottom-n.marginBottom;o&&o.top>a&&o.bottom<u&&(s=Y.scrollIntoView(r.main.head,{y:"start",yMargin:o.top-a}))}return t.dispatch(hr(i,r),{effects:s}),!0}const ck=t=>Z2(t,!1),I0=t=>Z2(t,!0);function Ps(t,e,n){let i=t.lineBlockAt(e.head),r=t.moveToLineBoundary(e,n);if(r.head==e.head&&r.head!=(n?i.to:i.from)&&(r=t.moveToLineBoundary(e,n,!1)),!n&&r.head==i.from&&i.length){let s=/^\s*/.exec(t.state.sliceDoc(i.from,Math.min(i.from+100,i.to)))[0].length;s&&e.head!=i.from+s&&(r=z.cursor(i.from+s))}return r}const sH=t=>Di(t,e=>Ps(t,e,!0)),oH=t=>Di(t,e=>Ps(t,e,!1)),lH=t=>Di(t,e=>Ps(t,e,!Zt(t))),aH=t=>Di(t,e=>Ps(t,e,Zt(t))),uH=t=>Di(t,e=>z.cursor(t.lineBlockAt(e.head).from,1)),cH=t=>Di(t,e=>z.cursor(t.lineBlockAt(e.head).to,-1));function hH(t,e,n){let i=!1,r=na(t.selection,s=>{let o=Zi(t,s.head,-1)||Zi(t,s.head,1)||s.head>0&&Zi(t,s.head-1,1)||s.head<t.doc.length&&Zi(t,s.head+1,-1);if(!o||!o.end)return s;i=!0;let l=o.start.from==s.head?o.end.to:o.end.from;return z.cursor(l)});return i?(e(hr(t,r)),!0):!1}const fH=({state:t,dispatch:e})=>hH(t,e);function gi(t,e){let n=na(t.state.selection,i=>{let r=e(i);return z.range(i.anchor,r.head,r.goalColumn,r.bidiLevel||void 0)});return n.eq(t.state.selection)?!1:(t.dispatch(hr(t.state,n)),!0)}function eD(t,e){return gi(t,n=>t.moveByChar(n,e))}const tD=t=>eD(t,!Zt(t)),nD=t=>eD(t,Zt(t));function iD(t,e){return gi(t,n=>t.moveByGroup(n,e))}const dH=t=>iD(t,!Zt(t)),pH=t=>iD(t,Zt(t)),mH=t=>gi(t,e=>Mp(t.state,e,!Zt(t))),gH=t=>gi(t,e=>Mp(t.state,e,Zt(t)));function rD(t,e){return gi(t,n=>t.moveVertically(n,e))}const sD=t=>rD(t,!1),oD=t=>rD(t,!0);function lD(t,e){return gi(t,n=>t.moveVertically(n,e,J2(t).height))}const hk=t=>lD(t,!1),fk=t=>lD(t,!0),yH=t=>gi(t,e=>Ps(t,e,!0)),vH=t=>gi(t,e=>Ps(t,e,!1)),wH=t=>gi(t,e=>Ps(t,e,!Zt(t))),bH=t=>gi(t,e=>Ps(t,e,Zt(t))),SH=t=>gi(t,e=>z.cursor(t.lineBlockAt(e.head).from)),xH=t=>gi(t,e=>z.cursor(t.lineBlockAt(e.head).to)),dk=({state:t,dispatch:e})=>(e(hr(t,{anchor:0})),!0),pk=({state:t,dispatch:e})=>(e(hr(t,{anchor:t.doc.length})),!0),mk=({state:t,dispatch:e})=>(e(hr(t,{anchor:t.selection.main.anchor,head:0})),!0),gk=({state:t,dispatch:e})=>(e(hr(t,{anchor:t.selection.main.anchor,head:t.doc.length})),!0),kH=({state:t,dispatch:e})=>(e(t.update({selection:{anchor:0,head:t.doc.length},userEvent:"select"})),!0),CH=({state:t,dispatch:e})=>{let n=Rp(t).map(({from:i,to:r})=>z.range(i,Math.min(r+1,t.doc.length)));return e(t.update({selection:z.create(n),userEvent:"select"})),!0},_H=({state:t,dispatch:e})=>{let n=na(t.selection,i=>{let r=Nt(t),s=r.resolveStack(i.from,1);if(i.empty){let o=r.resolveStack(i.from,-1);o.node.from>=s.node.from&&o.node.to<=s.node.to&&(s=o)}for(let o=s;o;o=o.next){let{node:l}=o;if((l.from<i.from&&l.to>=i.to||l.to>i.to&&l.from<=i.from)&&o.next)return z.range(l.to,l.from)}return i});return n.eq(t.selection)?!1:(e(hr(t,n)),!0)},EH=({state:t,dispatch:e})=>{let n=t.selection,i=null;return n.ranges.length>1?i=z.create([n.main]):n.main.empty||(i=z.create([z.cursor(n.main.head)])),i?(e(hr(t,i)),!0):!1};function vc(t,e){if(t.state.readOnly)return!1;let n="delete.selection",{state:i}=t,r=i.changeByRange(s=>{let{from:o,to:l}=s;if(o==l){let a=e(s);a<o?(n="delete.backward",a=vh(t,a,!1)):a>o&&(n="delete.forward",a=vh(t,a,!0)),o=Math.min(o,a),l=Math.max(l,a)}else o=vh(t,o,!1),l=vh(t,l,!0);return o==l?{range:s}:{changes:{from:o,to:l},range:z.cursor(o,o<s.head?-1:1)}});return r.changes.empty?!1:(t.dispatch(i.update(r,{scrollIntoView:!0,userEvent:n,effects:n=="delete.selection"?Y.announce.of(i.phrase("Selection deleted")):void 0})),!0)}function vh(t,e,n){if(t instanceof Y)for(let i of t.state.facet(Y.atomicRanges).map(r=>r(t)))i.between(e,e,(r,s)=>{r<e&&s>e&&(e=n?s:r)});return e}const aD=(t,e,n)=>vc(t,i=>{let r=i.from,{state:s}=t,o=s.doc.lineAt(r),l,a;if(n&&!e&&r>o.from&&r<o.from+200&&!/[^ \t]/.test(l=o.text.slice(0,r-o.from))){if(l[l.length-1]=="	")return r-1;let u=ta(l,s.tabSize),c=u%Od(s)||Od(s);for(let h=0;h<c&&l[l.length-1-h]==" ";h++)r--;a=r}else a=zt(o.text,r-o.from,e,e)+o.from,a==r&&o.number!=(e?s.doc.lines:1)?a+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(o.text.slice(a-o.from,r-o.from))&&(a=zt(o.text,a-o.from,!1,!1)+o.from);return a}),T0=t=>aD(t,!1,!0),uD=t=>aD(t,!0,!1),cD=(t,e)=>vc(t,n=>{let i=n.head,{state:r}=t,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let l=null;;){if(i==(e?s.to:s.from)){i==n.head&&s.number!=(e?r.doc.lines:1)&&(i+=e?1:-1);break}let a=zt(s.text,i-s.from,e)+s.from,u=s.text.slice(Math.min(i,a)-s.from,Math.max(i,a)-s.from),c=o(u);if(l!=null&&c!=l)break;(u!=" "||i!=n.head)&&(l=c),i=a}return i}),hD=t=>cD(t,!1),AH=t=>cD(t,!0),IH=t=>vc(t,e=>{let n=t.lineBlockAt(e.head).to;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),TH=t=>vc(t,e=>{let n=t.moveToLineBoundary(e,!1).head;return e.head>n?n:Math.max(0,e.head-1)}),OH=t=>vc(t,e=>{let n=t.moveToLineBoundary(e,!0).head;return e.head<n?n:Math.min(t.state.doc.length,e.head+1)}),DH=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>({changes:{from:i.from,to:i.to,insert:Re.of(["",""])},range:z.cursor(i.from)}));return e(t.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},MH=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=t.changeByRange(i=>{if(!i.empty||i.from==0||i.from==t.doc.length)return{range:i};let r=i.from,s=t.doc.lineAt(r),o=r==s.from?r-1:zt(s.text,r-s.from,!1)+s.from,l=r==s.to?r+1:zt(s.text,r-s.from,!0)+s.from;return{changes:{from:o,to:l,insert:t.doc.slice(r,l).append(t.doc.slice(o,r))},range:z.cursor(l)}});return n.changes.empty?!1:(e(t.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Rp(t){let e=[],n=-1;for(let i of t.selection.ranges){let r=t.doc.lineAt(i.from),s=t.doc.lineAt(i.to);if(!i.empty&&i.to==s.from&&(s=t.doc.lineAt(i.to-1)),n>=r.number){let o=e[e.length-1];o.to=s.to,o.ranges.push(i)}else e.push({from:r.from,to:s.to,ranges:[i]});n=s.number+1}return e}function fD(t,e,n){if(t.readOnly)return!1;let i=[],r=[];for(let s of Rp(t)){if(n?s.to==t.doc.length:s.from==0)continue;let o=t.doc.lineAt(n?s.to+1:s.from-1),l=o.length+1;if(n){i.push({from:s.to,to:o.to},{from:s.from,insert:o.text+t.lineBreak});for(let a of s.ranges)r.push(z.range(Math.min(t.doc.length,a.anchor+l),Math.min(t.doc.length,a.head+l)))}else{i.push({from:o.from,to:s.from},{from:s.to,insert:t.lineBreak+o.text});for(let a of s.ranges)r.push(z.range(a.anchor-l,a.head-l))}}return i.length?(e(t.update({changes:i,scrollIntoView:!0,selection:z.create(r,t.selection.mainIndex),userEvent:"move.line"})),!0):!1}const RH=({state:t,dispatch:e})=>fD(t,e,!1),LH=({state:t,dispatch:e})=>fD(t,e,!0);function dD(t,e,n){if(t.readOnly)return!1;let i=[];for(let r of Rp(t))n?i.push({from:r.from,insert:t.doc.slice(r.from,r.to)+t.lineBreak}):i.push({from:r.to,insert:t.lineBreak+t.doc.slice(r.from,r.to)});return e(t.update({changes:i,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const NH=({state:t,dispatch:e})=>dD(t,e,!1),BH=({state:t,dispatch:e})=>dD(t,e,!0),PH=t=>{if(t.state.readOnly)return!1;let{state:e}=t,n=e.changes(Rp(e).map(({from:r,to:s})=>(r>0?r--:s<e.doc.length&&s++,{from:r,to:s}))),i=na(e.selection,r=>{let s;if(t.lineWrapping){let o=t.lineBlockAt(r.head),l=t.coordsAtPos(r.head,r.assoc||1);l&&(s=o.bottom+t.documentTop-l.bottom+t.defaultLineHeight/2)}return t.moveVertically(r,!0,s)}).map(n);return t.dispatch({changes:n,selection:i,scrollIntoView:!0,userEvent:"delete.line"}),!0};function FH(t,e){if(/\(\)|\[\]|\{\}/.test(t.sliceDoc(e-1,e+1)))return{from:e,to:e};let n=Nt(t).resolveInner(e),i=n.childBefore(e),r=n.childAfter(e),s;return i&&r&&i.to<=e&&r.from>=e&&(s=i.type.prop(Ce.closedBy))&&s.indexOf(r.name)>-1&&t.doc.lineAt(i.to).from==t.doc.lineAt(r.from).from&&!/\S/.test(t.sliceDoc(i.to,r.from))?{from:i.to,to:r.from}:null}const yk=pD(!1),zH=pD(!0);function pD(t){return({state:e,dispatch:n})=>{if(e.readOnly)return!1;let i=e.changeByRange(r=>{let{from:s,to:o}=r,l=e.doc.lineAt(s),a=!t&&s==o&&FH(e,s);t&&(s=o=(o<=l.to?l:e.doc.lineAt(o)).to);let u=new Ip(e,{simulateBreak:s,simulateDoubleBreak:!!a}),c=W1(u,s);for(c==null&&(c=ta(/^\s*/.exec(e.doc.lineAt(s).text)[0],e.tabSize));o<l.to&&/\s/.test(l.text[o-l.from]);)o++;a?{from:s,to:o}=a:s>l.from&&s<l.from+100&&!/\S/.test(l.text.slice(0,s))&&(s=l.from);let h=["",Hu(e,c)];return a&&h.push(Hu(e,u.lineIndent(l.from,-1))),{changes:{from:s,to:o,insert:Re.of(h)},range:z.cursor(s+1+h[1].length)}});return n(e.update(i,{scrollIntoView:!0,userEvent:"input"})),!0}}function Y1(t,e){let n=-1;return t.changeByRange(i=>{let r=[];for(let o=i.from;o<=i.to;){let l=t.doc.lineAt(o);l.number>n&&(i.empty||i.to>l.from)&&(e(l,r,i),n=l.number),o=l.to+1}let s=t.changes(r);return{changes:r,range:z.range(s.mapPos(i.anchor,1),s.mapPos(i.head,1))}})}const UH=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let n=Object.create(null),i=new Ip(t,{overrideIndentation:s=>{let o=n[s];return o??-1}}),r=Y1(t,(s,o,l)=>{let a=W1(i,s.from);if(a==null)return;/\S/.test(s.text)||(a=0);let u=/^\s*/.exec(s.text)[0],c=Hu(t,a);(u!=c||l.from<s.from+u.length)&&(n[s.from]=a,o.push({from:s.from,to:s.from+u.length,insert:c}))});return r.changes.empty||e(t.update(r,{userEvent:"indent"})),!0},mD=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Y1(t,(n,i)=>{i.push({from:n.from,insert:t.facet(Ap)})}),{userEvent:"input.indent"})),!0),gD=({state:t,dispatch:e})=>t.readOnly?!1:(e(t.update(Y1(t,(n,i)=>{let r=/^\s*/.exec(n.text)[0];if(!r)return;let s=ta(r,t.tabSize),o=0,l=Hu(t,Math.max(0,s-Od(t)));for(;o<r.length&&o<l.length&&r.charCodeAt(o)==l.charCodeAt(o);)o++;i.push({from:n.from+o,to:n.from+r.length,insert:l.slice(o)})}),{userEvent:"delete.dedent"})),!0),jH=t=>(t.setTabFocusMode(),!0),VH=[{key:"Ctrl-b",run:q2,shift:tD,preventDefault:!0},{key:"Ctrl-f",run:Q2,shift:nD},{key:"Ctrl-p",run:G2,shift:sD},{key:"Ctrl-n",run:X2,shift:oD},{key:"Ctrl-a",run:uH,shift:SH},{key:"Ctrl-e",run:cH,shift:xH},{key:"Ctrl-d",run:uD},{key:"Ctrl-h",run:T0},{key:"Ctrl-k",run:IH},{key:"Ctrl-Alt-h",run:hD},{key:"Ctrl-o",run:DH},{key:"Ctrl-t",run:MH},{key:"Ctrl-v",run:I0}],$H=[{key:"ArrowLeft",run:q2,shift:tD,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:eH,shift:dH,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:lH,shift:wH,preventDefault:!0},{key:"ArrowRight",run:Q2,shift:nD,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:tH,shift:pH,preventDefault:!0},{mac:"Cmd-ArrowRight",run:aH,shift:bH,preventDefault:!0},{key:"ArrowUp",run:G2,shift:sD,preventDefault:!0},{mac:"Cmd-ArrowUp",run:dk,shift:mk},{mac:"Ctrl-ArrowUp",run:ck,shift:hk},{key:"ArrowDown",run:X2,shift:oD,preventDefault:!0},{mac:"Cmd-ArrowDown",run:pk,shift:gk},{mac:"Ctrl-ArrowDown",run:I0,shift:fk},{key:"PageUp",run:ck,shift:hk},{key:"PageDown",run:I0,shift:fk},{key:"Home",run:oH,shift:vH,preventDefault:!0},{key:"Mod-Home",run:dk,shift:mk},{key:"End",run:sH,shift:yH,preventDefault:!0},{key:"Mod-End",run:pk,shift:gk},{key:"Enter",run:yk,shift:yk},{key:"Mod-a",run:kH},{key:"Backspace",run:T0,shift:T0},{key:"Delete",run:uD},{key:"Mod-Backspace",mac:"Alt-Backspace",run:hD},{key:"Mod-Delete",mac:"Alt-Delete",run:AH},{mac:"Mod-Backspace",run:TH},{mac:"Mod-Delete",run:OH}].concat(VH.map(t=>({mac:t.key,run:t.run,shift:t.shift}))),HH=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:iH,shift:mH},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:rH,shift:gH},{key:"Alt-ArrowUp",run:RH},{key:"Shift-Alt-ArrowUp",run:NH},{key:"Alt-ArrowDown",run:LH},{key:"Shift-Alt-ArrowDown",run:BH},{key:"Escape",run:EH},{key:"Mod-Enter",run:zH},{key:"Alt-l",mac:"Ctrl-l",run:CH},{key:"Mod-i",run:_H,preventDefault:!0},{key:"Mod-[",run:gD},{key:"Mod-]",run:mD},{key:"Mod-Alt-\\",run:UH},{key:"Shift-Mod-k",run:PH},{key:"Shift-Mod-\\",run:fH},{key:"Mod-/",run:N9},{key:"Alt-A",run:P9},{key:"Ctrl-m",mac:"Shift-Alt-m",run:jH}].concat($H),WH={key:"Tab",run:mD,shift:gD},vk=typeof String.prototype.normalize=="function"?t=>t.normalize("NFKD"):t=>t;class Wl{constructor(e,n,i=0,r=e.length,s,o){this.test=o,this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,r),this.bufferStart=i,this.normalize=s?l=>s(vk(l)):vk,this.query=this.normalize(n)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return wn(this.buffer,this.bufferPos)}next(){for(;this.matches.length;)this.matches.pop();return this.nextOverlapping()}nextOverlapping(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let n=_1(e),i=this.bufferStart+this.bufferPos;this.bufferPos+=Yi(e);let r=this.normalize(n);if(r.length)for(let s=0,o=i;;s++){let l=r.charCodeAt(s),a=this.match(l,o,this.bufferPos+this.bufferStart);if(s==r.length-1){if(a)return this.value=a,this;break}o==i&&s<n.length&&n.charCodeAt(s)==l&&o++}}}match(e,n,i){let r=null;for(let s=0;s<this.matches.length;s+=2){let o=this.matches[s],l=!1;this.query.charCodeAt(o)==e&&(o==this.query.length-1?r={from:this.matches[s+1],to:i}:(this.matches[s]++,l=!0)),l||(this.matches.splice(s,2),s-=2)}return this.query.charCodeAt(0)==e&&(this.query.length==1?r={from:n,to:i}:this.matches.push(1,n)),r&&this.test&&!this.test(r.from,r.to,this.buffer,this.bufferStart)&&(r=null),r}}typeof Symbol<"u"&&(Wl.prototype[Symbol.iterator]=function(){return this});const yD={from:-1,to:-1,match:/.*/.exec("")},G1="gm"+(/x/.unicode==null?"":"u");class vD{constructor(e,n,i,r=0,s=e.length){if(this.text=e,this.to=s,this.curLine="",this.done=!1,this.value=yD,/\\[sWDnr]|\n|\r|\[\^/.test(n))return new wD(e,n,i,r,s);this.re=new RegExp(n,G1+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.iter=e.iter();let o=e.lineAt(r);this.curLineStart=o.from,this.matchPos=Ld(e,r),this.getLine(this.curLineStart)}getLine(e){this.iter.next(e),this.iter.lineBreak?this.curLine="":(this.curLine=this.iter.value,this.curLineStart+this.curLine.length>this.to&&(this.curLine=this.curLine.slice(0,this.to-this.curLineStart)),this.iter.next())}nextLine(){this.curLineStart=this.curLineStart+this.curLine.length+1,this.curLineStart>this.to?this.curLine="":this.getLine(0)}next(){for(let e=this.matchPos-this.curLineStart;;){this.re.lastIndex=e;let n=this.matchPos<=this.to&&this.re.exec(this.curLine);if(n){let i=this.curLineStart+n.index,r=i+n[0].length;if(this.matchPos=Ld(this.text,r+(i==r?1:0)),i==this.curLineStart+this.curLine.length&&this.nextLine(),(i<r||i>this.value.to)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this;e=this.matchPos-this.curLineStart}else if(this.curLineStart+this.curLine.length<this.to)this.nextLine(),e=0;else return this.done=!0,this}}}const sg=new WeakMap;class xl{constructor(e,n){this.from=e,this.text=n}get to(){return this.from+this.text.length}static get(e,n,i){let r=sg.get(e);if(!r||r.from>=i||r.to<=n){let l=new xl(n,e.sliceString(n,i));return sg.set(e,l),l}if(r.from==n&&r.to==i)return r;let{text:s,from:o}=r;return o>n&&(s=e.sliceString(n,o)+s,o=n),r.to<i&&(s+=e.sliceString(r.to,i)),sg.set(e,new xl(o,s)),new xl(n,s.slice(n-o,i-o))}}class wD{constructor(e,n,i,r,s){this.text=e,this.to=s,this.done=!1,this.value=yD,this.matchPos=Ld(e,r),this.re=new RegExp(n,G1+(i!=null&&i.ignoreCase?"i":"")),this.test=i==null?void 0:i.test,this.flat=xl.get(e,r,this.chunkEnd(r+5e3))}chunkEnd(e){return e>=this.to?this.to:this.text.lineAt(e).to}next(){for(;;){let e=this.re.lastIndex=this.matchPos-this.flat.from,n=this.re.exec(this.flat.text);if(n&&!n[0]&&n.index==e&&(this.re.lastIndex=e+1,n=this.re.exec(this.flat.text)),n){let i=this.flat.from+n.index,r=i+n[0].length;if((this.flat.to>=this.to||n.index+n[0].length<=this.flat.text.length-10)&&(!this.test||this.test(i,r,n)))return this.value={from:i,to:r,match:n},this.matchPos=Ld(this.text,r+(i==r?1:0)),this}if(this.flat.to==this.to)return this.done=!0,this;this.flat=xl.get(this.text,this.flat.from,this.chunkEnd(this.flat.from+this.flat.text.length*2))}}}typeof Symbol<"u"&&(vD.prototype[Symbol.iterator]=wD.prototype[Symbol.iterator]=function(){return this});function qH(t){try{return new RegExp(t,G1),!0}catch{return!1}}function Ld(t,e){if(e>=t.length)return e;let n=t.lineAt(e),i;for(;e<n.to&&(i=n.text.charCodeAt(e-n.from))>=56320&&i<57344;)e++;return e}function O0(t){let e=String(t.state.doc.lineAt(t.state.selection.main.head).number),n=qe("input",{class:"cm-textfield",name:"line",value:e}),i=qe("form",{class:"cm-gotoLine",onkeydown:s=>{s.keyCode==27?(s.preventDefault(),t.dispatch({effects:lu.of(!1)}),t.focus()):s.keyCode==13&&(s.preventDefault(),r())},onsubmit:s=>{s.preventDefault(),r()}},qe("label",t.state.phrase("Go to line"),": ",n)," ",qe("button",{class:"cm-button",type:"submit"},t.state.phrase("go")),qe("button",{name:"close",onclick:()=>{t.dispatch({effects:lu.of(!1)}),t.focus()},"aria-label":t.state.phrase("close"),type:"button"},["×"]));function r(){let s=/^([+-])?(\d+)?(:\d+)?(%)?$/.exec(n.value);if(!s)return;let{state:o}=t,l=o.doc.lineAt(o.selection.main.head),[,a,u,c,h]=s,f=c?+c.slice(1):0,d=u?+u:l.number;if(u&&h){let w=d/100;a&&(w=w*(a=="-"?-1:1)+l.number/o.doc.lines),d=Math.round(o.doc.lines*w)}else u&&a&&(d=d*(a=="-"?-1:1)+l.number);let p=o.doc.line(Math.max(1,Math.min(o.doc.lines,d))),g=z.cursor(p.from+Math.max(0,Math.min(f,p.length)));t.dispatch({effects:[lu.of(!1),Y.scrollIntoView(g.from,{y:"center"})],selection:g}),t.focus()}return{dom:i}}const lu=we.define(),wk=Vt.define({create(){return!0},update(t,e){for(let n of e.effects)n.is(lu)&&(t=n.value);return t},provide:t=>Vu.from(t,e=>e?O0:null)}),QH=t=>{let e=ju(t,O0);if(!e){let n=[lu.of(!0)];t.state.field(wk,!1)==null&&n.push(we.appendConfig.of([wk,KH])),t.dispatch({effects:n}),e=ju(t,O0)}return e&&e.dom.querySelector("input").select(),!0},KH=Y.baseTheme({".cm-panel.cm-gotoLine":{padding:"2px 6px 4px",position:"relative","& label":{fontSize:"80%"},"& [name=close]":{position:"absolute",top:"0",bottom:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:"0"}}}),YH={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100,wholeWords:!1},GH=X.define({combine(t){return cr(t,YH,{highlightWordAroundCursor:(e,n)=>e||n,minSelectionLength:Math.min,maxMatches:Math.min})}});function XH(t){return[nW,tW]}const JH=ne.mark({class:"cm-selectionMatch"}),ZH=ne.mark({class:"cm-selectionMatch cm-selectionMatch-main"});function bk(t,e,n,i){return(n==0||t(e.sliceDoc(n-1,n))!=lt.Word)&&(i==e.doc.length||t(e.sliceDoc(i,i+1))!=lt.Word)}function eW(t,e,n,i){return t(e.sliceDoc(n,n+1))==lt.Word&&t(e.sliceDoc(i-1,i))==lt.Word}const tW=wt.fromClass(class{constructor(t){this.decorations=this.getDeco(t)}update(t){(t.selectionSet||t.docChanged||t.viewportChanged)&&(this.decorations=this.getDeco(t.view))}getDeco(t){let e=t.state.facet(GH),{state:n}=t,i=n.selection;if(i.ranges.length>1)return ne.none;let r=i.main,s,o=null;if(r.empty){if(!e.highlightWordAroundCursor)return ne.none;let a=n.wordAt(r.head);if(!a)return ne.none;o=n.charCategorizer(r.head),s=n.sliceDoc(a.from,a.to)}else{let a=r.to-r.from;if(a<e.minSelectionLength||a>200)return ne.none;if(e.wholeWords){if(s=n.sliceDoc(r.from,r.to),o=n.charCategorizer(r.head),!(bk(o,n,r.from,r.to)&&eW(o,n,r.from,r.to)))return ne.none}else if(s=n.sliceDoc(r.from,r.to),!s)return ne.none}let l=[];for(let a of t.visibleRanges){let u=new Wl(n.doc,s,a.from,a.to);for(;!u.next().done;){let{from:c,to:h}=u.value;if((!o||bk(o,n,c,h))&&(r.empty&&c<=r.from&&h>=r.to?l.push(ZH.range(c,h)):(c>=r.to||h<=r.from)&&l.push(JH.range(c,h)),l.length>e.maxMatches))return ne.none}}return ne.set(l)}},{decorations:t=>t.decorations}),nW=Y.baseTheme({".cm-selectionMatch":{backgroundColor:"#99ff7780"},".cm-searchMatch .cm-selectionMatch":{backgroundColor:"transparent"}}),iW=({state:t,dispatch:e})=>{let{selection:n}=t,i=z.create(n.ranges.map(r=>t.wordAt(r.head)||z.cursor(r.head)),n.mainIndex);return i.eq(n)?!1:(e(t.update({selection:i})),!0)};function rW(t,e){let{main:n,ranges:i}=t.selection,r=t.wordAt(n.head),s=r&&r.from==n.from&&r.to==n.to;for(let o=!1,l=new Wl(t.doc,e,i[i.length-1].to);;)if(l.next(),l.done){if(o)return null;l=new Wl(t.doc,e,0,Math.max(0,i[i.length-1].from-1)),o=!0}else{if(o&&i.some(a=>a.from==l.value.from))continue;if(s){let a=t.wordAt(l.value.from);if(!a||a.from!=l.value.from||a.to!=l.value.to)continue}return l.value}}const sW=({state:t,dispatch:e})=>{let{ranges:n}=t.selection;if(n.some(s=>s.from===s.to))return iW({state:t,dispatch:e});let i=t.sliceDoc(n[0].from,n[0].to);if(t.selection.ranges.some(s=>t.sliceDoc(s.from,s.to)!=i))return!1;let r=rW(t,i);return r?(e(t.update({selection:t.selection.addRange(z.range(r.from,r.to),!1),effects:Y.scrollIntoView(r.to)})),!0):!1},ia=X.define({combine(t){return cr(t,{top:!1,caseSensitive:!1,literal:!1,regexp:!1,wholeWord:!1,createPanel:e=>new yW(e),scrollToMatch:e=>Y.scrollIntoView(e)})}});class bD{constructor(e){this.search=e.search,this.caseSensitive=!!e.caseSensitive,this.literal=!!e.literal,this.regexp=!!e.regexp,this.replace=e.replace||"",this.valid=!!this.search&&(!this.regexp||qH(this.search)),this.unquoted=this.unquote(this.search),this.wholeWord=!!e.wholeWord}unquote(e){return this.literal?e:e.replace(/\\([nrt\\])/g,(n,i)=>i=="n"?`
`:i=="r"?"\r":i=="t"?"	":"\\")}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseSensitive==e.caseSensitive&&this.regexp==e.regexp&&this.wholeWord==e.wholeWord}create(){return this.regexp?new uW(this):new lW(this)}getCursor(e,n=0,i){let r=e.doc?e:Ie.create({doc:e});return i==null&&(i=r.doc.length),this.regexp?Ho(this,r,n,i):$o(this,r,n,i)}}class SD{constructor(e){this.spec=e}}function $o(t,e,n,i){return new Wl(e.doc,t.unquoted,n,i,t.caseSensitive?void 0:r=>r.toLowerCase(),t.wholeWord?oW(e.doc,e.charCategorizer(e.selection.main.head)):void 0)}function oW(t,e){return(n,i,r,s)=>((s>n||s+r.length<i)&&(s=Math.max(0,n-2),r=t.sliceString(s,Math.min(t.length,i+2))),(e(Nd(r,n-s))!=lt.Word||e(Bd(r,n-s))!=lt.Word)&&(e(Bd(r,i-s))!=lt.Word||e(Nd(r,i-s))!=lt.Word))}class lW extends SD{constructor(e){super(e)}nextMatch(e,n,i){let r=$o(this.spec,e,i,e.doc.length).nextOverlapping();if(r.done){let s=Math.min(e.doc.length,n+this.spec.unquoted.length);r=$o(this.spec,e,0,s).nextOverlapping()}return r.done||r.value.from==n&&r.value.to==i?null:r.value}prevMatchInRange(e,n,i){for(let r=i;;){let s=Math.max(n,r-1e4-this.spec.unquoted.length),o=$o(this.spec,e,s,r),l=null;for(;!o.nextOverlapping().done;)l=o.value;if(l)return l;if(s==n)return null;r-=1e4}}prevMatch(e,n,i){let r=this.prevMatchInRange(e,0,n);return r||(r=this.prevMatchInRange(e,Math.max(0,i-this.spec.unquoted.length),e.doc.length)),r&&(r.from!=n||r.to!=i)?r:null}getReplacement(e){return this.spec.unquote(this.spec.replace)}matchAll(e,n){let i=$o(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=$o(this.spec,e,Math.max(0,n-this.spec.unquoted.length),Math.min(i+this.spec.unquoted.length,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}function Ho(t,e,n,i){return new vD(e.doc,t.search,{ignoreCase:!t.caseSensitive,test:t.wholeWord?aW(e.charCategorizer(e.selection.main.head)):void 0},n,i)}function Nd(t,e){return t.slice(zt(t,e,!1),e)}function Bd(t,e){return t.slice(e,zt(t,e))}function aW(t){return(e,n,i)=>!i[0].length||(t(Nd(i.input,i.index))!=lt.Word||t(Bd(i.input,i.index))!=lt.Word)&&(t(Bd(i.input,i.index+i[0].length))!=lt.Word||t(Nd(i.input,i.index+i[0].length))!=lt.Word)}class uW extends SD{nextMatch(e,n,i){let r=Ho(this.spec,e,i,e.doc.length).next();return r.done&&(r=Ho(this.spec,e,0,n).next()),r.done?null:r.value}prevMatchInRange(e,n,i){for(let r=1;;r++){let s=Math.max(n,i-r*1e4),o=Ho(this.spec,e,s,i),l=null;for(;!o.next().done;)l=o.value;if(l&&(s==n||l.from>s+10))return l;if(s==n)return null}}prevMatch(e,n,i){return this.prevMatchInRange(e,0,n)||this.prevMatchInRange(e,i,e.doc.length)}getReplacement(e){return this.spec.unquote(this.spec.replace).replace(/\$([$&]|\d+)/g,(n,i)=>{if(i=="&")return e.match[0];if(i=="$")return"$";for(let r=i.length;r>0;r--){let s=+i.slice(0,r);if(s>0&&s<e.match.length)return e.match[s]+i.slice(r)}return n})}matchAll(e,n){let i=Ho(this.spec,e,0,e.doc.length),r=[];for(;!i.next().done;){if(r.length>=n)return null;r.push(i.value)}return r}highlight(e,n,i,r){let s=Ho(this.spec,e,Math.max(0,n-250),Math.min(i+250,e.doc.length));for(;!s.next().done;)r(s.value.from,s.value.to)}}const Wu=we.define(),X1=we.define(),ws=Vt.define({create(t){return new og(D0(t).create(),null)},update(t,e){for(let n of e.effects)n.is(Wu)?t=new og(n.value.create(),t.panel):n.is(X1)&&(t=new og(t.query,n.value?J1:null));return t},provide:t=>Vu.from(t,e=>e.panel)});class og{constructor(e,n){this.query=e,this.panel=n}}const cW=ne.mark({class:"cm-searchMatch"}),hW=ne.mark({class:"cm-searchMatch cm-searchMatch-selected"}),fW=wt.fromClass(class{constructor(t){this.view=t,this.decorations=this.highlight(t.state.field(ws))}update(t){let e=t.state.field(ws);(e!=t.startState.field(ws)||t.docChanged||t.selectionSet||t.viewportChanged)&&(this.decorations=this.highlight(e))}highlight({query:t,panel:e}){if(!e||!t.spec.valid)return ne.none;let{view:n}=this,i=new Dr;for(let r=0,s=n.visibleRanges,o=s.length;r<o;r++){let{from:l,to:a}=s[r];for(;r<o-1&&a>s[r+1].from-2*250;)a=s[++r].to;t.highlight(n.state,l,a,(u,c)=>{let h=n.state.selection.ranges.some(f=>f.from==u&&f.to==c);i.add(u,c,h?hW:cW)})}return i.finish()}},{decorations:t=>t.decorations});function wc(t){return e=>{let n=e.state.field(ws,!1);return n&&n.query.spec.valid?t(e,n):CD(e)}}const Pd=wc((t,{query:e})=>{let{to:n}=t.state.selection.main,i=e.nextMatch(t.state,n,n);if(!i)return!1;let r=z.single(i.from,i.to),s=t.state.facet(ia);return t.dispatch({selection:r,effects:[Z1(t,i),s.scrollToMatch(r.main,t)],userEvent:"select.search"}),kD(t),!0}),Fd=wc((t,{query:e})=>{let{state:n}=t,{from:i}=n.selection.main,r=e.prevMatch(n,i,i);if(!r)return!1;let s=z.single(r.from,r.to),o=t.state.facet(ia);return t.dispatch({selection:s,effects:[Z1(t,r),o.scrollToMatch(s.main,t)],userEvent:"select.search"}),kD(t),!0}),dW=wc((t,{query:e})=>{let n=e.matchAll(t.state,1e3);return!n||!n.length?!1:(t.dispatch({selection:z.create(n.map(i=>z.range(i.from,i.to))),userEvent:"select.search.matches"}),!0)}),pW=({state:t,dispatch:e})=>{let n=t.selection;if(n.ranges.length>1||n.main.empty)return!1;let{from:i,to:r}=n.main,s=[],o=0;for(let l=new Wl(t.doc,t.sliceDoc(i,r));!l.next().done;){if(s.length>1e3)return!1;l.value.from==i&&(o=s.length),s.push(z.range(l.value.from,l.value.to))}return e(t.update({selection:z.create(s,o),userEvent:"select.search.matches"})),!0},Sk=wc((t,{query:e})=>{let{state:n}=t,{from:i,to:r}=n.selection.main;if(n.readOnly)return!1;let s=e.nextMatch(n,i,i);if(!s)return!1;let o=s,l=[],a,u,c=[];o.from==i&&o.to==r&&(u=n.toText(e.getReplacement(o)),l.push({from:o.from,to:o.to,insert:u}),o=e.nextMatch(n,o.from,o.to),c.push(Y.announce.of(n.phrase("replaced match on line $",n.doc.lineAt(i).number)+".")));let h=t.state.changes(l);return o&&(a=z.single(o.from,o.to).map(h),c.push(Z1(t,o)),c.push(n.facet(ia).scrollToMatch(a.main,t))),t.dispatch({changes:h,selection:a,effects:c,userEvent:"input.replace"}),!0}),mW=wc((t,{query:e})=>{if(t.state.readOnly)return!1;let n=e.matchAll(t.state,1e9).map(r=>{let{from:s,to:o}=r;return{from:s,to:o,insert:e.getReplacement(r)}});if(!n.length)return!1;let i=t.state.phrase("replaced $ matches",n.length)+".";return t.dispatch({changes:n,effects:Y.announce.of(i),userEvent:"input.replace.all"}),!0});function J1(t){return t.state.facet(ia).createPanel(t)}function D0(t,e){var n,i,r,s,o;let l=t.selection.main,a=l.empty||l.to>l.from+100?"":t.sliceDoc(l.from,l.to);if(e&&!a)return e;let u=t.facet(ia);return new bD({search:((n=e==null?void 0:e.literal)!==null&&n!==void 0?n:u.literal)?a:a.replace(/\n/g,"\\n"),caseSensitive:(i=e==null?void 0:e.caseSensitive)!==null&&i!==void 0?i:u.caseSensitive,literal:(r=e==null?void 0:e.literal)!==null&&r!==void 0?r:u.literal,regexp:(s=e==null?void 0:e.regexp)!==null&&s!==void 0?s:u.regexp,wholeWord:(o=e==null?void 0:e.wholeWord)!==null&&o!==void 0?o:u.wholeWord})}function xD(t){let e=ju(t,J1);return e&&e.dom.querySelector("[main-field]")}function kD(t){let e=xD(t);e&&e==t.root.activeElement&&e.select()}const CD=t=>{let e=t.state.field(ws,!1);if(e&&e.panel){let n=xD(t);if(n&&n!=t.root.activeElement){let i=D0(t.state,e.query.spec);i.valid&&t.dispatch({effects:Wu.of(i)}),n.focus(),n.select()}}else t.dispatch({effects:[X1.of(!0),e?Wu.of(D0(t.state,e.query.spec)):we.appendConfig.of(wW)]});return!0},_D=t=>{let e=t.state.field(ws,!1);if(!e||!e.panel)return!1;let n=ju(t,J1);return n&&n.dom.contains(t.root.activeElement)&&t.focus(),t.dispatch({effects:X1.of(!1)}),!0},gW=[{key:"Mod-f",run:CD,scope:"editor search-panel"},{key:"F3",run:Pd,shift:Fd,scope:"editor search-panel",preventDefault:!0},{key:"Mod-g",run:Pd,shift:Fd,scope:"editor search-panel",preventDefault:!0},{key:"Escape",run:_D,scope:"editor search-panel"},{key:"Mod-Shift-l",run:pW},{key:"Mod-Alt-g",run:QH},{key:"Mod-d",run:sW,preventDefault:!0}];class yW{constructor(e){this.view=e;let n=this.query=e.state.field(ws).query.spec;this.commit=this.commit.bind(this),this.searchField=qe("input",{value:n.search,placeholder:Nn(e,"Find"),"aria-label":Nn(e,"Find"),class:"cm-textfield",name:"search",form:"","main-field":"true",onchange:this.commit,onkeyup:this.commit}),this.replaceField=qe("input",{value:n.replace,placeholder:Nn(e,"Replace"),"aria-label":Nn(e,"Replace"),class:"cm-textfield",name:"replace",form:"",onchange:this.commit,onkeyup:this.commit}),this.caseField=qe("input",{type:"checkbox",name:"case",form:"",checked:n.caseSensitive,onchange:this.commit}),this.reField=qe("input",{type:"checkbox",name:"re",form:"",checked:n.regexp,onchange:this.commit}),this.wordField=qe("input",{type:"checkbox",name:"word",form:"",checked:n.wholeWord,onchange:this.commit});function i(r,s,o){return qe("button",{class:"cm-button",name:r,onclick:s,type:"button"},o)}this.dom=qe("div",{onkeydown:r=>this.keydown(r),class:"cm-search"},[this.searchField,i("next",()=>Pd(e),[Nn(e,"next")]),i("prev",()=>Fd(e),[Nn(e,"previous")]),i("select",()=>dW(e),[Nn(e,"all")]),qe("label",null,[this.caseField,Nn(e,"match case")]),qe("label",null,[this.reField,Nn(e,"regexp")]),qe("label",null,[this.wordField,Nn(e,"by word")]),...e.state.readOnly?[]:[qe("br"),this.replaceField,i("replace",()=>Sk(e),[Nn(e,"replace")]),i("replaceAll",()=>mW(e),[Nn(e,"replace all")])],qe("button",{name:"close",onclick:()=>_D(e),"aria-label":Nn(e,"close"),type:"button"},["×"])])}commit(){let e=new bD({search:this.searchField.value,caseSensitive:this.caseField.checked,regexp:this.reField.checked,wholeWord:this.wordField.checked,replace:this.replaceField.value});e.eq(this.query)||(this.query=e,this.view.dispatch({effects:Wu.of(e)}))}keydown(e){_V(this.view,e,"search-panel")?e.preventDefault():e.keyCode==13&&e.target==this.searchField?(e.preventDefault(),(e.shiftKey?Fd:Pd)(this.view)):e.keyCode==13&&e.target==this.replaceField&&(e.preventDefault(),Sk(this.view))}update(e){for(let n of e.transactions)for(let i of n.effects)i.is(Wu)&&!i.value.eq(this.query)&&this.setQuery(i.value)}setQuery(e){this.query=e,this.searchField.value=e.search,this.replaceField.value=e.replace,this.caseField.checked=e.caseSensitive,this.reField.checked=e.regexp,this.wordField.checked=e.wholeWord}mount(){this.searchField.select()}get pos(){return 80}get top(){return this.view.state.facet(ia).top}}function Nn(t,e){return t.state.phrase(e)}const wh=30,bh=/[\s\.,:;?!]/;function Z1(t,{from:e,to:n}){let i=t.state.doc.lineAt(e),r=t.state.doc.lineAt(n).to,s=Math.max(i.from,e-wh),o=Math.min(r,n+wh),l=t.state.sliceDoc(s,o);if(s!=i.from){for(let a=0;a<wh;a++)if(!bh.test(l[a+1])&&bh.test(l[a])){l=l.slice(a);break}}if(o!=r){for(let a=l.length-1;a>l.length-wh;a--)if(!bh.test(l[a-1])&&bh.test(l[a])){l=l.slice(0,a);break}}return Y.announce.of(`${t.state.phrase("current match")}. ${l} ${t.state.phrase("on line")} ${i.number}.`)}const vW=Y.baseTheme({".cm-panel.cm-search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button, & label":{margin:".2em .6em .2em 0"},"& input[type=checkbox]":{marginRight:".2em"},"& label":{fontSize:"80%",whiteSpace:"pre"}},"&light .cm-searchMatch":{backgroundColor:"#ffff0054"},"&dark .cm-searchMatch":{backgroundColor:"#00ffff8a"},"&light .cm-searchMatch-selected":{backgroundColor:"#ff6a0054"},"&dark .cm-searchMatch-selected":{backgroundColor:"#ff00ff8a"}}),wW=[ws,Co.low(fW),vW];class ED{constructor(e,n,i,r){this.state=e,this.pos=n,this.explicit=i,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let n=Nt(this.state).resolveInner(this.pos,-1);for(;n&&e.indexOf(n.name)<0;)n=n.parent;return n?{from:n.from,to:this.pos,text:this.state.sliceDoc(n.from,this.pos),type:n.type}:null}matchBefore(e){let n=this.state.doc.lineAt(this.pos),i=Math.max(n.from,this.pos-250),r=n.text.slice(i-n.from,this.pos-n.from),s=r.search(ID(e,!1));return s<0?null:{from:i+s,to:this.pos,text:r.slice(s)}}get aborted(){return this.abortListeners==null}addEventListener(e,n,i){e=="abort"&&this.abortListeners&&(this.abortListeners.push(n),i&&i.onDocChange&&(this.abortOnDocChange=!0))}}function xk(t){let e=Object.keys(t).join(""),n=/\w/.test(e);return n&&(e=e.replace(/\w/g,"")),`[${n?"\\w":""}${e.replace(/[^\w\s]/g,"\\$&")}]`}function bW(t){let e=Object.create(null),n=Object.create(null);for(let{label:r}of t){e[r[0]]=!0;for(let s=1;s<r.length;s++)n[r[s]]=!0}let i=xk(e)+xk(n)+"*$";return[new RegExp("^"+i),new RegExp(i)]}function AD(t){let e=t.map(r=>typeof r=="string"?{label:r}:r),[n,i]=e.every(r=>/^\w+$/.test(r.label))?[/\w*$/,/\w+$/]:bW(e);return r=>{let s=r.matchBefore(i);return s||r.explicit?{from:s?s.from:r.pos,options:e,validFor:n}:null}}function SW(t,e){return n=>{for(let i=Nt(n.state).resolveInner(n.pos,-1);i;i=i.parent){if(t.indexOf(i.name)>-1)return null;if(i.type.isTop)break}return e(n)}}class kk{constructor(e,n,i,r){this.completion=e,this.source=n,this.match=i,this.score=r}}function ro(t){return t.selection.main.from}function ID(t,e){var n;let{source:i}=t,r=e&&i[0]!="^",s=i[i.length-1]!="$";return!r&&!s?t:new RegExp(`${r?"^":""}(?:${i})${s?"$":""}`,(n=t.flags)!==null&&n!==void 0?n:t.ignoreCase?"i":"")}const TD=ur.define();function xW(t,e,n,i){let{main:r}=t.selection,s=n-r.from,o=i-r.from;return Object.assign(Object.assign({},t.changeByRange(l=>{if(l!=r&&n!=i&&t.sliceDoc(l.from+s,l.from+o)!=t.sliceDoc(n,i))return{range:l};let a=t.toText(e);return{changes:{from:l.from+s,to:i==r.from?l.to:l.from+o,insert:a},range:z.cursor(l.from+s+a.length)}})),{scrollIntoView:!0,userEvent:"input.complete"})}const Ck=new WeakMap;function kW(t){if(!Array.isArray(t))return t;let e=Ck.get(t);return e||Ck.set(t,e=AD(t)),e}const zd=we.define(),qu=we.define();class CW{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let n=0;n<e.length;){let i=wn(e,n),r=Yi(i);this.chars.push(i);let s=e.slice(n,n+r),o=s.toUpperCase();this.folded.push(wn(o==s?s.toLowerCase():o,0)),n+=r}this.astral=e.length!=this.chars.length}ret(e,n){return this.score=e,this.matched=n,this}match(e){if(this.pattern.length==0)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:n,folded:i,any:r,precise:s,byWord:o}=this;if(n.length==1){let y=wn(e,0),v=Yi(y),x=v==e.length?0:-100;if(y!=n[0])if(y==i[0])x+=-200;else return null;return this.ret(x,[0,v])}let l=e.indexOf(this.pattern);if(l==0)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=n.length,u=0;if(l<0){for(let y=0,v=Math.min(e.length,200);y<v&&u<a;){let x=wn(e,y);(x==n[u]||x==i[u])&&(r[u++]=y),y+=Yi(x)}if(u<a)return null}let c=0,h=0,f=!1,d=0,p=-1,g=-1,w=/[a-z]/.test(e),m=!0;for(let y=0,v=Math.min(e.length,200),x=0;y<v&&h<a;){let _=wn(e,y);l<0&&(c<a&&_==n[c]&&(s[c++]=y),d<a&&(_==n[d]||_==i[d]?(d==0&&(p=y),g=y+1,d++):d=0));let b,I=_<255?_>=48&&_<=57||_>=97&&_<=122?2:_>=65&&_<=90?1:0:(b=_1(_))!=b.toLowerCase()?1:b!=b.toUpperCase()?2:0;(!y||I==1&&w||x==0&&I!=0)&&(n[h]==_||i[h]==_&&(f=!0)?o[h++]=y:o.length&&(m=!1)),x=I,y+=Yi(_)}return h==a&&o[0]==0&&m?this.result(-100+(f?-200:0),o,e):d==a&&p==0?this.ret(-200-e.length+(g==e.length?0:-100),[0,g]):l>-1?this.ret(-700-e.length,[l,l+this.pattern.length]):d==a?this.ret(-900-e.length,[p,g]):h==a?this.result(-100+(f?-200:0)+-700+(m?0:-1100),o,e):n.length==2?null:this.result((r[0]?-700:0)+-200+-1100,r,e)}result(e,n,i){let r=[],s=0;for(let o of n){let l=o+(this.astral?Yi(wn(i,o)):1);s&&r[s-1]==o?r[s-1]=l:(r[s++]=o,r[s++]=l)}return this.ret(e-i.length,r)}}class _W{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let n=e.slice(0,this.pattern.length),i=n==this.pattern?0:n.toLowerCase()==this.folded?-200:null;return i==null?null:(this.matched=[0,n.length],this.score=i+(e.length==this.pattern.length?0:-100),this)}}const Rt=X.define({combine(t){return cr(t,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:EW,filterStrict:!1,compareCompletions:(e,n)=>e.label.localeCompare(n.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,n)=>e&&n,closeOnBlur:(e,n)=>e&&n,icons:(e,n)=>e&&n,tooltipClass:(e,n)=>i=>_k(e(i),n(i)),optionClass:(e,n)=>i=>_k(e(i),n(i)),addToOptions:(e,n)=>e.concat(n),filterStrict:(e,n)=>e||n})}});function _k(t,e){return t?e?t+" "+e:t:e}function EW(t,e,n,i,r,s){let o=t.textDirection==rt.RTL,l=o,a=!1,u="top",c,h,f=e.left-r.left,d=r.right-e.right,p=i.right-i.left,g=i.bottom-i.top;if(l&&f<Math.min(p,d)?l=!1:!l&&d<Math.min(p,f)&&(l=!0),p<=(l?f:d))c=Math.max(r.top,Math.min(n.top,r.bottom-g))-e.top,h=Math.min(400,l?f:d);else{a=!0,h=Math.min(400,(o?e.right:r.right-e.left)-30);let y=r.bottom-e.bottom;y>=g||y>e.top?c=n.bottom-e.top:(u="bottom",c=e.bottom-n.top)}let w=(e.bottom-e.top)/s.offsetHeight,m=(e.right-e.left)/s.offsetWidth;return{style:`${u}: ${c/w}px; max-width: ${h/m}px`,class:"cm-completionInfo-"+(a?o?"left-narrow":"right-narrow":l?"left":"right")}}function AW(t){let e=t.addToOptions.slice();return t.icons&&e.push({render(n){let i=document.createElement("div");return i.classList.add("cm-completionIcon"),n.type&&i.classList.add(...n.type.split(/\s+/g).map(r=>"cm-completionIcon-"+r)),i.setAttribute("aria-hidden","true"),i},position:20}),e.push({render(n,i,r,s){let o=document.createElement("span");o.className="cm-completionLabel";let l=n.displayLabel||n.label,a=0;for(let u=0;u<s.length;){let c=s[u++],h=s[u++];c>a&&o.appendChild(document.createTextNode(l.slice(a,c)));let f=o.appendChild(document.createElement("span"));f.appendChild(document.createTextNode(l.slice(c,h))),f.className="cm-completionMatchedText",a=h}return a<l.length&&o.appendChild(document.createTextNode(l.slice(a))),o},position:50},{render(n){if(!n.detail)return null;let i=document.createElement("span");return i.className="cm-completionDetail",i.textContent=n.detail,i},position:80}),e.sort((n,i)=>n.position-i.position).map(n=>n.render)}function lg(t,e,n){if(t<=n)return{from:0,to:t};if(e<0&&(e=0),e<=t>>1){let r=Math.floor(e/n);return{from:r*n,to:(r+1)*n}}let i=Math.floor((t-e)/n);return{from:t-(i+1)*n,to:t-i*n}}class IW{constructor(e,n,i){this.view=e,this.stateField=n,this.applyCompletion=i,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:a=>this.placeInfo(a),key:this},this.space=null,this.currentClass="";let r=e.state.field(n),{options:s,selected:o}=r.open,l=e.state.facet(Rt);this.optionContent=AW(l),this.optionClass=l.optionClass,this.tooltipClass=l.tooltipClass,this.range=lg(s.length,o,l.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",a=>{let{options:u}=e.state.field(n).open;for(let c=a.target,h;c&&c!=this.dom;c=c.parentNode)if(c.nodeName=="LI"&&(h=/-(\d+)$/.exec(c.id))&&+h[1]<u.length){this.applyCompletion(e,u[+h[1]]),a.preventDefault();return}}),this.dom.addEventListener("focusout",a=>{let u=e.state.field(this.stateField,!1);u&&u.tooltip&&e.state.facet(Rt).closeOnBlur&&a.relatedTarget!=e.contentDOM&&e.dispatch({effects:qu.of(null)})}),this.showOptions(s,r.id)}mount(){this.updateSel()}showOptions(e,n){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,n,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(e){var n;let i=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),i!=r){let{options:s,selected:o,disabled:l}=i.open;(!r.open||r.open.options!=s)&&(this.range=lg(s.length,o,e.state.facet(Rt).maxRenderedOptions),this.showOptions(s,i.id)),this.updateSel(),l!=((n=r.open)===null||n===void 0?void 0:n.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!l)}}updateTooltipClass(e){let n=this.tooltipClass(e);if(n!=this.currentClass){for(let i of this.currentClass.split(" "))i&&this.dom.classList.remove(i);for(let i of n.split(" "))i&&this.dom.classList.add(i);this.currentClass=n}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),n=e.open;if((n.selected>-1&&n.selected<this.range.from||n.selected>=this.range.to)&&(this.range=lg(n.options.length,n.selected,this.view.state.facet(Rt).maxRenderedOptions),this.showOptions(n.options,e.id)),this.updateSelectedOption(n.selected)){this.destroyInfo();let{completion:i}=n.options[n.selected],{info:r}=i;if(!r)return;let s=typeof r=="string"?document.createTextNode(r):r(i);if(!s)return;"then"in s?s.then(o=>{o&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(o,i)}).catch(o=>kn(this.view.state,o,"completion info")):this.addInfoPane(s,i)}}addInfoPane(e,n){this.destroyInfo();let i=this.info=document.createElement("div");if(i.className="cm-tooltip cm-completionInfo",e.nodeType!=null)i.appendChild(e),this.infoDestroy=null;else{let{dom:r,destroy:s}=e;i.appendChild(r),this.infoDestroy=s||null}this.dom.appendChild(i),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let n=null;for(let i=this.list.firstChild,r=this.range.from;i;i=i.nextSibling,r++)i.nodeName!="LI"||!i.id?r--:r==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),n=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return n&&OW(this.list,n),n}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let n=this.dom.getBoundingClientRect(),i=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),s=this.space;if(!s){let o=this.dom.ownerDocument.documentElement;s={left:0,top:0,right:o.clientWidth,bottom:o.clientHeight}}return r.top>Math.min(s.bottom,n.bottom)-10||r.bottom<Math.max(s.top,n.top)+10?null:this.view.state.facet(Rt).positionInfo(this.view,n,r,i,s,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,n,i){const r=document.createElement("ul");r.id=n,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions")),r.addEventListener("mousedown",o=>{o.target==r&&o.preventDefault()});let s=null;for(let o=i.from;o<i.to;o++){let{completion:l,match:a}=e[o],{section:u}=l;if(u){let f=typeof u=="string"?u:u.name;if(f!=s&&(o>i.from||i.from==0))if(s=f,typeof u!="string"&&u.header)r.appendChild(u.header(u));else{let d=r.appendChild(document.createElement("completion-section"));d.textContent=f}}const c=r.appendChild(document.createElement("li"));c.id=n+"-"+o,c.setAttribute("role","option");let h=this.optionClass(l);h&&(c.className=h);for(let f of this.optionContent){let d=f(l,this.view.state,this.view,a);d&&c.appendChild(d)}}return i.from&&r.classList.add("cm-completionListIncompleteTop"),i.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function TW(t,e){return n=>new IW(n,t,e)}function OW(t,e){let n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=n.height/t.offsetHeight;i.top<n.top?t.scrollTop-=(n.top-i.top)/r:i.bottom>n.bottom&&(t.scrollTop+=(i.bottom-n.bottom)/r)}function Ek(t){return(t.boost||0)*100+(t.apply?10:0)+(t.info?5:0)+(t.type?1:0)}function DW(t,e){let n=[],i=null,r=u=>{n.push(u);let{section:c}=u.completion;if(c){i||(i=[]);let h=typeof c=="string"?c:c.name;i.some(f=>f.name==h)||i.push(typeof c=="string"?{name:h}:c)}},s=e.facet(Rt);for(let u of t)if(u.hasResult()){let c=u.result.getMatch;if(u.result.filter===!1)for(let h of u.result.options)r(new kk(h,u.source,c?c(h):[],1e9-n.length));else{let h=e.sliceDoc(u.from,u.to),f,d=s.filterStrict?new _W(h):new CW(h);for(let p of u.result.options)if(f=d.match(p.label)){let g=p.displayLabel?c?c(p,f.matched):[]:f.matched;r(new kk(p,u.source,g,f.score+(p.boost||0)))}}}if(i){let u=Object.create(null),c=0,h=(f,d)=>{var p,g;return((p=f.rank)!==null&&p!==void 0?p:1e9)-((g=d.rank)!==null&&g!==void 0?g:1e9)||(f.name<d.name?-1:1)};for(let f of i.sort(h))c-=1e5,u[f.name]=c;for(let f of n){let{section:d}=f.completion;d&&(f.score+=u[typeof d=="string"?d:d.name])}}let o=[],l=null,a=s.compareCompletions;for(let u of n.sort((c,h)=>h.score-c.score||a(c.completion,h.completion))){let c=u.completion;!l||l.label!=c.label||l.detail!=c.detail||l.type!=null&&c.type!=null&&l.type!=c.type||l.apply!=c.apply||l.boost!=c.boost?o.push(u):Ek(u.completion)>Ek(l)&&(o[o.length-1]=u),l=u.completion}return o}class ll{constructor(e,n,i,r,s,o){this.options=e,this.attrs=n,this.tooltip=i,this.timestamp=r,this.selected=s,this.disabled=o}setSelected(e,n){return e==this.selected||e>=this.options.length?this:new ll(this.options,Ak(n,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,n,i,r,s,o){if(r&&!o&&e.some(u=>u.isPending))return r.setDisabled();let l=DW(e,n);if(!l.length)return r&&e.some(u=>u.isPending)?r.setDisabled():null;let a=n.facet(Rt).selectOnOpen?0:-1;if(r&&r.selected!=a&&r.selected!=-1){let u=r.options[r.selected].completion;for(let c=0;c<l.length;c++)if(l[c].completion==u){a=c;break}}return new ll(l,Ak(i,a),{pos:e.reduce((u,c)=>c.hasResult()?Math.min(u,c.from):u,1e8),create:PW,above:s.aboveCursor},r?r.timestamp:Date.now(),a,!1)}map(e){return new ll(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new ll(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class Ud{constructor(e,n,i){this.active=e,this.id=n,this.open=i}static start(){return new Ud(NW,"cm-ac-"+Math.floor(Math.random()*2e6).toString(36),null)}update(e){let{state:n}=e,i=n.facet(Rt),s=(i.override||n.languageDataAt("autocomplete",ro(n)).map(kW)).map(a=>(this.active.find(c=>c.source==a)||new oi(a,this.active.some(c=>c.state!=0)?1:0)).update(e,i));s.length==this.active.length&&s.every((a,u)=>a==this.active[u])&&(s=this.active);let o=this.open,l=e.effects.some(a=>a.is(ew));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||s.some(a=>a.hasResult()&&e.changes.touchesRange(a.from,a.to))||!MW(s,this.active)||l?o=ll.build(s,n,this.id,o,i,l):o&&o.disabled&&!s.some(a=>a.isPending)&&(o=null),!o&&s.every(a=>!a.isPending)&&s.some(a=>a.hasResult())&&(s=s.map(a=>a.hasResult()?new oi(a.source,0):a));for(let a of e.effects)a.is(DD)&&(o=o&&o.setSelected(a.value,this.id));return s==this.active&&o==this.open?this:new Ud(s,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?RW:LW}}function MW(t,e){if(t==e)return!0;for(let n=0,i=0;;){for(;n<t.length&&!t[n].hasResult();)n++;for(;i<e.length&&!e[i].hasResult();)i++;let r=n==t.length,s=i==e.length;if(r||s)return r==s;if(t[n++].result!=e[i++].result)return!1}}const RW={"aria-autocomplete":"list"},LW={};function Ak(t,e){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":t};return e>-1&&(n["aria-activedescendant"]=t+"-"+e),n}const NW=[];function OD(t,e){if(t.isUserEvent("input.complete")){let i=t.annotation(TD);if(i&&e.activateOnCompletion(i))return 12}let n=t.isUserEvent("input.type");return n&&e.activateOnTyping?5:n?1:t.isUserEvent("delete.backward")?2:t.selection?8:t.docChanged?16:0}class oi{constructor(e,n,i=!1){this.source=e,this.state=n,this.explicit=i}hasResult(){return!1}get isPending(){return this.state==1}update(e,n){let i=OD(e,n),r=this;(i&8||i&16&&this.touches(e))&&(r=new oi(r.source,0)),i&4&&r.state==0&&(r=new oi(this.source,1)),r=r.updateFor(e,i);for(let s of e.effects)if(s.is(zd))r=new oi(r.source,1,s.value);else if(s.is(qu))r=new oi(r.source,0);else if(s.is(ew))for(let o of s.value)o.source==r.source&&(r=o);return r}updateFor(e,n){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(ro(e.state))}}class kl extends oi{constructor(e,n,i,r,s,o){super(e,3,n),this.limit=i,this.result=r,this.from=s,this.to=o}hasResult(){return!0}updateFor(e,n){var i;if(!(n&3))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let s=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),l=ro(e.state);if(l>o||!r||n&2&&(ro(e.startState)==this.from||l<this.limit))return new oi(this.source,n&4?1:0);let a=e.changes.mapPos(this.limit);return BW(r.validFor,e.state,s,o)?new kl(this.source,this.explicit,a,r,s,o):r.update&&(r=r.update(r,s,o,new ED(e.state,l,!1)))?new kl(this.source,this.explicit,a,r,r.from,(i=r.to)!==null&&i!==void 0?i:ro(e.state)):new oi(this.source,1,this.explicit)}map(e){return e.empty?this:(this.result.map?this.result.map(this.result,e):this.result)?new kl(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new oi(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function BW(t,e,n,i){if(!t)return!1;let r=e.sliceDoc(n,i);return typeof t=="function"?t(r,n,i,e):ID(t,!0).test(r)}const ew=we.define({map(t,e){return t.map(n=>n.map(e))}}),DD=we.define(),Sn=Vt.define({create(){return Ud.start()},update(t,e){return t.update(e)},provide:t=>[U1.from(t,e=>e.tooltip),Y.contentAttributes.from(t,e=>e.attrs)]});function tw(t,e){const n=e.completion.apply||e.completion.label;let i=t.state.field(Sn).active.find(r=>r.source==e.source);return i instanceof kl?(typeof n=="string"?t.dispatch(Object.assign(Object.assign({},xW(t.state,n,i.from,i.to)),{annotations:TD.of(e.completion)})):n(t,e.completion,i.from,i.to),!0):!1}const PW=TW(Sn,tw);function Sh(t,e="option"){return n=>{let i=n.state.field(Sn,!1);if(!i||!i.open||i.open.disabled||Date.now()-i.open.timestamp<n.state.facet(Rt).interactionDelay)return!1;let r=1,s;e=="page"&&(s=h2(n,i.open.tooltip))&&(r=Math.max(2,Math.floor(s.dom.offsetHeight/s.dom.querySelector("li").offsetHeight)-1));let{length:o}=i.open.options,l=i.open.selected>-1?i.open.selected+r*(t?1:-1):t?0:o-1;return l<0?l=e=="page"?0:o-1:l>=o&&(l=e=="page"?o-1:0),n.dispatch({effects:DD.of(l)}),!0}}const FW=t=>{let e=t.state.field(Sn,!1);return t.state.readOnly||!e||!e.open||e.open.selected<0||e.open.disabled||Date.now()-e.open.timestamp<t.state.facet(Rt).interactionDelay?!1:tw(t,e.open.options[e.open.selected])},Ik=t=>t.state.field(Sn,!1)?(t.dispatch({effects:zd.of(!0)}),!0):!1,zW=t=>{let e=t.state.field(Sn,!1);return!e||!e.active.some(n=>n.state!=0)?!1:(t.dispatch({effects:qu.of(null)}),!0)};class UW{constructor(e,n){this.active=e,this.context=n,this.time=Date.now(),this.updates=[],this.done=void 0}}const jW=50,VW=1e3,$W=wt.fromClass(class{constructor(t){this.view=t,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let e of t.state.field(Sn).active)e.isPending&&this.startQuery(e)}update(t){let e=t.state.field(Sn),n=t.state.facet(Rt);if(!t.selectionSet&&!t.docChanged&&t.startState.field(Sn)==e)return;let i=t.transactions.some(s=>{let o=OD(s,n);return o&8||(s.selection||s.docChanged)&&!(o&3)});for(let s=0;s<this.running.length;s++){let o=this.running[s];if(i||o.context.abortOnDocChange&&t.docChanged||o.updates.length+t.transactions.length>jW&&Date.now()-o.time>VW){for(let l of o.context.abortListeners)try{l()}catch(a){kn(this.view.state,a)}o.context.abortListeners=null,this.running.splice(s--,1)}else o.updates.push(...t.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),t.transactions.some(s=>s.effects.some(o=>o.is(zd)))&&(this.pendingStart=!0);let r=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=e.active.some(s=>s.isPending&&!this.running.some(o=>o.active.source==s.source))?setTimeout(()=>this.startUpdate(),r):-1,this.composing!=0)for(let s of t.transactions)s.isUserEvent("input.type")?this.composing=2:this.composing==2&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:t}=this.view,e=t.field(Sn);for(let n of e.active)n.isPending&&!this.running.some(i=>i.active.source==n.source)&&this.startQuery(n);this.running.length&&e.open&&e.open.disabled&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Rt).updateSyncTime))}startQuery(t){let{state:e}=this.view,n=ro(e),i=new ED(e,n,t.explicit,this.view),r=new UW(t,i);this.running.push(r),Promise.resolve(t.source(i)).then(s=>{r.context.aborted||(r.done=s||null,this.scheduleAccept())},s=>{this.view.dispatch({effects:qu.of(null)}),kn(this.view.state,s)})}scheduleAccept(){this.running.every(t=>t.done!==void 0)?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout(()=>this.accept(),this.view.state.facet(Rt).updateSyncTime))}accept(){var t;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let e=[],n=this.view.state.facet(Rt),i=this.view.state.field(Sn);for(let r=0;r<this.running.length;r++){let s=this.running[r];if(s.done===void 0)continue;if(this.running.splice(r--,1),s.done){let l=ro(s.updates.length?s.updates[0].startState:this.view.state),a=Math.min(l,s.done.from+(s.active.explicit?0:1)),u=new kl(s.active.source,s.active.explicit,a,s.done,s.done.from,(t=s.done.to)!==null&&t!==void 0?t:l);for(let c of s.updates)u=u.update(c,n);if(u.hasResult()){e.push(u);continue}}let o=i.active.find(l=>l.source==s.active.source);if(o&&o.isPending)if(s.done==null){let l=new oi(s.active.source,0);for(let a of s.updates)l=l.update(a,n);l.isPending||e.push(l)}else this.startQuery(o)}(e.length||i.open&&i.open.disabled)&&this.view.dispatch({effects:ew.of(e)})}},{eventHandlers:{blur(t){let e=this.view.state.field(Sn,!1);if(e&&e.tooltip&&this.view.state.facet(Rt).closeOnBlur){let n=e.open&&h2(this.view,e.open.tooltip);(!n||!n.dom.contains(t.relatedTarget))&&setTimeout(()=>this.view.dispatch({effects:qu.of(null)}),10)}},compositionstart(){this.composing=1},compositionend(){this.composing==3&&setTimeout(()=>this.view.dispatch({effects:zd.of(!1)}),20),this.composing=0}}}),HW=typeof navigator=="object"&&/Win/.test(navigator.platform),WW=Co.highest(Y.domEventHandlers({keydown(t,e){let n=e.state.field(Sn,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||t.key.length>1||t.ctrlKey&&!(HW&&t.altKey)||t.metaKey)return!1;let i=n.open.options[n.open.selected],r=n.active.find(o=>o.source==i.source),s=i.completion.commitCharacters||r.result.commitCharacters;return s&&s.indexOf(t.key)>-1&&tw(e,i),!1}})),qW=Y.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}}),Qu={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},Zs=we.define({map(t,e){let n=e.mapPos(t,-1,on.TrackAfter);return n??void 0}}),nw=new class extends po{};nw.startSide=1;nw.endSide=-1;const MD=Vt.define({create(){return Me.empty},update(t,e){if(t=t.map(e.changes),e.selection){let n=e.state.doc.lineAt(e.selection.main.head);t=t.update({filter:i=>i>=n.from&&i<=n.to})}for(let n of e.effects)n.is(Zs)&&(t=t.update({add:[nw.range(n.value,n.value+1)]}));return t}});function QW(){return[YW,MD]}const ag="()[]{}<>«»»«［］｛｝";function RD(t){for(let e=0;e<ag.length;e+=2)if(ag.charCodeAt(e)==t)return ag.charAt(e+1);return _1(t<128?t:t+1)}function LD(t,e){return t.languageDataAt("closeBrackets",e)[0]||Qu}const KW=typeof navigator=="object"&&/Android\b/.test(navigator.userAgent),YW=Y.inputHandler.of((t,e,n,i)=>{if((KW?t.composing:t.compositionStarted)||t.state.readOnly)return!1;let r=t.state.selection.main;if(i.length>2||i.length==2&&Yi(wn(i,0))==1||e!=r.from||n!=r.to)return!1;let s=JW(t.state,i);return s?(t.dispatch(s),!0):!1}),GW=({state:t,dispatch:e})=>{if(t.readOnly)return!1;let i=LD(t,t.selection.main.head).brackets||Qu.brackets,r=null,s=t.changeByRange(o=>{if(o.empty){let l=ZW(t.doc,o.head);for(let a of i)if(a==l&&Lp(t.doc,o.head)==RD(wn(a,0)))return{changes:{from:o.head-a.length,to:o.head+a.length},range:z.cursor(o.head-a.length)}}return{range:r=o}});return r||e(t.update(s,{scrollIntoView:!0,userEvent:"delete.backward"})),!r},XW=[{key:"Backspace",run:GW}];function JW(t,e){let n=LD(t,t.selection.main.head),i=n.brackets||Qu.brackets;for(let r of i){let s=RD(wn(r,0));if(e==r)return s==r?n7(t,r,i.indexOf(r+r+r)>-1,n):e7(t,r,s,n.before||Qu.before);if(e==s&&ND(t,t.selection.main.from))return t7(t,r,s)}return null}function ND(t,e){let n=!1;return t.field(MD).between(0,t.doc.length,i=>{i==e&&(n=!0)}),n}function Lp(t,e){let n=t.sliceString(e,e+2);return n.slice(0,Yi(wn(n,0)))}function ZW(t,e){let n=t.sliceString(e-2,e);return Yi(wn(n,0))==n.length?n:n.slice(1)}function e7(t,e,n,i){let r=null,s=t.changeByRange(o=>{if(!o.empty)return{changes:[{insert:e,from:o.from},{insert:n,from:o.to}],effects:Zs.of(o.to+e.length),range:z.range(o.anchor+e.length,o.head+e.length)};let l=Lp(t.doc,o.head);return!l||/\s/.test(l)||i.indexOf(l)>-1?{changes:{insert:e+n,from:o.head},effects:Zs.of(o.head+e.length),range:z.cursor(o.head+e.length)}:{range:r=o}});return r?null:t.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function t7(t,e,n){let i=null,r=t.changeByRange(s=>s.empty&&Lp(t.doc,s.head)==n?{changes:{from:s.head,to:s.head+n.length,insert:n},range:z.cursor(s.head+n.length)}:i={range:s});return i?null:t.update(r,{scrollIntoView:!0,userEvent:"input.type"})}function n7(t,e,n,i){let r=i.stringPrefixes||Qu.stringPrefixes,s=null,o=t.changeByRange(l=>{if(!l.empty)return{changes:[{insert:e,from:l.from},{insert:e,from:l.to}],effects:Zs.of(l.to+e.length),range:z.range(l.anchor+e.length,l.head+e.length)};let a=l.head,u=Lp(t.doc,a),c;if(u==e){if(Tk(t,a))return{changes:{insert:e+e,from:a},effects:Zs.of(a+e.length),range:z.cursor(a+e.length)};if(ND(t,a)){let f=n&&t.sliceDoc(a,a+e.length*3)==e+e+e?e+e+e:e;return{changes:{from:a,to:a+f.length,insert:f},range:z.cursor(a+f.length)}}}else{if(n&&t.sliceDoc(a-2*e.length,a)==e+e&&(c=Ok(t,a-2*e.length,r))>-1&&Tk(t,c))return{changes:{insert:e+e+e+e,from:a},effects:Zs.of(a+e.length),range:z.cursor(a+e.length)};if(t.charCategorizer(a)(u)!=lt.Word&&Ok(t,a,r)>-1&&!i7(t,a,e,r))return{changes:{insert:e+e,from:a},effects:Zs.of(a+e.length),range:z.cursor(a+e.length)}}return{range:s=l}});return s?null:t.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function Tk(t,e){let n=Nt(t).resolveInner(e+1);return n.parent&&n.from==e}function i7(t,e,n,i){let r=Nt(t).resolveInner(e,-1),s=i.reduce((o,l)=>Math.max(o,l.length),0);for(let o=0;o<5;o++){let l=t.sliceDoc(r.from,Math.min(r.to,r.from+n.length+s)),a=l.indexOf(n);if(!a||a>-1&&i.indexOf(l.slice(0,a))>-1){let c=r.firstChild;for(;c&&c.from==r.from&&c.to-c.from>n.length+a;){if(t.sliceDoc(c.to-n.length,c.to)==n)return!1;c=c.firstChild}return!0}let u=r.to==e&&r.parent;if(!u)break;r=u}return!1}function Ok(t,e,n){let i=t.charCategorizer(e);if(i(t.sliceDoc(e-1,e))!=lt.Word)return e;for(let r of n){let s=e-r.length;if(t.sliceDoc(s,e)==r&&i(t.sliceDoc(s-1,s))!=lt.Word)return s}return-1}function iw(t={}){return[WW,Sn,Rt.of(t),$W,r7,qW]}const BD=[{key:"Ctrl-Space",run:Ik},{mac:"Alt-`",run:Ik},{key:"Escape",run:zW},{key:"ArrowDown",run:Sh(!0)},{key:"ArrowUp",run:Sh(!1)},{key:"PageDown",run:Sh(!0,"page")},{key:"PageUp",run:Sh(!1,"page")},{key:"Enter",run:FW}],r7=Co.highest(_p.computeN([Rt],t=>t.facet(Rt).defaultKeymap?[BD]:[]));class Dk{constructor(e,n,i){this.from=e,this.to=n,this.diagnostic=i}}class Qs{constructor(e,n,i){this.diagnostics=e,this.panel=n,this.selected=i}static init(e,n,i){let r=i.facet(Ku).markerFilter;r&&(e=r(e,i));let s=e.slice().sort((c,h)=>c.from-h.from||c.to-h.to),o=new Dr,l=[],a=0;for(let c=0;;){let h=c==s.length?null:s[c];if(!h&&!l.length)break;let f,d;for(l.length?(f=a,d=l.reduce((g,w)=>Math.min(g,w.to),h&&h.from>f?h.from:1e8)):(f=h.from,d=h.to,l.push(h),c++);c<s.length;){let g=s[c];if(g.from==f&&(g.to>g.from||g.to==f))l.push(g),c++,d=Math.min(g.to,d);else{d=Math.min(g.from,d);break}}let p=y7(l);if(l.some(g=>g.from==g.to||g.from==g.to-1&&i.doc.lineAt(g.from).to==g.from))o.add(f,f,ne.widget({widget:new d7(p),diagnostics:l.slice()}));else{let g=l.reduce((w,m)=>m.markClass?w+" "+m.markClass:w,"");o.add(f,d,ne.mark({class:"cm-lintRange cm-lintRange-"+p+g,diagnostics:l.slice(),inclusiveEnd:l.some(w=>w.to>d)}))}a=d;for(let g=0;g<l.length;g++)l[g].to<=a&&l.splice(g--,1)}let u=o.finish();return new Qs(u,n,ql(u))}}function ql(t,e=null,n=0){let i=null;return t.between(n,1e9,(r,s,{spec:o})=>{if(!(e&&o.diagnostics.indexOf(e)<0))if(!i)i=new Dk(r,s,e||o.diagnostics[0]);else{if(o.diagnostics.indexOf(i.diagnostic)<0)return!1;i=new Dk(i.from,s,i.diagnostic)}}),i}function s7(t,e){let n=e.pos,i=e.end||n,r=t.state.facet(Ku).hideOn(t,n,i);if(r!=null)return r;let s=t.startState.doc.lineAt(e.pos);return!!(t.effects.some(o=>o.is(PD))||t.changes.touchesRange(s.from,Math.max(s.to,i)))}function o7(t,e){return t.field($n,!1)?e:e.concat(we.appendConfig.of(v7))}const PD=we.define(),rw=we.define(),FD=we.define(),$n=Vt.define({create(){return new Qs(ne.none,null,null)},update(t,e){if(e.docChanged&&t.diagnostics.size){let n=t.diagnostics.map(e.changes),i=null,r=t.panel;if(t.selected){let s=e.changes.mapPos(t.selected.from,1);i=ql(n,t.selected.diagnostic,s)||ql(n,null,s)}!n.size&&r&&e.state.facet(Ku).autoPanel&&(r=null),t=new Qs(n,r,i)}for(let n of e.effects)if(n.is(PD)){let i=e.state.facet(Ku).autoPanel?n.value.length?Yu.open:null:t.panel;t=Qs.init(n.value,i,e.state)}else n.is(rw)?t=new Qs(t.diagnostics,n.value?Yu.open:null,t.selected):n.is(FD)&&(t=new Qs(t.diagnostics,t.panel,n.value));return t},provide:t=>[Vu.from(t,e=>e.panel),Y.decorations.from(t,e=>e.diagnostics)]}),l7=ne.mark({class:"cm-lintRange cm-lintRange-active"});function a7(t,e,n){let{diagnostics:i}=t.state.field($n),r,s=-1,o=-1;i.between(e-(n<0?1:0),e+(n>0?1:0),(a,u,{spec:c})=>{if(e>=a&&e<=u&&(a==u||(e>a||n>0)&&(e<u||n<0)))return r=c.diagnostics,s=a,o=u,!1});let l=t.state.facet(Ku).tooltipFilter;return r&&l&&(r=l(r,t.state)),r?{pos:s,end:o,above:t.state.doc.lineAt(s).to<o,create(){return{dom:u7(t,r)}}}:null}function u7(t,e){return qe("ul",{class:"cm-tooltip-lint"},e.map(n=>UD(t,n,!1)))}const c7=t=>{let e=t.state.field($n,!1);(!e||!e.panel)&&t.dispatch({effects:o7(t.state,[rw.of(!0)])});let n=ju(t,Yu.open);return n&&n.dom.querySelector(".cm-panel-lint ul").focus(),!0},Mk=t=>{let e=t.state.field($n,!1);return!e||!e.panel?!1:(t.dispatch({effects:rw.of(!1)}),!0)},h7=t=>{let e=t.state.field($n,!1);if(!e)return!1;let n=t.state.selection.main,i=e.diagnostics.iter(n.to+1);return!i.value&&(i=e.diagnostics.iter(0),!i.value||i.from==n.from&&i.to==n.to)?!1:(t.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0}),!0)},f7=[{key:"Mod-Shift-m",run:c7,preventDefault:!0},{key:"F8",run:h7}],Ku=X.define({combine(t){return Object.assign({sources:t.map(e=>e.source).filter(e=>e!=null)},cr(t.map(e=>e.config),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,n)=>e?n?i=>e(i)||n(i):e:n}))}});function zD(t){let e=[];if(t)e:for(let{name:n}of t){for(let i=0;i<n.length;i++){let r=n[i];if(/[a-zA-Z]/.test(r)&&!e.some(s=>s.toLowerCase()==r.toLowerCase())){e.push(r);continue e}}e.push("")}return e}function UD(t,e,n){var i;let r=n?zD(e.actions):[];return qe("li",{class:"cm-diagnostic cm-diagnostic-"+e.severity},qe("span",{class:"cm-diagnosticText"},e.renderMessage?e.renderMessage(t):e.message),(i=e.actions)===null||i===void 0?void 0:i.map((s,o)=>{let l=!1,a=f=>{if(f.preventDefault(),l)return;l=!0;let d=ql(t.state.field($n).diagnostics,e);d&&s.apply(t,d.from,d.to)},{name:u}=s,c=r[o]?u.indexOf(r[o]):-1,h=c<0?u:[u.slice(0,c),qe("u",u.slice(c,c+1)),u.slice(c+1)];return qe("button",{type:"button",class:"cm-diagnosticAction",onclick:a,onmousedown:a,"aria-label":` Action: ${u}${c<0?"":` (access key "${r[o]})"`}.`},h)}),e.source&&qe("div",{class:"cm-diagnosticSource"},e.source))}class d7 extends zr{constructor(e){super(),this.sev=e}eq(e){return e.sev==this.sev}toDOM(){return qe("span",{class:"cm-lintPoint cm-lintPoint-"+this.sev})}}class Rk{constructor(e,n){this.diagnostic=n,this.id="item_"+Math.floor(Math.random()*4294967295).toString(16),this.dom=UD(e,n,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class Yu{constructor(e){this.view=e,this.items=[];let n=r=>{if(r.keyCode==27)Mk(this.view),this.view.focus();else if(r.keyCode==38||r.keyCode==33)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(r.keyCode==40||r.keyCode==34)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(r.keyCode==36)this.moveSelection(0);else if(r.keyCode==35)this.moveSelection(this.items.length-1);else if(r.keyCode==13)this.view.focus();else if(r.keyCode>=65&&r.keyCode<=90&&this.selectedIndex>=0){let{diagnostic:s}=this.items[this.selectedIndex],o=zD(s.actions);for(let l=0;l<o.length;l++)if(o[l].toUpperCase().charCodeAt(0)==r.keyCode){let a=ql(this.view.state.field($n).diagnostics,s);a&&s.actions[l].apply(e,a.from,a.to)}}else return;r.preventDefault()},i=r=>{for(let s=0;s<this.items.length;s++)this.items[s].dom.contains(r.target)&&this.moveSelection(s)};this.list=qe("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:n,onclick:i}),this.dom=qe("div",{class:"cm-panel-lint"},this.list,qe("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>Mk(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field($n).selected;if(!e)return-1;for(let n=0;n<this.items.length;n++)if(this.items[n].diagnostic==e.diagnostic)return n;return-1}update(){let{diagnostics:e,selected:n}=this.view.state.field($n),i=0,r=!1,s=null,o=new Set;for(e.between(0,this.view.state.doc.length,(l,a,{spec:u})=>{for(let c of u.diagnostics){if(o.has(c))continue;o.add(c);let h=-1,f;for(let d=i;d<this.items.length;d++)if(this.items[d].diagnostic==c){h=d;break}h<0?(f=new Rk(this.view,c),this.items.splice(i,0,f),r=!0):(f=this.items[h],h>i&&(this.items.splice(i,h-i),r=!0)),n&&f.diagnostic==n.diagnostic?f.dom.hasAttribute("aria-selected")||(f.dom.setAttribute("aria-selected","true"),s=f):f.dom.hasAttribute("aria-selected")&&f.dom.removeAttribute("aria-selected"),i++}});i<this.items.length&&!(this.items.length==1&&this.items[0].diagnostic.from<0);)r=!0,this.items.pop();this.items.length==0&&(this.items.push(new Rk(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),s?(this.list.setAttribute("aria-activedescendant",s.id),this.view.requestMeasure({key:this,read:()=>({sel:s.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:l,panel:a})=>{let u=a.height/this.list.offsetHeight;l.top<a.top?this.list.scrollTop-=(a.top-l.top)/u:l.bottom>a.bottom&&(this.list.scrollTop+=(l.bottom-a.bottom)/u)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function n(){let i=e;e=i.nextSibling,i.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)n();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)n()}moveSelection(e){if(this.selectedIndex<0)return;let n=this.view.state.field($n),i=ql(n.diagnostics,this.items[e].diagnostic);i&&this.view.dispatch({selection:{anchor:i.from,head:i.to},scrollIntoView:!0,effects:FD.of(i)})}static open(e){return new Yu(e)}}function p7(t,e='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${e}>${encodeURIComponent(t)}</svg>')`}function xh(t){return p7(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${t}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const m7=Y.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:xh("#d11")},".cm-lintRange-warning":{backgroundImage:xh("orange")},".cm-lintRange-info":{backgroundImage:xh("#999")},".cm-lintRange-hint":{backgroundImage:xh("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});function g7(t){return t=="error"?4:t=="warning"?3:t=="info"?2:1}function y7(t){let e="hint",n=1;for(let i of t){let r=g7(i.severity);r>n&&(n=r,e=i.severity)}return e}const v7=[$n,Y.decorations.compute([$n],t=>{let{selected:e,panel:n}=t.field($n);return!e||!n||e.from==e.to?ne.none:ne.set([l7.range(e.from,e.to)])}),c2(a7,{hideOn:s7}),m7];var Lk=function(e){e===void 0&&(e={});var{crosshairCursor:n=!1}=e,i=[];e.closeBracketsKeymap!==!1&&(i=i.concat(XW)),e.defaultKeymap!==!1&&(i=i.concat(HH)),e.searchKeymap!==!1&&(i=i.concat(gW)),e.historyKeymap!==!1&&(i=i.concat(Z9)),e.foldKeymap!==!1&&(i=i.concat(d9)),e.completionKeymap!==!1&&(i=i.concat(BD)),e.lintKeymap!==!1&&(i=i.concat(f7));var r=[];return e.lineNumbers!==!1&&r.push(k$()),e.highlightActiveLineGutter!==!1&&r.push(E$()),e.highlightSpecialChars!==!1&&r.push(VV()),e.history!==!1&&r.push(H9()),e.foldGutter!==!1&&r.push(y9()),e.drawSelection!==!1&&r.push(DV()),e.dropCursor!==!1&&r.push(BV()),e.allowMultipleSelections!==!1&&r.push(Ie.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&r.push(r9()),e.syntaxHighlighting!==!1&&r.push(N2(S9,{fallback:!0})),e.bracketMatching!==!1&&r.push(I9()),e.closeBrackets!==!1&&r.push(QW()),e.autocompletion!==!1&&r.push(iw()),e.rectangularSelection!==!1&&r.push(n$()),n!==!1&&r.push(s$()),e.highlightActiveLine!==!1&&r.push(KV()),e.highlightSelectionMatches!==!1&&r.push(XH()),e.tabSize&&typeof e.tabSize=="number"&&r.push(Ap.of(" ".repeat(e.tabSize))),r.concat([_p.of(i.flat())]).filter(Boolean)};const w7="#e5c07b",Nk="#e06c75",b7="#56b6c2",S7="#ffffff",lf="#abb2bf",M0="#7d8799",x7="#61afef",k7="#98c379",Bk="#d19a66",C7="#c678dd",_7="#21252b",Pk="#2c313a",Fk="#282c34",ug="#353a42",E7="#3E4451",zk="#528bff",A7=Y.theme({"&":{color:lf,backgroundColor:Fk},".cm-content":{caretColor:zk},".cm-cursor, .cm-dropCursor":{borderLeftColor:zk},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:E7},".cm-panels":{backgroundColor:_7,color:lf},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:Fk,color:M0,border:"none"},".cm-activeLineGutter":{backgroundColor:Pk},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:ug},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:ug,borderBottomColor:ug},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:Pk,color:lf}}},{dark:!0}),I7=yc.define([{tag:M.keyword,color:C7},{tag:[M.name,M.deleted,M.character,M.propertyName,M.macroName],color:Nk},{tag:[M.function(M.variableName),M.labelName],color:x7},{tag:[M.color,M.constant(M.name),M.standard(M.name)],color:Bk},{tag:[M.definition(M.name),M.separator],color:lf},{tag:[M.typeName,M.className,M.number,M.changed,M.annotation,M.modifier,M.self,M.namespace],color:w7},{tag:[M.operator,M.operatorKeyword,M.url,M.escape,M.regexp,M.link,M.special(M.string)],color:b7},{tag:[M.meta,M.comment],color:M0},{tag:M.strong,fontWeight:"bold"},{tag:M.emphasis,fontStyle:"italic"},{tag:M.strikethrough,textDecoration:"line-through"},{tag:M.link,color:M0,textDecoration:"underline"},{tag:M.heading,fontWeight:"bold",color:Nk},{tag:[M.atom,M.bool,M.special(M.variableName)],color:Bk},{tag:[M.processingInstruction,M.string,M.inserted],color:k7},{tag:M.invalid,color:S7}]),T7=[A7,N2(I7)];var O7=Y.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),D7=function(e){e===void 0&&(e={});var{indentWithTab:n=!0,editable:i=!0,readOnly:r=!1,theme:s="light",placeholder:o="",basicSetup:l=!0}=e,a=[];switch(n&&a.unshift(_p.of([WH])),l&&(typeof l=="boolean"?a.unshift(Lk()):a.unshift(Lk(l))),o&&a.unshift(JV(o)),s){case"light":a.push(O7);break;case"dark":a.push(T7);break;case"none":break;default:a.push(s);break}return i===!1&&a.push(Y.editable.of(!1)),r&&a.push(Ie.readOnly.of(!0)),[...a]},M7=t=>({line:t.state.doc.lineAt(t.state.selection.main.from),lineCount:t.state.doc.lines,lineBreak:t.state.lineBreak,length:t.state.doc.length,readOnly:t.state.readOnly,tabSize:t.state.tabSize,selection:t.state.selection,selectionAsSingle:t.state.selection.asSingle().main,ranges:t.state.selection.ranges,selectionCode:t.state.sliceDoc(t.state.selection.main.from,t.state.selection.main.to),selections:t.state.selection.ranges.map(e=>t.state.sliceDoc(e.from,e.to)),selectedText:t.state.selection.ranges.some(e=>!e.empty)});class R7{constructor(e,n){this.timeLeftMS=void 0,this.timeoutMS=void 0,this.isCancelled=!1,this.isTimeExhausted=!1,this.callbacks=[],this.timeLeftMS=n,this.timeoutMS=n,this.callbacks.push(e)}tick(){if(!this.isCancelled&&!this.isTimeExhausted&&(this.timeLeftMS--,this.timeLeftMS<=0)){this.isTimeExhausted=!0;var e=this.callbacks.slice();this.callbacks.length=0,e.forEach(n=>{try{n()}catch(i){console.error("TimeoutLatch callback error:",i)}})}}cancel(){this.isCancelled=!0,this.callbacks.length=0}reset(){this.timeLeftMS=this.timeoutMS,this.isCancelled=!1,this.isTimeExhausted=!1}get isDone(){return this.isCancelled||this.isTimeExhausted}}class Uk{constructor(){this.interval=null,this.latches=new Set}add(e){this.latches.add(e),this.start()}remove(e){this.latches.delete(e),this.latches.size===0&&this.stop()}start(){this.interval===null&&(this.interval=setInterval(()=>{this.latches.forEach(e=>{e.tick(),e.isDone&&this.remove(e)})},1))}stop(){this.interval!==null&&(clearInterval(this.interval),this.interval=null)}}var cg=null,L7=()=>typeof window>"u"?new Uk:(cg||(cg=new Uk),cg),jk=ur.define(),N7=200,B7=[];function P7(t){var{value:e,selection:n,onChange:i,onStatistics:r,onCreateEditor:s,onUpdate:o,extensions:l=B7,autoFocus:a,theme:u="light",height:c=null,minHeight:h=null,maxHeight:f=null,width:d=null,minWidth:p=null,maxWidth:g=null,placeholder:w="",editable:m=!0,readOnly:y=!1,indentWithTab:v=!0,basicSetup:x=!0,root:_,initialState:b}=t,[I,D]=R.useState(),[F,A]=R.useState(),[B,N]=R.useState(),W=R.useState(()=>({current:null}))[0],K=R.useState(()=>({current:null}))[0],U=Y.theme({"&":{height:c,minHeight:h,maxHeight:f,width:d,minWidth:p,maxWidth:g},"& .cm-scroller":{height:"100% !important"}}),Z=Y.updateListener.of(q=>{if(q.docChanged&&typeof i=="function"&&!q.transactions.some(se=>se.annotation(jk))){W.current?W.current.reset():(W.current=new R7(()=>{if(K.current){var se=K.current;K.current=null,se()}W.current=null},N7),L7().add(W.current));var S=q.state.doc,te=S.toString();i(te,q)}r&&r(M7(q))}),re=D7({theme:u,editable:m,readOnly:y,placeholder:w,indentWithTab:v,basicSetup:x}),j=[Z,U,...re];return o&&typeof o=="function"&&j.push(Y.updateListener.of(o)),j=j.concat(l),R.useLayoutEffect(()=>{if(I&&!B){var q={doc:e,selection:n,extensions:j},S=b?Ie.fromJSON(b.json,q,b.fields):Ie.create(q);if(N(S),!F){var te=new Y({state:S,parent:I,root:_});A(te),s&&s(te,S)}}return()=>{F&&(N(void 0),A(void 0))}},[I,B]),R.useEffect(()=>{t.container&&D(t.container)},[t.container]),R.useEffect(()=>()=>{F&&(F.destroy(),A(void 0)),W.current&&(W.current.cancel(),W.current=null)},[F]),R.useEffect(()=>{a&&F&&F.focus()},[a,F]),R.useEffect(()=>{F&&F.dispatch({effects:we.reconfigure.of(j)})},[u,l,c,h,f,d,p,g,w,m,y,v,x,i,o]),R.useEffect(()=>{if(e!==void 0){var q=F?F.state.doc.toString():"";if(F&&e!==q){var S=W.current&&!W.current.isDone,te=()=>{F&&e!==F.state.doc.toString()&&F.dispatch({changes:{from:0,to:F.state.doc.toString().length,insert:e||""},annotations:[jk.of(!0)]})};S?K.current=te:te()}}},[e,F]),{state:B,setState:N,view:F,setView:A,container:I,setContainer:D}}var F7=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],sw=R.forwardRef((t,e)=>{var{className:n,value:i="",selection:r,extensions:s=[],onChange:o,onStatistics:l,onCreateEditor:a,onUpdate:u,autoFocus:c,theme:h="light",height:f,minHeight:d,maxHeight:p,width:g,minWidth:w,maxWidth:m,basicSetup:y,placeholder:v,indentWithTab:x,editable:_,readOnly:b,root:I,initialState:D}=t,F=A$(t,F7),A=R.useRef(null),{state:B,view:N,container:W,setContainer:K}=P7({root:I,value:i,autoFocus:c,theme:h,height:f,minHeight:d,maxHeight:p,width:g,minWidth:w,maxWidth:m,basicSetup:y,placeholder:v,indentWithTab:x,editable:_,readOnly:b,selection:r,onChange:o,onStatistics:l,onCreateEditor:a,onUpdate:u,extensions:s,initialState:D});R.useImperativeHandle(e,()=>({editor:A.current,state:B,view:N}),[A,W,B,N]);var U=R.useCallback(re=>{A.current=re,K(re)},[K]);if(typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var Z=typeof h=="string"?"cm-theme-"+h:"cm-theme";return T.jsx("div",w0({ref:U,className:""+Z+(n?" "+n:"")},F))});sw.displayName="CodeMirror";var Vk={};class jd{constructor(e,n,i,r,s,o,l,a,u,c=0,h){this.p=e,this.stack=n,this.state=i,this.reducePos=r,this.pos=s,this.score=o,this.buffer=l,this.bufferBase=a,this.curContext=u,this.lookAhead=c,this.parent=h}toString(){return`[${this.stack.filter((e,n)=>n%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,n,i=0){let r=e.parser.context;return new jd(e,[],n,i,i,0,[],0,r?new $k(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,n){this.stack.push(this.state,n,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var n;let i=e>>19,r=e&65535,{parser:s}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let l=s.dynamicPrecedence(r);if(l&&(this.score+=l),i==0){this.pushState(s.getGoto(this.state,r,!0),this.reducePos),r<s.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,o?8:4,!0),this.reduceContext(r,this.reducePos);return}let a=this.stack.length-(i-1)*3-(e&262144?6:0),u=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-u;c>=2e3&&!(!((n=this.p.parser.nodeSet.types[r])===null||n===void 0)&&n.isAnonymous)&&(u==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=u,this.p.lastBigReductionSize=c));let h=a?this.stack[a-1]:0,f=this.bufferBase+this.buffer.length-h;if(r<s.minRepeatTerm||e&131072){let d=s.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,u,d,f+4,!0)}if(e&262144)this.state=this.stack[a];else{let d=this.stack[a-3];this.state=s.getGoto(d,r,!0)}for(;this.stack.length>a;)this.stack.pop();this.reduceContext(r,u)}storeNode(e,n,i,r=4,s=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let o=this,l=this.buffer.length;if(l==0&&o.parent&&(l=o.bufferBase-o.parent.bufferBase,o=o.parent),l>0&&o.buffer[l-4]==0&&o.buffer[l-1]>-1){if(n==i)return;if(o.buffer[l-2]>=n){o.buffer[l-2]=i;return}}}if(!s||this.pos==i)this.buffer.push(e,n,i,r);else{let o=this.buffer.length;if(o>0&&this.buffer[o-4]!=0){let l=!1;for(let a=o;a>0&&this.buffer[a-2]>i;a-=4)if(this.buffer[a-1]>=0){l=!0;break}if(l)for(;o>0&&this.buffer[o-2]>i;)this.buffer[o]=this.buffer[o-4],this.buffer[o+1]=this.buffer[o-3],this.buffer[o+2]=this.buffer[o-2],this.buffer[o+3]=this.buffer[o-1],o-=4,r>4&&(r-=4)}this.buffer[o]=e,this.buffer[o+1]=n,this.buffer[o+2]=i,this.buffer[o+3]=r}}shift(e,n,i,r){if(e&131072)this.pushState(e&65535,this.pos);else if(e&262144)this.pos=r,this.shiftContext(n,i),n<=this.p.parser.maxNode&&this.buffer.push(n,i,r,4);else{let s=e,{parser:o}=this.p;(r>this.pos||n<=o.maxNode)&&(this.pos=r,o.stateFlag(s,1)||(this.reducePos=r)),this.pushState(s,i),this.shiftContext(n,i),n<=o.maxNode&&this.buffer.push(n,i,r,4)}}apply(e,n,i,r){e&65536?this.reduce(e):this.shift(e,n,i,r)}useNode(e,n){let i=this.p.reused.length-1;(i<0||this.p.reused[i]!=e)&&(this.p.reused.push(e),i++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(n,r),this.buffer.push(i,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,n=e.buffer.length;for(;n>0&&e.buffer[n-2]>e.reducePos;)n-=4;let i=e.buffer.slice(n),r=e.bufferBase+n;for(;e&&r==e.bufferBase;)e=e.parent;return new jd(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,n){let i=e<=this.p.parser.maxNode;i&&this.storeNode(e,this.pos,n,4),this.storeNode(0,this.pos,n,i?8:4),this.pos=this.reducePos=n,this.score-=190}canShift(e){for(let n=new z7(this);;){let i=this.p.parser.stateSlot(n.state,4)||this.p.parser.hasAction(n.state,e);if(i==0)return!1;if(!(i&65536))return!0;n.reduce(i)}}recoverByInsert(e){if(this.stack.length>=300)return[];let n=this.p.parser.nextStates(this.state);if(n.length>8||this.stack.length>=120){let r=[];for(let s=0,o;s<n.length;s+=2)(o=n[s+1])!=this.state&&this.p.parser.hasAction(o,e)&&r.push(n[s],o);if(this.stack.length<120)for(let s=0;r.length<8&&s<n.length;s+=2){let o=n[s+1];r.some((l,a)=>a&1&&l==o)||r.push(n[s],o)}n=r}let i=[];for(let r=0;r<n.length&&i.length<4;r+=2){let s=n[r+1];if(s==this.state)continue;let o=this.split();o.pushState(s,this.pos),o.storeNode(0,o.pos,o.pos,4,!0),o.shiftContext(n[r],this.pos),o.reducePos=this.pos,o.score-=200,i.push(o)}return i}forceReduce(){let{parser:e}=this.p,n=e.stateSlot(this.state,5);if(!(n&65536))return!1;if(!e.validAction(this.state,n)){let i=n>>19,r=n&65535,s=this.stack.length-i*3;if(s<0||e.getGoto(this.stack[s],r,!1)<0){let o=this.findForcedReduction();if(o==null)return!1;n=o}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(n),!0}findForcedReduction(){let{parser:e}=this.p,n=[],i=(r,s)=>{if(!n.includes(r))return n.push(r),e.allActions(r,o=>{if(!(o&393216))if(o&65536){let l=(o>>19)-s;if(l>1){let a=o&65535,u=this.stack.length-l*3;if(u>=0&&e.getGoto(this.stack[u],a,!1)>=0)return l<<19|65536|a}}else{let l=i(o,s+1);if(l!=null)return l}})};return i(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let n=0;n<this.stack.length;n+=3)if(this.stack[n]!=e.stack[n])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(n)))}reduceContext(e,n){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(n)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let n=new $k(this.curContext.tracker,e);n.hash!=this.curContext.hash&&this.emitContext(),this.curContext=n}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class $k{constructor(e,n){this.tracker=e,this.context=n,this.hash=e.strict?e.hash(n):0}}class z7{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let n=e&65535,i=e>>19;i==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(i-1)*3;let r=this.start.p.parser.getGoto(this.stack[this.base-3],n,!0);this.state=r}}class Vd{constructor(e,n,i){this.stack=e,this.pos=n,this.index=i,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,n=e.bufferBase+e.buffer.length){return new Vd(e,n,n-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new Vd(this.stack,this.pos,this.index)}}function kh(t,e=Uint16Array){if(typeof t!="string")return t;let n=null;for(let i=0,r=0;i<t.length;){let s=0;for(;;){let o=t.charCodeAt(i++),l=!1;if(o==126){s=65535;break}o>=92&&o--,o>=34&&o--;let a=o-32;if(a>=46&&(a-=46,l=!0),s+=a,l)break;s*=46}n?n[r++]=s:n=new e(s)}return n}class af{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Hk=new af;class U7{constructor(e,n){this.input=e,this.ranges=n,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Hk,this.rangeIndex=0,this.pos=this.chunkPos=n[0].from,this.range=n[0],this.end=n[n.length-1].to,this.readNext()}resolveOffset(e,n){let i=this.range,r=this.rangeIndex,s=this.pos+e;for(;s<i.from;){if(!r)return null;let o=this.ranges[--r];s-=i.from-o.to,i=o}for(;n<0?s>i.to:s>=i.to;){if(r==this.ranges.length-1)return null;let o=this.ranges[++r];s+=o.from-i.to,i=o}return s}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let n of this.ranges)if(n.to>e)return Math.max(e,n.from);return this.end}peek(e){let n=this.chunkOff+e,i,r;if(n>=0&&n<this.chunk.length)i=this.pos+e,r=this.chunk.charCodeAt(n);else{let s=this.resolveOffset(e,1);if(s==null)return-1;if(i=s,i>=this.chunk2Pos&&i<this.chunk2Pos+this.chunk2.length)r=this.chunk2.charCodeAt(i-this.chunk2Pos);else{let o=this.rangeIndex,l=this.range;for(;l.to<=i;)l=this.ranges[++o];this.chunk2=this.input.chunk(this.chunk2Pos=i),i+this.chunk2.length>l.to&&(this.chunk2=this.chunk2.slice(0,l.to-i)),r=this.chunk2.charCodeAt(0)}}return i>=this.token.lookAhead&&(this.token.lookAhead=i+1),r}acceptToken(e,n=0){let i=n?this.resolveOffset(n,-1):this.pos;if(i==null||i<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=i}acceptTokenTo(e,n){this.token.value=e,this.token.end=n}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:n}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=n,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),n=this.pos+e.length;this.chunk=n>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,n){if(n?(this.token=n,n.start=e,n.lookAhead=e+1,n.value=n.extended=-1):this.token=Hk,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,n){if(e>=this.chunkPos&&n<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,n-this.chunkPos);if(e>=this.chunk2Pos&&n<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,n-this.chunk2Pos);if(e>=this.range.from&&n<=this.range.to)return this.input.read(e,n);let i="";for(let r of this.ranges){if(r.from>=n)break;r.to>e&&(i+=this.input.read(Math.max(r.from,e),Math.min(r.to,n)))}return i}}class Cl{constructor(e,n){this.data=e,this.id=n}token(e,n){let{parser:i}=n.p;V7(this.data,e,n,this.id,i.data,i.tokenPrecTable)}}Cl.prototype.contextual=Cl.prototype.fallback=Cl.prototype.extend=!1;Cl.prototype.fallback=Cl.prototype.extend=!1;class j7{constructor(e,n={}){this.token=e,this.contextual=!!n.contextual,this.fallback=!!n.fallback,this.extend=!!n.extend}}function V7(t,e,n,i,r,s){let o=0,l=1<<i,{dialect:a}=n.p.parser;e:for(;l&t[o];){let u=t[o+1];for(let d=o+3;d<u;d+=2)if((t[d+1]&l)>0){let p=t[d];if(a.allows(p)&&(e.token.value==-1||e.token.value==p||$7(p,e.token.value,r,s))){e.acceptToken(p);break}}let c=e.next,h=0,f=t[o+2];if(e.next<0&&f>h&&t[u+f*3-3]==65535){o=t[u+f*3-1];continue e}for(;h<f;){let d=h+f>>1,p=u+d+(d<<1),g=t[p],w=t[p+1]||65536;if(c<g)f=d;else if(c>=w)h=d+1;else{o=t[p+2],e.advance();continue e}}break}}function Wk(t,e,n){for(let i=e,r;(r=t[i])!=65535;i++)if(r==n)return i-e;return-1}function $7(t,e,n,i){let r=Wk(n,i,e);return r<0||Wk(n,i,t)<r}const Bn=typeof process<"u"&&Vk&&/\bparse\b/.test(Vk.LOG);let hg=null;function qk(t,e,n){let i=t.cursor(Mt.IncludeAnonymous);for(i.moveTo(e);;)if(!(n<0?i.childBefore(e):i.childAfter(e)))for(;;){if((n<0?i.to<e:i.from>e)&&!i.type.isError)return n<0?Math.max(0,Math.min(i.to-1,e-25)):Math.min(t.length,Math.max(i.from+1,e+25));if(n<0?i.prevSibling():i.nextSibling())break;if(!i.parent())return n<0?0:t.length}}class H7{constructor(e,n){this.fragments=e,this.nodeSet=n,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?qk(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?qk(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let n=this.trees.length-1;if(n<0)return this.nextFragment(),null;let i=this.trees[n],r=this.index[n];if(r==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[r],o=this.start[n]+i.positions[r];if(o>e)return this.nextStart=o,null;if(s instanceof kt){if(o==e){if(o<this.safeFrom)return null;let l=o+s.length;if(l<=this.safeTo){let a=s.prop(Ce.lookAhead);if(!a||l+a<this.fragment.to)return s}}this.index[n]++,o+s.length>=Math.max(this.safeFrom,e)&&(this.trees.push(s),this.start.push(o),this.index.push(0))}else this.index[n]++,this.nextStart=o+s.length}}}class W7{constructor(e,n){this.stream=n,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(i=>new af)}getActions(e){let n=0,i=null,{parser:r}=e.p,{tokenizers:s}=r,o=r.stateSlot(e.state,3),l=e.curContext?e.curContext.hash:0,a=0;for(let u=0;u<s.length;u++){if(!(1<<u&o))continue;let c=s[u],h=this.tokens[u];if(!(i&&!c.fallback)&&((c.contextual||h.start!=e.pos||h.mask!=o||h.context!=l)&&(this.updateCachedToken(h,c,e),h.mask=o,h.context=l),h.lookAhead>h.end+25&&(a=Math.max(h.lookAhead,a)),h.value!=0)){let f=n;if(h.extended>-1&&(n=this.addActions(e,h.extended,h.end,n)),n=this.addActions(e,h.value,h.end,n),!c.extend&&(i=h,n>f))break}}for(;this.actions.length>n;)this.actions.pop();return a&&e.setLookAhead(a),!i&&e.pos==this.stream.end&&(i=new af,i.value=e.p.parser.eofTerm,i.start=i.end=e.pos,n=this.addActions(e,i.value,i.end,n)),this.mainToken=i,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let n=new af,{pos:i,p:r}=e;return n.start=i,n.end=Math.min(i+1,r.stream.end),n.value=i==r.stream.end?r.parser.eofTerm:0,n}updateCachedToken(e,n,i){let r=this.stream.clipPos(i.pos);if(n.token(this.stream.reset(r,e),i),e.value>-1){let{parser:s}=i.p;for(let o=0;o<s.specialized.length;o++)if(s.specialized[o]==e.value){let l=s.specializers[o](this.stream.read(e.start,e.end),i);if(l>=0&&i.p.parser.dialect.allows(l>>1)){l&1?e.extended=l>>1:e.value=l>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,n,i,r){for(let s=0;s<r;s+=3)if(this.actions[s]==e)return r;return this.actions[r++]=e,this.actions[r++]=n,this.actions[r++]=i,r}addActions(e,n,i,r){let{state:s}=e,{parser:o}=e.p,{data:l}=o;for(let a=0;a<2;a++)for(let u=o.stateSlot(s,a?2:1);;u+=3){if(l[u]==65535)if(l[u+1]==1)u=wr(l,u+2);else{r==0&&l[u+1]==2&&(r=this.putAction(wr(l,u+2),n,i,r));break}l[u]==n&&(r=this.putAction(wr(l,u+1),n,i,r))}return r}}class q7{constructor(e,n,i,r){this.parser=e,this.input=n,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new U7(n,r),this.tokens=new W7(e,this.stream),this.topTerm=e.top[1];let{from:s}=r[0];this.stacks=[jd.start(this,e.top[0],s)],this.fragments=i.length&&this.stream.end-s>e.bufferLength*4?new H7(i,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,n=this.minStackPos,i=this.stacks=[],r,s;if(this.bigReductionCount>300&&e.length==1){let[o]=e;for(;o.forceReduce()&&o.stack.length&&o.stack[o.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<e.length;o++){let l=e[o];for(;;){if(this.tokens.mainToken=null,l.pos>n)i.push(l);else{if(this.advanceStack(l,i,e))continue;{r||(r=[],s=[]),r.push(l);let a=this.tokens.getMainToken(l);s.push(a.value,a.end)}}break}}if(!i.length){let o=r&&K7(r);if(o)return Bn&&console.log("Finish with "+this.stackID(o)),this.stackToTree(o);if(this.parser.strict)throw Bn&&r&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+n);this.recovering||(this.recovering=5)}if(this.recovering&&r){let o=this.stoppedAt!=null&&r[0].pos>this.stoppedAt?r[0]:this.runRecovery(r,s,i);if(o)return Bn&&console.log("Force-finish "+this.stackID(o)),this.stackToTree(o.forceAll())}if(this.recovering){let o=this.recovering==1?1:this.recovering*3;if(i.length>o)for(i.sort((l,a)=>a.score-l.score);i.length>o;)i.pop();i.some(l=>l.reducePos>n)&&this.recovering--}else if(i.length>1){e:for(let o=0;o<i.length-1;o++){let l=i[o];for(let a=o+1;a<i.length;a++){let u=i[a];if(l.sameState(u)||l.buffer.length>500&&u.buffer.length>500)if((l.score-u.score||l.buffer.length-u.buffer.length)>0)i.splice(a--,1);else{i.splice(o--,1);continue e}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,n,i){let r=e.pos,{parser:s}=this,o=Bn?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let u=e.curContext&&e.curContext.tracker.strict,c=u?e.curContext.hash:0;for(let h=this.fragments.nodeAt(r);h;){let f=this.parser.nodeSet.types[h.type.id]==h.type?s.getGoto(e.state,h.type.id):-1;if(f>-1&&h.length&&(!u||(h.prop(Ce.contextHash)||0)==c))return e.useNode(h,f),Bn&&console.log(o+this.stackID(e)+` (via reuse of ${s.getName(h.type.id)})`),!0;if(!(h instanceof kt)||h.children.length==0||h.positions[0]>0)break;let d=h.children[0];if(d instanceof kt&&h.positions[0]==0)h=d;else break}}let l=s.stateSlot(e.state,4);if(l>0)return e.reduce(l),Bn&&console.log(o+this.stackID(e)+` (via always-reduce ${s.getName(l&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let a=this.tokens.getActions(e);for(let u=0;u<a.length;){let c=a[u++],h=a[u++],f=a[u++],d=u==a.length||!i,p=d?e:e.split(),g=this.tokens.mainToken;if(p.apply(c,h,g?g.start:p.pos,f),Bn&&console.log(o+this.stackID(p)+` (via ${c&65536?`reduce of ${s.getName(c&65535)}`:"shift"} for ${s.getName(h)} @ ${r}${p==e?"":", split"})`),d)return!0;p.pos>r?n.push(p):i.push(p)}return!1}advanceFully(e,n){let i=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return Qk(e,n),!0}}runRecovery(e,n,i){let r=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],a=n[o<<1],u=n[(o<<1)+1],c=Bn?this.stackID(l)+" -> ":"";if(l.deadEnd&&(s||(s=!0,l.restart(),Bn&&console.log(c+this.stackID(l)+" (restarted)"),this.advanceFully(l,i))))continue;let h=l.split(),f=c;for(let d=0;h.forceReduce()&&d<10&&(Bn&&console.log(f+this.stackID(h)+" (via force-reduce)"),!this.advanceFully(h,i));d++)Bn&&(f=this.stackID(h)+" -> ");for(let d of l.recoverByInsert(a))Bn&&console.log(c+this.stackID(d)+" (via recover-insert)"),this.advanceFully(d,i);this.stream.end>l.pos?(u==l.pos&&(u++,a=0),l.recoverByDelete(a,u),Bn&&console.log(c+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),Qk(l,i)):(!r||r.score<l.score)&&(r=l)}return r}stackToTree(e){return e.close(),kt.build({buffer:Vd.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let n=(hg||(hg=new WeakMap)).get(e);return n||hg.set(e,n=String.fromCodePoint(this.nextStackID++)),n+e}}function Qk(t,e){for(let n=0;n<e.length;n++){let i=e[n];if(i.pos==t.pos&&i.sameState(t)){e[n].score<t.score&&(e[n]=t);return}}e.push(t)}class Q7{constructor(e,n,i){this.source=e,this.flags=n,this.disabled=i}allows(e){return!this.disabled||this.disabled[e]==0}}class $d extends w2{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let n=e.nodeNames.split(" ");this.minRepeatTerm=n.length;for(let l=0;l<e.repeatNodeCount;l++)n.push("");let i=Object.keys(e.topRules).map(l=>e.topRules[l][1]),r=[];for(let l=0;l<n.length;l++)r.push([]);function s(l,a,u){r[l].push([a,a.deserialize(String(u))])}if(e.nodeProps)for(let l of e.nodeProps){let a=l[0];typeof a=="string"&&(a=Ce[a]);for(let u=1;u<l.length;){let c=l[u++];if(c>=0)s(c,a,l[u++]);else{let h=l[u+-c];for(let f=-c;f>0;f--)s(l[u++],a,h);u++}}}this.nodeSet=new j1(n.map((l,a)=>On.define({name:a>=this.minRepeatTerm?void 0:l,id:a,props:r[a],top:i.indexOf(a)>-1,error:a==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(a)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=m2;let o=kh(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let l=0;l<this.specializerSpecs.length;l++)this.specialized[l]=this.specializerSpecs[l].term;this.specializers=this.specializerSpecs.map(Kk),this.states=kh(e.states,Uint32Array),this.data=kh(e.stateData),this.goto=kh(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(l=>typeof l=="number"?new Cl(o,l):l),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,n,i){let r=new q7(this,e,n,i);for(let s of this.wrappers)r=s(r,e,n,i);return r}getGoto(e,n,i=!1){let r=this.goto;if(n>=r[0])return-1;for(let s=r[n+1];;){let o=r[s++],l=o&1,a=r[s++];if(l&&i)return a;for(let u=s+(o>>1);s<u;s++)if(r[s]==e)return a;if(l)return-1}}hasAction(e,n){let i=this.data;for(let r=0;r<2;r++)for(let s=this.stateSlot(e,r?2:1),o;;s+=3){if((o=i[s])==65535)if(i[s+1]==1)o=i[s=wr(i,s+2)];else{if(i[s+1]==2)return wr(i,s+2);break}if(o==n||o==0)return wr(i,s+1)}return 0}stateSlot(e,n){return this.states[e*6+n]}stateFlag(e,n){return(this.stateSlot(e,0)&n)>0}validAction(e,n){return!!this.allActions(e,i=>i==n?!0:null)}allActions(e,n){let i=this.stateSlot(e,4),r=i?n(i):void 0;for(let s=this.stateSlot(e,1);r==null;s+=3){if(this.data[s]==65535)if(this.data[s+1]==1)s=wr(this.data,s+2);else break;r=n(wr(this.data,s+1))}return r}nextStates(e){let n=[];for(let i=this.stateSlot(e,1);;i+=3){if(this.data[i]==65535)if(this.data[i+1]==1)i=wr(this.data,i+2);else break;if(!(this.data[i+2]&1)){let r=this.data[i+1];n.some((s,o)=>o&1&&s==r)||n.push(this.data[i],r)}}return n}configure(e){let n=Object.assign(Object.create($d.prototype),this);if(e.props&&(n.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);n.top=i}return e.tokenizers&&(n.tokenizers=this.tokenizers.map(i=>{let r=e.tokenizers.find(s=>s.from==i);return r?r.to:i})),e.specializers&&(n.specializers=this.specializers.slice(),n.specializerSpecs=this.specializerSpecs.map((i,r)=>{let s=e.specializers.find(l=>l.from==i.external);if(!s)return i;let o=Object.assign(Object.assign({},i),{external:s.to});return n.specializers[r]=Kk(o),o})),e.contextTracker&&(n.context=e.contextTracker),e.dialect&&(n.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(n.strict=e.strict),e.wrap&&(n.wrappers=n.wrappers.concat(e.wrap)),e.bufferLength!=null&&(n.bufferLength=e.bufferLength),n}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let n=this.dynamicPrecedences;return n==null?0:n[e]||0}parseDialect(e){let n=Object.keys(this.dialects),i=n.map(()=>!1);if(e)for(let s of e.split(" ")){let o=n.indexOf(s);o>=0&&(i[o]=!0)}let r=null;for(let s=0;s<n.length;s++)if(!i[s])for(let o=this.dialects[n[s]],l;(l=this.data[o++])!=65535;)(r||(r=new Uint8Array(this.maxTerm+1)))[l]=1;return new Q7(e,i,r)}static deserialize(e){return new $d(e)}}function wr(t,e){return t[e]|t[e+1]<<16}function K7(t){let e=null;for(let n of t){let i=n.p.stoppedAt;(n.pos==n.p.stream.end||i!=null&&n.pos>i)&&n.p.parser.stateFlag(n.state,2)&&(!e||e.score<n.score)&&(e=n)}return e}function Kk(t){if(t.external){let e=t.extend?1:0;return(n,i)=>t.external(n,i)<<1|e}return t.get}const Y7=36,Yk=1,G7=2,Do=3,fg=4,X7=5,J7=6,Z7=7,eq=8,tq=9,nq=10,iq=11,rq=12,sq=13,oq=14,lq=15,aq=16,uq=17,Gk=18,cq=19,jD=20,VD=21,Xk=22,hq=23,fq=24;function R0(t){return t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57}function dq(t){return t>=48&&t<=57||t>=97&&t<=102||t>=65&&t<=70}function Hs(t,e,n){for(let i=!1;;){if(t.next<0)return;if(t.next==e&&!i){t.advance();return}i=n&&!i&&t.next==92,t.advance()}}function pq(t,e){e:for(;;){if(t.next<0)return;if(t.next==36){t.advance();for(let n=0;n<e.length;n++){if(t.next!=e.charCodeAt(n))continue e;t.advance()}if(t.next==36){t.advance();return}}else t.advance()}}function mq(t,e){let n="[{<(".indexOf(String.fromCharCode(e)),i=n<0?e:"]}>)".charCodeAt(n);for(;;){if(t.next<0)return;if(t.next==i&&t.peek(1)==39){t.advance(2);return}t.advance()}}function L0(t,e){for(;!(t.next!=95&&!R0(t.next));)e!=null&&(e+=String.fromCharCode(t.next)),t.advance();return e}function gq(t){if(t.next==39||t.next==34||t.next==96){let e=t.next;t.advance(),Hs(t,e,!1)}else L0(t)}function Jk(t,e){for(;t.next==48||t.next==49;)t.advance();e&&t.next==e&&t.advance()}function Zk(t,e){for(;;){if(t.next==46){if(e)break;e=!0}else if(t.next<48||t.next>57)break;t.advance()}if(t.next==69||t.next==101)for(t.advance(),(t.next==43||t.next==45)&&t.advance();t.next>=48&&t.next<=57;)t.advance()}function eC(t){for(;!(t.next<0||t.next==10);)t.advance()}function js(t,e){for(let n=0;n<e.length;n++)if(e.charCodeAt(n)==t)return!0;return!1}const dg=` 	\r
`;function $D(t,e,n){let i=Object.create(null);i.true=i.false=X7,i.null=i.unknown=J7;for(let r of t.split(" "))r&&(i[r]=jD);for(let r of e.split(" "))r&&(i[r]=VD);for(let r of(n||"").split(" "))r&&(i[r]=fq);return i}const yq="array binary bit boolean char character clob date decimal double float int integer interval large national nchar nclob numeric object precision real smallint time timestamp varchar varying ",vq="absolute action add after all allocate alter and any are as asc assertion at authorization before begin between both breadth by call cascade cascaded case cast catalog check close collate collation column commit condition connect connection constraint constraints constructor continue corresponding count create cross cube current current_date current_default_transform_group current_transform_group_for_type current_path current_role current_time current_timestamp current_user cursor cycle data day deallocate declare default deferrable deferred delete depth deref desc describe descriptor deterministic diagnostics disconnect distinct do domain drop dynamic each else elseif end end-exec equals escape except exception exec execute exists exit external fetch first for foreign found from free full function general get global go goto grant group grouping handle having hold hour identity if immediate in indicator initially inner inout input insert intersect into is isolation join key language last lateral leading leave left level like limit local localtime localtimestamp locator loop map match method minute modifies module month names natural nesting new next no none not of old on only open option or order ordinality out outer output overlaps pad parameter partial path prepare preserve primary prior privileges procedure public read reads recursive redo ref references referencing relative release repeat resignal restrict result return returns revoke right role rollback rollup routine row rows savepoint schema scroll search second section select session session_user set sets signal similar size some space specific specifictype sql sqlexception sqlstate sqlwarning start state static system_user table temporary then timezone_hour timezone_minute to trailing transaction translation treat trigger under undo union unique unnest until update usage user using value values view when whenever where while with without work write year zone ",N0={backslashEscapes:!1,hashComments:!1,spaceAfterDashes:!1,slashComments:!1,doubleQuotedStrings:!1,doubleDollarQuotedStrings:!1,unquotedBitLiterals:!1,treatBitsAsBytes:!1,charSetCasts:!1,plsqlQuotingMechanism:!1,operatorChars:"*+-%<>!=&|~^/",specialVar:"?",identifierQuotes:'"',caseInsensitiveIdentifiers:!1,words:$D(vq,yq)};function wq(t,e,n,i){let r={};for(let s in N0)r[s]=(t.hasOwnProperty(s)?t:N0)[s];return e&&(r.words=$D(e,n||"",i)),r}function HD(t){return new j7(e=>{var n;let{next:i}=e;if(e.advance(),js(i,dg)){for(;js(e.next,dg);)e.advance();e.acceptToken(Y7)}else if(i==36&&t.doubleDollarQuotedStrings){let r=L0(e,"");e.next==36&&(e.advance(),pq(e,r),e.acceptToken(Do))}else if(i==39||i==34&&t.doubleQuotedStrings)Hs(e,i,t.backslashEscapes),e.acceptToken(Do);else if(i==35&&t.hashComments||i==47&&e.next==47&&t.slashComments)eC(e),e.acceptToken(Yk);else if(i==45&&e.next==45&&(!t.spaceAfterDashes||e.peek(1)==32))eC(e),e.acceptToken(Yk);else if(i==47&&e.next==42){e.advance();for(let r=1;;){let s=e.next;if(e.next<0)break;if(e.advance(),s==42&&e.next==47){if(r--,e.advance(),!r)break}else s==47&&e.next==42&&(r++,e.advance())}e.acceptToken(G7)}else if((i==101||i==69)&&e.next==39)e.advance(),Hs(e,39,!0),e.acceptToken(Do);else if((i==110||i==78)&&e.next==39&&t.charSetCasts)e.advance(),Hs(e,39,t.backslashEscapes),e.acceptToken(Do);else if(i==95&&t.charSetCasts)for(let r=0;;r++){if(e.next==39&&r>1){e.advance(),Hs(e,39,t.backslashEscapes),e.acceptToken(Do);break}if(!R0(e.next))break;e.advance()}else if(t.plsqlQuotingMechanism&&(i==113||i==81)&&e.next==39&&e.peek(1)>0&&!js(e.peek(1),dg)){let r=e.peek(1);e.advance(2),mq(e,r),e.acceptToken(Do)}else if(i==40)e.acceptToken(Z7);else if(i==41)e.acceptToken(eq);else if(i==123)e.acceptToken(tq);else if(i==125)e.acceptToken(nq);else if(i==91)e.acceptToken(iq);else if(i==93)e.acceptToken(rq);else if(i==59)e.acceptToken(sq);else if(t.unquotedBitLiterals&&i==48&&e.next==98)e.advance(),Jk(e),e.acceptToken(Xk);else if((i==98||i==66)&&(e.next==39||e.next==34)){const r=e.next;e.advance(),t.treatBitsAsBytes?(Hs(e,r,t.backslashEscapes),e.acceptToken(hq)):(Jk(e,r),e.acceptToken(Xk))}else if(i==48&&(e.next==120||e.next==88)||(i==120||i==88)&&e.next==39){let r=e.next==39;for(e.advance();dq(e.next);)e.advance();r&&e.next==39&&e.advance(),e.acceptToken(fg)}else if(i==46&&e.next>=48&&e.next<=57)Zk(e,!0),e.acceptToken(fg);else if(i==46)e.acceptToken(oq);else if(i>=48&&i<=57)Zk(e,!1),e.acceptToken(fg);else if(js(i,t.operatorChars)){for(;js(e.next,t.operatorChars);)e.advance();e.acceptToken(lq)}else if(js(i,t.specialVar))e.next==i&&e.advance(),gq(e),e.acceptToken(uq);else if(js(i,t.identifierQuotes))Hs(e,i,!1),e.acceptToken(cq);else if(i==58||i==44)e.acceptToken(aq);else if(R0(i)){let r=L0(e,String.fromCharCode(i));e.acceptToken(e.next==46||e.peek(-r.length-1)==46?Gk:(n=t.words[r.toLowerCase()])!==null&&n!==void 0?n:Gk)}})}const WD=HD(N0),bq=$d.deserialize({version:14,states:"%vQ]QQOOO#wQRO'#DSO$OQQO'#CwO%eQQO'#CxO%lQQO'#CyO%sQQO'#CzOOQQ'#DS'#DSOOQQ'#C}'#C}O'UQRO'#C{OOQQ'#Cv'#CvOOQQ'#C|'#C|Q]QQOOQOQQOOO'`QQO'#DOO(xQRO,59cO)PQQO,59cO)UQQO'#DSOOQQ,59d,59dO)cQQO,59dOOQQ,59e,59eO)jQQO,59eOOQQ,59f,59fO)qQQO,59fOOQQ-E6{-E6{OOQQ,59b,59bOOQQ-E6z-E6zOOQQ,59j,59jOOQQ-E6|-E6|O+VQRO1G.}O+^QQO,59cOOQQ1G/O1G/OOOQQ1G/P1G/POOQQ1G/Q1G/QP+kQQO'#C}O+rQQO1G.}O)PQQO,59cO,PQQO'#Cw",stateData:",[~OtOSPOSQOS~ORUOSUOTUOUUOVROXSOZTO]XO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O^]ORvXSvXTvXUvXVvXXvXZvX]vX_vX`vXavXbvXcvXdvXevXfvXgvXhvX~OsvX~P!jOa_Ob_Oc_O~ORUOSUOTUOUUOVROXSOZTO^tO_UO`UOa`Ob`Oc`OdUOeUOfUOgUOhUO~OWaO~P$ZOYcO~P$ZO[eO~P$ZORUOSUOTUOUUOVROXSOZTO^QO_UO`UOaPObPOcPOdUOeUOfUOgUOhUO~O]hOsoX~P%zOajObjOcjO~O^]ORkaSkaTkaUkaVkaXkaZka]ka_ka`kaakabkackadkaekafkagkahka~Oska~P'kO^]O~OWvXYvX[vX~P!jOWnO~P$ZOYoO~P$ZO[pO~P$ZO^]ORkiSkiTkiUkiVkiXkiZki]ki_ki`kiakibkickidkiekifkigkihki~Oski~P)xOWkaYka[ka~P'kO]hO~P$ZOWkiYki[ki~P)xOasObsOcsO~O",goto:"#hwPPPPPPPPPPPPPPPPPPPPPPPPPPx||||!Y!^!d!xPPP#[TYOZeUORSTWZbdfqT[OZQZORiZSWOZQbRQdSQfTZgWbdfqQ^PWk^lmrQl_Qm`RrseVORSTWZbdfq",nodeNames:"⚠ LineComment BlockComment String Number Bool Null ( ) { } [ ] ; . Operator Punctuation SpecialVar Identifier QuotedIdentifier Keyword Type Bits Bytes Builtin Script Statement CompositeIdentifier Parens Braces Brackets Statement",maxTerm:38,nodeProps:[["isolate",-4,1,2,3,19,""]],skippedNodes:[0,1,2],repeatNodeCount:3,tokenData:"RORO",tokenizers:[0,WD],topRules:{Script:[0,25]},tokenPrec:0});function B0(t){let e=t.cursor().moveTo(t.from,-1);for(;/Comment/.test(e.name);)e.moveTo(e.from,-1);return e.node}function Gu(t,e){let n=t.sliceString(e.from,e.to),i=/^([`'"])(.*)\1$/.exec(n);return i?i[2]:n}function Hd(t){return t&&(t.name=="Identifier"||t.name=="QuotedIdentifier")}function Sq(t,e){if(e.name=="CompositeIdentifier"){let n=[];for(let i=e.firstChild;i;i=i.nextSibling)Hd(i)&&n.push(Gu(t,i));return n}return[Gu(t,e)]}function tC(t,e){for(let n=[];;){if(!e||e.name!=".")return n;let i=B0(e);if(!Hd(i))return n;n.unshift(Gu(t,i)),e=B0(i)}}function xq(t,e){let n=Nt(t).resolveInner(e,-1),i=Cq(t.doc,n);return n.name=="Identifier"||n.name=="QuotedIdentifier"||n.name=="Keyword"?{from:n.from,quoted:n.name=="QuotedIdentifier"?t.doc.sliceString(n.from,n.from+1):null,parents:tC(t.doc,B0(n)),aliases:i}:n.name=="."?{from:e,quoted:null,parents:tC(t.doc,n),aliases:i}:{from:e,quoted:null,parents:[],empty:!0,aliases:i}}const kq=new Set("where group having order union intersect except all distinct limit offset fetch for".split(" "));function Cq(t,e){let n;for(let r=e;!n;r=r.parent){if(!r)return null;r.name=="Statement"&&(n=r)}let i=null;for(let r=n.firstChild,s=!1,o=null;r;r=r.nextSibling){let l=r.name=="Keyword"?t.sliceString(r.from,r.to).toLowerCase():null,a=null;if(!s)s=l=="from";else if(l=="as"&&o&&Hd(r.nextSibling))a=Gu(t,r.nextSibling);else{if(l&&kq.has(l))break;o&&Hd(r)&&(a=Gu(t,r))}a&&(i||(i=Object.create(null)),i[a]=Sq(t,o)),o=/Identifier$/.test(r.name)?r:null}return i}function _q(t,e){return t?e.map(n=>({...n,label:n.label[0]==t?n.label:t+n.label+t,apply:void 0})):e}const Eq=/^\w*$/,Aq=/^[`'"]?\w*[`'"]?$/;function nC(t){return t.self&&typeof t.self.label=="string"}class ow{constructor(e,n){this.idQuote=e,this.idCaseInsensitive=n,this.list=[],this.children=void 0}child(e){let n=this.children||(this.children=Object.create(null)),i=n[e];return i||(e&&!this.list.some(r=>r.label==e)&&this.list.push(iC(e,"type",this.idQuote,this.idCaseInsensitive)),n[e]=new ow(this.idQuote,this.idCaseInsensitive))}maybeChild(e){return this.children?this.children[e]:null}addCompletion(e){let n=this.list.findIndex(i=>i.label==e.label);n>-1?this.list[n]=e:this.list.push(e)}addCompletions(e){for(let n of e)this.addCompletion(typeof n=="string"?iC(n,"property",this.idQuote,this.idCaseInsensitive):n)}addNamespace(e){Array.isArray(e)?this.addCompletions(e):nC(e)?this.addNamespace(e.children):this.addNamespaceObject(e)}addNamespaceObject(e){for(let n of Object.keys(e)){let i=e[n],r=null,s=n.replace(/\\?\./g,l=>l=="."?"\0":l).split("\0"),o=this;nC(i)&&(r=i.self,i=i.children);for(let l=0;l<s.length;l++)r&&l==s.length-1&&o.addCompletion(r),o=o.child(s[l].replace(/\\\./g,"."));o.addNamespace(i)}}}function iC(t,e,n,i){return new RegExp("^[a-z_][a-z_\\d]*$",i?"i":"").test(t)?{label:t,type:e}:{label:t,type:e,apply:n+t+n}}function Iq(t,e,n,i,r,s){var o;let l=((o=s==null?void 0:s.spec.identifierQuotes)===null||o===void 0?void 0:o[0])||'"',a=new ow(l,!!(s!=null&&s.spec.caseInsensitiveIdentifiers)),u=r?a.child(r):null;return a.addNamespace(t),e&&(u||a).addCompletions(e),n&&a.addCompletions(n),u&&a.addCompletions(u.list),i&&a.addCompletions((u||a).child(i).list),c=>{let{parents:h,from:f,quoted:d,empty:p,aliases:g}=xq(c.state,c.pos);if(p&&!c.explicit)return null;g&&h.length==1&&(h=g[h[0]]||h);let w=a;for(let v of h){for(;!w.children||!w.children[v];)if(w==a&&u)w=u;else if(w==u&&i)w=w.child(i);else return null;let x=w.maybeChild(v);if(!x)return null;w=x}let m=d&&c.state.sliceDoc(c.pos,c.pos+1)==d,y=w.list;return w==a&&g&&(y=y.concat(Object.keys(g).map(v=>({label:v,type:"constant"})))),{from:f,to:m?c.pos+1:void 0,options:_q(d,y),validFor:d?Aq:Eq}}}function Tq(t){return t==VD?"type":t==jD?"keyword":"variable"}function Oq(t,e,n){let i=Object.keys(t).map(r=>n(e?r.toUpperCase():r,Tq(t[r])));return SW(["QuotedIdentifier","String","LineComment","BlockComment","."],AD(i))}let Dq=bq.configure({props:[C2.add({Statement:n9()}),E2.add({Statement(t,e){return{from:Math.min(t.from+100,e.doc.lineAt(t.from).to),to:t.to}},BlockComment(t){return{from:t.from+2,to:t.to-2}}}),b2({Keyword:M.keyword,Type:M.typeName,Builtin:M.standard(M.name),Bits:M.number,Bytes:M.string,Bool:M.bool,Null:M.null,Number:M.number,String:M.string,Identifier:M.name,QuotedIdentifier:M.special(M.string),SpecialVar:M.special(M.name),LineComment:M.lineComment,BlockComment:M.blockComment,Operator:M.operator,"Semi Punctuation":M.punctuation,"( )":M.paren,"{ }":M.brace,"[ ]":M.squareBracket})]});class Wd{constructor(e,n,i){this.dialect=e,this.language=n,this.spec=i}get extension(){return this.language.extension}configureLanguage(e,n){return new Wd(this.dialect,this.language.configure(e,n),this.spec)}static define(e){let n=wq(e,e.keywords,e.types,e.builtin),i=Id.define({name:"sql",parser:Dq.configure({tokenizers:[{from:WD,to:HD(n)}]}),languageData:{commentTokens:{line:"--",block:{open:"/*",close:"*/"}},closeBrackets:{brackets:["(","[","{","'",'"',"`"]}}});return new Wd(n,i,e)}}function Mq(t,e){return{label:t,type:e,boost:-1}}function Rq(t,e=!1,n){return Oq(t.dialect.words,e,n||Mq)}function Lq(t){return t.schema?Iq(t.schema,t.tables,t.schemas,t.defaultTable,t.defaultSchema,t.dialect||lw):()=>null}function Nq(t){return t.schema?(t.dialect||lw).language.data.of({autocomplete:Lq(t)}):[]}function qD(t={}){let e=t.dialect||lw;return new Q$(e.language,[Nq(t),e.language.data.of({autocomplete:Rq(e,t.upperCaseKeywords,t.keywordCompletion)})])}const lw=Wd.define({}),Ea=28;function Bq(t,e,n=200){const i={},r=Math.min(e.length,n);for(const s of t)i[s]="null";for(let s=0;s<r;s++){const o=e[s];for(const l of t){const a=o[l];let u=typeof a;a==null&&(u="null"),a instanceof Date&&(u="date"),u==="number"&&Number.isInteger(a)&&(u="int"),u==="number"&&!Number.isInteger(a)&&(u="float"),i[l]==="null"&&u!=="null"&&(i[l]=u)}}return i}function QD({title:t,columns:e,rows:n,message:i,executionMs:r=null,schemaTables:s,schemaColumns:o,enablePagination:l=!0}){const[a,u]=R.useState("results"),[c,h]=R.useState(!1),[f,d]=R.useState(1),[p,g]=R.useState(100);R.useEffect(()=>{d(1)},[n,p]);const w=Math.max(1,Math.ceil((n.length||1)/p)),m=R.useMemo(()=>{if(!l)return n;const U=(f-1)*p;return n.slice(U,U+p)},[n,f,p,l]),y=R.useMemo(()=>Bq(e,n),[e,n]),v=R.useRef(null),[x,_]=R.useState(0),b=()=>{const U=v.current;U&&_(U.scrollTop)},I=400,D=m.length>Math.floor(I/Ea)+30,F=m.length*Ea,A=D?Math.max(0,Math.floor(x/Ea)-10):0,B=D?Math.min(m.length,A+Math.ceil(I/Ea)+20):m.length,N=D?m.slice(A,B):m,W=D?A*Ea:0,K=async U=>{try{await navigator.clipboard.writeText(U)}catch{}};return T.jsxs("div",{className:"card vstack",style:{gap:8},children:[t&&T.jsx("strong",{children:t}),T.jsxs("div",{className:"tabs hstack",style:{gap:8},children:[T.jsx("button",{className:a==="results"?"tab active":"tab",onClick:()=>u("results"),children:"Results"}),T.jsx("button",{className:a==="schema"?"tab active":"tab",onClick:()=>u("schema"),children:"Schema"}),T.jsx("button",{className:a==="messages"?"tab active":"tab",onClick:()=>u("messages"),children:"Messages"}),T.jsx("div",{className:"hstack",style:{marginLeft:"auto",gap:8},children:a==="results"&&T.jsxs(T.Fragment,{children:[T.jsx("button",{className:"secondary",onClick:()=>h(U=>!U),children:c?"Table":"JSON"}),l&&T.jsxs(T.Fragment,{children:[T.jsx("button",{className:"secondary",onClick:()=>d(U=>Math.max(1,U-1)),disabled:f<=1,children:"Prev"}),T.jsxs("span",{className:"muted",children:["Page ",f," / ",w]}),T.jsx("button",{className:"secondary",onClick:()=>d(U=>Math.min(w,U+1)),disabled:f>=w,children:"Next"}),T.jsx("span",{className:"muted",style:{marginLeft:8},children:"Page size:"}),T.jsxs("select",{className:"secondary",value:p,onChange:U=>g(parseInt(U.target.value,10)),children:[T.jsx("option",{value:50,children:"50"}),T.jsx("option",{value:100,children:"100"}),T.jsx("option",{value:500,children:"500"})]})]})]})})]}),T.jsxs("div",{className:"muted",children:[n.length," rows",r!=null?` • ${Math.round(r)} ms`:""]}),a==="results"&&T.jsx("div",{style:{overflowX:"auto"},children:c?T.jsx("pre",{style:{maxHeight:420,overflow:"auto",margin:0},children:JSON.stringify(m,null,2)}):T.jsx("div",{ref:v,onScroll:b,style:{maxHeight:D?I:void 0,overflow:D?"auto":"visible"},children:D?T.jsx("div",{style:{height:F,position:"relative"},children:T.jsxs("table",{className:"table",style:{position:"absolute",top:W,left:0,right:0},children:[T.jsx("thead",{children:T.jsx("tr",{children:e.map(U=>T.jsxs("th",{title:"Click to copy column name",onClick:()=>K(U),children:[T.jsx("span",{children:U}),T.jsx("span",{className:"badge",style:{marginLeft:6},children:y[U]})]},U))})}),T.jsx("tbody",{children:N.map((U,Z)=>T.jsx("tr",{children:e.map(re=>T.jsx("td",{title:"Click to copy",onClick:()=>K(String(U[re])),children:String(U[re])},re))},Z+A))})]})}):T.jsxs("table",{className:"table",children:[T.jsx("thead",{children:T.jsx("tr",{children:e.map(U=>T.jsxs("th",{title:"Click to copy column name",onClick:()=>K(U),children:[T.jsx("span",{children:U}),T.jsx("span",{className:"badge",style:{marginLeft:6},children:y[U]})]},U))})}),T.jsx("tbody",{children:m.map((U,Z)=>T.jsx("tr",{children:e.map(re=>T.jsx("td",{title:"Click to copy",onClick:()=>K(String(U[re])),children:String(U[re])},re))},Z))})]})})}),a==="schema"&&T.jsx("div",{style:{maxHeight:420,overflow:"auto"},children:s.length===0?T.jsx("div",{className:"muted",children:"No tables found"}):s.map(U=>T.jsxs("div",{className:"vstack",style:{marginBottom:8},children:[T.jsx("strong",{children:U}),T.jsx("div",{className:"hstack wrap",style:{gap:6},children:(o[U]||[]).map(Z=>T.jsx("span",{className:"badge",title:"Click to copy",onClick:()=>K(Z),children:Z},Z))})]},U))}),a==="messages"&&T.jsx("div",{className:"muted",style:{whiteSpace:"pre-wrap"},children:i||"No messages"})]})}function Pq(t){const{sql:e,onChange:n,onRun:i,message:r,columns:s,rows:o,execMs:l,schemaTables:a,schemaColumns:u,sqlCompletion:c,sqlHover:h}=t;return T.jsxs(T.Fragment,{children:[T.jsx(sw,{value:e,height:"220px",extensions:[qD(),iw({override:[c]}),h],onChange:n,basicSetup:{lineNumbers:!0},theme:"dark",onKeyDown:f=>{(f.metaKey||f.ctrlKey)&&f.key==="Enter"&&(f.preventDefault(),i())}}),T.jsx("div",{className:"muted",children:r}),T.jsx(QD,{title:"Output",columns:s,rows:o,message:r,executionMs:l,schemaTables:a,schemaColumns:u,enablePagination:!0})]})}function Fq(t){const{index:e,cell:n,schemaTables:i,schemaColumns:r,sqlCompletion:s,sqlHover:o,onFocus:l,onChange:a,onRun:u,onAddBelow:c,onMove:h,onDelete:f,disableMoveUp:d,disableMoveDown:p,ready:g}=t;return T.jsxs("div",{className:"card vstack",style:{gap:8},children:[T.jsxs("div",{className:"hstack",style:{justifyContent:"space-between"},children:[T.jsxs("strong",{children:["Cell ",e+1," ",n.running&&T.jsx("span",{className:"spinner",style:{marginLeft:8}})]}),T.jsxs("div",{className:"hstack",style:{gap:6},children:[T.jsx("button",{className:"icon-btn","aria-label":"Run cell",title:"Run cell (Cmd/Ctrl+Enter)",onClick:()=>u(n.id),disabled:!g||n.running,children:T.jsx("span",{className:"material-symbols-outlined",children:"play_arrow"})}),T.jsx("button",{className:"icon-btn","aria-label":"Add cell below",title:"Add cell below",onClick:()=>c(n.id),children:T.jsx("span",{className:"material-symbols-outlined",children:"add"})}),T.jsx("button",{className:"icon-btn","aria-label":"Move up",title:"Move up",onClick:()=>h(n.id,-1),disabled:d,children:T.jsx("span",{className:"material-symbols-outlined",children:"arrow_upward"})}),T.jsx("button",{className:"icon-btn","aria-label":"Move down",title:"Move down",onClick:()=>h(n.id,1),disabled:p,children:T.jsx("span",{className:"material-symbols-outlined",children:"arrow_downward"})}),T.jsx("button",{className:"icon-btn","aria-label":"Delete cell",title:"Delete cell",onClick:()=>f(n.id),children:T.jsx("span",{className:"material-symbols-outlined",children:"delete"})})]})]}),T.jsx("div",{onKeyDown:w=>{(w.metaKey||w.ctrlKey)&&w.key==="Enter"&&(w.preventDefault(),u(n.id))},children:T.jsx(sw,{value:n.sql,height:"180px",extensions:[qD(),iw({override:[s]}),o],onFocus:()=>l(n.id),onChange:w=>a(n.id,w),basicSetup:{lineNumbers:!0},theme:"dark"})}),T.jsx(QD,{title:`Cell ${e+1}`,columns:n.columns,rows:n.rows,message:n.message,executionMs:n.execMs??null,schemaTables:i,schemaColumns:r,enablePagination:!1})]})}function zq(t){const{title:e,running:n,ready:i,notebookMode:r,setNotebookMode:s,snippetsOpen:o,setSnippetsOpen:l,snippet:a,applySnippet:u,datasetsOpen:c,setDatasetsOpen:h,dataset:f,loadDataset:d,menuOpen:p,setMenuOpen:g,installHttpfs:w,loadSampleAction:m,parquetDemo:y,resetDb:v,runQualityReport:x,canDownload:_,onShare:b,onSaveGist:I,onCopySQL:D,onDownloadCSV:F,onRun:A,onAddCell:B,onRunAll:N,snippetsRef:W,datasetsRef:K,menuRef:U}=t;return T.jsx("div",{className:"card vstack",style:{gap:8},children:T.jsxs("div",{className:"hstack toolbar",style:{justifyContent:"space-between"},children:[T.jsxs("strong",{children:[e," ",n&&T.jsx("span",{className:"spinner",style:{marginLeft:8}})]}),T.jsxs("div",{className:"hstack",style:{gap:8},children:[T.jsxs("div",{className:"dropdown",ref:W,children:[T.jsx("button",{className:"icon-btn","aria-label":"Snippets",title:"Snippets",onClick:()=>l(Z=>!Z),disabled:!i,children:T.jsx("span",{className:"material-symbols-outlined",children:"code"})}),o&&T.jsxs("div",{className:"menu",onMouseLeave:()=>l(()=>!1),children:[T.jsxs("button",{onClick:()=>{l(()=>!1),u("load_sample")},children:[a==="load_sample"&&T.jsx("span",{className:"material-symbols-outlined",style:{marginRight:8},children:"check"})," Load Sample"]}),T.jsxs("button",{onClick:()=>{l(()=>!1),u("quality_report")},children:[a==="quality_report"&&T.jsx("span",{className:"material-symbols-outlined",style:{marginRight:8},children:"check"})," Quality Report"]}),T.jsxs("button",{onClick:()=>{l(()=>!1),u("parquet_demo")},children:[a==="parquet_demo"&&T.jsx("span",{className:"material-symbols-outlined",style:{marginRight:8},children:"check"})," Parquet Demo"]}),T.jsxs("button",{onClick:()=>{l(()=>!1),u("aggregation")},children:[a==="aggregation"&&T.jsx("span",{className:"material-symbols-outlined",style:{marginRight:8},children:"check"})," Aggregation by city"]}),T.jsxs("button",{onClick:()=>{l(()=>!1),u("join_example")},children:[a==="join_example"&&T.jsx("span",{className:"material-symbols-outlined",style:{marginRight:8},children:"check"})," Join example"]})]})]}),T.jsxs("div",{className:"dropdown",ref:K,children:[T.jsx("button",{className:"icon-btn","aria-label":"Datasets",title:"Datasets",onClick:()=>h(Z=>!Z),disabled:!i,children:T.jsx("span",{className:"material-symbols-outlined",children:"dataset"})}),c&&T.jsxs("div",{className:"menu",onMouseLeave:()=>h(()=>!1),children:[T.jsxs("button",{onClick:()=>{h(()=>!1),d("people_local")},children:[f==="people_local"&&T.jsx("span",{className:"material-symbols-outlined",style:{marginRight:8},children:"check"})," People (local CSV)"]}),T.jsxs("button",{onClick:()=>{h(()=>!1),d("tips_remote")},children:[f==="tips_remote"&&T.jsx("span",{className:"material-symbols-outlined",style:{marginRight:8},children:"check"})," Tips (remote CSV)"]}),T.jsxs("button",{onClick:()=>{h(()=>!1),d("tpch_lineitem")},children:[f==="tpch_lineitem"&&T.jsx("span",{className:"material-symbols-outlined",style:{marginRight:8},children:"check"})," TPCH Lineitem (Parquet)"]})]})]}),T.jsxs("div",{className:"dropdown",ref:U,children:[T.jsx("button",{className:"icon-btn","aria-label":"More actions",title:"More actions",onClick:()=>g(Z=>!Z),children:T.jsx("span",{className:"material-symbols-outlined",children:"more_vert"})}),p&&T.jsxs("div",{className:"menu",onMouseLeave:()=>g(()=>!1),children:[T.jsxs("button",{onClick:w,children:[T.jsx("span",{className:"material-symbols-outlined",style:{marginRight:8},children:"cloud_download"})," Install httpfs"]}),T.jsxs("button",{onClick:m,children:[T.jsx("span",{className:"material-symbols-outlined",style:{marginRight:8},children:"download"})," Load Sample"]}),T.jsxs("button",{onClick:y,children:[T.jsx("span",{className:"material-symbols-outlined",style:{marginRight:8},children:"table"})," Parquet demo"]}),T.jsxs("button",{onClick:v,children:[T.jsx("span",{className:"material-symbols-outlined",style:{marginRight:8},children:"restart_alt"})," Reset"]}),T.jsxs("button",{onClick:x,children:[T.jsx("span",{className:"material-symbols-outlined",style:{marginRight:8},children:"fact_check"})," Quality Report"]})]})]}),!r&&T.jsxs(T.Fragment,{children:[T.jsx("button",{className:"icon-btn","aria-label":"Share link",title:"Share link",onClick:b,disabled:!i,children:T.jsx("span",{className:"material-symbols-outlined",children:"link"})}),T.jsx("button",{className:"icon-btn","aria-label":"Save as Gist",title:"Save as Gist",onClick:I,disabled:!i,children:T.jsx("span",{className:"material-symbols-outlined",children:"save"})}),T.jsx("button",{className:"icon-btn","aria-label":"Copy SQL",title:"Copy SQL",onClick:D,disabled:!i,children:T.jsx("span",{className:"material-symbols-outlined",children:"content_copy"})}),T.jsx("button",{className:"icon-btn","aria-label":"Download CSV",title:"Download CSV",onClick:F,disabled:!i||!_,children:T.jsx("span",{className:"material-symbols-outlined",children:"download"})}),T.jsx("button",{className:"icon-btn","aria-label":"Run",title:"Run (Cmd/Ctrl+Enter)",onClick:A,disabled:!i||n,children:T.jsx("span",{className:"material-symbols-outlined",children:"play_arrow"})})]}),r&&T.jsxs(T.Fragment,{children:[T.jsx("button",{className:"icon-btn","aria-label":"Add cell",title:"Add cell",onClick:B,children:T.jsx("span",{className:"material-symbols-outlined",children:"add"})}),T.jsx("button",{className:"icon-btn","aria-label":"Run all",title:"Run all",onClick:N,disabled:!i,children:T.jsx("span",{className:"material-symbols-outlined",children:"play_arrow"})})]}),T.jsx("button",{className:"icon-btn","aria-label":"Toggle mode",title:r?"Switch to Single Editor":"Switch to Notebook",onClick:()=>s(Z=>!Z),children:T.jsx("span",{className:"material-symbols-outlined",children:"swap_horiz"})})]})]})})}function Uq(t){const[e,n]=R.useState([]),[i,r]=R.useState({}),s=R.useCallback(async()=>{try{const l=await(await Xr()).connect(),a=await l.query(`
        SELECT table_name AS name
        FROM information_schema.tables
        WHERE table_schema NOT IN ('information_schema')
        ORDER BY name;
      `),u=[];for(const f of a)u.push(String(f.get(0)));const c=await l.query(`
        SELECT table_name, column_name
        FROM information_schema.columns
        WHERE table_schema NOT IN ('information_schema')
        ORDER BY table_name, ordinal_position;
      `),h={};for(const f of c){const d=String(f.get(0)),p=String(f.get(1));(h[d]||(h[d]=[])).push(p)}await l.close(),n(u),r(h)}catch{}},[]);return R.useEffect(()=>{t&&s().catch(()=>{})},[t,s]),{schemaTables:e,schemaColumns:i,refreshSchema:s}}async function jq(t){await t.query("INSTALL httpfs; LOAD httpfs;");const e=`${location.origin}/data/people.csv`;await t.query(`CREATE OR REPLACE TABLE people AS SELECT * FROM read_csv('${e}', AUTO_DETECT=TRUE, SAMPLE_SIZE=-1);`)}function Vq(t,e){return{run:R.useCallback(async i=>{const s=await(await Xr()).connect(),o=performance.now(),l=e(i.trim());try{if(/^LOAD SAMPLE;?/im.test(l)){await jq(s);const f=performance.now();return{columns:[],rows:[],execMs:f-o,message:"Sample loaded as table people"}}const a=await s.query(l),u=a.schema.fields.map(f=>f.name),c=[];for(const f of a){const d={};u.forEach((p,g)=>d[p]=f.get(g)),c.push(d)}const h=performance.now();return{columns:u,rows:c,execMs:h-o,message:`Returned ${c.length} rows`}}finally{try{await s.close()}catch{}try{await t()}catch{}}},[t,e])}}function $q(){const[t,e]=R.useState(!1),[n,i]=R.useState(!1),[r,s]=R.useState(!0),o=`-- Welcome! Try these:
-- 1) Load the sample CSV
LOAD SAMPLE;
-- 2) Query it
SELECT * FROM people LIMIT 5;
-- 3) Simple aggregation
SELECT city, COUNT(*) AS n FROM people GROUP BY city ORDER BY n DESC;`,[l,a]=R.useState(o),[u,c]=R.useState([]),[h,f]=R.useState([]),[d,p]=R.useState(""),[g,w]=R.useState(null),m=R.useRef(!1),[y,v]=R.useState(""),[x,_]=R.useState(""),b=R.useRef(null),[I,D]=R.useState({}),[F,A]=R.useState(!1),[B,N]=R.useState(!1),[W,K]=R.useState(""),U=R.useRef(null),Z=R.useRef(null),re=R.useRef(null),[j,q]=R.useState(!1),[S,te]=R.useState(!1),{schemaTables:se,schemaColumns:C,refreshSchema:Ne}=Uq(t),[Pe,ve]=R.useState([{id:sa(),sql:o,columns:[],rows:[],message:"",running:!1}]),[Xe,Mn]=R.useState(()=>{var E;return((E=Pe[0])==null?void 0:E.id)??null});R.useEffect(()=>{(async()=>(await Xr(),e(!0)))()},[]);const{run:fr}=Vq(Ne,E=>kc(E)),Ur=["SELECT","FROM","WHERE","GROUP","BY","ORDER","LIMIT","JOIN","LEFT","RIGHT","FULL","OUTER","INNER","ON","USING","UNION","ALL","AS","INSERT","INTO","VALUES","CREATE","TABLE","VIEW","OR","REPLACE","DROP","IF","EXISTS","UPDATE","SET","DELETE","DISTINCT","HAVING","CASE","WHEN","THEN","ELSE","END","AND","OR","NOT","NULL","IS","LIKE","IN","BETWEEN"],jr=/[A-Za-z_][A-Za-z0-9_]*/;function Np(E){const O={},L=/(from|join)\s+([A-Za-z_][A-Za-z0-9_]*)(?:\s+(?:as\s+)?([A-Za-z_][A-Za-z0-9_]*))?/gi;let V;for(;(V=L.exec(E))!=null;){const ye=V[2],Oe=V[3];Oe&&(O[Oe]=ye)}return O}const bc=E=>{const{state:O}=E,L=E.pos,V=O.doc.lineAt(L),ye=O.sliceDoc(V.from,L);O.sliceDoc(L,V.to);const Oe=ye.match(/([A-Za-z_][A-Za-z0-9_]*)\.$/),je=E.matchBefore(jr);if(!je&&!Oe&&!E.explicit)return null;const Ct=Math.max(0,L-200),Rn=O.sliceDoc(Ct,L).toUpperCase(),mt=/(FROM|JOIN)\s+[A-Z_]*$/.test(Rn),Mi=Ur.map(Ln=>({label:Ln,type:"keyword",boost:20})),dn=se.map(Ln=>({label:Ln,type:"variable",info:"table",boost:50})),Vr=Object.entries(C).flatMap(([Ln,Pp])=>Pp.map(aa=>({label:aa,type:"property",info:`column of ${Ln}`,boost:40})));if(Oe){const Ln=Oe[1],Pp=Np(O.sliceDoc(0,O.doc.length)),aa=se.includes(Ln)?Ln:Pp[Ln],KD=(aa?C[aa]||[]:[]).map(YD=>({label:YD,type:"property",info:`column of ${aa||"table"}`}));return{from:L,options:KD,validFor:jr}}const _o=je?je.from:E.pos,Eo=je?je.text:"";let Ri;return mt?Ri=dn:Ri=[...Vr,...dn,...Mi],Ri=Ri.filter(Ln=>!Eo||Ln.label.toLowerCase().startsWith(Eo.toLowerCase())),{from:_o,options:Ri,validFor:jr}},Sc=c2((E,O)=>{const{state:L}=E,V=L.doc.lineAt(O),ye=O-V.from,Oe=V.text,je=Oe.slice(0,ye),Ct=Oe.slice(ye),Rn=je.search(/[A-Za-z_][A-Za-z0-9_]*$/),mt=Ct.match(/^[A-Za-z_][A-Za-z0-9_]*/);if(Rn<0||!mt)return null;const Mi=V.from+Rn,dn=O+mt[0].length,Vr=(je.slice(Rn)+mt[0]).trim();if(!Vr)return null;let _o="";if(se.includes(Vr)){const Ri=C[Vr]||[];_o=`table ${Vr} (
  ${Ri.join(", ")}
)`}else{const Ri=Object.entries(C).find(([,Ln])=>Ln.includes(Vr));Ri&&(_o=`column ${Vr} of ${Ri[0]}`)}if(!_o)return null;const Eo=document.createElement("div");return Eo.style.whiteSpace="pre",Eo.textContent=_o,{pos:Mi,end:dn,create:()=>({dom:Eo})}});R.useEffect(()=>{Zc("playground_sql",l).catch(()=>{});const E=b.current;E&&(E.style.height="auto",E.style.height=Math.min(600,Math.max(120,E.scrollHeight))+"px")},[l]),R.useEffect(()=>{(async()=>{var E;try{const O=await Jc("notebook_mode");O!=null&&s(O==="1")}catch{}try{if(!/^#sql=/.test(location.hash||"")){const L=await Jc("playground_sql");L&&a(L)}}catch{}try{const O=await Jc("notebook_cells");O&&Array.isArray(O)&&O.length&&(ve(O),Mn(((E=O[0])==null?void 0:E.id)??null))}catch{}try{const O=await Jc("vars");O&&typeof O=="object"&&D(O)}catch{}})();try{const O=(location.hash||"").match(/^#sql=(.+)$/);if(O&&O[1]){const L=Kq(decodeURIComponent(O[1]));L&&a(L)}}catch{}},[]),R.useEffect(()=>{Zc("notebook_mode",r?"1":"0").catch(()=>{})},[r]),R.useEffect(()=>{Zc("notebook_cells",Pe).catch(()=>{})},[Pe]),R.useEffect(()=>{Zc("vars",I).catch(()=>{})},[I]),R.useEffect(()=>{const E=O=>{const L=O.target,V=(ye,Oe,je)=>{if(!ye)return;const Ct=Oe.current;Ct&&L&&!Ct.contains(L)&&je()};V(B,U,()=>N(!1)),V(j,Z,()=>q(!1)),V(S,re,()=>te(!1))};return window.addEventListener("mousedown",E),()=>window.removeEventListener("mousedown",E)},[B,j,S]);const xc=E=>{K(E),window.setTimeout(()=>K(""),2e3)},kc=E=>E.replace(/\{\{\s*([a-zA-Z_][a-zA-Z0-9_]*)\s*\}\}/g,(O,L)=>Cc(I[L])),Cc=E=>{if(E==null)return"NULL";const O=String(E);return/^null$/i.test(O)?"NULL":/^-?\d+(?:\.\d+)?$/.test(O)?O:`'${O.replace(/'/g,"''")}'`},ra=async()=>{if(!m.current){m.current=!0,p("Running..."),i(!0),w(null);try{const E=await fr(l);f(E.columns),c(E.rows),w(E.execMs),p(E.message)}catch(E){p(String((E==null?void 0:E.message)||E))}finally{m.current=!1,i(!1)}}},_c=async E=>{v(E);const O=qq[E];if(O)if(r){if(!Xe)return;ve(L=>L.map(V=>V.id===Xe?{...V,sql:O}:V))}else a(O)},Ec=async E=>{_(E);try{const L=await(await Xr()).connect();E==="people_local"?(await rC(L),p("Loaded dataset: people (local CSV)")):E==="tips_remote"?(await L.query("INSTALL httpfs; LOAD httpfs;"),await L.query("CREATE OR REPLACE TABLE tips AS SELECT * FROM read_csv('https://raw.githubusercontent.com/mwaskom/seaborn-data/master/tips.csv', AUTO_DETECT=TRUE, SAMPLE_SIZE=-1);"),p("Loaded dataset: tips (remote CSV)")):E==="tpch_lineitem"&&(await L.query("INSTALL httpfs; LOAD httpfs;"),await L.query("CREATE OR REPLACE VIEW lineitem AS SELECT * FROM parquet_scan('https://duckdb.org/data/tpch/lineitem.parquet');"),p("Loaded dataset: lineitem (remote Parquet view)")),await L.close(),await Ne()}catch(O){p(String((O==null?void 0:O.message)||O))}};function sa(){return Math.random().toString(36).slice(2)}const Ac=E=>{const O=E?Pe.findIndex(V=>V.id===E):Pe.length-1,L={id:sa(),sql:"-- New cell",columns:[],rows:[],message:"",running:!1};ve(V=>{const ye=[...V];return ye.splice(Math.max(0,O+1),0,L),ye}),Mn(L.id)},Bp=E=>{ve(O=>{var V;const L=O.filter(ye=>ye.id!==E);return Xe===E&&Mn(((V=L[L.length-1])==null?void 0:V.id)??null),L.length?L:[{id:sa(),sql:"-- New cell",columns:[],rows:[],message:"",running:!1}]})},oa=(E,O)=>{ve(L=>{const V=L.findIndex(Ct=>Ct.id===E);if(V<0)return L;const ye=V+O;if(ye<0||ye>=L.length)return L;const Oe=[...L],[je]=Oe.splice(V,1);return Oe.splice(ye,0,je),xc(O===-1?"Moved cell up":"Moved cell down"),Oe})},la=async E=>{ve(O=>O.map(L=>L.id===E?{...L,running:!0,message:"Running..."}:L));try{const O=Pe.find(V=>V.id===E),L=await fr((O==null?void 0:O.sql)||"");ve(V=>V.map(ye=>ye.id===E?{...ye,columns:L.columns,rows:L.rows,message:L.message,execMs:L.execMs}:ye))}catch(O){ve(L=>L.map(V=>V.id===E?{...V,message:String((O==null?void 0:O.message)||O)}:V))}finally{ve(O=>O.map(L=>L.id===E?{...L,running:!1}:L))}},P=async()=>{for(const E of Pe)await la(E.id)};return R.useEffect(()=>{const E=O=>{if(!(!r||!Xe)&&O.altKey&&(O.key==="ArrowUp"||O.key==="ArrowDown")){O.preventDefault();const L=Pe.findIndex(V=>V.id===Xe);if(L<0)return;O.key==="ArrowUp"&&L>0&&oa(Xe,-1),O.key==="ArrowDown"&&L<Pe.length-1&&oa(Xe,1)}};return window.addEventListener("keydown",E),()=>window.removeEventListener("keydown",E)},[r,Xe,Pe]),T.jsxs("div",{className:"vstack",style:{gap:16},children:[T.jsx(zq,{title:"DuckDB WASM Playground",running:n,ready:t,notebookMode:r,setNotebookMode:s,snippetsOpen:j,setSnippetsOpen:q,snippet:y,applySnippet:E=>{v(E),_c(E)},datasetsOpen:S,setDatasetsOpen:te,dataset:x,loadDataset:E=>{_(E),Ec(E)},menuOpen:B,setMenuOpen:N,installHttpfs:async()=>{try{const O=await(await Xr()).connect();await O.query("INSTALL httpfs; LOAD httpfs;"),await O.close(),p("httpfs installed and loaded")}catch(E){p(String((E==null?void 0:E.message)||E))}},loadSampleAction:async()=>{try{const O=await(await Xr()).connect();await rC(O),await O.close(),p("Sample loaded as table people"),await Ne()}catch(E){p(String((E==null?void 0:E.message)||E))}},parquetDemo:async()=>{try{const O=await(await Xr()).connect();await O.query("INSTALL httpfs; LOAD httpfs;");const V=await O.query("SELECT * FROM parquet_scan('https://duckdb.org/data/tpch/lineitem.parquet') LIMIT 5;"),ye=V.schema.fields.map(je=>je.name),Oe=[];for(const je of V){const Ct={};ye.forEach((Rn,mt)=>Ct[Rn]=je.get(mt)),Oe.push(Ct)}f(ye),c(Oe),p("Parquet demo: lineitem.parquet (5 rows)"),await O.close()}catch(E){p(String((E==null?void 0:E.message)||E))}},resetDb:async()=>{try{const O=await(await Xr()).connect();try{await O.query("DROP VIEW IF EXISTS adults;")}catch{}try{await O.query("DROP VIEW IF EXISTS lineitem;")}catch{}try{await O.query("DROP TABLE IF EXISTS tips;")}catch{}try{await O.query("DROP TABLE IF EXISTS people;")}catch{}await O.close(),c([]),f([]),p("Database reset (dropped people/adults/tips/lineitem)"),await Ne()}catch(E){p(String((E==null?void 0:E.message)||E))}},runQualityReport:()=>{const E=Wq();if(r){if(!Xe)return;ve(O=>O.map(L=>L.id===Xe?{...L,sql:E}:L)),setTimeout(()=>Xe&&la(Xe),0)}else a(E),setTimeout(ra,0)},canDownload:u.length>0,onShare:async()=>{try{const E=encodeURIComponent(Qq(l)),O=`${location.origin}${location.pathname}#sql=${E}`;navigator.clipboard.writeText(O),p("Share link copied to clipboard")}catch{p("Failed to create share link")}},onSaveGist:async()=>{try{const E=prompt("Enter GitHub Personal Access Token (scope: gist)");if(!E){p("Gist cancelled");return}const O={description:"DuckDB Playground SQL",public:!0,files:{"duckdb-playground.sql":{content:l},"README.txt":{content:"SQL saved from DuckDB WASM Playground"}}},L=await fetch("https://api.github.com/gists",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${E}`,Accept:"application/vnd.github+json"},body:JSON.stringify(O)});if(!L.ok)throw new Error(`GitHub API error: ${L.status}`);const V=await L.json(),ye=V==null?void 0:V.html_url;ye?(await navigator.clipboard.writeText(ye),p("Gist created and URL copied")):p("Gist created but URL missing")}catch(E){p(String((E==null?void 0:E.message)||E))}},onCopySQL:async()=>{try{await navigator.clipboard.writeText(l),p("SQL copied to clipboard")}catch{p("Copy failed; select and copy manually")}},onDownloadCSV:()=>{try{if(!u.length){p("No results to download");return}const E=Hq(h,u),O=new Blob([E],{type:"text/csv;charset=utf-8;"}),L=URL.createObjectURL(O),V=document.createElement("a");V.href=L,V.download="duckdb_results.csv",V.click(),URL.revokeObjectURL(L),p("Downloaded results as CSV")}catch(E){p(String((E==null?void 0:E.message)||E))}},onRun:ra,onAddCell:()=>Ac(),onRunAll:P,snippetsRef:Z,datasetsRef:re,menuRef:U}),T.jsx("div",{className:"hstack",style:{gap:8},children:T.jsx("button",{className:"secondary",onClick:()=>A(E=>!E),children:F?"Hide Vars":"Show Vars"})}),F&&T.jsxs("div",{className:"card vstack",style:{gap:6,padding:8},children:[T.jsx("strong",{children:"Variables"}),T.jsxs("div",{className:"vstack",style:{gap:6},children:[Object.entries(I).map(([E,O])=>T.jsxs("div",{className:"hstack",style:{gap:6},children:[T.jsx("input",{className:"input",style:{width:180},value:E,onChange:L=>{const V=L.target.value.trim();D(ye=>{const Oe={};return Object.entries(ye).forEach(([je,Ct])=>{Oe[je===E?V:je]=Ct}),Oe})}}),T.jsx("input",{className:"input",placeholder:"value",value:O,onChange:L=>D(V=>({...V,[E]:L.target.value}))}),T.jsx("button",{className:"secondary",onClick:()=>{D(L=>{const V={...L};return delete V[E],V})},children:"Remove"})]},E)),T.jsx("div",{children:T.jsx("button",{className:"secondary",onClick:()=>{const E="var";let O=Object.keys(I).length+1,L=`${E}${O}`;for(;I[L]!==void 0;)O++,L=`${E}${O}`;D(V=>({...V,[L]:""}))},children:"Add Var"})}),T.jsxs("div",{className:"muted",children:["Use variables in SQL as ","{{var}}",". Strings are auto-quoted."]})]})]}),!r&&T.jsx(Pq,{sql:l,onChange:E=>a(E),onRun:ra,message:d,columns:h,rows:u,execMs:g,schemaTables:se,schemaColumns:C,sqlCompletion:bc,sqlHover:Sc}),r&&T.jsx("div",{className:"vstack",style:{gap:12},children:Pe.map((E,O)=>T.jsx(Fq,{index:O,cell:E,schemaTables:se,schemaColumns:C,sqlCompletion:bc,sqlHover:Sc,onFocus:L=>Mn(L),onChange:(L,V)=>ve(ye=>ye.map(Oe=>Oe.id===L?{...Oe,sql:V}:Oe)),onRun:L=>la(L),onAddBelow:L=>Ac(L),onMove:(L,V)=>oa(L,V),onDelete:L=>Bp(L),disableMoveUp:O===0,disableMoveDown:O===Pe.length-1,ready:t},E.id))}),W&&T.jsx("div",{className:"toast",children:W})]})}async function rC(t){await t.query("INSTALL httpfs; LOAD httpfs;");const e=`${location.origin}/data/people.csv`;await t.query(`CREATE OR REPLACE TABLE people AS SELECT * FROM read_csv('${e}', AUTO_DETECT=TRUE, SAMPLE_SIZE=-1);`)}function Hq(t,e){const n=r=>{const s=r==null?"":String(r),o=/[",\n]/.test(s),l=s.replace(/"/g,'""');return o?`"${l}"`:l},i=[t.join(",")];for(const r of e)i.push(t.map(s=>n(r[s])).join(","));return i.join(`
`)}function Wq(){return`-- Data quality report for table 'people'
SELECT 'row_count' AS check, COUNT(*)::BIGINT AS n FROM people
UNION ALL
SELECT 'age_missing', COUNT(*) FROM people WHERE age IS NULL
UNION ALL
SELECT 'age_negative', COUNT(*) FROM people WHERE age < 0
UNION ALL
SELECT 'city_missing', COUNT(*) FROM people WHERE city IS NULL;`}const qq={load_sample:`LOAD SAMPLE;
SELECT * FROM people LIMIT 5;`,quality_report:`-- Data quality report for table 'people'
SELECT 'row_count' AS check, COUNT(*)::BIGINT AS n FROM people
UNION ALL
SELECT 'age_missing', COUNT(*) FROM people WHERE age IS NULL
UNION ALL
SELECT 'age_negative', COUNT(*) FROM people WHERE age < 0
UNION ALL
SELECT 'city_missing', COUNT(*) FROM people WHERE city IS NULL;`,parquet_demo:`INSTALL httpfs; LOAD httpfs;
SELECT * FROM parquet_scan('https://duckdb.org/data/tpch/lineitem.parquet') LIMIT 5;`,aggregation:"SELECT city, COUNT(*) AS n FROM people GROUP BY city ORDER BY n DESC;",join_example:`-- Example join between people and tips (ensure both are loaded)
SELECT p.name, t.total_bill, t.tip
FROM people p
JOIN tips t ON p.city = 'New York'
LIMIT 10;`};function Qq(t){try{return btoa(unescape(encodeURIComponent(t)))}catch{return btoa(t)}}function Kq(t){try{return decodeURIComponent(escape(atob(t)))}catch{return atob(t)}}function Yq(){return T.jsxs("div",{className:"app",children:[T.jsxs("aside",{className:"sidebar",children:[T.jsx("h1",{className:"brand",children:"DuckDB for Beginners"}),T.jsx("nav",{children:T.jsxs("ul",{children:[T.jsx("li",{children:T.jsx(kb,{to:"/",end:!0,className:({isActive:t})=>t?"active":"",children:"📘 Book"})}),T.jsx("li",{children:T.jsx(kb,{to:"/playground",className:({isActive:t})=>t?"active":"",children:"🧪 Playground"})}),T.jsx("li",{className:"spacer"}),T.jsx("li",{children:T.jsx("a",{href:"https://duckdb.org/",target:"_blank",rel:"noreferrer",children:"DuckDB Docs ↗"})})]})})]}),T.jsx("main",{className:"content",children:T.jsxs(dN,{children:[T.jsx(Bh,{path:"/",element:T.jsx(yU,{})}),T.jsx(Bh,{path:"/playground",element:T.jsx($q,{})}),T.jsx(Bh,{path:"*",element:T.jsxs("div",{children:["Not Found. Go ",T.jsx(DE,{to:"/",children:"home"}),"."]})})]})})]})}pg.createRoot(document.getElementById("root")).render(T.jsx(mC.StrictMode,{children:T.jsx(SN,{children:T.jsx(Yq,{})})}));
